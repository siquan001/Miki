const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DZSbPZXO.js","./index-lnXAYWKB.js","./index-CHIUQYfg.js","./index-BYeN6ag-.js","./index-DWLIyLd3.js","./index-C86zjrtT.js","./dockerfile-BKs6k2Af.js","./simple-mode-GW_nhZxv.js","./factor-kuTfRLto.js","./nsis-LdVXkNf5.js","./pug-DeIclll2.js","./javascript-iXu5QeM3.js","./index-DZFSNlzo.js","./index-qxWy-VKT.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function q7(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const un={},Uh=[],Xo=()=>{},OD=()=>!1,Hy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),W7=t=>t.startsWith("onUpdate:"),gr=Object.assign,j7=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},aq=Object.prototype.hasOwnProperty,mn=(t,e)=>aq.call(t,e),Mt=Array.isArray,Gh=t=>Vy(t)==="[object Map]",MD=t=>Vy(t)==="[object Set]",Pt=t=>typeof t=="function",Jn=t=>typeof t=="string",gl=t=>typeof t=="symbol",Pn=t=>t!==null&&typeof t=="object",TD=t=>(Pn(t)||Pt(t))&&Pt(t.then)&&Pt(t.catch),AD=Object.prototype.toString,Vy=t=>AD.call(t),lq=t=>Vy(t).slice(8,-1),_D=t=>Vy(t)==="[object Object]",qy=t=>Jn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,P0=q7(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wy=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},cq=/-\w/g,gs=Wy(t=>t.replace(cq,e=>e.slice(1).toUpperCase())),uq=/\B([A-Z])/g,vl=Wy(t=>t.replace(uq,"-$1").toLowerCase()),jy=Wy(t=>t.charAt(0).toUpperCase()+t.slice(1)),sg=Wy(t=>t?`on${jy(t)}`:""),Di=(t,e)=>!Object.is(t,e),og=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},DD=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Y7=t=>{const e=parseFloat(t);return isNaN(e)?t:e},hq=t=>{const e=Jn(t)?Number(t):NaN;return isNaN(e)?t:e};let w9;const Yy=()=>w9||(w9=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fr(t){if(Mt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Jn(r)?mq(r):fr(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Jn(t)||Pn(t))return t}const fq=/;(?![^(]*\))/g,dq=/:([^]+)/,pq=/\/\*[^]*?\*\//g;function mq(t){const e={};return t.replace(pq,"").split(fq).forEach(n=>{if(n){const r=n.split(dq);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Lt(t){let e="";if(Jn(t))e=t;else if(Mt(t))for(let n=0;n<t.length;n++){const r=Lt(t[n]);r&&(e+=r+" ")}else if(Pn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function N0(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Jn(e)&&(t.class=Lt(e)),n&&(t.style=fr(n)),t}const gq="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vq=q7(gq);function ED(t){return!!t||t===""}const ID=t=>!!(t&&t.__v_isRef===!0),Et=t=>Jn(t)?t:t==null?"":Mt(t)||Pn(t)&&(t.toString===AD||!Pt(t.toString))?ID(t)?Et(t.value):JSON.stringify(t,PD,2):String(t),PD=(t,e)=>ID(e)?PD(t,e.value):Gh(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Rb(r,s)+" =>"]=i,n),{})}:MD(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Rb(n))}:gl(e)?Rb(e):Pn(e)&&!Mt(e)&&!_D(e)?String(e):e,Rb=(t,e="")=>{var n;return gl(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Mi;class yq{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mi,!e&&Mi&&(this.index=(Mi.scopes||(Mi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mi;try{return Mi=this,e()}finally{Mi=n}}}on(){++this._on===1&&(this.prevScope=Mi,Mi=this)}off(){this._on>0&&--this._on===0&&(Mi=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function bq(){return Mi}let Rn;const Lb=new WeakSet;class ND{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mi&&Mi.active&&Mi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Lb.has(this)&&(Lb.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||LD(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,x9(this),$D(this);const e=Rn,n=oo;Rn=this,oo=!0;try{return this.fn()}finally{BD(this),Rn=e,oo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)G7(e);this.deps=this.depsTail=void 0,x9(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Lb.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){tw(this)&&this.run()}get dirty(){return tw(this)}}let RD=0,R0,L0;function LD(t,e=!1){if(t.flags|=8,e){t.next=L0,L0=t;return}t.next=R0,R0=t}function Q7(){RD++}function U7(){if(--RD>0)return;if(L0){let e=L0;for(L0=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;R0;){let e=R0;for(R0=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function $D(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function BD(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),G7(r),wq(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function tw(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zD(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zD(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===pp)||(t.globalVersion=pp,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!tw(t))))return;t.flags|=2;const e=t.dep,n=Rn,r=oo;Rn=t,oo=!0;try{$D(t);const i=t.fn(t._value);(e.version===0||Di(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Rn=n,oo=r,BD(t),t.flags&=-3}}function G7(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)G7(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function wq(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let oo=!0;const FD=[];function el(){FD.push(oo),oo=!1}function tl(){const t=FD.pop();oo=t===void 0?!0:t}function x9(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Rn;Rn=void 0;try{e()}finally{Rn=n}}}let pp=0;class xq{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Qy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Rn||!oo||Rn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Rn)n=this.activeLink=new xq(Rn,this),Rn.deps?(n.prevDep=Rn.depsTail,Rn.depsTail.nextDep=n,Rn.depsTail=n):Rn.deps=Rn.depsTail=n,HD(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Rn.depsTail,n.nextDep=void 0,Rn.depsTail.nextDep=n,Rn.depsTail=n,Rn.deps===n&&(Rn.deps=r)}return n}trigger(e){this.version++,pp++,this.notify(e)}notify(e){Q7();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{U7()}}}function HD(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)HD(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const wv=new WeakMap,Su=Symbol(""),nw=Symbol(""),mp=Symbol("");function jr(t,e,n){if(oo&&Rn){let r=wv.get(t);r||wv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Qy),i.map=r,i.key=n),i.track()}}function Ba(t,e,n,r,i,s){const o=wv.get(t);if(!o){pp++;return}const a=l=>{l&&l.trigger()};if(Q7(),e==="clear")o.forEach(a);else{const l=Mt(t),c=l&&qy(n);if(l&&n==="length"){const u=Number(r);o.forEach((h,f)=>{(f==="length"||f===mp||!gl(f)&&f>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(mp)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Su)),Gh(t)&&a(o.get(nw)));break;case"delete":l||(a(o.get(Su)),Gh(t)&&a(o.get(nw)));break;case"set":Gh(t)&&a(o.get(Su));break}}U7()}function kq(t,e){const n=wv.get(t);return n&&n.get(e)}function xh(t){const e=tn(t);return e===t?e:(jr(e,"iterate",mp),fs(t)?e:e.map(uo))}function Uy(t){return jr(t=tn(t),"iterate",mp),t}function Fl(t,e){return nl(t)?wf(Cu(t)?uo(e):e):uo(e)}const Sq={__proto__:null,[Symbol.iterator](){return $b(this,Symbol.iterator,t=>Fl(this,t))},concat(...t){return xh(this).concat(...t.map(e=>Mt(e)?xh(e):e))},entries(){return $b(this,"entries",t=>(t[1]=Fl(this,t[1]),t))},every(t,e){return xa(this,"every",t,e,void 0,arguments)},filter(t,e){return xa(this,"filter",t,e,n=>n.map(r=>Fl(this,r)),arguments)},find(t,e){return xa(this,"find",t,e,n=>Fl(this,n),arguments)},findIndex(t,e){return xa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xa(this,"findLast",t,e,n=>Fl(this,n),arguments)},findLastIndex(t,e){return xa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xa(this,"forEach",t,e,void 0,arguments)},includes(...t){return Bb(this,"includes",t)},indexOf(...t){return Bb(this,"indexOf",t)},join(t){return xh(this).join(t)},lastIndexOf(...t){return Bb(this,"lastIndexOf",t)},map(t,e){return xa(this,"map",t,e,void 0,arguments)},pop(){return Sd(this,"pop")},push(...t){return Sd(this,"push",t)},reduce(t,...e){return k9(this,"reduce",t,e)},reduceRight(t,...e){return k9(this,"reduceRight",t,e)},shift(){return Sd(this,"shift")},some(t,e){return xa(this,"some",t,e,void 0,arguments)},splice(...t){return Sd(this,"splice",t)},toReversed(){return xh(this).toReversed()},toSorted(t){return xh(this).toSorted(t)},toSpliced(...t){return xh(this).toSpliced(...t)},unshift(...t){return Sd(this,"unshift",t)},values(){return $b(this,"values",t=>Fl(this,t))}};function $b(t,e,n){const r=Uy(t),i=r[e]();return r!==t&&!fs(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const Cq=Array.prototype;function xa(t,e,n,r,i,s){const o=Uy(t),a=o!==t&&!fs(t),l=o[e];if(l!==Cq[e]){const h=l.apply(t,s);return a?uo(h):h}let c=n;o!==t&&(a?c=function(h,f){return n.call(this,Fl(t,h),f,t)}:n.length>2&&(c=function(h,f){return n.call(this,h,f,t)}));const u=l.call(o,c,r);return a&&i?i(u):u}function k9(t,e,n,r){const i=Uy(t);let s=n;return i!==t&&(fs(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Fl(t,a),l,t)}),i[e](s,...r)}function Bb(t,e,n){const r=tn(t);jr(r,"iterate",mp);const i=r[e](...n);return(i===-1||i===!1)&&Gy(n[0])?(n[0]=tn(n[0]),r[e](...n)):i}function Sd(t,e,n=[]){el(),Q7();const r=tn(t)[e].apply(t,n);return U7(),tl(),r}const Oq=q7("__proto__,__v_isRef,__isVue"),VD=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(gl));function Mq(t){gl(t)||(t=String(t));const e=tn(this);return jr(e,"has",t),e.hasOwnProperty(t)}class qD{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Lq:QD:s?YD:jD).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Mt(e);if(!i){let l;if(o&&(l=Sq[n]))return l;if(n==="hasOwnProperty")return Mq}const a=Reflect.get(e,n,yn(e)?e:r);if((gl(n)?VD.has(n):Oq(n))||(i||jr(e,"get",n),s))return a;if(yn(a)){const l=o&&qy(n)?a:a.value;return i&&Pn(l)?iw(l):l}return Pn(a)?i?iw(a):ih(a):a}}class WD extends qD{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const o=Mt(e)&&qy(n);if(!this._isShallow){const c=nl(s);if(!fs(r)&&!nl(r)&&(s=tn(s),r=tn(r)),!o&&yn(s)&&!yn(r))return c||(s.value=r),!0}const a=o?Number(n)<e.length:mn(e,n),l=Reflect.set(e,n,r,yn(e)?e:i);return e===tn(i)&&(a?Di(r,s)&&Ba(e,"set",n,r):Ba(e,"add",n,r)),l}deleteProperty(e,n){const r=mn(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ba(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!gl(n)||!VD.has(n))&&jr(e,"has",n),r}ownKeys(e){return jr(e,"iterate",Mt(e)?"length":Su),Reflect.ownKeys(e)}}class Tq extends qD{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Aq=new WD,_q=new Tq,Dq=new WD(!0);const rw=t=>t,Xm=t=>Reflect.getPrototypeOf(t);function Eq(t,e,n){return function(...r){const i=this.__v_raw,s=tn(i),o=Gh(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?rw:e?wf:uo;return!e&&jr(s,"iterate",l?nw:Su),gr(Object.create(c),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}}})}}function Zm(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Iq(t,e){const n={get(i){const s=this.__v_raw,o=tn(s),a=tn(i);t||(Di(i,a)&&jr(o,"get",i),jr(o,"get",a));const{has:l}=Xm(o),c=e?rw:t?wf:uo;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&jr(tn(i),"iterate",Su),i.size},has(i){const s=this.__v_raw,o=tn(s),a=tn(i);return t||(Di(i,a)&&jr(o,"has",i),jr(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=tn(a),c=e?rw:t?wf:uo;return!t&&jr(l,"iterate",Su),a.forEach((u,h)=>i.call(s,c(u),c(h),o))}};return gr(n,t?{add:Zm("add"),set:Zm("set"),delete:Zm("delete"),clear:Zm("clear")}:{add(i){!e&&!fs(i)&&!nl(i)&&(i=tn(i));const s=tn(this);return Xm(s).has.call(s,i)||(s.add(i),Ba(s,"add",i,i)),this},set(i,s){!e&&!fs(s)&&!nl(s)&&(s=tn(s));const o=tn(this),{has:a,get:l}=Xm(o);let c=a.call(o,i);c||(i=tn(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,s),c?Di(s,u)&&Ba(o,"set",i,s):Ba(o,"add",i,s),this},delete(i){const s=tn(this),{has:o,get:a}=Xm(s);let l=o.call(s,i);l||(i=tn(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ba(s,"delete",i,void 0),c},clear(){const i=tn(this),s=i.size!==0,o=i.clear();return s&&Ba(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Eq(i,t,e)}),n}function K7(t,e){const n=Iq(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(mn(n,i)&&i in r?n:r,i,s)}const Pq={get:K7(!1,!1)},Nq={get:K7(!1,!0)},Rq={get:K7(!0,!1)};const jD=new WeakMap,YD=new WeakMap,QD=new WeakMap,Lq=new WeakMap;function $q(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bq(t){return t.__v_skip||!Object.isExtensible(t)?0:$q(lq(t))}function ih(t){return nl(t)?t:X7(t,!1,Aq,Pq,jD)}function zq(t){return X7(t,!1,Dq,Nq,YD)}function iw(t){return X7(t,!0,_q,Rq,QD)}function X7(t,e,n,r,i){if(!Pn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Bq(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Cu(t){return nl(t)?Cu(t.__v_raw):!!(t&&t.__v_isReactive)}function nl(t){return!!(t&&t.__v_isReadonly)}function fs(t){return!!(t&&t.__v_isShallow)}function Gy(t){return t?!!t.__v_raw:!1}function tn(t){const e=t&&t.__v_raw;return e?tn(e):t}function Fq(t){return!mn(t,"__v_skip")&&Object.isExtensible(t)&&DD(t,"__v_skip",!0),t}const uo=t=>Pn(t)?ih(t):t,wf=t=>Pn(t)?iw(t):t;function yn(t){return t?t.__v_isRef===!0:!1}function ae(t){return UD(t,!1)}function Ou(t){return UD(t,!0)}function UD(t,e){return yn(t)?t:new Hq(t,e)}class Hq{constructor(e,n){this.dep=new Qy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:tn(e),this._value=n?e:uo(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||fs(e)||nl(e);e=r?e:tn(e),Di(e,n)&&(this._rawValue=e,this._value=r?e:uo(e),this.dep.trigger())}}function U(t){return yn(t)?t.value:t}const Vq={get:(t,e,n)=>e==="__v_raw"?t:U(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return yn(i)&&!yn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function GD(t){return Cu(t)?t:new Proxy(t,Vq)}class qq{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Qy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Wq(t){return new qq(t)}function jq(t){const e=Mt(t)?new Array(t.length):{};for(const n in t)e[n]=KD(t,n);return e}class Yq{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=tn(e);let i=!0,s=e;if(!Mt(e)||!qy(String(n)))do i=!Gy(s)||fs(s);while(i&&(s=s.__v_raw));this._shallow=i}get value(){let e=this._object[this._key];return this._shallow&&(e=U(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&yn(this._raw[this._key])){const n=this._object[this._key];if(yn(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return kq(this._raw,this._key)}}class Qq{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ag(t,e,n){return yn(t)?t:Pt(t)?new Qq(t):Pn(t)&&arguments.length>1?KD(t,e,n):ae(t)}function KD(t,e,n){return new Yq(t,e,n)}class Uq{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Qy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Rn!==this)return LD(this,!0),!0}get value(){const e=this.dep.track();return zD(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Gq(t,e,n=!1){let r,i;return Pt(t)?r=t:(r=t.get,i=t.set),new Uq(r,i,n)}const Jm={},xv=new WeakMap;let nu;function Kq(t,e=!1,n=nu){if(n){let r=xv.get(n);r||xv.set(n,r=[]),r.push(t)}}function Xq(t,e,n=un){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=O=>i?O:fs(O)||i===!1||i===0?za(O,1):za(O);let u,h,f,d,p=!1,m=!1;if(yn(t)?(h=()=>t.value,p=fs(t)):Cu(t)?(h=()=>c(t),p=!0):Mt(t)?(m=!0,p=t.some(O=>Cu(O)||fs(O)),h=()=>t.map(O=>{if(yn(O))return O.value;if(Cu(O))return c(O);if(Pt(O))return l?l(O,2):O()})):Pt(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){el();try{f()}finally{tl()}}const O=nu;nu=u;try{return l?l(t,3,[d]):t(d)}finally{nu=O}}:h=Xo,e&&i){const O=h,k=i===!0?1/0:i;h=()=>za(O(),k)}const g=bq(),v=()=>{u.stop(),g&&g.active&&j7(g.effects,u)};if(s&&e){const O=e;e=(...k)=>{O(...k),v()}}let b=m?new Array(t.length).fill(Jm):Jm;const S=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(e){const k=u.run();if(i||p||(m?k.some((C,T)=>Di(C,b[T])):Di(k,b))){f&&f();const C=nu;nu=u;try{const T=[k,b===Jm?void 0:m&&b[0]===Jm?[]:b,d];b=k,l?l(e,3,T):e(...T)}finally{nu=C}}}else u.run()};return a&&a(S),u=new ND(h),u.scheduler=o?()=>o(S,!1):S,d=O=>Kq(O,!1,u),f=u.onStop=()=>{const O=xv.get(u);if(O){if(l)l(O,4);else for(const k of O)k();xv.delete(u)}},e?r?S(!0):b=u.run():o?o(S.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function za(t,e=1/0,n){if(e<=0||!Pn(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,yn(t))za(t.value,e,n);else if(Mt(t))for(let r=0;r<t.length;r++)za(t[r],e,n);else if(MD(t)||Gh(t))t.forEach(r=>{za(r,e,n)});else if(_D(t)){for(const r in t)za(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&za(t[r],e,n)}return t}function fm(t,e,n,r){try{return r?t(...r):t()}catch(i){Ky(i,e,n)}}function ho(t,e,n,r){if(Pt(t)){const i=fm(t,e,n,r);return i&&TD(i)&&i.catch(s=>{Ky(s,e,n)}),i}if(Mt(t)){const i=[];for(let s=0;s<t.length;s++)i.push(ho(t[s],e,n,r));return i}}function Ky(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||un;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(s){el(),fm(s,null,10,[t,l,c]),tl();return}}Zq(t,n,i,r,o)}function Zq(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const ai=[];let Ro=-1;const Kh=[];let Hl=null,Mh=0;const XD=Promise.resolve();let kv=null;function qo(t){const e=kv||XD;return t?e.then(this?t.bind(this):t):e}function Jq(t){let e=Ro+1,n=ai.length;for(;e<n;){const r=e+n>>>1,i=ai[r],s=gp(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Z7(t){if(!(t.flags&1)){const e=gp(t),n=ai[ai.length-1];!n||!(t.flags&2)&&e>=gp(n)?ai.push(t):ai.splice(Jq(e),0,t),t.flags|=1,ZD()}}function ZD(){kv||(kv=XD.then(eE))}function eW(t){Mt(t)?Kh.push(...t):Hl&&t.id===-1?Hl.splice(Mh+1,0,t):t.flags&1||(Kh.push(t),t.flags|=1),ZD()}function S9(t,e,n=Ro+1){for(;n<ai.length;n++){const r=ai[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ai.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function JD(t){if(Kh.length){const e=[...new Set(Kh)].sort((n,r)=>gp(n)-gp(r));if(Kh.length=0,Hl){Hl.push(...e);return}for(Hl=e,Mh=0;Mh<Hl.length;Mh++){const n=Hl[Mh];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hl=null,Mh=0}}const gp=t=>t.id==null?t.flags&2?-1:1/0:t.id;function eE(t){try{for(Ro=0;Ro<ai.length;Ro++){const e=ai[Ro];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fm(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ro<ai.length;Ro++){const e=ai[Ro];e&&(e.flags&=-2)}Ro=-1,ai.length=0,JD(),kv=null,(ai.length||Kh.length)&&eE()}}let Br=null,tE=null;function Sv(t){const e=Br;return Br=t,tE=t&&t.type.__scopeId||null,e}function en(t,e=Br,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Tv(-1);const s=Sv(e);let o;try{o=t(...i)}finally{Sv(s),r._d&&Tv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function rl(t,e){if(Br===null)return t;const n=n2(Br),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=un]=e[i];s&&(Pt(s)&&(s={mounted:s,updated:s}),s.deep&&za(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Wc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(el(),ho(l,n,8,[t.el,a,t,e]),tl())}}function sh(t,e){if(Qr){let n=Qr.provides;const r=Qr.parent&&Qr.parent.provides;r===n&&(n=Qr.provides=Object.create(r)),n[t]=e}}function Rs(t,e,n=!1){const r=ox();if(r||Zh){let i=Zh?Zh._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Pt(e)?e.call(r&&r.proxy):e}}const tW=Symbol.for("v-scx"),nW=()=>Rs(tW);function Cc(t,e){return Xy(t,null,e)}function rW(t,e){return Xy(t,null,{flush:"sync"})}function Vt(t,e,n){return Xy(t,e,n)}function Xy(t,e,n=un){const{immediate:r,deep:i,flush:s,once:o}=n,a=gr({},n),l=e&&r||!e&&s!=="post";let c;if(wp){if(s==="sync"){const d=nW();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Xo,d.resume=Xo,d.pause=Xo,d}}const u=Qr;a.call=(d,p,m)=>ho(d,u,p,m);let h=!1;s==="post"?a.scheduler=d=>{ns(d,u&&u.suspense)}:s!=="sync"&&(h=!0,a.scheduler=(d,p)=>{p?d():Z7(d)}),a.augmentJob=d=>{e&&(d.flags|=4),h&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const f=Xq(t,e,a);return wp&&(c?c.push(f):l&&f()),f}function iW(t,e,n){const r=this.proxy,i=Jn(t)?t.includes(".")?nE(r,t):()=>r[t]:t.bind(r,r);let s;Pt(e)?s=e:(s=e.handler,n=e);const o=pm(this),a=Xy(i,s.bind(r),n);return o(),a}function nE(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const sW=Symbol("_vte"),rE=t=>t.__isTeleport,Na=Symbol("_leaveCb"),e1=Symbol("_enterCb");function oW(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Dr(()=>{t.isMounted=!0}),dm(()=>{t.isUnmounting=!0}),t}const Ss=[Function,Array],iE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ss,onEnter:Ss,onAfterEnter:Ss,onEnterCancelled:Ss,onBeforeLeave:Ss,onLeave:Ss,onAfterLeave:Ss,onLeaveCancelled:Ss,onBeforeAppear:Ss,onAppear:Ss,onAfterAppear:Ss,onAppearCancelled:Ss},sE=t=>{const e=t.subTree;return e.component?sE(e.component):e},aW={name:"BaseTransition",props:iE,setup(t,{slots:e}){const n=ox(),r=oW();return()=>{const i=e.default&&lE(e.default(),!0);if(!i||!i.length)return;const s=oE(i),o=tn(t),{mode:a}=o;if(r.isLeaving)return zb(s);const l=C9(s);if(!l)return zb(s);let c=sw(l,o,r,n,h=>c=h);l.type!==Yr&&vp(l,c);let u=n.subTree&&C9(n.subTree);if(u&&u.type!==Yr&&!uu(u,l)&&sE(n).type!==Yr){let h=sw(u,o,r,n);if(vp(u,h),a==="out-in"&&l.type!==Yr)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},zb(s);a==="in-out"&&l.type!==Yr?h.delayLeave=(f,d,p)=>{const m=aE(r,u);m[String(u.key)]=u,f[Na]=()=>{d(),f[Na]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function oE(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Yr){e=n;break}}return e}const lW=aW;function aE(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function sw(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:d,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:b,onAppearCancelled:S}=e,O=String(t.key),k=aE(n,t),C=(L,I)=>{L&&ho(L,r,9,I)},T=(L,I)=>{const F=I[1];C(L,I),Mt(L)?L.every(E=>E.length<=1)&&F():L.length<=1&&F()},R={mode:o,persisted:a,beforeEnter(L){let I=l;if(!n.isMounted)if(s)I=g||l;else return;L[Na]&&L[Na](!0);const F=k[O];F&&uu(t,F)&&F.el[Na]&&F.el[Na](),C(I,[L])},enter(L){let I=c,F=u,E=h;if(!n.isMounted)if(s)I=v||c,F=b||u,E=S||h;else return;let ee=!1;const G=L[e1]=W=>{ee||(ee=!0,W?C(E,[L]):C(F,[L]),R.delayedLeave&&R.delayedLeave(),L[e1]=void 0)};I?T(I,[L,G]):G()},leave(L,I){const F=String(t.key);if(L[e1]&&L[e1](!0),n.isUnmounting)return I();C(f,[L]);let E=!1;const ee=L[Na]=G=>{E||(E=!0,I(),G?C(m,[L]):C(p,[L]),L[Na]=void 0,k[F]===t&&delete k[F])};k[F]=t,d?T(d,[L,ee]):ee()},clone(L){const I=sw(L,e,n,r,i);return i&&i(I),I}};return R}function zb(t){if(Zy(t))return t=uc(t),t.children=null,t}function C9(t){if(!Zy(t))return rE(t.type)&&t.children?oE(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Pt(n.default))return n.default()}}function vp(t,e){t.shapeFlag&6&&t.component?(t.transition=e,vp(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function lE(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===wt?(o.patchFlag&128&&i++,r=r.concat(lE(o.children,e,a))):(e||o.type!==Yr)&&r.push(a!=null?uc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function xt(t,e){return Pt(t)?gr({name:t.name},e,{setup:t}):t}function cE(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Cv=new WeakMap;function $0(t,e,n,r,i=!1){if(Mt(t)){t.forEach((p,m)=>$0(p,e&&(Mt(e)?e[m]:e),n,r,i));return}if(Xh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&$0(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?n2(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===un?a.refs={}:a.refs,h=a.setupState,f=tn(h),d=h===un?OD:p=>mn(f,p);if(c!=null&&c!==l){if(O9(e),Jn(c))u[c]=null,d(c)&&(h[c]=null);else if(yn(c)){c.value=null;const p=e;p.k&&(u[p.k]=null)}}if(Pt(l))fm(l,a,12,[o,u]);else{const p=Jn(l),m=yn(l);if(p||m){const g=()=>{if(t.f){const v=p?d(l)?h[l]:u[l]:l.value;if(i)Mt(v)&&j7(v,s);else if(Mt(v))v.includes(s)||v.push(s);else if(p)u[l]=[s],d(l)&&(h[l]=u[l]);else{const b=[s];l.value=b,t.k&&(u[t.k]=b)}}else p?(u[l]=o,d(l)&&(h[l]=o)):m&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const v=()=>{g(),Cv.delete(t)};v.id=-1,Cv.set(t,v),ns(v,n)}else O9(t),g()}}}function O9(t){const e=Cv.get(t);e&&(e.flags|=8,Cv.delete(t))}Yy().requestIdleCallback;Yy().cancelIdleCallback;const Xh=t=>!!t.type.__asyncLoader,Zy=t=>t.type.__isKeepAlive;function cW(t,e){uE(t,"a",e)}function uW(t,e){uE(t,"da",e)}function uE(t,e,n=Qr){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Jy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Zy(i.parent.vnode)&&hW(r,e,n,i),i=i.parent}}function hW(t,e,n,r){const i=Jy(e,t,r,!0);la(()=>{j7(r[e],i)},n)}function Jy(t,e,n=Qr,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{el();const a=pm(n),l=ho(e,n,t,o);return a(),tl(),l});return r?i.unshift(s):i.push(s),s}}const yl=t=>(e,n=Qr)=>{(!wp||t==="sp")&&Jy(t,(...r)=>e(...r),n)},fW=yl("bm"),Dr=yl("m"),dW=yl("bu"),pW=yl("u"),dm=yl("bum"),la=yl("um"),mW=yl("sp"),gW=yl("rtg"),vW=yl("rtc");function yW(t,e=Qr){Jy("ec",t,e)}const J7="components",bW="directives";function Bo(t,e){return tx(J7,t,!0,e)||t}const hE=Symbol.for("v-ndc");function ex(t){return Jn(t)?tx(J7,t,!1)||t:t||hE}function wW(t){return tx(bW,t)}function tx(t,e,n=!0,r=!1){const i=Br||Qr;if(i){const s=i.type;if(t===J7){const a=nj(s,!1);if(a&&(a===e||a===gs(e)||a===jy(gs(e))))return s}const o=M9(i[t]||s[t],e)||M9(i.appContext[t],e);return!o&&r?s:o}}function M9(t,e){return t&&(t[e]||t[gs(e)]||t[jy(gs(e))])}function Tr(t,e,n,r){let i;const s=n,o=Mt(t);if(o||Jn(t)){const a=o&&Cu(t);let l=!1,c=!1;a&&(l=!fs(t),c=nl(t),t=Uy(t)),i=new Array(t.length);for(let u=0,h=t.length;u<h;u++)i[u]=e(l?c?wf(uo(t[u])):uo(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(Pn(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(t[u],u,l,s)}}else i=[];return i}function oh(t,e,n={},r,i){if(Br.ce||Br.parent&&Xh(Br.parent)&&Br.parent.ce){const c=Object.keys(n).length>0;return me(),$n(wt,null,[_e("slot",n,r&&r())],c?-2:64)}let s=t[e];s&&s._c&&(s._d=!1),me();const o=s&&fE(s(n)),a=n.key||o&&o.key,l=$n(wt,{key:(a&&!gl(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function fE(t){return t.some(e=>bp(e)?!(e.type===Yr||e.type===wt&&!fE(e.children)):!0)?t:null}function xW(t,e){const n={};for(const r in t)n[/[A-Z]/.test(r)?`on:${r}`:sg(r)]=t[r];return n}const ow=t=>t?IE(t)?n2(t):ow(t.parent):null,B0=gr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ow(t.parent),$root:t=>ow(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>pE(t),$forceUpdate:t=>t.f||(t.f=()=>{Z7(t.update)}),$nextTick:t=>t.n||(t.n=qo.bind(t.proxy)),$watch:t=>iW.bind(t)}),Fb=(t,e)=>t!==un&&!t.__isScriptSetup&&mn(t,e),kW={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Fb(r,e))return o[e]=1,r[e];if(i!==un&&mn(i,e))return o[e]=2,i[e];if(mn(s,e))return o[e]=3,s[e];if(n!==un&&mn(n,e))return o[e]=4,n[e];aw&&(o[e]=0)}}const c=B0[e];let u,h;if(c)return e==="$attrs"&&jr(t.attrs,"get",""),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(n!==un&&mn(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,mn(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Fb(i,e)?(i[e]=n,!0):r!==un&&mn(r,e)?(r[e]=n,!0):mn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:o}},a){let l;return!!(n[a]||t!==un&&a[0]!=="$"&&mn(t,a)||Fb(e,a)||mn(s,a)||mn(r,a)||mn(B0,a)||mn(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:mn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ov(t){return Mt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function nx(t,e){return!t||!e?t||e:Mt(t)&&Mt(e)?t.concat(e):gr({},Ov(t),Ov(e))}let aw=!0;function SW(t){const e=pE(t),n=t.proxy,r=t.ctx;aw=!1,e.beforeCreate&&T9(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:S,unmounted:O,render:k,renderTracked:C,renderTriggered:T,errorCaptured:R,serverPrefetch:L,expose:I,inheritAttrs:F,components:E,directives:ee,filters:G}=e;if(c&&CW(c,r,null),o)for(const te in o){const ne=o[te];Pt(ne)&&(r[te]=ne.bind(n))}if(i){const te=i.call(n,n);Pn(te)&&(t.data=ih(te))}if(aw=!0,s)for(const te in s){const ne=s[te],ye=Pt(ne)?ne.bind(n,n):Pt(ne.get)?ne.get.bind(n,n):Xo,A=!Pt(ne)&&Pt(ne.set)?ne.set.bind(n):Xo,fe=ue({get:ye,set:A});Object.defineProperty(r,te,{enumerable:!0,configurable:!0,get:()=>fe.value,set:he=>fe.value=he})}if(a)for(const te in a)dE(a[te],r,n,te);if(l){const te=Pt(l)?l.call(n):l;Reflect.ownKeys(te).forEach(ne=>{sh(ne,te[ne])})}u&&T9(u,t,"c");function X(te,ne){Mt(ne)?ne.forEach(ye=>te(ye.bind(n))):ne&&te(ne.bind(n))}if(X(fW,h),X(Dr,f),X(dW,d),X(pW,p),X(cW,m),X(uW,g),X(yW,R),X(vW,C),X(gW,T),X(dm,b),X(la,O),X(mW,L),Mt(I))if(I.length){const te=t.exposed||(t.exposed={});I.forEach(ne=>{Object.defineProperty(te,ne,{get:()=>n[ne],set:ye=>n[ne]=ye,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===Xo&&(t.render=k),F!=null&&(t.inheritAttrs=F),E&&(t.components=E),ee&&(t.directives=ee),L&&cE(t)}function CW(t,e,n=Xo){Mt(t)&&(t=lw(t));for(const r in t){const i=t[r];let s;Pn(i)?"default"in i?s=Rs(i.from||r,i.default,!0):s=Rs(i.from||r):s=Rs(i),yn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function T9(t,e,n){ho(Mt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function dE(t,e,n,r){let i=r.includes(".")?nE(n,r):()=>n[r];if(Jn(t)){const s=e[t];Pt(s)&&Vt(i,s)}else if(Pt(t))Vt(i,t.bind(n));else if(Pn(t))if(Mt(t))t.forEach(s=>dE(s,e,n,r));else{const s=Pt(t.handler)?t.handler.bind(n):e[t.handler];Pt(s)&&Vt(i,s,t)}}function pE(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Mv(l,c,o,!0)),Mv(l,e,o)),Pn(e)&&s.set(e,l),l}function Mv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Mv(t,s,n,!0),i&&i.forEach(o=>Mv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=OW[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const OW={data:A9,props:_9,emits:_9,methods:Qd,computed:Qd,beforeCreate:si,created:si,beforeMount:si,mounted:si,beforeUpdate:si,updated:si,beforeDestroy:si,beforeUnmount:si,destroyed:si,unmounted:si,activated:si,deactivated:si,errorCaptured:si,serverPrefetch:si,components:Qd,directives:Qd,watch:TW,provide:A9,inject:MW};function A9(t,e){return e?t?function(){return gr(Pt(t)?t.call(this,this):t,Pt(e)?e.call(this,this):e)}:e:t}function MW(t,e){return Qd(lw(t),lw(e))}function lw(t){if(Mt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function si(t,e){return t?[...new Set([].concat(t,e))]:e}function Qd(t,e){return t?gr(Object.create(null),t,e):e}function _9(t,e){return t?Mt(t)&&Mt(e)?[...new Set([...t,...e])]:gr(Object.create(null),Ov(t),Ov(e??{})):e}function TW(t,e){if(!t)return e;if(!e)return t;const n=gr(Object.create(null),t);for(const r in e)n[r]=si(t[r],e[r]);return n}function mE(){return{app:null,config:{isNativeTag:OD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AW=0;function _W(t,e){return function(r,i=null){Pt(r)||(r=gr({},r)),i!=null&&!Pn(i)&&(i=null);const s=mE(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:AW++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:ij,get config(){return s.config},set config(u){},use(u,...h){return o.has(u)||(u&&Pt(u.install)?(o.add(u),u.install(c,...h)):Pt(u)&&(o.add(u),u(c,...h))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,h){return h?(s.components[u]=h,c):s.components[u]},directive(u,h){return h?(s.directives[u]=h,c):s.directives[u]},mount(u,h,f){if(!l){const d=c._ceVNode||_e(r,i);return d.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),t(d,u,f),l=!0,c._container=u,u.__vue_app__=c,n2(d.component)}},onUnmount(u){a.push(u)},unmount(){l&&(ho(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return s.provides[u]=h,c},runWithContext(u){const h=Zh;Zh=c;try{return u()}finally{Zh=h}}};return c}}let Zh=null;function $u(t,e,n=un){const r=ox(),i=gs(e),s=vl(e),o=gE(t,i),a=Wq((l,c)=>{let u,h=un,f;return rW(()=>{const d=t[i];Di(u,d)&&(u=d,c())}),{get(){return l(),n.get?n.get(u):u},set(d){const p=n.set?n.set(d):d;if(!Di(p,u)&&!(h!==un&&Di(d,h)))return;const m=r.vnode.props;m&&(e in m||i in m||s in m)&&(`onUpdate:${e}`in m||`onUpdate:${i}`in m||`onUpdate:${s}`in m)||(u=d,c()),r.emit(`update:${e}`,p),Di(d,p)&&Di(d,h)&&!Di(p,f)&&c(),h=d,f=p}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||un:a,done:!1}:{done:!0}}}},a}const gE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${gs(e)}Modifiers`]||t[`${vl(e)}Modifiers`];function DW(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||un;let i=n;const s=e.startsWith("update:"),o=s&&gE(r,e.slice(7));o&&(o.trim&&(i=n.map(u=>Jn(u)?u.trim():u)),o.number&&(i=n.map(Y7)));let a,l=r[a=sg(e)]||r[a=sg(gs(e))];!l&&s&&(l=r[a=sg(vl(e))]),l&&ho(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ho(c,t,6,i)}}const EW=new WeakMap;function vE(t,e,n=!1){const r=n?EW:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Pt(t)){const l=c=>{const u=vE(c,e,!0);u&&(a=!0,gr(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Pn(t)&&r.set(t,null),null):(Mt(s)?s.forEach(l=>o[l]=null):gr(o,s),Pn(t)&&r.set(t,o),o)}function e2(t,e){return!t||!Hy(e)?!1:(e=e.slice(2).replace(/Once$/,""),mn(t,e[0].toLowerCase()+e.slice(1))||mn(t,vl(e))||mn(t,e))}function D9(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:d,ctx:p,inheritAttrs:m}=t,g=Sv(t);let v,b;try{if(n.shapeFlag&4){const O=i||r,k=O;v=zo(c.call(k,O,u,h,d,f,p)),b=a}else{const O=e;v=zo(O.length>1?O(h,{attrs:a,slots:o,emit:l}):O(h,null)),b=e.props?a:IW(a)}}catch(O){z0.length=0,Ky(O,t,1),v=_e(Yr)}let S=v;if(b&&m!==!1){const O=Object.keys(b),{shapeFlag:k}=S;O.length&&k&7&&(s&&O.some(W7)&&(b=PW(b,s)),S=uc(S,b,!1,!0))}return n.dirs&&(S=uc(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&vp(S,n.transition),v=S,Sv(g),v}const IW=t=>{let e;for(const n in t)(n==="class"||n==="style"||Hy(n))&&((e||(e={}))[n]=t[n]);return e},PW=(t,e)=>{const n={};for(const r in t)(!W7(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function NW(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?E9(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!e2(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?E9(r,o,c):!0:!!o;return!1}function E9(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!e2(n,s))return!0}return!1}function RW({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const yE={},bE=()=>Object.create(yE),wE=t=>Object.getPrototypeOf(t)===yE;function LW(t,e,n,r=!1){const i={},s=bE();t.propsDefaults=Object.create(null),xE(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:zq(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function $W(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=tn(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(e2(t.emitsOptions,f))continue;const d=e[f];if(l)if(mn(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const p=gs(f);i[p]=cw(l,a,p,d,t,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{xE(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!mn(e,h)&&((u=vl(h))===h||!mn(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=cw(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!mn(e,h))&&(delete s[h],c=!0)}c&&Ba(t.attrs,"set","")}function xE(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(P0(l))continue;const c=e[l];let u;i&&mn(i,u=gs(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:e2(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=tn(n),c=a||un;for(let u=0;u<s.length;u++){const h=s[u];n[h]=cw(i,l,h,c[h],t,!mn(c,h))}}return o}function cw(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=mn(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Pt(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=pm(i);r=c[n]=l.call(null,e),u()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===vl(n))&&(r=!0))}return r}const BW=new WeakMap;function kE(t,e,n=!1){const r=n?BW:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Pt(t)){const u=h=>{l=!0;const[f,d]=kE(h,e,!0);gr(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return Pn(t)&&r.set(t,Uh),Uh;if(Mt(s))for(let u=0;u<s.length;u++){const h=gs(s[u]);I9(h)&&(o[h]=un)}else if(s)for(const u in s){const h=gs(u);if(I9(h)){const f=s[u],d=o[h]=Mt(f)||Pt(f)?{type:f}:gr({},f),p=d.type;let m=!1,g=!0;if(Mt(p))for(let v=0;v<p.length;++v){const b=p[v],S=Pt(b)&&b.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(g=!1)}else m=Pt(p)&&p.name==="Boolean";d[0]=m,d[1]=g,(m||mn(d,"default"))&&a.push(h)}}const c=[o,a];return Pn(t)&&r.set(t,c),c}function I9(t){return t[0]!=="$"&&!P0(t)}const rx=t=>t==="_"||t==="_ctx"||t==="$stable",ix=t=>Mt(t)?t.map(zo):[zo(t)],zW=(t,e,n)=>{if(e._n)return e;const r=en((...i)=>ix(e(...i)),n);return r._c=!1,r},SE=(t,e,n)=>{const r=t._ctx;for(const i in t){if(rx(i))continue;const s=t[i];if(Pt(s))e[i]=zW(i,s,r);else if(s!=null){const o=ix(s);e[i]=()=>o}}},CE=(t,e)=>{const n=ix(e);t.slots.default=()=>n},OE=(t,e,n)=>{for(const r in e)(n||!rx(r))&&(t[r]=e[r])},FW=(t,e,n)=>{const r=t.slots=bE();if(t.vnode.shapeFlag&32){const i=e._;i?(OE(r,e,n),n&&DD(r,"_",i,!0)):SE(e,r)}else e&&CE(t,e)},HW=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=un;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:OE(i,e,n):(s=!e.$stable,SE(e,i)),o=e}else e&&(CE(t,e),o={default:1});if(s)for(const a in i)!rx(a)&&o[a]==null&&delete i[a]},ns=YW;function VW(t){return qW(t)}function qW(t,e){const n=Yy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=Xo,insertStaticContent:p}=t,m=($,V,ie,pe=null,ge=null,ve=null,De=void 0,Te=null,Me=!!V.dynamicChildren)=>{if($===V)return;$&&!uu($,V)&&(pe=dt($),he($,ge,ve,!0),$=null),V.patchFlag===-2&&(Me=!1,V.dynamicChildren=null);const{type:we,ref:tt,shapeFlag:qe}=V;switch(we){case t2:g($,V,ie,pe);break;case Yr:v($,V,ie,pe);break;case Vb:$==null&&b(V,ie,pe,De);break;case wt:E($,V,ie,pe,ge,ve,De,Te,Me);break;default:qe&1?k($,V,ie,pe,ge,ve,De,Te,Me):qe&6?ee($,V,ie,pe,ge,ve,De,Te,Me):(qe&64||qe&128)&&we.process($,V,ie,pe,ge,ve,De,Te,Me,Ot)}tt!=null&&ge?$0(tt,$&&$.ref,ve,V||$,!V):tt==null&&$&&$.ref!=null&&$0($.ref,null,ve,$,!0)},g=($,V,ie,pe)=>{if($==null)r(V.el=a(V.children),ie,pe);else{const ge=V.el=$.el;V.children!==$.children&&c(ge,V.children)}},v=($,V,ie,pe)=>{$==null?r(V.el=l(V.children||""),ie,pe):V.el=$.el},b=($,V,ie,pe)=>{[$.el,$.anchor]=p($.children,V,ie,pe,$.el,$.anchor)},S=({el:$,anchor:V},ie,pe)=>{let ge;for(;$&&$!==V;)ge=f($),r($,ie,pe),$=ge;r(V,ie,pe)},O=({el:$,anchor:V})=>{let ie;for(;$&&$!==V;)ie=f($),i($),$=ie;i(V)},k=($,V,ie,pe,ge,ve,De,Te,Me)=>{if(V.type==="svg"?De="svg":V.type==="math"&&(De="mathml"),$==null)C(V,ie,pe,ge,ve,De,Te,Me);else{const we=$.el&&$.el._isVueCE?$.el:null;try{we&&we._beginPatch(),L($,V,ge,ve,De,Te,Me)}finally{we&&we._endPatch()}}},C=($,V,ie,pe,ge,ve,De,Te)=>{let Me,we;const{props:tt,shapeFlag:qe,transition:Xe,dirs:it}=$;if(Me=$.el=o($.type,ve,tt&&tt.is,tt),qe&8?u(Me,$.children):qe&16&&R($.children,Me,null,pe,ge,Hb($,ve),De,Te),it&&Wc($,null,pe,"created"),T(Me,$,$.scopeId,De,pe),tt){for(const de in tt)de!=="value"&&!P0(de)&&s(Me,de,null,tt[de],ve,pe);"value"in tt&&s(Me,"value",null,tt.value,ve),(we=tt.onVnodeBeforeMount)&&To(we,pe,$)}it&&Wc($,null,pe,"beforeMount");const J=WW(ge,Xe);J&&Xe.beforeEnter(Me),r(Me,V,ie),((we=tt&&tt.onVnodeMounted)||J||it)&&ns(()=>{we&&To(we,pe,$),J&&Xe.enter(Me),it&&Wc($,null,pe,"mounted")},ge)},T=($,V,ie,pe,ge)=>{if(ie&&d($,ie),pe)for(let ve=0;ve<pe.length;ve++)d($,pe[ve]);if(ge){let ve=ge.subTree;if(V===ve||_E(ve.type)&&(ve.ssContent===V||ve.ssFallback===V)){const De=ge.vnode;T($,De,De.scopeId,De.slotScopeIds,ge.parent)}}},R=($,V,ie,pe,ge,ve,De,Te,Me=0)=>{for(let we=Me;we<$.length;we++){const tt=$[we]=Te?Vl($[we]):zo($[we]);m(null,tt,V,ie,pe,ge,ve,De,Te)}},L=($,V,ie,pe,ge,ve,De)=>{const Te=V.el=$.el;let{patchFlag:Me,dynamicChildren:we,dirs:tt}=V;Me|=$.patchFlag&16;const qe=$.props||un,Xe=V.props||un;let it;if(ie&&jc(ie,!1),(it=Xe.onVnodeBeforeUpdate)&&To(it,ie,V,$),tt&&Wc(V,$,ie,"beforeUpdate"),ie&&jc(ie,!0),(qe.innerHTML&&Xe.innerHTML==null||qe.textContent&&Xe.textContent==null)&&u(Te,""),we?I($.dynamicChildren,we,Te,ie,pe,Hb(V,ge),ve):De||ne($,V,Te,null,ie,pe,Hb(V,ge),ve,!1),Me>0){if(Me&16)F(Te,qe,Xe,ie,ge);else if(Me&2&&qe.class!==Xe.class&&s(Te,"class",null,Xe.class,ge),Me&4&&s(Te,"style",qe.style,Xe.style,ge),Me&8){const J=V.dynamicProps;for(let de=0;de<J.length;de++){const Ve=J[de],lt=qe[Ve],gt=Xe[Ve];(gt!==lt||Ve==="value")&&s(Te,Ve,lt,gt,ge,ie)}}Me&1&&$.children!==V.children&&u(Te,V.children)}else!De&&we==null&&F(Te,qe,Xe,ie,ge);((it=Xe.onVnodeUpdated)||tt)&&ns(()=>{it&&To(it,ie,V,$),tt&&Wc(V,$,ie,"updated")},pe)},I=($,V,ie,pe,ge,ve,De)=>{for(let Te=0;Te<V.length;Te++){const Me=$[Te],we=V[Te],tt=Me.el&&(Me.type===wt||!uu(Me,we)||Me.shapeFlag&198)?h(Me.el):ie;m(Me,we,tt,null,pe,ge,ve,De,!0)}},F=($,V,ie,pe,ge)=>{if(V!==ie){if(V!==un)for(const ve in V)!P0(ve)&&!(ve in ie)&&s($,ve,V[ve],null,ge,pe);for(const ve in ie){if(P0(ve))continue;const De=ie[ve],Te=V[ve];De!==Te&&ve!=="value"&&s($,ve,Te,De,ge,pe)}"value"in ie&&s($,"value",V.value,ie.value,ge)}},E=($,V,ie,pe,ge,ve,De,Te,Me)=>{const we=V.el=$?$.el:a(""),tt=V.anchor=$?$.anchor:a("");let{patchFlag:qe,dynamicChildren:Xe,slotScopeIds:it}=V;it&&(Te=Te?Te.concat(it):it),$==null?(r(we,ie,pe),r(tt,ie,pe),R(V.children||[],ie,tt,ge,ve,De,Te,Me)):qe>0&&qe&64&&Xe&&$.dynamicChildren&&$.dynamicChildren.length===Xe.length?(I($.dynamicChildren,Xe,ie,ge,ve,De,Te),(V.key!=null||ge&&V===ge.subTree)&&ME($,V,!0)):ne($,V,ie,tt,ge,ve,De,Te,Me)},ee=($,V,ie,pe,ge,ve,De,Te,Me)=>{V.slotScopeIds=Te,$==null?V.shapeFlag&512?ge.ctx.activate(V,ie,pe,De,Me):G(V,ie,pe,ge,ve,De,Me):W($,V,Me)},G=($,V,ie,pe,ge,ve,De)=>{const Te=$.component=XW($,pe,ge);if(Zy($)&&(Te.ctx.renderer=Ot),ZW(Te,!1,De),Te.asyncDep){if(ge&&ge.registerDep(Te,X,De),!$.el){const Me=Te.subTree=_e(Yr);v(null,Me,V,ie),$.placeholder=Me.el}}else X(Te,$,V,ie,ge,ve,De)},W=($,V,ie)=>{const pe=V.component=$.component;if(NW($,V,ie))if(pe.asyncDep&&!pe.asyncResolved){te(pe,V,ie);return}else pe.next=V,pe.update();else V.el=$.el,pe.vnode=V},X=($,V,ie,pe,ge,ve,De)=>{const Te=()=>{if($.isMounted){let{next:qe,bu:Xe,u:it,parent:J,vnode:de}=$;{const sn=TE($);if(sn){qe&&(qe.el=de.el,te($,qe,De)),sn.asyncDep.then(()=>{$.isUnmounted||Te()});return}}let Ve=qe,lt;jc($,!1),qe?(qe.el=de.el,te($,qe,De)):qe=de,Xe&&og(Xe),(lt=qe.props&&qe.props.onVnodeBeforeUpdate)&&To(lt,J,qe,de),jc($,!0);const gt=D9($),Xt=$.subTree;$.subTree=gt,m(Xt,gt,h(Xt.el),dt(Xt),$,ge,ve),qe.el=gt.el,Ve===null&&RW($,gt.el),it&&ns(it,ge),(lt=qe.props&&qe.props.onVnodeUpdated)&&ns(()=>To(lt,J,qe,de),ge)}else{let qe;const{el:Xe,props:it}=V,{bm:J,m:de,parent:Ve,root:lt,type:gt}=$,Xt=Xh(V);jc($,!1),J&&og(J),!Xt&&(qe=it&&it.onVnodeBeforeMount)&&To(qe,Ve,V),jc($,!0);{lt.ce&&lt.ce._def.shadowRoot!==!1&&lt.ce._injectChildStyle(gt);const sn=$.subTree=D9($);m(null,sn,ie,pe,$,ge,ve),V.el=sn.el}if(de&&ns(de,ge),!Xt&&(qe=it&&it.onVnodeMounted)){const sn=V;ns(()=>To(qe,Ve,sn),ge)}(V.shapeFlag&256||Ve&&Xh(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&$.a&&ns($.a,ge),$.isMounted=!0,V=ie=pe=null}};$.scope.on();const Me=$.effect=new ND(Te);$.scope.off();const we=$.update=Me.run.bind(Me),tt=$.job=Me.runIfDirty.bind(Me);tt.i=$,tt.id=$.uid,Me.scheduler=()=>Z7(tt),jc($,!0),we()},te=($,V,ie)=>{V.component=$;const pe=$.vnode.props;$.vnode=V,$.next=null,$W($,V.props,pe,ie),HW($,V.children,ie),el(),S9($),tl()},ne=($,V,ie,pe,ge,ve,De,Te,Me=!1)=>{const we=$&&$.children,tt=$?$.shapeFlag:0,qe=V.children,{patchFlag:Xe,shapeFlag:it}=V;if(Xe>0){if(Xe&128){A(we,qe,ie,pe,ge,ve,De,Te,Me);return}else if(Xe&256){ye(we,qe,ie,pe,ge,ve,De,Te,Me);return}}it&8?(tt&16&&st(we,ge,ve),qe!==we&&u(ie,qe)):tt&16?it&16?A(we,qe,ie,pe,ge,ve,De,Te,Me):st(we,ge,ve,!0):(tt&8&&u(ie,""),it&16&&R(qe,ie,pe,ge,ve,De,Te,Me))},ye=($,V,ie,pe,ge,ve,De,Te,Me)=>{$=$||Uh,V=V||Uh;const we=$.length,tt=V.length,qe=Math.min(we,tt);let Xe;for(Xe=0;Xe<qe;Xe++){const it=V[Xe]=Me?Vl(V[Xe]):zo(V[Xe]);m($[Xe],it,ie,null,ge,ve,De,Te,Me)}we>tt?st($,ge,ve,!0,!1,qe):R(V,ie,pe,ge,ve,De,Te,Me,qe)},A=($,V,ie,pe,ge,ve,De,Te,Me)=>{let we=0;const tt=V.length;let qe=$.length-1,Xe=tt-1;for(;we<=qe&&we<=Xe;){const it=$[we],J=V[we]=Me?Vl(V[we]):zo(V[we]);if(uu(it,J))m(it,J,ie,null,ge,ve,De,Te,Me);else break;we++}for(;we<=qe&&we<=Xe;){const it=$[qe],J=V[Xe]=Me?Vl(V[Xe]):zo(V[Xe]);if(uu(it,J))m(it,J,ie,null,ge,ve,De,Te,Me);else break;qe--,Xe--}if(we>qe){if(we<=Xe){const it=Xe+1,J=it<tt?V[it].el:pe;for(;we<=Xe;)m(null,V[we]=Me?Vl(V[we]):zo(V[we]),ie,J,ge,ve,De,Te,Me),we++}}else if(we>Xe)for(;we<=qe;)he($[we],ge,ve,!0),we++;else{const it=we,J=we,de=new Map;for(we=J;we<=Xe;we++){const Ht=V[we]=Me?Vl(V[we]):zo(V[we]);Ht.key!=null&&de.set(Ht.key,we)}let Ve,lt=0;const gt=Xe-J+1;let Xt=!1,sn=0;const an=new Array(gt);for(we=0;we<gt;we++)an[we]=0;for(we=it;we<=qe;we++){const Ht=$[we];if(lt>=gt){he(Ht,ge,ve,!0);continue}let $t;if(Ht.key!=null)$t=de.get(Ht.key);else for(Ve=J;Ve<=Xe;Ve++)if(an[Ve-J]===0&&uu(Ht,V[Ve])){$t=Ve;break}$t===void 0?he(Ht,ge,ve,!0):(an[$t-J]=we+1,$t>=sn?sn=$t:Xt=!0,m(Ht,V[$t],ie,null,ge,ve,De,Te,Me),lt++)}const Yn=Xt?jW(an):Uh;for(Ve=Yn.length-1,we=gt-1;we>=0;we--){const Ht=J+we,$t=V[Ht],xe=V[Ht+1],B=Ht+1<tt?xe.el||AE(xe):pe;an[we]===0?m(null,$t,ie,B,ge,ve,De,Te,Me):Xt&&(Ve<0||we!==Yn[Ve]?fe($t,ie,B,2):Ve--)}}},fe=($,V,ie,pe,ge=null)=>{const{el:ve,type:De,transition:Te,children:Me,shapeFlag:we}=$;if(we&6){fe($.component.subTree,V,ie,pe);return}if(we&128){$.suspense.move(V,ie,pe);return}if(we&64){De.move($,V,ie,Ot);return}if(De===wt){r(ve,V,ie);for(let qe=0;qe<Me.length;qe++)fe(Me[qe],V,ie,pe);r($.anchor,V,ie);return}if(De===Vb){S($,V,ie);return}if(pe!==2&&we&1&&Te)if(pe===0)Te.beforeEnter(ve),r(ve,V,ie),ns(()=>Te.enter(ve),ge);else{const{leave:qe,delayLeave:Xe,afterLeave:it}=Te,J=()=>{$.ctx.isUnmounted?i(ve):r(ve,V,ie)},de=()=>{ve._isLeaving&&ve[Na](!0),qe(ve,()=>{J(),it&&it()})};Xe?Xe(ve,J,de):de()}else r(ve,V,ie)},he=($,V,ie,pe=!1,ge=!1)=>{const{type:ve,props:De,ref:Te,children:Me,dynamicChildren:we,shapeFlag:tt,patchFlag:qe,dirs:Xe,cacheIndex:it}=$;if(qe===-2&&(ge=!1),Te!=null&&(el(),$0(Te,null,ie,$,!0),tl()),it!=null&&(V.renderCache[it]=void 0),tt&256){V.ctx.deactivate($);return}const J=tt&1&&Xe,de=!Xh($);let Ve;if(de&&(Ve=De&&De.onVnodeBeforeUnmount)&&To(Ve,V,$),tt&6)je($.component,ie,pe);else{if(tt&128){$.suspense.unmount(ie,pe);return}J&&Wc($,null,V,"beforeUnmount"),tt&64?$.type.remove($,V,ie,Ot,pe):we&&!we.hasOnce&&(ve!==wt||qe>0&&qe&64)?st(we,V,ie,!1,!0):(ve===wt&&qe&384||!ge&&tt&16)&&st(Me,V,ie),pe&&P($)}(de&&(Ve=De&&De.onVnodeUnmounted)||J)&&ns(()=>{Ve&&To(Ve,V,$),J&&Wc($,null,V,"unmounted")},ie)},P=$=>{const{type:V,el:ie,anchor:pe,transition:ge}=$;if(V===wt){Ue(ie,pe);return}if(V===Vb){O($);return}const ve=()=>{i(ie),ge&&!ge.persisted&&ge.afterLeave&&ge.afterLeave()};if($.shapeFlag&1&&ge&&!ge.persisted){const{leave:De,delayLeave:Te}=ge,Me=()=>De(ie,ve);Te?Te($.el,ve,Me):Me()}else ve()},Ue=($,V)=>{let ie;for(;$!==V;)ie=f($),i($),$=ie;i(V)},je=($,V,ie)=>{const{bum:pe,scope:ge,job:ve,subTree:De,um:Te,m:Me,a:we}=$;P9(Me),P9(we),pe&&og(pe),ge.stop(),ve&&(ve.flags|=8,he(De,$,V,ie)),Te&&ns(Te,V),ns(()=>{$.isUnmounted=!0},V)},st=($,V,ie,pe=!1,ge=!1,ve=0)=>{for(let De=ve;De<$.length;De++)he($[De],V,ie,pe,ge)},dt=$=>{if($.shapeFlag&6)return dt($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const V=f($.anchor||$.el),ie=V&&V[sW];return ie?f(ie):V};let bt=!1;const Nt=($,V,ie)=>{let pe;$==null?V._vnode&&(he(V._vnode,null,null,!0),pe=V._vnode.component):m(V._vnode||null,$,V,null,null,null,ie),V._vnode=$,bt||(bt=!0,S9(pe),JD(),bt=!1)},Ot={p:m,um:he,m:fe,r:P,mt:G,mc:R,pc:ne,pbc:I,n:dt,o:t};return{render:Nt,hydrate:void 0,createApp:_W(Nt)}}function Hb({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function jc({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function WW(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ME(t,e,n=!1){const r=t.children,i=e.children;if(Mt(r)&&Mt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Vl(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&ME(o,a)),a.type===t2&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=s+(t.type===wt?1:0)),a.type===Yr&&!a.el&&(a.el=o.el)}}function jW(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function TE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:TE(e)}function P9(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function AE(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?AE(e.subTree):null}const _E=t=>t.__isSuspense;function YW(t,e){e&&e.pendingBranch?Mt(t)?e.effects.push(...t):e.effects.push(t):eW(t)}const wt=Symbol.for("v-fgt"),t2=Symbol.for("v-txt"),Yr=Symbol.for("v-cmt"),Vb=Symbol.for("v-stc"),z0=[];let us=null;function me(t=!1){z0.push(us=t?null:[])}function QW(){z0.pop(),us=z0[z0.length-1]||null}let yp=1;function Tv(t,e=!1){yp+=t,t<0&&us&&e&&(us.hasOnce=!0)}function DE(t){return t.dynamicChildren=yp>0?us||Uh:null,QW(),yp>0&&us&&us.push(t),t}function Ie(t,e,n,r,i,s){return DE(oe(t,e,n,r,i,s,!0))}function $n(t,e,n,r,i){return DE(_e(t,e,n,r,i,!0))}function bp(t){return t?t.__v_isVNode===!0:!1}function uu(t,e){return t.type===e.type&&t.key===e.key}const EE=({key:t})=>t??null,lg=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Jn(t)||yn(t)||Pt(t)?{i:Br,r:t,k:e,f:!!n}:t:null);function oe(t,e=null,n=null,r=0,i=null,s=t===wt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&EE(e),ref:e&&lg(e),scopeId:tE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Br};return a?(sx(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Jn(n)?8:16),yp>0&&!o&&us&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&us.push(l),l}const _e=UW;function UW(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===hE)&&(t=Yr),bp(t)){const a=uc(t,e,!0);return n&&sx(a,n),yp>0&&!s&&us&&(a.shapeFlag&6?us[us.indexOf(t)]=a:us.push(a)),a.patchFlag=-2,a}if(rj(t)&&(t=t.__vccOpts),e){e=Av(e);let{class:a,style:l}=e;a&&!Jn(a)&&(e.class=Lt(a)),Pn(l)&&(Gy(l)&&!Mt(l)&&(l=gr({},l)),e.style=fr(l))}const o=Jn(t)?1:_E(t)?128:rE(t)?64:Pn(t)?4:Pt(t)?2:0;return oe(t,e,n,r,i,o,s,!0)}function Av(t){return t?Gy(t)||wE(t)?gr({},t):t:null}function uc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?ah(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&EE(c),ref:e&&e.ref?n&&s?Mt(s)?s.concat(lg(e)):[s,lg(e)]:lg(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==wt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&uc(t.ssContent),ssFallback:t.ssFallback&&uc(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&vp(u,l.clone(u)),u}function Qa(t=" ",e=0){return _e(t2,null,t,e)}function hn(t="",e=!1){return e?(me(),$n(Yr,null,t)):_e(Yr,null,t)}function zo(t){return t==null||typeof t=="boolean"?_e(Yr):Mt(t)?_e(wt,null,t.slice()):bp(t)?Vl(t):_e(t2,null,String(t))}function Vl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:uc(t)}function sx(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Mt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),sx(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!wE(e)?e._ctx=Br:i===3&&Br&&(Br.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pt(e)?(e={default:e,_ctx:Br},n=32):(e=String(e),r&64?(n=16,e=[Qa(e)]):n=8);t.children=e,t.shapeFlag|=n}function ah(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Lt([e.class,r.class]));else if(i==="style")e.style=fr([e.style,r.style]);else if(Hy(i)){const s=e[i],o=r[i];o&&s!==o&&!(Mt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function To(t,e,n,r=null){ho(t,e,7,[n,r])}const GW=mE();let KW=0;function XW(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||GW,s={uid:KW++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yq(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kE(r,i),emitsOptions:vE(r,i),emit:null,emitted:null,propsDefaults:un,inheritAttrs:r.inheritAttrs,ctx:un,data:un,props:un,attrs:un,slots:un,refs:un,setupState:un,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=DW.bind(null,s),t.ce&&t.ce(s),s}let Qr=null;const ox=()=>Qr||Br;let _v,uw;{const t=Yy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};_v=e("__VUE_INSTANCE_SETTERS__",n=>Qr=n),uw=e("__VUE_SSR_SETTERS__",n=>wp=n)}const pm=t=>{const e=Qr;return _v(t),t.scope.on(),()=>{t.scope.off(),_v(e)}},N9=()=>{Qr&&Qr.scope.off(),_v(null)};function IE(t){return t.vnode.shapeFlag&4}let wp=!1;function ZW(t,e=!1,n=!1){e&&uw(e);const{props:r,children:i}=t.vnode,s=IE(t);LW(t,r,s,e),FW(t,i,n||e);const o=s?JW(t,e):void 0;return e&&uw(!1),o}function JW(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,kW);const{setup:r}=n;if(r){el();const i=t.setupContext=r.length>1?tj(t):null,s=pm(t),o=fm(r,t,0,[t.props,i]),a=TD(o);if(tl(),s(),(a||t.sp)&&!Xh(t)&&cE(t),a){if(o.then(N9,N9),e)return o.then(l=>{R9(t,l)}).catch(l=>{Ky(l,t,0)});t.asyncDep=o}else R9(t,o)}else PE(t)}function R9(t,e,n){Pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pn(e)&&(t.setupState=GD(e)),PE(t)}function PE(t,e,n){const r=t.type;t.render||(t.render=r.render||Xo);{const i=pm(t);el();try{SW(t)}finally{tl(),i()}}}const ej={get(t,e){return jr(t,"get",""),t[e]}};function tj(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ej),slots:t.slots,emit:t.emit,expose:e}}function n2(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(GD(Fq(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in B0)return B0[n](t)},has(e,n){return n in e||n in B0}})):t.proxy}function nj(t,e=!0){return Pt(t)?t.displayName||t.name:t.name||e&&t.__name}function rj(t){return Pt(t)&&"__vccOpts"in t}const ue=(t,e)=>Gq(t,e,wp);function le(t,e,n){try{Tv(-1);const r=arguments.length;return r===2?Pn(e)&&!Mt(e)?bp(e)?_e(t,null,[e]):_e(t,e):_e(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&bp(n)&&(n=[n]),_e(t,e,n))}finally{Tv(1)}}const ij="3.5.27";let hw;const L9=typeof window<"u"&&window.trustedTypes;if(L9)try{hw=L9.createPolicy("vue",{createHTML:t=>t})}catch{}const NE=hw?t=>hw.createHTML(t):t=>t,sj="http://www.w3.org/2000/svg",oj="http://www.w3.org/1998/Math/MathML",Ia=typeof document<"u"?document:null,$9=Ia&&Ia.createElement("template"),aj={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Ia.createElementNS(sj,t):e==="mathml"?Ia.createElementNS(oj,t):n?Ia.createElement(t,{is:n}):Ia.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Ia.createTextNode(t),createComment:t=>Ia.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ia.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{$9.innerHTML=NE(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=$9.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Al="transition",Cd="animation",xp=Symbol("_vtc"),RE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lj=gr({},iE,RE),cj=t=>(t.displayName="Transition",t.props=lj,t),ax=cj((t,{slots:e})=>le(lW,uj(t),e)),Yc=(t,e=[])=>{Mt(t)?t.forEach(n=>n(...e)):t&&t(...e)},B9=t=>t?Mt(t)?t.some(e=>e.length>1):t.length>1:!1;function uj(t){const e={};for(const E in t)E in RE||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,p=hj(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:S,onLeave:O,onLeaveCancelled:k,onBeforeAppear:C=v,onAppear:T=b,onAppearCancelled:R=S}=e,L=(E,ee,G,W)=>{E._enterCancelled=W,Qc(E,ee?u:a),Qc(E,ee?c:o),G&&G()},I=(E,ee)=>{E._isLeaving=!1,Qc(E,h),Qc(E,d),Qc(E,f),ee&&ee()},F=E=>(ee,G)=>{const W=E?T:b,X=()=>L(ee,E,G);Yc(W,[ee,X]),z9(()=>{Qc(ee,E?l:s),ka(ee,E?u:a),B9(W)||F9(ee,r,m,X)})};return gr(e,{onBeforeEnter(E){Yc(v,[E]),ka(E,s),ka(E,o)},onBeforeAppear(E){Yc(C,[E]),ka(E,l),ka(E,c)},onEnter:F(!1),onAppear:F(!0),onLeave(E,ee){E._isLeaving=!0;const G=()=>I(E,ee);ka(E,h),E._enterCancelled?(ka(E,f),q9(E)):(q9(E),ka(E,f)),z9(()=>{E._isLeaving&&(Qc(E,h),ka(E,d),B9(O)||F9(E,r,g,G))}),Yc(O,[E,G])},onEnterCancelled(E){L(E,!1,void 0,!0),Yc(S,[E])},onAppearCancelled(E){L(E,!0,void 0,!0),Yc(R,[E])},onLeaveCancelled(E){I(E),Yc(k,[E])}})}function hj(t){if(t==null)return null;if(Pn(t))return[qb(t.enter),qb(t.leave)];{const e=qb(t);return[e,e]}}function qb(t){return hq(t)}function ka(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[xp]||(t[xp]=new Set)).add(e)}function Qc(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[xp];n&&(n.delete(e),n.size||(t[xp]=void 0))}function z9(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let fj=0;function F9(t,e,n,r){const i=t._endId=++fj,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=dj(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,f),s()},f=d=>{d.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,f)}function dj(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${Al}Delay`),s=r(`${Al}Duration`),o=H9(i,s),a=r(`${Cd}Delay`),l=r(`${Cd}Duration`),c=H9(a,l);let u=null,h=0,f=0;e===Al?o>0&&(u=Al,h=o,f=s.length):e===Cd?c>0&&(u=Cd,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?Al:Cd:null,f=u?u===Al?s.length:l.length:0);const d=u===Al&&/\b(?:transform|all)(?:,|$)/.test(r(`${Al}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:d}}function H9(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>V9(n)+V9(t[r])))}function V9(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function q9(t){return(t?t.ownerDocument:document).body.offsetHeight}function pj(t,e,n){const r=t[xp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const W9=Symbol("_vod"),mj=Symbol("_vsh"),gj=Symbol(""),vj=/(?:^|;)\s*display\s*:/;function yj(t,e,n){const r=t.style,i=Jn(n);let s=!1;if(n&&!i){if(e)if(Jn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&cg(r,a,"")}else for(const o in e)n[o]==null&&cg(r,o,"");for(const o in n)o==="display"&&(s=!0),cg(r,o,n[o])}else if(i){if(e!==n){const o=r[gj];o&&(n+=";"+o),r.cssText=n,s=vj.test(n)}}else e&&t.removeAttribute("style");W9 in t&&(t[W9]=s?r.display:"",t[mj]&&(r.display="none"))}const j9=/\s*!important$/;function cg(t,e,n){if(Mt(n))n.forEach(r=>cg(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=bj(t,e);j9.test(n)?t.setProperty(vl(r),n.replace(j9,""),"important"):t[r]=n}}const Y9=["Webkit","Moz","ms"],Wb={};function bj(t,e){const n=Wb[e];if(n)return n;let r=gs(e);if(r!=="filter"&&r in t)return Wb[e]=r;r=jy(r);for(let i=0;i<Y9.length;i++){const s=Y9[i]+r;if(s in t)return Wb[e]=s}return e}const Q9="http://www.w3.org/1999/xlink";function U9(t,e,n,r,i,s=vq(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Q9,e.slice(6,e.length)):t.setAttributeNS(Q9,e,n):n==null||s&&!ED(n)?t.removeAttribute(e):t.setAttribute(e,s?"":gl(n)?String(n):n)}function G9(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?NE(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=ED(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Th(t,e,n,r){t.addEventListener(e,n,r)}function wj(t,e,n,r){t.removeEventListener(e,n,r)}const K9=Symbol("_vei");function xj(t,e,n,r,i=null){const s=t[K9]||(t[K9]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=kj(e);if(r){const c=s[e]=Oj(r,i);Th(t,a,c,l)}else o&&(wj(t,a,o,l),s[e]=void 0)}}const X9=/(?:Once|Passive|Capture)$/;function kj(t){let e;if(X9.test(t)){e={};let r;for(;r=t.match(X9);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):vl(t.slice(2)),e]}let jb=0;const Sj=Promise.resolve(),Cj=()=>jb||(Sj.then(()=>jb=0),jb=Date.now());function Oj(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ho(Mj(r,n.value),e,5,[r])};return n.value=t,n.attached=Cj(),n}function Mj(t,e){if(Mt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Z9=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Tj=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?pj(t,r,o):e==="style"?yj(t,n,r):Hy(e)?W7(e)||xj(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Aj(t,e,r,o))?(G9(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&U9(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Jn(r))?G9(t,gs(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),U9(t,e,r,o))};function Aj(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Z9(e)&&Pt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Z9(e)&&Jn(n)?!1:e in t}const J9=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Mt(e)?n=>og(e,n):e};function _j(t){t.target.composing=!0}function eS(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Yb=Symbol("_assign");function tS(t,e,n){return e&&(t=t.trim()),n&&(t=Y7(t)),t}const Bu={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Yb]=J9(i);const s=r||i.props&&i.props.type==="number";Th(t,e?"change":"input",o=>{o.target.composing||t[Yb](tS(t.value,n,s))}),(n||s)&&Th(t,"change",()=>{t.value=tS(t.value,n,s)}),e||(Th(t,"compositionstart",_j),Th(t,"compositionend",eS),Th(t,"change",eS))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Yb]=J9(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Y7(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Dj=["ctrl","shift","alt","meta"],Ej={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Dj.some(n=>t[`${n}Key`]&&!e.includes(n))},kp=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=Ej[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},Ij={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xf=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(i=>{if(!("key"in i))return;const s=vl(i.key);if(e.some(o=>o===s||Ij[o]===s))return t(i)}))},Pj=gr({patchProp:Tj},aj);let nS;function Nj(){return nS||(nS=VW(Pj))}const Qs=((...t)=>{const e=Nj().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Lj(r);if(!i)return;const s=e._component;!Pt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Rj(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function Rj(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Lj(t){return Jn(t)?document.querySelector(t):t}const lx=Symbol("editorInfoCtxKey");function $j(){const{dom:t,loading:e,editor:n,editorFactory:r}=Rs(lx,{}),i=ae();return Dr(()=>{if(!t.value)return;const s=r.value(t.value);s&&(e.value=!0,i.value=s,s.create().then(o=>{n.value=o}).finally(()=>{e.value=!1}).catch(console.error))}),la(()=>{i.value?.destroy().catch(console.error)}),t}const LE=xt({name:"Milkdown",setup:()=>{const t=$j();return()=>_e("div",{"data-milkdown-root":!0,ref:t},null)}}),fw=xt({name:"MilkdownProvider",setup:(t,{slots:e})=>(sh(lx,{loading:ae(!0),dom:ae(null),editor:ae(void 0),editorFactory:ae(void 0)}),()=>_e(wt,null,[e.default?.()]))});function $E(t){const{editorFactory:e,loading:n,editor:r}=Rs(lx);return e.value=t,{loading:n,get:()=>r.value}}const cx=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Bj={},zj={class:"logo"};function Fj(t,e){return me(),Ie("div",zj,[...e[0]||(e[0]=[oe("span",null,"Miki",-1)])])}const rS=cx(Bj,[["render",Fj]]);function Hj(){return{_listeners:{},on:function(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)},off:function(t,e){if(this._listeners[t]){const n=this._listeners[t].indexOf(e);n>-1&&this._listeners[t].splice(n,1)}},emit:function(t,e){this._listeners[t]&&this._listeners[t].forEach(n=>{n(e)})},clear:function(t){t?this._listeners[t]=[]:this._listeners={}}}}const Qt=Hj();var t1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ux(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ug={exports:{}},Vj=ug.exports,iS;function qj(){return iS||(iS=1,(function(t,e){(function(n,r){t.exports=r()})(Vj,(function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",f="quarter",d="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(G){var W=["th","st","nd","rd"],X=G%100;return"["+G+(W[(X-20)%10]||W[X]||W[0])+"]"}},S=function(G,W,X){var te=String(G);return!te||te.length>=W?G:""+Array(W+1-te.length).join(X)+G},O={s:S,z:function(G){var W=-G.utcOffset(),X=Math.abs(W),te=Math.floor(X/60),ne=X%60;return(W<=0?"+":"-")+S(te,2,"0")+":"+S(ne,2,"0")},m:function G(W,X){if(W.date()<X.date())return-G(X,W);var te=12*(X.year()-W.year())+(X.month()-W.month()),ne=W.clone().add(te,h),ye=X-ne<0,A=W.clone().add(te+(ye?-1:1),h);return+(-(te+(X-ne)/(ye?ne-A:A-ne))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:h,y:d,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:f}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return G===void 0}},k="en",C={};C[k]=b;var T="$isDayjsObject",R=function(G){return G instanceof E||!(!G||!G[T])},L=function G(W,X,te){var ne;if(!W)return k;if(typeof W=="string"){var ye=W.toLowerCase();C[ye]&&(ne=ye),X&&(C[ye]=X,ne=ye);var A=W.split("-");if(!ne&&A.length>1)return G(A[0])}else{var fe=W.name;C[fe]=W,ne=fe}return!te&&ne&&(k=ne),ne||!te&&k},I=function(G,W){if(R(G))return G.clone();var X=typeof W=="object"?W:{};return X.date=G,X.args=arguments,new E(X)},F=O;F.l=L,F.i=R,F.w=function(G,W){return I(G,{locale:W.$L,utc:W.$u,x:W.$x,$offset:W.$offset})};var E=(function(){function G(X){this.$L=L(X.locale,null,!0),this.parse(X),this.$x=this.$x||X.x||{},this[T]=!0}var W=G.prototype;return W.parse=function(X){this.$d=(function(te){var ne=te.date,ye=te.utc;if(ne===null)return new Date(NaN);if(F.u(ne))return new Date;if(ne instanceof Date)return new Date(ne);if(typeof ne=="string"&&!/Z$/i.test(ne)){var A=ne.match(g);if(A){var fe=A[2]-1||0,he=(A[7]||"0").substring(0,3);return ye?new Date(Date.UTC(A[1],fe,A[3]||1,A[4]||0,A[5]||0,A[6]||0,he)):new Date(A[1],fe,A[3]||1,A[4]||0,A[5]||0,A[6]||0,he)}}return new Date(ne)})(X),this.init()},W.init=function(){var X=this.$d;this.$y=X.getFullYear(),this.$M=X.getMonth(),this.$D=X.getDate(),this.$W=X.getDay(),this.$H=X.getHours(),this.$m=X.getMinutes(),this.$s=X.getSeconds(),this.$ms=X.getMilliseconds()},W.$utils=function(){return F},W.isValid=function(){return this.$d.toString()!==m},W.isSame=function(X,te){var ne=I(X);return this.startOf(te)<=ne&&ne<=this.endOf(te)},W.isAfter=function(X,te){return I(X)<this.startOf(te)},W.isBefore=function(X,te){return this.endOf(te)<I(X)},W.$g=function(X,te,ne){return F.u(X)?this[te]:this.set(ne,X)},W.unix=function(){return Math.floor(this.valueOf()/1e3)},W.valueOf=function(){return this.$d.getTime()},W.startOf=function(X,te){var ne=this,ye=!!F.u(te)||te,A=F.p(X),fe=function(Nt,Ot){var Kt=F.w(ne.$u?Date.UTC(ne.$y,Ot,Nt):new Date(ne.$y,Ot,Nt),ne);return ye?Kt:Kt.endOf(c)},he=function(Nt,Ot){return F.w(ne.toDate()[Nt].apply(ne.toDate("s"),(ye?[0,0,0,0]:[23,59,59,999]).slice(Ot)),ne)},P=this.$W,Ue=this.$M,je=this.$D,st="set"+(this.$u?"UTC":"");switch(A){case d:return ye?fe(1,0):fe(31,11);case h:return ye?fe(1,Ue):fe(0,Ue+1);case u:var dt=this.$locale().weekStart||0,bt=(P<dt?P+7:P)-dt;return fe(ye?je-bt:je+(6-bt),Ue);case c:case p:return he(st+"Hours",0);case l:return he(st+"Minutes",1);case a:return he(st+"Seconds",2);case o:return he(st+"Milliseconds",3);default:return this.clone()}},W.endOf=function(X){return this.startOf(X,!1)},W.$set=function(X,te){var ne,ye=F.p(X),A="set"+(this.$u?"UTC":""),fe=(ne={},ne[c]=A+"Date",ne[p]=A+"Date",ne[h]=A+"Month",ne[d]=A+"FullYear",ne[l]=A+"Hours",ne[a]=A+"Minutes",ne[o]=A+"Seconds",ne[s]=A+"Milliseconds",ne)[ye],he=ye===c?this.$D+(te-this.$W):te;if(ye===h||ye===d){var P=this.clone().set(p,1);P.$d[fe](he),P.init(),this.$d=P.set(p,Math.min(this.$D,P.daysInMonth())).$d}else fe&&this.$d[fe](he);return this.init(),this},W.set=function(X,te){return this.clone().$set(X,te)},W.get=function(X){return this[F.p(X)]()},W.add=function(X,te){var ne,ye=this;X=Number(X);var A=F.p(te),fe=function(Ue){var je=I(ye);return F.w(je.date(je.date()+Math.round(Ue*X)),ye)};if(A===h)return this.set(h,this.$M+X);if(A===d)return this.set(d,this.$y+X);if(A===c)return fe(1);if(A===u)return fe(7);var he=(ne={},ne[a]=r,ne[l]=i,ne[o]=n,ne)[A]||1,P=this.$d.getTime()+X*he;return F.w(P,this)},W.subtract=function(X,te){return this.add(-1*X,te)},W.format=function(X){var te=this,ne=this.$locale();if(!this.isValid())return ne.invalidDate||m;var ye=X||"YYYY-MM-DDTHH:mm:ssZ",A=F.z(this),fe=this.$H,he=this.$m,P=this.$M,Ue=ne.weekdays,je=ne.months,st=ne.meridiem,dt=function(Ot,Kt,$,V){return Ot&&(Ot[Kt]||Ot(te,ye))||$[Kt].slice(0,V)},bt=function(Ot){return F.s(fe%12||12,Ot,"0")},Nt=st||function(Ot,Kt,$){var V=Ot<12?"AM":"PM";return $?V.toLowerCase():V};return ye.replace(v,(function(Ot,Kt){return Kt||(function($){switch($){case"YY":return String(te.$y).slice(-2);case"YYYY":return F.s(te.$y,4,"0");case"M":return P+1;case"MM":return F.s(P+1,2,"0");case"MMM":return dt(ne.monthsShort,P,je,3);case"MMMM":return dt(je,P);case"D":return te.$D;case"DD":return F.s(te.$D,2,"0");case"d":return String(te.$W);case"dd":return dt(ne.weekdaysMin,te.$W,Ue,2);case"ddd":return dt(ne.weekdaysShort,te.$W,Ue,3);case"dddd":return Ue[te.$W];case"H":return String(fe);case"HH":return F.s(fe,2,"0");case"h":return bt(1);case"hh":return bt(2);case"a":return Nt(fe,he,!0);case"A":return Nt(fe,he,!1);case"m":return String(he);case"mm":return F.s(he,2,"0");case"s":return String(te.$s);case"ss":return F.s(te.$s,2,"0");case"SSS":return F.s(te.$ms,3,"0");case"Z":return A}return null})(Ot)||A.replace(":","")}))},W.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},W.diff=function(X,te,ne){var ye,A=this,fe=F.p(te),he=I(X),P=(he.utcOffset()-this.utcOffset())*r,Ue=this-he,je=function(){return F.m(A,he)};switch(fe){case d:ye=je()/12;break;case h:ye=je();break;case f:ye=je()/3;break;case u:ye=(Ue-P)/6048e5;break;case c:ye=(Ue-P)/864e5;break;case l:ye=Ue/i;break;case a:ye=Ue/r;break;case o:ye=Ue/n;break;default:ye=Ue}return ne?ye:F.a(ye)},W.daysInMonth=function(){return this.endOf(h).$D},W.$locale=function(){return C[this.$L]},W.locale=function(X,te){if(!X)return this.$L;var ne=this.clone(),ye=L(X,te,!0);return ye&&(ne.$L=ye),ne},W.clone=function(){return F.w(this.$d,this)},W.toDate=function(){return new Date(this.valueOf())},W.toJSON=function(){return this.isValid()?this.toISOString():null},W.toISOString=function(){return this.$d.toISOString()},W.toString=function(){return this.$d.toUTCString()},G})(),ee=E.prototype;return I.prototype=ee,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",d],["$D",p]].forEach((function(G){ee[G[1]]=function(W){return this.$g(W,G[0],G[1])}})),I.extend=function(G,W){return G.$i||(G(W,E,I),G.$i=!0),I},I.locale=L,I.isDayjs=R,I.unix=function(G){return I(1e3*G)},I.en=C[k],I.Ls=C,I.p={},I}))})(ug)),ug.exports}var Wj=qj();const hc=ux(Wj);function n1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qb={exports:{}};var sS;function jj(){return sS||(sS=1,(function(t,e){(function(n){t.exports=n()})(function(){return(function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var h=typeof n1=="function"&&n1;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var d=i[c]={exports:{}};r[c][0].call(d.exports,function(p){var m=r[c][1][p];return o(m||p)},d,d.exports,n,r,i,s)}return i[c].exports}for(var a=typeof n1=="function"&&n1,l=0;l<s.length;l++)o(s[l]);return o})({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,c=new o(p),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),a=function(){u.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=p,a=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var f,d=[];function p(){f=!0;for(var g,v,b=d.length;b;){for(v=d,d=[],g=-1;++g<b;)v[g]();b=d.length}f=!1}r.exports=m;function m(g){d.push(g)===1&&!f&&a()}}).call(this,typeof t1<"u"?t1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];r.exports=h;function h(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,k!==o&&m(this,k)}h.prototype.catch=function(k){return this.then(null,k)},h.prototype.then=function(k,C){if(typeof k!="function"&&this.state===c||typeof C!="function"&&this.state===l)return this;var T=new this.constructor(o);if(this.state!==u){var R=this.state===c?k:C;d(T,R,this.outcome)}else this.queue.push(new f(T,k,C));return T};function f(k,C,T){this.promise=k,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(k){a.resolve(this.promise,k)},f.prototype.otherCallFulfilled=function(k){d(this.promise,this.onFulfilled,k)},f.prototype.callRejected=function(k){a.reject(this.promise,k)},f.prototype.otherCallRejected=function(k){d(this.promise,this.onRejected,k)};function d(k,C,T){s(function(){var R;try{R=C(T)}catch(L){return a.reject(k,L)}R===k?a.reject(k,new TypeError("Cannot resolve promise with itself")):a.resolve(k,R)})}a.resolve=function(k,C){var T=g(p,C);if(T.status==="error")return a.reject(k,T.value);var R=T.value;if(R)m(k,R);else{k.state=c,k.outcome=C;for(var L=-1,I=k.queue.length;++L<I;)k.queue[L].callFulfilled(C)}return k},a.reject=function(k,C){k.state=l,k.outcome=C;for(var T=-1,R=k.queue.length;++T<R;)k.queue[T].callRejected(C);return k};function p(k){var C=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof C=="function")return function(){C.apply(k,arguments)}}function m(k,C){var T=!1;function R(E){T||(T=!0,a.reject(k,E))}function L(E){T||(T=!0,a.resolve(k,E))}function I(){C(L,R)}var F=g(I);F.status==="error"&&R(F.value)}function g(k,C){var T={};try{T.value=k(C),T.status="success"}catch(R){T.status="error",T.value=R}return T}h.resolve=v;function v(k){return k instanceof this?k:a.resolve(new this(o),k)}h.reject=b;function b(k){var C=new this(o);return a.reject(C,k)}h.all=S;function S(k){var C=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=k.length,R=!1;if(!T)return this.resolve([]);for(var L=new Array(T),I=0,F=-1,E=new this(o);++F<T;)ee(k[F],F);return E;function ee(G,W){C.resolve(G).then(X,function(te){R||(R=!0,a.reject(E,te))});function X(te){L[W]=te,++I===T&&!R&&(R=!0,a.resolve(E,L))}}}h.race=O;function O(k){var C=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=k.length,R=!1;if(!T)return this.resolve([]);for(var L=-1,I=new this(o);++L<T;)F(k[L]);return I;function F(E){C.resolve(E).then(function(ee){R||(R=!0,a.resolve(I,ee))},function(ee){R||(R=!0,a.reject(I,ee))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof t1<"u"?t1:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};function o(D,q){if(!(D instanceof q))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function c(){try{if(!l||!l.open)return!1;var D=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),q=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!D||q)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(D,q){D=D||[],q=q||{};try{return new Blob(D,q)}catch(Q){if(Q.name!=="TypeError")throw Q;for(var N=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,K=new N,Z=0;Z<D.length;Z+=1)K.append(D[Z]);return K.getBlob(q.type)}}typeof Promise>"u"&&n(3);var h=Promise;function f(D,q){q&&D.then(function(N){q(null,N)},function(N){q(N)})}function d(D,q,N){typeof q=="function"&&D.then(q),typeof N=="function"&&D.catch(N)}function p(D){return typeof D!="string"&&(console.warn(D+" used as a key, but it is not a string."),D=String(D)),D}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,b={},S=Object.prototype.toString,O="readonly",k="readwrite";function C(D){for(var q=D.length,N=new ArrayBuffer(q),K=new Uint8Array(N),Z=0;Z<q;Z++)K[Z]=D.charCodeAt(Z);return N}function T(D){return new h(function(q){var N=D.transaction(g,k),K=u([""]);N.objectStore(g).put(K,"key"),N.onabort=function(Z){Z.preventDefault(),Z.stopPropagation(),q(!1)},N.oncomplete=function(){var Z=navigator.userAgent.match(/Chrome\/(\d+)/),Q=navigator.userAgent.match(/Edge\//);q(Q||!Z||parseInt(Z[1],10)>=43)}}).catch(function(){return!1})}function R(D){return typeof v=="boolean"?h.resolve(v):T(D).then(function(q){return v=q,v})}function L(D){var q=b[D.name],N={};N.promise=new h(function(K,Z){N.resolve=K,N.reject=Z}),q.deferredOperations.push(N),q.dbReady?q.dbReady=q.dbReady.then(function(){return N.promise}):q.dbReady=N.promise}function I(D){var q=b[D.name],N=q.deferredOperations.pop();if(N)return N.resolve(),N.promise}function F(D,q){var N=b[D.name],K=N.deferredOperations.pop();if(K)return K.reject(q),K.promise}function E(D,q){return new h(function(N,K){if(b[D.name]=b[D.name]||he(),D.db)if(q)L(D),D.db.close();else return N(D.db);var Z=[D.name];q&&Z.push(D.version);var Q=l.open.apply(l,Z);q&&(Q.onupgradeneeded=function(ke){var Pe=Q.result;try{Pe.createObjectStore(D.storeName),ke.oldVersion<=1&&Pe.createObjectStore(g)}catch(Ne){if(Ne.name==="ConstraintError")console.warn('The database "'+D.name+'" has been upgraded from version '+ke.oldVersion+" to version "+ke.newVersion+', but the storage "'+D.storeName+'" already exists.');else throw Ne}}),Q.onerror=function(ke){ke.preventDefault(),K(Q.error)},Q.onsuccess=function(){var ke=Q.result;ke.onversionchange=function(Pe){Pe.target.close()},N(ke),I(D)}})}function ee(D){return E(D,!1)}function G(D){return E(D,!0)}function W(D,q){if(!D.db)return!0;var N=!D.db.objectStoreNames.contains(D.storeName),K=D.version<D.db.version,Z=D.version>D.db.version;if(K&&(D.version!==q&&console.warn('The database "'+D.name+`" can't be downgraded from version `+D.db.version+" to version "+D.version+"."),D.version=D.db.version),Z||N){if(N){var Q=D.db.version+1;Q>D.version&&(D.version=Q)}return!0}return!1}function X(D){return new h(function(q,N){var K=new FileReader;K.onerror=N,K.onloadend=function(Z){var Q=btoa(Z.target.result||"");q({__local_forage_encoded_blob:!0,data:Q,type:D.type})},K.readAsBinaryString(D)})}function te(D){var q=C(atob(D.data));return u([q],{type:D.type})}function ne(D){return D&&D.__local_forage_encoded_blob}function ye(D){var q=this,N=q._initReady().then(function(){var K=b[q._dbInfo.name];if(K&&K.dbReady)return K.dbReady});return d(N,D,D),N}function A(D){L(D);for(var q=b[D.name],N=q.forages,K=0;K<N.length;K++){var Z=N[K];Z._dbInfo.db&&(Z._dbInfo.db.close(),Z._dbInfo.db=null)}return D.db=null,ee(D).then(function(Q){return D.db=Q,W(D)?G(D):Q}).then(function(Q){D.db=q.db=Q;for(var ke=0;ke<N.length;ke++)N[ke]._dbInfo.db=Q}).catch(function(Q){throw F(D,Q),Q})}function fe(D,q,N,K){K===void 0&&(K=1);try{var Z=D.db.transaction(D.storeName,q);N(null,Z)}catch(Q){if(K>0&&(!D.db||Q.name==="InvalidStateError"||Q.name==="NotFoundError"))return h.resolve().then(function(){if(!D.db||Q.name==="NotFoundError"&&!D.db.objectStoreNames.contains(D.storeName)&&D.version<=D.db.version)return D.db&&(D.version=D.db.version+1),G(D)}).then(function(){return A(D).then(function(){fe(D,q,N,K-1)})}).catch(N);N(Q)}}function he(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(D){var q=this,N={db:null};if(D)for(var K in D)N[K]=D[K];var Z=b[N.name];Z||(Z=he(),b[N.name]=Z),Z.forages.push(q),q._initReady||(q._initReady=q.ready,q.ready=ye);var Q=[];function ke(){return h.resolve()}for(var Pe=0;Pe<Z.forages.length;Pe++){var Ne=Z.forages[Pe];Ne!==q&&Q.push(Ne._initReady().catch(ke))}var $e=Z.forages.slice(0);return h.all(Q).then(function(){return N.db=Z.db,ee(N)}).then(function(We){return N.db=We,W(N,q._defaultConfig.version)?G(N):We}).then(function(We){N.db=Z.db=We,q._dbInfo=N;for(var He=0;He<$e.length;He++){var Be=$e[He];Be!==q&&(Be._dbInfo.db=N.db,Be._dbInfo.version=N.version)}})}function Ue(D,q){var N=this;D=p(D);var K=new h(function(Z,Q){N.ready().then(function(){fe(N._dbInfo,O,function(ke,Pe){if(ke)return Q(ke);try{var Ne=Pe.objectStore(N._dbInfo.storeName),$e=Ne.get(D);$e.onsuccess=function(){var We=$e.result;We===void 0&&(We=null),ne(We)&&(We=te(We)),Z(We)},$e.onerror=function(){Q($e.error)}}catch(We){Q(We)}})}).catch(Q)});return f(K,q),K}function je(D,q){var N=this,K=new h(function(Z,Q){N.ready().then(function(){fe(N._dbInfo,O,function(ke,Pe){if(ke)return Q(ke);try{var Ne=Pe.objectStore(N._dbInfo.storeName),$e=Ne.openCursor(),We=1;$e.onsuccess=function(){var He=$e.result;if(He){var Be=He.value;ne(Be)&&(Be=te(Be));var Ye=D(Be,He.key,We++);Ye!==void 0?Z(Ye):He.continue()}else Z()},$e.onerror=function(){Q($e.error)}}catch(He){Q(He)}})}).catch(Q)});return f(K,q),K}function st(D,q,N){var K=this;D=p(D);var Z=new h(function(Q,ke){var Pe;K.ready().then(function(){return Pe=K._dbInfo,S.call(q)==="[object Blob]"?R(Pe.db).then(function(Ne){return Ne?q:X(q)}):q}).then(function(Ne){fe(K._dbInfo,k,function($e,We){if($e)return ke($e);try{var He=We.objectStore(K._dbInfo.storeName);Ne===null&&(Ne=void 0);var Be=He.put(Ne,D);We.oncomplete=function(){Ne===void 0&&(Ne=null),Q(Ne)},We.onabort=We.onerror=function(){var Ye=Be.error?Be.error:Be.transaction.error;ke(Ye)}}catch(Ye){ke(Ye)}})}).catch(ke)});return f(Z,N),Z}function dt(D,q){var N=this;D=p(D);var K=new h(function(Z,Q){N.ready().then(function(){fe(N._dbInfo,k,function(ke,Pe){if(ke)return Q(ke);try{var Ne=Pe.objectStore(N._dbInfo.storeName),$e=Ne.delete(D);Pe.oncomplete=function(){Z()},Pe.onerror=function(){Q($e.error)},Pe.onabort=function(){var We=$e.error?$e.error:$e.transaction.error;Q(We)}}catch(We){Q(We)}})}).catch(Q)});return f(K,q),K}function bt(D){var q=this,N=new h(function(K,Z){q.ready().then(function(){fe(q._dbInfo,k,function(Q,ke){if(Q)return Z(Q);try{var Pe=ke.objectStore(q._dbInfo.storeName),Ne=Pe.clear();ke.oncomplete=function(){K()},ke.onabort=ke.onerror=function(){var $e=Ne.error?Ne.error:Ne.transaction.error;Z($e)}}catch($e){Z($e)}})}).catch(Z)});return f(N,D),N}function Nt(D){var q=this,N=new h(function(K,Z){q.ready().then(function(){fe(q._dbInfo,O,function(Q,ke){if(Q)return Z(Q);try{var Pe=ke.objectStore(q._dbInfo.storeName),Ne=Pe.count();Ne.onsuccess=function(){K(Ne.result)},Ne.onerror=function(){Z(Ne.error)}}catch($e){Z($e)}})}).catch(Z)});return f(N,D),N}function Ot(D,q){var N=this,K=new h(function(Z,Q){if(D<0){Z(null);return}N.ready().then(function(){fe(N._dbInfo,O,function(ke,Pe){if(ke)return Q(ke);try{var Ne=Pe.objectStore(N._dbInfo.storeName),$e=!1,We=Ne.openKeyCursor();We.onsuccess=function(){var He=We.result;if(!He){Z(null);return}D===0||$e?Z(He.key):($e=!0,He.advance(D))},We.onerror=function(){Q(We.error)}}catch(He){Q(He)}})}).catch(Q)});return f(K,q),K}function Kt(D){var q=this,N=new h(function(K,Z){q.ready().then(function(){fe(q._dbInfo,O,function(Q,ke){if(Q)return Z(Q);try{var Pe=ke.objectStore(q._dbInfo.storeName),Ne=Pe.openKeyCursor(),$e=[];Ne.onsuccess=function(){var We=Ne.result;if(!We){K($e);return}$e.push(We.key),We.continue()},Ne.onerror=function(){Z(Ne.error)}}catch(We){Z(We)}})}).catch(Z)});return f(N,D),N}function $(D,q){q=m.apply(this,arguments);var N=this.config();D=typeof D!="function"&&D||{},D.name||(D.name=D.name||N.name,D.storeName=D.storeName||N.storeName);var K=this,Z;if(!D.name)Z=h.reject("Invalid arguments");else{var Q=D.name===N.name&&K._dbInfo.db,ke=Q?h.resolve(K._dbInfo.db):ee(D).then(function(Pe){var Ne=b[D.name],$e=Ne.forages;Ne.db=Pe;for(var We=0;We<$e.length;We++)$e[We]._dbInfo.db=Pe;return Pe});D.storeName?Z=ke.then(function(Pe){if(Pe.objectStoreNames.contains(D.storeName)){var Ne=Pe.version+1;L(D);var $e=b[D.name],We=$e.forages;Pe.close();for(var He=0;He<We.length;He++){var Be=We[He];Be._dbInfo.db=null,Be._dbInfo.version=Ne}var Ye=new h(function(ut,tr){var sr=l.open(D.name,Ne);sr.onerror=function(ks){var kd=sr.result;kd.close(),tr(ks)},sr.onupgradeneeded=function(){var ks=sr.result;ks.deleteObjectStore(D.storeName)},sr.onsuccess=function(){var ks=sr.result;ks.close(),ut(ks)}});return Ye.then(function(ut){$e.db=ut;for(var tr=0;tr<We.length;tr++){var sr=We[tr];sr._dbInfo.db=ut,I(sr._dbInfo)}}).catch(function(ut){throw(F(D,ut)||h.resolve()).catch(function(){}),ut})}}):Z=ke.then(function(Pe){L(D);var Ne=b[D.name],$e=Ne.forages;Pe.close();for(var We=0;We<$e.length;We++){var He=$e[We];He._dbInfo.db=null}var Be=new h(function(Ye,ut){var tr=l.deleteDatabase(D.name);tr.onerror=function(){var sr=tr.result;sr&&sr.close(),ut(tr.error)},tr.onblocked=function(){console.warn('dropInstance blocked for database "'+D.name+'" until all open connections are closed')},tr.onsuccess=function(){var sr=tr.result;sr&&sr.close(),Ye(sr)}});return Be.then(function(Ye){Ne.db=Ye;for(var ut=0;ut<$e.length;ut++){var tr=$e[ut];I(tr._dbInfo)}}).catch(function(Ye){throw(F(D,Ye)||h.resolve()).catch(function(){}),Ye})})}return f(Z,q),Z}var V={_driver:"asyncStorage",_initStorage:P,_support:c(),iterate:je,getItem:Ue,setItem:st,removeItem:dt,clear:bt,length:Nt,key:Ot,keys:Kt,dropInstance:$};function ie(){return typeof openDatabase=="function"}var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ge="~~local_forage_type~",ve=/^~~local_forage_type~([^~]+)~/,De="__lfsc__:",Te=De.length,Me="arbf",we="blob",tt="si08",qe="ui08",Xe="uic8",it="si16",J="si32",de="ur16",Ve="ui32",lt="fl32",gt="fl64",Xt=Te+Me.length,sn=Object.prototype.toString;function an(D){var q=D.length*.75,N=D.length,K,Z=0,Q,ke,Pe,Ne;D[D.length-1]==="="&&(q--,D[D.length-2]==="="&&q--);var $e=new ArrayBuffer(q),We=new Uint8Array($e);for(K=0;K<N;K+=4)Q=pe.indexOf(D[K]),ke=pe.indexOf(D[K+1]),Pe=pe.indexOf(D[K+2]),Ne=pe.indexOf(D[K+3]),We[Z++]=Q<<2|ke>>4,We[Z++]=(ke&15)<<4|Pe>>2,We[Z++]=(Pe&3)<<6|Ne&63;return $e}function Yn(D){var q=new Uint8Array(D),N="",K;for(K=0;K<q.length;K+=3)N+=pe[q[K]>>2],N+=pe[(q[K]&3)<<4|q[K+1]>>4],N+=pe[(q[K+1]&15)<<2|q[K+2]>>6],N+=pe[q[K+2]&63];return q.length%3===2?N=N.substring(0,N.length-1)+"=":q.length%3===1&&(N=N.substring(0,N.length-2)+"=="),N}function Ht(D,q){var N="";if(D&&(N=sn.call(D)),D&&(N==="[object ArrayBuffer]"||D.buffer&&sn.call(D.buffer)==="[object ArrayBuffer]")){var K,Z=De;D instanceof ArrayBuffer?(K=D,Z+=Me):(K=D.buffer,N==="[object Int8Array]"?Z+=tt:N==="[object Uint8Array]"?Z+=qe:N==="[object Uint8ClampedArray]"?Z+=Xe:N==="[object Int16Array]"?Z+=it:N==="[object Uint16Array]"?Z+=de:N==="[object Int32Array]"?Z+=J:N==="[object Uint32Array]"?Z+=Ve:N==="[object Float32Array]"?Z+=lt:N==="[object Float64Array]"?Z+=gt:q(new Error("Failed to get type for BinaryArray"))),q(Z+Yn(K))}else if(N==="[object Blob]"){var Q=new FileReader;Q.onload=function(){var ke=ge+D.type+"~"+Yn(this.result);q(De+we+ke)},Q.readAsArrayBuffer(D)}else try{q(JSON.stringify(D))}catch(ke){console.error("Couldn't convert value into a JSON string: ",D),q(null,ke)}}function $t(D){if(D.substring(0,Te)!==De)return JSON.parse(D);var q=D.substring(Xt),N=D.substring(Te,Xt),K;if(N===we&&ve.test(q)){var Z=q.match(ve);K=Z[1],q=q.substring(Z[0].length)}var Q=an(q);switch(N){case Me:return Q;case we:return u([Q],{type:K});case tt:return new Int8Array(Q);case qe:return new Uint8Array(Q);case Xe:return new Uint8ClampedArray(Q);case it:return new Int16Array(Q);case de:return new Uint16Array(Q);case J:return new Int32Array(Q);case Ve:return new Uint32Array(Q);case lt:return new Float32Array(Q);case gt:return new Float64Array(Q);default:throw new Error("Unkown type: "+N)}}var xe={serialize:Ht,deserialize:$t,stringToBuffer:an,bufferToString:Yn};function B(D,q,N,K){D.executeSql("CREATE TABLE IF NOT EXISTS "+q.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],N,K)}function Ce(D){var q=this,N={db:null};if(D)for(var K in D)N[K]=typeof D[K]!="string"?D[K].toString():D[K];var Z=new h(function(Q,ke){try{N.db=openDatabase(N.name,String(N.version),N.description,N.size)}catch(Pe){return ke(Pe)}N.db.transaction(function(Pe){B(Pe,N,function(){q._dbInfo=N,Q()},function(Ne,$e){ke($e)})},ke)});return N.serializer=xe,Z}function Fe(D,q,N,K,Z,Q){D.executeSql(N,K,Z,function(ke,Pe){Pe.code===Pe.SYNTAX_ERR?ke.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[q.storeName],function(Ne,$e){$e.rows.length?Q(Ne,Pe):B(Ne,q,function(){Ne.executeSql(N,K,Z,Q)},Q)},Q):Q(ke,Pe)},Q)}function kt(D,q){var N=this;D=p(D);var K=new h(function(Z,Q){N.ready().then(function(){var ke=N._dbInfo;ke.db.transaction(function(Pe){Fe(Pe,ke,"SELECT * FROM "+ke.storeName+" WHERE key = ? LIMIT 1",[D],function(Ne,$e){var We=$e.rows.length?$e.rows.item(0).value:null;We&&(We=ke.serializer.deserialize(We)),Z(We)},function(Ne,$e){Q($e)})})}).catch(Q)});return f(K,q),K}function dn(D,q){var N=this,K=new h(function(Z,Q){N.ready().then(function(){var ke=N._dbInfo;ke.db.transaction(function(Pe){Fe(Pe,ke,"SELECT * FROM "+ke.storeName,[],function(Ne,$e){for(var We=$e.rows,He=We.length,Be=0;Be<He;Be++){var Ye=We.item(Be),ut=Ye.value;if(ut&&(ut=ke.serializer.deserialize(ut)),ut=D(ut,Ye.key,Be+1),ut!==void 0){Z(ut);return}}Z()},function(Ne,$e){Q($e)})})}).catch(Q)});return f(K,q),K}function Cn(D,q,N,K){var Z=this;D=p(D);var Q=new h(function(ke,Pe){Z.ready().then(function(){q===void 0&&(q=null);var Ne=q,$e=Z._dbInfo;$e.serializer.serialize(q,function(We,He){He?Pe(He):$e.db.transaction(function(Be){Fe(Be,$e,"INSERT OR REPLACE INTO "+$e.storeName+" (key, value) VALUES (?, ?)",[D,We],function(){ke(Ne)},function(Ye,ut){Pe(ut)})},function(Be){if(Be.code===Be.QUOTA_ERR){if(K>0){ke(Cn.apply(Z,[D,Ne,N,K-1]));return}Pe(Be)}})})}).catch(Pe)});return f(Q,N),Q}function ur(D,q,N){return Cn.apply(this,[D,q,N,1])}function Qi(D,q){var N=this;D=p(D);var K=new h(function(Z,Q){N.ready().then(function(){var ke=N._dbInfo;ke.db.transaction(function(Pe){Fe(Pe,ke,"DELETE FROM "+ke.storeName+" WHERE key = ?",[D],function(){Z()},function(Ne,$e){Q($e)})})}).catch(Q)});return f(K,q),K}function ln(D){var q=this,N=new h(function(K,Z){q.ready().then(function(){var Q=q._dbInfo;Q.db.transaction(function(ke){Fe(ke,Q,"DELETE FROM "+Q.storeName,[],function(){K()},function(Pe,Ne){Z(Ne)})})}).catch(Z)});return f(N,D),N}function ni(D){var q=this,N=new h(function(K,Z){q.ready().then(function(){var Q=q._dbInfo;Q.db.transaction(function(ke){Fe(ke,Q,"SELECT COUNT(key) as c FROM "+Q.storeName,[],function(Pe,Ne){var $e=Ne.rows.item(0).c;K($e)},function(Pe,Ne){Z(Ne)})})}).catch(Z)});return f(N,D),N}function ir(D,q){var N=this,K=new h(function(Z,Q){N.ready().then(function(){var ke=N._dbInfo;ke.db.transaction(function(Pe){Fe(Pe,ke,"SELECT key FROM "+ke.storeName+" WHERE id = ? LIMIT 1",[D+1],function(Ne,$e){var We=$e.rows.length?$e.rows.item(0).key:null;Z(We)},function(Ne,$e){Q($e)})})}).catch(Q)});return f(K,q),K}function Xs(D){var q=this,N=new h(function(K,Z){q.ready().then(function(){var Q=q._dbInfo;Q.db.transaction(function(ke){Fe(ke,Q,"SELECT key FROM "+Q.storeName,[],function(Pe,Ne){for(var $e=[],We=0;We<Ne.rows.length;We++)$e.push(Ne.rows.item(We).key);K($e)},function(Pe,Ne){Z(Ne)})})}).catch(Z)});return f(N,D),N}function Ui(D){return new h(function(q,N){D.transaction(function(K){K.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Z,Q){for(var ke=[],Pe=0;Pe<Q.rows.length;Pe++)ke.push(Q.rows.item(Pe).name);q({db:D,storeNames:ke})},function(Z,Q){N(Q)})},function(K){N(K)})})}function Gi(D,q){q=m.apply(this,arguments);var N=this.config();D=typeof D!="function"&&D||{},D.name||(D.name=D.name||N.name,D.storeName=D.storeName||N.storeName);var K=this,Z;return D.name?Z=new h(function(Q){var ke;D.name===N.name?ke=K._dbInfo.db:ke=openDatabase(D.name,"","",0),D.storeName?Q({db:ke,storeNames:[D.storeName]}):Q(Ui(ke))}).then(function(Q){return new h(function(ke,Pe){Q.db.transaction(function(Ne){function $e(Ye){return new h(function(ut,tr){Ne.executeSql("DROP TABLE IF EXISTS "+Ye,[],function(){ut()},function(sr,ks){tr(ks)})})}for(var We=[],He=0,Be=Q.storeNames.length;He<Be;He++)We.push($e(Q.storeNames[He]));h.all(We).then(function(){ke()}).catch(function(Ye){Pe(Ye)})},function(Ne){Pe(Ne)})})}):Z=h.reject("Invalid arguments"),f(Z,q),Z}var Ki={_driver:"webSQLStorage",_initStorage:Ce,_support:ie(),iterate:dn,getItem:kt,setItem:ur,removeItem:Qi,clear:ln,length:ni,key:ir,keys:Xs,dropInstance:Gi};function Ml(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Hr(D,q){var N=D.name+"/";return D.storeName!==q.storeName&&(N+=D.storeName+"/"),N}function xs(){var D="_localforage_support_test";try{return localStorage.setItem(D,!0),localStorage.removeItem(D),!1}catch{return!0}}function Lc(){return!xs()||localStorage.length>0}function $c(D){var q=this,N={};if(D)for(var K in D)N[K]=D[K];return N.keyPrefix=Hr(D,q._defaultConfig),Lc()?(q._dbInfo=N,N.serializer=xe,h.resolve()):h.reject()}function Tl(D){var q=this,N=q.ready().then(function(){for(var K=q._dbInfo.keyPrefix,Z=localStorage.length-1;Z>=0;Z--){var Q=localStorage.key(Z);Q.indexOf(K)===0&&localStorage.removeItem(Q)}});return f(N,D),N}function Bc(D,q){var N=this;D=p(D);var K=N.ready().then(function(){var Z=N._dbInfo,Q=localStorage.getItem(Z.keyPrefix+D);return Q&&(Q=Z.serializer.deserialize(Q)),Q});return f(K,q),K}function xi(D,q){var N=this,K=N.ready().then(function(){for(var Z=N._dbInfo,Q=Z.keyPrefix,ke=Q.length,Pe=localStorage.length,Ne=1,$e=0;$e<Pe;$e++){var We=localStorage.key($e);if(We.indexOf(Q)===0){var He=localStorage.getItem(We);if(He&&(He=Z.serializer.deserialize(He)),He=D(He,We.substring(ke),Ne++),He!==void 0)return He}}});return f(K,q),K}function zc(D,q){var N=this,K=N.ready().then(function(){var Z=N._dbInfo,Q;try{Q=localStorage.key(D)}catch{Q=null}return Q&&(Q=Q.substring(Z.keyPrefix.length)),Q});return f(K,q),K}function Fc(D){var q=this,N=q.ready().then(function(){for(var K=q._dbInfo,Z=localStorage.length,Q=[],ke=0;ke<Z;ke++){var Pe=localStorage.key(ke);Pe.indexOf(K.keyPrefix)===0&&Q.push(Pe.substring(K.keyPrefix.length))}return Q});return f(N,D),N}function Hc(D){var q=this,N=q.keys().then(function(K){return K.length});return f(N,D),N}function Vc(D,q){var N=this;D=p(D);var K=N.ready().then(function(){var Z=N._dbInfo;localStorage.removeItem(Z.keyPrefix+D)});return f(K,q),K}function wh(D,q,N){var K=this;D=p(D);var Z=K.ready().then(function(){q===void 0&&(q=null);var Q=q;return new h(function(ke,Pe){var Ne=K._dbInfo;Ne.serializer.serialize(q,function($e,We){if(We)Pe(We);else try{localStorage.setItem(Ne.keyPrefix+D,$e),ke(Q)}catch(He){(He.name==="QuotaExceededError"||He.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Pe(He),Pe(He)}})})});return f(Z,N),Z}function ht(D,q){if(q=m.apply(this,arguments),D=typeof D!="function"&&D||{},!D.name){var N=this.config();D.name=D.name||N.name,D.storeName=D.storeName||N.storeName}var K=this,Z;return D.name?Z=new h(function(Q){D.storeName?Q(Hr(D,K._defaultConfig)):Q(D.name+"/")}).then(function(Q){for(var ke=localStorage.length-1;ke>=0;ke--){var Pe=localStorage.key(ke);Pe.indexOf(Q)===0&&localStorage.removeItem(Pe)}}):Z=h.reject("Invalid arguments"),f(Z,q),Z}var j={_driver:"localStorageWrapper",_initStorage:$c,_support:Ml(),iterate:xi,getItem:Bc,setItem:wh,removeItem:Vc,clear:Tl,length:Hc,key:zc,keys:Fc,dropInstance:ht},Le=function(q,N){return q===N||typeof q=="number"&&typeof N=="number"&&isNaN(q)&&isNaN(N)},ot=function(q,N){for(var K=q.length,Z=0;Z<K;){if(Le(q[Z],N))return!0;Z++}return!1},pn=Array.isArray||function(D){return Object.prototype.toString.call(D)==="[object Array]"},zn={},Nn={},Qn={INDEXEDDB:V,WEBSQL:Ki,LOCALSTORAGE:j},ki=[Qn.INDEXEDDB._driver,Qn.WEBSQL._driver,Qn.LOCALSTORAGE._driver],Si=["dropInstance"],Mo=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Si),er={description:"",driver:ki.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qc(D,q){D[q]=function(){var N=arguments;return D.ready().then(function(){return D[q].apply(D,N)})}}function wa(){for(var D=1;D<arguments.length;D++){var q=arguments[D];if(q)for(var N in q)q.hasOwnProperty(N)&&(pn(q[N])?arguments[0][N]=q[N].slice():arguments[0][N]=q[N])}return arguments[0]}var Gm=(function(){function D(q){o(this,D);for(var N in Qn)if(Qn.hasOwnProperty(N)){var K=Qn[N],Z=K._driver;this[N]=Z,zn[Z]||this.defineDriver(K)}this._defaultConfig=wa({},er),this._config=wa({},this._defaultConfig,q),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return D.prototype.config=function(N){if((typeof N>"u"?"undefined":s(N))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var K in N){if(K==="storeName"&&(N[K]=N[K].replace(/\W/g,"_")),K==="version"&&typeof N[K]!="number")return new Error("Database version must be a number.");this._config[K]=N[K]}return"driver"in N&&N.driver?this.setDriver(this._config.driver):!0}else return typeof N=="string"?this._config[N]:this._config},D.prototype.defineDriver=function(N,K,Z){var Q=new h(function(ke,Pe){try{var Ne=N._driver,$e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!N._driver){Pe($e);return}for(var We=Mo.concat("_initStorage"),He=0,Be=We.length;He<Be;He++){var Ye=We[He],ut=!ot(Si,Ye);if((ut||N[Ye])&&typeof N[Ye]!="function"){Pe($e);return}}var tr=function(){for(var kd=function(sq){return function(){var oq=new Error("Method "+sq+" is not implemented by the current driver"),b9=h.reject(oq);return f(b9,arguments[arguments.length-1]),b9}},Pb=0,iq=Si.length;Pb<iq;Pb++){var Nb=Si[Pb];N[Nb]||(N[Nb]=kd(Nb))}};tr();var sr=function(kd){zn[Ne]&&console.info("Redefining LocalForage driver: "+Ne),zn[Ne]=N,Nn[Ne]=kd,ke()};"_support"in N?N._support&&typeof N._support=="function"?N._support().then(sr,Pe):sr(!!N._support):sr(!0)}catch(ks){Pe(ks)}});return d(Q,K,Z),Q},D.prototype.driver=function(){return this._driver||null},D.prototype.getDriver=function(N,K,Z){var Q=zn[N]?h.resolve(zn[N]):h.reject(new Error("Driver not found."));return d(Q,K,Z),Q},D.prototype.getSerializer=function(N){var K=h.resolve(xe);return d(K,N),K},D.prototype.ready=function(N){var K=this,Z=K._driverSet.then(function(){return K._ready===null&&(K._ready=K._initDriver()),K._ready});return d(Z,N,N),Z},D.prototype.setDriver=function(N,K,Z){var Q=this;pn(N)||(N=[N]);var ke=this._getSupportedDrivers(N);function Pe(){Q._config.driver=Q.driver()}function Ne(He){return Q._extend(He),Pe(),Q._ready=Q._initStorage(Q._config),Q._ready}function $e(He){return function(){var Be=0;function Ye(){for(;Be<He.length;){var ut=He[Be];return Be++,Q._dbInfo=null,Q._ready=null,Q.getDriver(ut).then(Ne).catch(Ye)}Pe();var tr=new Error("No available storage method found.");return Q._driverSet=h.reject(tr),Q._driverSet}return Ye()}}var We=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=We.then(function(){var He=ke[0];return Q._dbInfo=null,Q._ready=null,Q.getDriver(He).then(function(Be){Q._driver=Be._driver,Pe(),Q._wrapLibraryMethodsWithReady(),Q._initDriver=$e(ke)})}).catch(function(){Pe();var He=new Error("No available storage method found.");return Q._driverSet=h.reject(He),Q._driverSet}),d(this._driverSet,K,Z),this._driverSet},D.prototype.supports=function(N){return!!Nn[N]},D.prototype._extend=function(N){wa(this,N)},D.prototype._getSupportedDrivers=function(N){for(var K=[],Z=0,Q=N.length;Z<Q;Z++){var ke=N[Z];this.supports(ke)&&K.push(ke)}return K},D.prototype._wrapLibraryMethodsWithReady=function(){for(var N=0,K=Mo.length;N<K;N++)qc(this,Mo[N])},D.prototype.createInstance=function(N){return new D(N)},D})(),Km=new Gm;r.exports=Km},{3:3}]},{},[4])(4)})})(Qb)),Qb.exports}var Yj=jj();const Jt=ux(Yj);function BE(){document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()}function dw(t,e){const n=document.createElement("a");n.href=URL.createObjectURL(new Blob([e],{type:"text/plain"})),n.download=t,n.click()}function hx(t){return new Promise((e,n)=>{const r=document.createElement("input");r.type="file",t&&(r.accept=t),r.onchange=()=>{r.files&&r.files[0]?e(r.files[0]):n(new Error("No file selected"))},r.click()})}function Dv(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}const Od="all_spaces",Md=t=>`meta_${t}`,kh="META_DIARY",oS={id:"def",name:"My Docs"},Rt={async getSpaces(){const t=await Jt.getItem(Od);return t===null?(await Jt.setItem(Od,[oS]),[oS]):t},async getSpaceDetail(t){const e=await this.getSpaces();for(let n=0;n<e.length;n++)if(e[n].id==t)return e[n]},async createSpace(t){const e=await this.getSpaces(),n={id:Dv(),name:t};return await Jt.setItem(Od,[n,...e]),n},async getNoteMetas(t){return await this.getSpaces(),await Jt.getItem(Md(t))||[]},async createNote(t,e,n,r=[]){const i=await this.getNoteMetas(t),s=Dv(),o=Date.now(),a={id:s,title:e,tags:r,createTime:o,editTime:o};return await Promise.all([Jt.setItem(s,n),Jt.setItem(Md(t),[a,...i])]),a},async updateNote(t,e,n){const r=await this.getNoteMetas(t),i=Date.now(),s=r.map(a=>a.id===e?{...a,...n,editTime:i}:a),o=[Jt.setItem(Md(t),s)];n.content!==void 0&&o.push(Jt.setItem(e,n.content)),await Promise.all(o)},async deleteNote(t,e){const n=await this.getNoteMetas(t);await Promise.all([Jt.setItem(Md(t),n.filter(r=>r.id!==e)),Jt.removeItem(e)])},getDiaryId(t){return"DIARY_"+t.format("YYYY-MM-DD")},getDiaryDate(t){const e=t.replace("DIARY_","");return hc(e)},async getDiary(t){const e=this.getDiaryId(t);return(await Jt.getItem(kh)||[]).find(r=>r.id==e)},async getDiaries(){return await Jt.getItem(kh)||[]},async createDiary(t){const e=await Jt.getItem(kh)||[],n=hc(),r=this.getDiaryId(n),i={id:r,label:t||""};return e.unshift(i),await Promise.all([Jt.setItem(r,""),Jt.setItem(kh,e)]),i},async updateDiary(t,e){const n=await Jt.getItem(kh)||[];for(let r=0;r<n.length;r++)if(n[r].id==t){n[r].label=e.label||"";break}await Jt.setItem(kh,n),e.content!==void 0&&await Jt.setItem(t,e.content)},async getContent(t){return await Jt.getItem(t)},async updateSpace(t,e){const r=(await this.getSpaces()).map(i=>i.id===t?{...i,name:e}:i);await Jt.setItem(Od,r)},async deleteSpace(t){const e=Md(t),r=(await this.getNoteMetas(t)).map(a=>Jt.removeItem(a.id)),i=Jt.removeItem(e),s=await this.getSpaces(),o=Jt.setItem(Od,s.filter(a=>a.id!==t));await Promise.all([...r,i,o])}},Qj={diary:"Diary",sbnote:"Notes",help:"Help",about:"About",selecting:"Please select..",isfirstnow:"Already the first diary entry",date_format:"YYYY-MM-DD",howareyou:"How are you today?",datepicker:"Calendar View",listpicker:"List View",writediary:" Write Diary",nodiary:"No diary entries yet",autosave:"Auto-save",saved:"Saved",editor:{textGroup:{label:"Text Blocks",text:{label:"Text"},h1:{label:"Heading 1"},h2:{label:"Heading 2"},h3:{label:"Heading 3"},h4:null,h5:null,h6:null,quote:{label:"Quote"},divider:{label:"Divider"}},listGroup:{label:"Lists",bulletList:{label:"Bullet List"},orderedList:{label:"Ordered List"},taskList:{label:"Task List"}},advancedGroup:{label:"Advanced",image:{label:"Image"},codeBlock:{label:"Code Block"},table:{label:"Table"},math:{label:"Latex"}}},charstat:"Word Count",autosavelast:"Auto-saved previous document",save:"Save",stat:"Stats",exportmd:"Export as .md",rename:"Rename",delete:"Delete",newdoc:"New Document",fileupload:"File Upload",workspace:"Workspace",setting:"Settings",settings:{theme:"Theme Mode",theme_desc:"Switch between Light and Dark mode",theme_light:"Light",theme_dark:"Dark",theme_eyes:"Eye Care",lang:"Language",lang_desc:"Change application language",theme_color:"Theme Color",theme_color_desc:"Choose UI primary color",theme_color_default:"Blue (Default)",theme_color_pink:"Pink",theme_color_orange:"Orange",theme_color_green:"Green",theme_color_purple:"Purple",backup:"Backup Data",backup_desc:"Export all to .mikibase (for backup only)",export:"Export Documents",export_desc:"Export all as .md files to a folder. You cannot import from a folder.",import:"Restore Backup",import_desc:"Import all data from .mikibase",help:"Help",help_desc:"View help documentation",see:"View",imp:"Import",exp:"Export",bkp:"Backup",processing:"Processing..."},manageworkspace:"Manage Workspace",mytexts:"My Drafts",spacenaming:"Space Name...",deletespace:"Delete Space",confirmdeletespace:'Are you sure you want to delete "$"? This cannot be undone!',docs:{help:`# Help

## Documents

1. **Create**: Click the \`+ New Document\` button in the sidebar.
2. **Rename**: Right-click a document in the sidebar and select "Rename".
3. **Delete**: Right-click and select "Delete" (Caution: This cannot be undone).
4. **Import**: Click the "Upload" icon in the sidebar to select a .md file.
5. **Workspaces**: Click the "Folder" icon to manage or switch workspaces.

## Editor

1. **Markdown**: Miki supports standard Markdown syntax. Type "# " for headings, etc.
2. **Slash Command**: Type "/" at the start of a line to see a list of components.
3. **Floating Menu**: Select text to apply styles like bold, italic, or links.
4. **Saving**: Click "Menu" -> "Save". Auto-save occurs every 3 minutes and during document switching.
5. **Stats**: Click "Stats" in the menu to see the word count.
6. **Export**: Click "Export as .md" to save the current file locally.

## Diary

1. Click "Diary" in the sidebar to start journaling.
2. It shows today's entry by default. Use "<" or ">" to navigate, or the calendar icon to pick a date.
3. **Note**: You cannot create entries for past dates. No "retroactive" check-ins.
4. You can edit past entries, but you cannot delete them.
5. The diary uses the same Markdown editor as documents.

## Data Management

1. Go to "Settings" for full data backup and restoration (.mikibase).
2. For single files, use the Import/Export features in the sidebar or editor menu.

## Themes

1. Adjust appearance settings (Light, Dark, Eye-care) in the Settings panel.`,about:`# Miki  Simple Creation

> Version: V0.0.1
> 
> "A bosom friend afar brings a distant land near."  Wang Bo

If you suddenly feel like writing something but don't want to use bloated "Big Tech" apps or overly complex "Pro" tools, **Miki is born for you.**

Miki is built for Markdown, prioritizing simplicity and intuition. No registration, no cloud sync, no AIjust you and your words.

Focus on your thoughts and let your vitality fill the screen.

*Creation should be this simple.*

<br />

> Author: yz ([upon : siquan001](https://github.com/siquan001/))
>
> GitHub Repository: [siquan001/miki](https://github.com/siquan001/miki/)
>
> License: [GPL-3.0](https://github.com/siquan001/Miki/blob/main/LICENSE)
>
> Powered By Vue3, Vite, localforage, dayjs, milkdown, thememirror (CodeMirror themes), VCalendar, Scss, JsZip, Icons (see [Icons.ts](https://github.com/siquan001/Miki/blob/main/src/util/Icons.ts))`}},Uj={diary:"",sbnote:"",help:"",about:"Miki",selecting:"..",isfirstnow:"",date_format:"YYYYMMDD",howareyou:"",datepicker:"",listpicker:"",writediary:" ",nodiary:"",autosave:"",saved:"",editor:{textGroup:{label:"",text:{label:""},h1:{label:" 1"},h2:{label:" 2"},h3:{label:" 3"},h4:null,h5:null,h6:null,quote:{label:""},divider:{label:""}},listGroup:{label:"",bulletList:{label:""},orderedList:{label:""},taskList:{label:""}},advancedGroup:{label:"",image:{label:""},codeBlock:{label:""},table:{label:""},math:{label:"Latex"}}},charstat:"",autosavelast:"",save:"",stat:"",exportmd:".md",rename:"",delete:"",newdoc:"",fileupload:"",workspace:"",setting:"",settings:{theme:"",theme_desc:"",theme_light:"",theme_dark:"",theme_eyes:"",lang:"",lang_desc:"",theme_color:"",theme_color_desc:"",theme_color_default:"",theme_color_pink:"",theme_color_orange:"",theme_color_green:"",theme_color_purple:"",backup:"",backup_desc:".mikibase",export:"",export_desc:"md",import:"",import_desc:".mikibase",help:"",help_desc:"",see:"",imp:"",exp:"",bkp:"",processing:"..."},manageworkspace:"",mytexts:"",spacenaming:"...",deletespace:"",confirmdeletespace:'"$" ',docs:{help:`# 

## 

1. ****:  \`+ \` 
2. ****: 
3. ****: 
4. ****:  Markdown 
5. ****: 

## 

1. **Markdown**:  Markdown # 
2. ****: /
3. ****: 
4. ****: 3
5. ****: 

## 

1. 
2. <>
3. ****: 
4. 

## 

1. .mikibase

## 

1. `,about:`# Miki  

> : V0.0.1
> 
>   

**Miki **

 Markdown  AI 



**

<br />

> Miki yz[upon : siquan001](https://github.com/siquan001/)
>
> Github [siquan001/miki](https://github.com/siquan001/miki/)
>
> [GPL-3.0](https://github.com/siquan001/Miki/blob/main/LICENSE)
>
> Powered By Vue3, Vite, localforage, dayjs, milkdown, thememirror (CodeMirror ), VCalendar, Scss, JsZip, [Icons.ts](https://github.com/siquan001/Miki/blob/main/src/util/Icons.ts) `}},Gj={diary:"",sbnote:"",help:"",about:"",selecting:"..",isfirstnow:"",date_format:"YYYYMMDD",howareyou:"",datepicker:"",listpicker:"",writediary:" ",nodiary:"",autosave:"",saved:"",editor:{textGroup:{label:"",text:{label:""},h1:{label:" 1"},h2:{label:" 2"},h3:{label:" 3"},h4:null,h5:null,h6:null,quote:{label:""},divider:{label:""}},listGroup:{label:"",bulletList:{label:""},orderedList:{label:""},taskList:{label:""}},advancedGroup:{label:"",image:{label:""},codeBlock:{label:""},table:{label:""},math:{label:"Latex"}}},charstat:"",autosavelast:"",save:"",stat:"",exportmd:".md",rename:"",delete:"",newdoc:"",fileupload:"",workspace:"",setting:"",settings:{theme:"",theme_desc:"",theme_light:"",theme_dark:"",theme_eyes:"",lang:"",lang_desc:"",theme_color:"",theme_color_desc:"",theme_color_default:"",theme_color_pink:"",theme_color_orange:"",theme_color_green:"",theme_color_purple:"",backup:"",backup_desc:".mikibase",export:"",export_desc:"md",import:"",import_desc:".mikibase",help:"",help_desc:"",see:"",imp:"",exp:"",bkp:"",processing:"..."},manageworkspace:"",mytexts:"",spacenaming:"...",deletespace:"",confirmdeletespace:' "$" ',docs:{help:`# 

## 

1. \`+ \` 
2. 
3. 
4. MarkdownMarkdown
5. ///

## 

1. MarkdownMarkdown# 
2. /
3. 
4. 3
5. 
6. .mdMarkdown.md

## 

1. 
2. <>
3. ****
4. 
5. 

## 

1. 
2. 

## 

1. `,about:`# Miki    

> V0.0.1
> 
>    

**Miki**

MikiMarkdown

MikiAIMarkdown

Miki

**

<br />

> Mikiyz[upon : siquan001](https://github.com/siquan001/)
>
> Github[siquan001/miki](https://github.com/siquan001/miki/)
>
> License[GPL-3.0](https://github.com/siquan001/Miki/blob/main/LICENSE)
>
> Powered By Vue3VitelocalforagedayjsmilkdownthememirrorCodeMirrorVCanlendarScssJsZip[Icons.ts](https://github.com/siquan001/Miki/blob/main/src/util/Icons.ts)
`}},Kj={diary:"",sbnote:"",help:"",about:"",selecting:"..",isfirstnow:"",date_format:"YYYYMMDD",howareyou:"",datepicker:"",listpicker:"",writediary:" ",nodiary:"",autosave:"",saved:"",editor:{textGroup:{label:"",text:{label:""},h1:{label:" 1"},h2:{label:" 2"},h3:{label:" 3"},h4:null,h5:null,h6:null,quote:{label:""},divider:{label:""}},listGroup:{label:"",bulletList:{label:""},orderedList:{label:""},taskList:{label:""}},advancedGroup:{label:"",image:{label:""},codeBlock:{label:""},table:{label:""},math:{label:"Latex"}}},charstat:"",autosavelast:"",save:"",stat:"",exportmd:".md",rename:"",delete:"",newdoc:"",fileupload:"",workspace:"",setting:"",settings:{theme:"",theme_desc:"",theme_light:"",theme_dark:"",theme_eyes:"",lang:"",lang_desc:"",theme_color:"",theme_color_desc:"",theme_color_default:"",theme_color_pink:"",theme_color_orange:"",theme_color_green:"",theme_color_purple:"",backup:"",backup_desc:".mikibase",export:"",export_desc:"md",import:"",import_desc:".mikibase",help:"",help_desc:"",see:"",imp:"",exp:"",bkp:"",processing:"..."},manageworkspace:"",mytexts:"",spacenaming:"...",deletespace:"",confirmdeletespace:' "$" ',docs:{help:`# 

## 

1. **** \`+ \`
2. ****
3. ****
4. ** Markdown ** Markdown 
5. **/**//

## 

1.  Markdown  Markdown # 
2. /
3. 
4.  3 
5. 
6.  .md Markdown 

## 

1. 
2. <>
3. ****
4. 
5. 

## 

1. 
2. 

## 

1. `,about:`# Miki  

> V0.0.1
> 
>   

**Miki **

Miki  Markdown 

Miki  AI  Markdown 

 Miki 

**

<br />

> Miki yz[upon : siquan001](https://github.com/siquan001/)
>
> Github [siquan001/miki](https://github.com/siquan001/miki/)
>
> License[GPL-3.0](https://github.com/siquan001/Miki/blob/main/LICENSE)
>
> Powered By Vue3, Vite, localforage, dayjs, milkdown, thememirror (CodeMirror ), VCalendar, Scss, JsZip,  [Icons.ts](https://github.com/siquan001/Miki/blob/main/src/util/Icons.ts)`}},fx={"zh-cn":Gj,en:Qj,"zh-tw":Kj,ja:Uj},br=ae("def"),ss=ae(""),zE=ae(!1),hg=ae(!1),cn=ae(0),Ai=ae(hc()),Ua=ae(localStorage.getItem("miki-theme")||"light"),Ha=ae(localStorage.getItem("miki-lang")||"zh-cn"),Xj=ue(()=>fx[Ha.value].docs[Jh.value]||""),Jh=ae(""),ef=ae(localStorage.getItem("miki-theme-color")||"default");Vt(br,()=>{Rt.getNoteMetas(br.value).then(t=>{ss.value=t[0]?.id||"",t.length>0?cn.value=1:cn.value=0})});Vt(Ua,t=>{ss.value="",localStorage.setItem("miki-theme",t)});Vt(ef,t=>{localStorage.setItem("miki-theme-color",t)});Vt(Ha,t=>{localStorage.setItem("miki-lang",t)});function pt(t,e){const n=t.split(".");let r=fx[e||Ha.value];for(let i of n)if(r=r[i],!r)break;return!r&&!e?pt(t,"zh-cn"):r||t}const aS={diary:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><rect width="14" height="0" x="5" y="5" fill="currentColor"><animate fill="freeze" attributeName="height" begin="0.3s" dur="0.1s" values="0;3"/></rect><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="64" stroke-dashoffset="64" d="M12 4h7c0.55 0 1 0.45 1 1v14c0 0.55 -0.45 1 -1 1h-14c-0.55 0 -1 -0.45 -1 -1v-14c0 -0.55 0.45 -1 1 -1Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="64;0"/></path><path stroke-dasharray="4" stroke-dashoffset="4" d="M7 4v-2M17 4v-2"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.3s" dur="0.1s" values="4;0"/></path><path stroke-dasharray="12" stroke-dashoffset="12" d="M7 11h10"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.1s" values="12;0"/></path><path stroke-dasharray="8" stroke-dashoffset="8" d="M7 15h7"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.1s" values="8;0"/></path></g></svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="14" stroke-dashoffset="14" d="M4 5h13"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.1s" values="14;0"/></path><path stroke-dasharray="12" stroke-dashoffset="12" d="M4 10h10"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.1s" values="12;0"/></path><path stroke-dasharray="20" stroke-dashoffset="20" d="M4 15h16"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.3s" dur="0.1s" values="20;0"/></path><path stroke-dasharray="14" stroke-dashoffset="14" d="M4 20h13"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.3s" dur="0.1s" values="14;0"/></path></g></svg>',add:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"/></svg>',folder:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20z"/></svg>',pencil:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"/></svg>',document:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm2 4v2h10V7H7zm0 4v2h10v-2H7zm0 4v2h7v-2H7z" fill="currentColor"/></svg>',chleft:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="m10.8 12l3.9 3.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-4.6-4.6q-.15-.15-.212-.325T8.425 12t.063-.375t.212-.325l4.6-4.6q.275-.275.7-.275t.7.275t.275.7t-.275.7z"/></svg>',chright:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M12.6 12L8.7 8.1q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375t-.062.375t-.213.325l-4.6 4.6q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7z"/></svg>',upload:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M11 19h2v-4.175l1.6 1.6L16 15l-4-4l-4 4l1.425 1.4L11 14.825zm-5 3q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13h5l-5-5z"/></svg>',about:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M11 17h2v-6h-2zm1-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"/></svg>',unknown:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 32 32"><path fill="currentColor" d="M29.391 14.527L17.473 2.609C17.067 2.203 16.533 2 16 2s-1.067.203-1.473.609L2.609 14.527C2.203 14.933 2 15.466 2 16s.203 1.067.609 1.473L14.526 29.39c.407.407.941.61 1.474.61s1.067-.203 1.473-.609L29.39 17.474c.407-.407.61-.94.61-1.474s-.203-1.067-.609-1.473M16 24a1.5 1.5 0 1 1 0-3a1.5 1.5 0 0 1 0 3m1.125-6.752v1.877h-2.25V15H17c1.034 0 1.875-.841 1.875-1.875S18.034 11.25 17 11.25h-2a1.877 1.877 0 0 0-1.875 1.875v.5h-2.25v-.5A4.13 4.13 0 0 1 15 9h2a4.13 4.13 0 0 1 4.125 4.125a4.13 4.13 0 0 1-4 4.123"/><path fill="none" d="M16 21a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 16 21m1.125-3.752a4.13 4.13 0 0 0 4-4.123A4.13 4.13 0 0 0 17 9h-2a4.13 4.13 0 0 0-4.125 4.125v.5h2.25v-.5c0-1.034.841-1.875 1.875-1.875h2c1.034 0 1.875.841 1.875 1.875S18.034 15 17 15h-2.125v4.125h2.25z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 16 16"><path fill="currentColor" d="m8 8.71l-4.15 4.15a.48.48 0 0 1-.352.146a.5.5 0 0 1-.361-.142a.5.5 0 0 1-.142-.361q0-.205.146-.352l4.15-4.15l-4.15-4.15a.48.48 0 0 1-.146-.356a.496.496 0 0 1 .502-.497q.205 0 .352.146L8 7.294l4.15-4.15a.48.48 0 0 1 .356-.146q.103 0 .19.039a.497.497 0 0 1 .161.814l-4.15 4.15l4.15 4.15a.496.496 0 0 1 0 .708a.5.5 0 0 1-.351.146a.48.48 0 0 1-.356-.146z"/></svg>',maximize:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M9.8 4H6.2c-.577 0-.949 0-1.23.024c-.272.022-.372.06-.422.085a1 1 0 0 0-.437.437c-.025.05-.063.15-.085.422c-.023.283-.024.656-.024 1.23v3.6c0 .577 0 .949.024 1.23c.022.272.06.372.085.422c.096.188.249.341.437.437c.05.025.15.063.422.085c.283.023.656.024 1.23.024h3.6c.577 0 .949 0 1.23-.024c.272-.022.372-.06.422-.085c.188-.096.341-.249.437-.437c.025-.05.063-.15.085-.422c.023-.283.024-.656.024-1.23v-3.6c0-.577 0-.949-.024-1.23c-.022-.272-.06-.372-.085-.422a1 1 0 0 0-.437-.437c-.05-.025-.15-.063-.422-.085C10.747 4 10.374 4 9.8 4m-6.58.092c-.218.428-.218.988-.218 2.11v3.6c0 1.12 0 1.68.218 2.11c.192.376.498.682.874.874c.428.218.988.218 2.11.218h3.6c1.12 0 1.68 0 2.11-.218c.376-.192.682-.498.874-.874c.218-.428.218-.988.218-2.11v-3.6c0-1.12 0-1.68-.218-2.11a2 2 0 0 0-.874-.874C11.486 3 10.926 3 9.804 3h-3.6c-1.12 0-1.68 0-2.11.218a2 2 0 0 0-.874.874" clip-rule="evenodd"/></svg>',minimize:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 16 16"><path fill="currentColor" d="M3.5 8a.496.496 0 0 1-.351-.848A.48.48 0 0 1 3.5 7h9q.103 0 .19.039a.5.5 0 0 1 .161.112a.5.5 0 0 1 .146.35a.5.5 0 0 1-.146.352A.5.5 0 0 1 12.5 8z"/></svg>',unmaximize:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 16 16"><path fill="currentColor" d="M9.8 4H5.27c.193-.334.479-.606.824-.782C6.522 3 7.082 3 8.204 3h1.6c1.12 0 1.68 0 2.11.218c.376.192.682.498.874.874c.218.428.218.988.218 2.11v1.6c0 1.12 0 1.68-.218 2.11a2 2 0 0 1-.782.824v-4.53c0-.577 0-.949-.024-1.23c-.022-.272-.06-.372-.085-.422a1 1 0 0 0-.437-.437c-.05-.025-.15-.063-.422-.085a17 17 0 0 0-1.23-.024z"/><path fill="currentColor" fill-rule="evenodd" d="M3 8.2c0-1.12 0-1.68.218-2.11c.192-.376.498-.682.874-.874c.428-.218.988-.218 2.11-.218h1.6c1.12 0 1.68 0 2.11.218c.376.192.682.498.874.874c.218.428.218.988.218 2.11v1.6c0 1.12 0 1.68-.218 2.11a2 2 0 0 1-.874.874c-.428.218-.988.218-2.11.218h-1.6c-1.12 0-1.68 0-2.11-.218a2 2 0 0 1-.874-.874C3 11.482 3 10.922 3 9.8zM6.2 6h1.6c.577 0 .949 0 1.23.024c.272.022.372.06.422.085c.188.096.341.249.437.437c.025.05.063.15.085.422c.023.283.024.656.024 1.23v1.6c0 .577 0 .949-.024 1.23c-.022.272-.06.372-.085.422a1 1 0 0 1-.437.437c-.05.025-.15.063-.422.085c-.283.023-.656.024-1.23.024H6.2c-.577 0-.949 0-1.23-.024c-.272-.022-.372-.06-.422-.085a1 1 0 0 1-.437-.437c-.025-.05-.063-.15-.085-.422a17 17 0 0 1-.024-1.23v-1.6c0-.577 0-.949.024-1.23c.022-.272.06-.372.085-.422c.096-.188.249-.341.437-.437c.05-.025.15-.063.422-.085C5.253 6 5.626 6 6.2 6" clip-rule="evenodd"/></svg>',setting:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2"><path d="M3.082 13.945c-.529-.95-.793-1.426-.793-1.945s.264-.994.793-1.944L4.43 7.63l1.426-2.381c.559-.933.838-1.4 1.287-1.66c.45-.259.993-.267 2.08-.285L12 3.26l2.775.044c1.088.018 1.631.026 2.08.286s.73.726 1.288 1.659L19.57 7.63l1.35 2.426c.528.95.792 1.425.792 1.944s-.264.994-.793 1.944L19.57 16.37l-1.426 2.381c-.559.933-.838 1.4-1.287 1.66c-.45.259-.993.267-2.08.285L12 20.74l-2.775-.044c-1.088-.018-1.631-.026-2.08-.286s-.73-.726-1.288-1.659L4.43 16.37z"/><circle cx="12" cy="12" r="3"/></g></svg>',menu:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5h16M4 12h16M4 19h16"/></svg>',help:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.195 8.765A4 4 0 1 1 12 14v1m.05 4v.1h-.1V19z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 21H7m10 0h.803c1.118 0 1.677 0 2.104-.218c.377-.192.683-.498.875-.874c.218-.427.218-.987.218-2.105V9.22c0-.45 0-.675-.048-.889a2 2 0 0 0-.209-.545c-.106-.19-.256-.355-.55-.682l-2.755-3.062c-.341-.378-.514-.57-.721-.708a2 2 0 0 0-.61-.271C15.863 3 15.6 3 15.075 3H6.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C3 4.52 3 5.08 3 6.2v11.6c0 1.12 0 1.68.218 2.107c.192.377.497.683.874.875c.427.218.987.218 2.105.218H7m10 0v-3.803c0-1.118 0-1.678-.218-2.105a2 2 0 0 0-.875-.874C15.48 14 14.92 14 13.8 14h-3.6c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C7 15.52 7 16.08 7 17.2V21m8-14H9"/></svg>',full:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-width="2" d="M6.343 17.657L17.657 6.343M18.5 11V5.5H13M5.5 13v5.5H11"/></svg>',unfull:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-width="2" d="M10.5 19v-5.5H5M5 19l4.667-4.666m4.667-4.667L19 5m-5.5 0v5.5H19"/></svg>',stat:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M21 21H3v-2h18zM8 10H4v7h4zm6-7h-4v14h4zm6 3h-4v11h4z"/></svg>',md:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M7 15V9l2 2l2-2v6m3-2l2 2l2-2m-2 2V9"/></g></svg>',ai:'<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 512 512"><path fill="currentColor" d="m320 192l-85.333-32L320 127.968l32-85.301l32.03 85.301L469.333 160l-85.303 32L352 277.333zM149.333 362.667L42.667 320l106.666-42.667L192 170.667l42.667 106.666L341.333 320l-106.666 42.667L192 469.333z"/></svg>'},Zj=["innerHTML"],qn=xt({__name:"MIcon",props:{name:{type:String,required:!0}},setup(t){return(e,n)=>(me(),Ie("div",{class:"m-icon",innerHTML:U(aS)[t.name]||U(aS).unknown},null,8,Zj))}}),Jj={class:"menu-content"},eY={key:0,class:"menu-hr"},tY=["onClick"],nY={class:"menu-icon"},rY={key:1},iY={class:"menu-title"},dx=xt({__name:"Menu",props:nx({items:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(t){const e=$u(t,"show");function n(){e.value=!1}return Dr(()=>{Qt.on("doc-click",n)}),la(()=>{Qt.off("doc-click",n)}),(r,i)=>(me(),Ie("div",{class:Lt({menu:!0,show:e.value})},[oe("div",Jj,[(me(!0),Ie(wt,null,Tr(t.items,s=>(me(),Ie(wt,null,[typeof s>"u"?(me(),Ie("div",eY)):(me(),Ie("div",{key:1,class:Lt({"menu-item":!0,disabled:s.disabled}),onClick:s.click},[oe("div",nY,[typeof s.icon=="string"?(me(),$n(qn,{key:0,name:s.icon},null,8,["name"])):typeof s.icon>"u"?(me(),Ie("div",rY)):(me(),$n(ex(s.icon),{key:2}))]),oe("div",iY,Et(s.title),1)],10,tY))],64))),256))])],2))}}),sY={class:"nav"},oY={class:"nav-left"},aY={class:"toast"},lY={class:"nav-right"},cY={class:"nav-btn"},uY={class:"nav-btn"},hY={class:"nav-btn close"},fY=xt({__name:"Nav",emits:["setting"],setup(t){const e=ue(()=>[{icon:"save",title:pt("save"),click:()=>{Qt.emit("save")}},{icon:"stat",title:pt("stat"),click:()=>{Qt.emit("stat")}},{icon:"md",title:pt("exportmd"),click:()=>{cn.value==1?Rt.getContent(ss.value).then(l=>{Rt.getNoteMetas(br.value).then(c=>{let u=c.find(h=>h.id==ss.value);u&&dw(`${u.title}.md`,l||"")})}):cn.value==3&&Rt.getDiary(Ai.value).then(l=>{l&&Rt.getContent(Rt.getDiaryId(Ai.value)).then(c=>{dw(Ai.value.format("YYYY-MM-DD")+" "+(l.label||"")+".md",c||"")})})}}]),n=ae(),r=ae(0),i=ae(!1),s=ae(""),o=ue(()=>Rt.getDiaryId(hc())==Rt.getDiaryId(Ai.value));let a;return Qt.on("toast",(l,c=3e3)=>{s.value=l,clearTimeout(a),a=setTimeout(()=>{s.value=""},c)}),Dr(()=>{n.value&&(r.value=n.value.offsetLeft)}),Vt(cn,()=>{n.value&&(r.value=n.value.offsetLeft)}),(l,c)=>(me(),Ie(wt,null,[oe("div",sY,[oe("div",oY,[oe("div",{class:"nav-btn",onClick:c[0]||(c[0]=u=>l.$emit("setting"))},[_e(qn,{name:"setting"})]),U(cn)==1||U(cn)==3?(me(),Ie("div",{key:0,class:"nav-btn",onClick:c[1]||(c[1]=kp(u=>i.value=!0,["stop"])),ref_key:"menubtn",ref:n},[_e(qn,{name:"menu"})],512)):hn("",!0),U(cn)==1||U(cn)==3?(me(),Ie("div",{key:1,class:"nav-btn",onClick:c[2]||(c[2]=u=>U(Qt).emit("ai-assist"))},[_e(qn,{name:"ai"})])):hn("",!0),U(cn)==3?(me(),Ie("div",{key:2,class:"nav-btn",onClick:c[3]||(c[3]=u=>U(Qt).emit("diary-last"))},[_e(qn,{name:"chleft"})])):hn("",!0),U(cn)==3?(me(),Ie("div",{key:3,class:"nav-btn",onClick:c[4]||(c[4]=u=>U(Qt).emit("showpicker"))},[_e(qn,{name:"diary"})])):hn("",!0),U(cn)==3&&!o.value?(me(),Ie("div",{key:4,class:"nav-btn",onClick:c[5]||(c[5]=u=>U(Qt).emit("diary-next"))},[_e(qn,{name:"chright"})])):hn("",!0)]),oe("div",aY,Et(s.value),1),oe("div",lY,[oe("div",{class:"nav-btn",onClick:c[6]||(c[6]=u=>U(BE)())},[_e(qn,{name:U(zE)?"unfull":"full"},null,8,["name"])]),oe("div",cY,[_e(qn,{name:"minimize"})]),oe("div",uY,[_e(qn,{name:"maximize"})]),oe("div",hY,[_e(qn,{name:"close"})])])]),_e(dx,{items:e.value,show:i.value,"onUpdate:show":c[7]||(c[7]=u=>i.value=u),style:fr({top:"36px",left:r.value+"px"})},null,8,["items","show","style"])],64))}}),dY="modulepreload",pY=function(t,e){return new URL(t,e).href},lS={},ce=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(n.map(u=>{if(u=pY(u,r),u in lS)return;lS[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(r)for(let p=o.length-1;p>=0;p--){const m=o[p];if(m.href===u&&(!h||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":dY,h||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),h)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};async function mY(t,e){let n;try{n=await window.showDirectoryPicker({mode:"readwrite"})}catch(r){console.error(r),t&&t(!1,"");return}try{let r=await Rt.getSpaces(),i=[],s=[];for(let c of r)i.push(await Rt.getNoteMetas(c.id)),s.push(await n.getDirectoryHandle(c.name,{create:!0}));let o=await Rt.getDiaries(),a=0,l=0;for(let c of i)a+=c.length;a+=o.length;for(let c=0;c<i.length;c++){let u=i[c],h=s[c];for(let f of u){let d=await Rt.getContent(f.id),m=await(await h.getFileHandle(f.title.replace(/[\\/:\*\?"<>\|]/g,"_")+"_"+f.id.slice(-5)+".md",{create:!0})).createWritable();await m.write(d||""),await m.close(),l++,e&&e(l,a)}}if(o.length>0){let c=await n.getDirectoryHandle("Miki_Diary_"+Math.random().toString(36).substring(2,5),{create:!0});for(let u of o){let h=await Rt.getContent(u.id),d=await(await c.getFileHandle(u.id+".md",{create:!0})).createWritable();await d.write(`> ${u.label}

`+(h||"")),await d.close(),l++,e&&e(l,a)}}t&&t(!0,"")}catch(r){console.log(r),t&&t(!1,"")}}async function gY(t){const e=await ce(()=>import("./jszip.min-DSQkEWx8.js").then(o=>o.j),[],import.meta.url);let n=new e.default,r=await Jt.keys();for(let o of r){let a=await Jt.getItem(o),l=typeof a=="string"?a:JSON.stringify(a);n.file(o,l)}let i=await n.generateAsync({type:"blob"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download="note.mikibase",s.click(),t&&t(!0,"")}async function vY(t){let e=await hx(".mikibase");const n=await ce(()=>import("./jszip.min-DSQkEWx8.js").then(i=>i.j),[],import.meta.url);let r=new n.default;try{let i=await r.loadAsync(e),s=Object.keys(i.files);async function o(a,l){let c=JSON.parse(l||"[]"),u=await Jt.getItem(a)||[];c=c.filter(h=>!u.find(f=>f.id==h.id)),u.push(...c),await Jt.setItem(a,u)}for(let a of s){let l=await i.file(a)?.async("string");a=="all_spaces"?await o(a,l):a.startsWith("meta_")||a.startsWith("META_")?await Jt.getItem(a)?await o(a,l):await Jt.setItem(a,JSON.parse(l||"[]")):await Jt.setItem(a,l)}t&&t(!0,"")}catch(i){console.error(i),t&&t(!1,"")}}async function yY(){const t=await hx(".md"),e=await t.text(),n=t.name.replace(/\.md$/,"");await Rt.createNote(br.value,n,e),Qt.emit("refreshList")}const bY={class:"nav-top"},wY={class:"nav-label"},xY={class:"text-list"},kY={class:"title"},SY={key:0,class:"renameing"},CY={class:"title"},OY=["onClick","onContextmenu"],MY={key:0,class:"title"},TY={key:1,class:"title"},AY=`# Miki

> 

`,_Y=xt({__name:"TextList",emits:["open"],setup(t){const e=ae({name:"",id:"def"}),n=ae([]);Qt.on("renameNowSpace",async()=>{e.value=await Rt.getSpaceDetail(br.value)}),Qt.on("refreshList",async()=>{n.value=await Rt.getNoteMetas(br.value)});const r=ae(!1),i=ae({x:0,y:0}),s=ae(null),o=ae(""),a=ae(""),l=ae(null),c=async()=>{e.value=await Rt.getSpaceDetail(br.value),n.value=await Rt.getNoteMetas(br.value)},u=ue(()=>[{title:pt("rename"),icon:"pencil",click:()=>d()},{title:pt("delete"),icon:"delete",click:()=>m()},{title:pt("exportmd"),icon:"md",click:()=>{if(s.value){let C=s.value.id;Rt.getContent(C).then(T=>{Rt.getNoteMetas(br.value).then(R=>{let L=R.find(I=>I.id==C);L&&dw(`${L.title}.md`,T||"")})})}}}]),h=ue(()=>({left:`${i.value.x}px`,top:`${i.value.y}px`})),f=(C,T)=>{s.value=T,i.value={x:C.clientX,y:C.clientY},r.value=!0},d=async()=>{s.value&&(o.value=s.value.id,a.value=s.value.title,await qo(),l.value?.focus())},p=async()=>{if(!o.value)return;const C=a.value.trim();C&&s.value&&C!==s.value.title&&(await Rt.updateNote(br.value,o.value,{title:C}),await c()),o.value=""},m=async()=>{s.value&&(await Rt.deleteNote(br.value,s.value.id),await c(),ss.value===s.value.id&&(ss.value="",cn.value=0))},g=ae(!1),v=ae(""),b=ae(null),S=async()=>{g.value=!0,v.value="",await qo(),b.value?.focus()},O=async()=>{if(!g.value)return;const C=v.value.trim();if(C){const T=await Rt.createNote(br.value,C,AY);await c(),ss.value=T.id,cn.value=1}g.value=!1,v.value=""},k=C=>{ss.value=C};return Vt(br,()=>c()),Dr(()=>c()),(C,T)=>(me(),Ie(wt,null,[oe("div",bY,[oe("div",wY,Et(U(br)=="def"?U(pt)("mytexts"):e.value.name),1),oe("div",{class:"spaces",onClick:T[0]||(T[0]=R=>hg.value=!0)},[_e(qn,{name:"folder"})]),oe("div",{class:"upload-md",onClick:T[1]||(T[1]=R=>U(yY)())},[_e(qn,{name:"upload"})])]),oe("ul",xY,[oe("li",{onClick:S},[oe("div",kY,[_e(qn,{name:"add"}),Qa(" "+Et(U(pt)("newdoc")),1)])]),g.value?(me(),Ie("li",SY,[oe("div",CY,[rl(oe("input",{ref_key:"inputRef",ref:b,"onUpdate:modelValue":T[2]||(T[2]=R=>v.value=R),class:"title-input",onKeyup:xf(O,["enter"]),onBlur:O},null,544),[[Bu,v.value]])])])):hn("",!0),(me(!0),Ie(wt,null,Tr(n.value,R=>(me(),Ie("li",{key:R.id,class:Lt({active:U(ss)===R.id,renameing:o.value===R.id}),onClick:L=>{C.$emit("open",R.id),k(R.id)},onContextmenu:kp(L=>f(L,R),["prevent"])},[o.value===R.id?(me(),Ie("div",MY,[rl(oe("input",{ref_for:!0,ref:L=>{L&&(l.value=L)},"onUpdate:modelValue":T[3]||(T[3]=L=>a.value=L),class:"title-input",onKeyup:xf(p,["enter"]),onBlur:p},null,544),[[Bu,a.value]])])):(me(),Ie("div",TY,Et(R.title||""),1))],42,OY))),128))]),_e(dx,{show:r.value,"onUpdate:show":T[4]||(T[4]=R=>r.value=R),items:u.value,style:fr(h.value)},null,8,["show","items","style"])],64))}}),DY=["title"],EY={class:"title"},Ub=xt({__name:"ListItem",props:{icon:{type:String,default:"unknown"},title:{type:String,default:"Item"},active:{type:Boolean,default:!1}},setup(t){return(e,n)=>(me(),Ie("div",{class:Lt(["nav-list-item",{active:t.active}]),title:t.title},[_e(qn,{name:t.icon},null,8,["name"]),oe("div",EY,Et(t.title),1)],10,DY))}});var FE=typeof global=="object"&&global&&global.Object===Object&&global,IY=typeof self=="object"&&self&&self.Object===Object&&self,lh=FE||IY||Function("return this")(),Ev=lh.Symbol,HE=Object.prototype,PY=HE.hasOwnProperty,NY=HE.toString,Td=Ev?Ev.toStringTag:void 0;function RY(t){var e=PY.call(t,Td),n=t[Td];try{t[Td]=void 0;var r=!0}catch{}var i=NY.call(t);return r&&(e?t[Td]=n:delete t[Td]),i}var LY=Object.prototype,$Y=LY.toString;function BY(t){return $Y.call(t)}var zY="[object Null]",FY="[object Undefined]",cS=Ev?Ev.toStringTag:void 0;function mm(t){return t==null?t===void 0?FY:zY:cS&&cS in Object(t)?RY(t):BY(t)}function Gf(t){return t!=null&&typeof t=="object"}var HY="[object Symbol]";function VY(t){return typeof t=="symbol"||Gf(t)&&mm(t)==HY}var pw=Array.isArray,qY=/\s/;function WY(t){for(var e=t.length;e--&&qY.test(t.charAt(e)););return e}var jY=/^\s+/;function YY(t){return t&&t.slice(0,WY(t)+1).replace(jY,"")}function vs(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var uS=NaN,QY=/^[-+]0x[0-9a-f]+$/i,UY=/^0b[01]+$/i,GY=/^0o[0-7]+$/i,KY=parseInt;function hS(t){if(typeof t=="number")return t;if(VY(t))return uS;if(vs(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=vs(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=YY(t);var n=UY.test(t);return n||GY.test(t)?KY(t.slice(2),n?2:8):QY.test(t)?uS:+t}function VE(t){return t}var XY="[object AsyncFunction]",ZY="[object Function]",JY="[object GeneratorFunction]",eQ="[object Proxy]";function px(t){if(!vs(t))return!1;var e=mm(t);return e==ZY||e==JY||e==XY||e==eQ}var Gb=lh["__core-js_shared__"],fS=(function(){var t=/[^.]+$/.exec(Gb&&Gb.keys&&Gb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function tQ(t){return!!fS&&fS in t}var nQ=Function.prototype,rQ=nQ.toString;function iQ(t){if(t!=null){try{return rQ.call(t)}catch{}try{return t+""}catch{}}return""}var sQ=/[\\^$.*+?()[\]{}|]/g,oQ=/^\[object .+?Constructor\]$/,aQ=Function.prototype,lQ=Object.prototype,cQ=aQ.toString,uQ=lQ.hasOwnProperty,hQ=RegExp("^"+cQ.call(uQ).replace(sQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fQ(t){if(!vs(t)||tQ(t))return!1;var e=px(t)?hQ:oQ;return e.test(iQ(t))}function dQ(t,e){return t?.[e]}function mx(t,e){var n=dQ(t,e);return fQ(n)?n:void 0}var dS=Object.create,pQ=(function(){function t(){}return function(e){if(!vs(e))return{};if(dS)return dS(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function qE(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function mQ(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var gQ=800,vQ=16,yQ=Date.now;function bQ(t){var e=0,n=0;return function(){var r=yQ(),i=vQ-(r-n);if(n=r,i>0){if(++e>=gQ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function wQ(t){return function(){return t}}var Iv=(function(){try{var t=mx(Object,"defineProperty");return t({},"",{}),t}catch{}})(),xQ=Iv?function(t,e){return Iv(t,"toString",{configurable:!0,enumerable:!1,value:wQ(e),writable:!0})}:VE,kQ=bQ(xQ),SQ=9007199254740991,CQ=/^(?:0|[1-9]\d*)$/;function WE(t,e){var n=typeof t;return e=e??SQ,!!e&&(n=="number"||n!="symbol"&&CQ.test(t))&&t>-1&&t%1==0&&t<e}function gx(t,e,n){e=="__proto__"&&Iv?Iv(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function r2(t,e){return t===e||t!==t&&e!==e}var OQ=Object.prototype,MQ=OQ.hasOwnProperty;function TQ(t,e,n){var r=t[e];(!(MQ.call(t,e)&&r2(r,n))||n===void 0&&!(e in t))&&gx(t,e,n)}function AQ(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),i?gx(n,a,l):TQ(n,a,l)}return n}var pS=Math.max;function _Q(t,e,n){return e=pS(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=pS(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),qE(t,this,a)}}function jE(t,e){return kQ(_Q(t,e,VE),t+"")}var DQ=9007199254740991;function YE(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=DQ}function vx(t){return t!=null&&YE(t.length)&&!px(t)}function EQ(t,e,n){if(!vs(n))return!1;var r=typeof e;return(r=="number"?vx(n)&&WE(e,n.length):r=="string"&&e in n)?r2(n[e],t):!1}function IQ(t){return jE(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&EQ(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var PQ=Object.prototype;function QE(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||PQ;return t===n}function NQ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var RQ="[object Arguments]";function mS(t){return Gf(t)&&mm(t)==RQ}var UE=Object.prototype,LQ=UE.hasOwnProperty,$Q=UE.propertyIsEnumerable,mw=mS((function(){return arguments})())?mS:function(t){return Gf(t)&&LQ.call(t,"callee")&&!$Q.call(t,"callee")};function BQ(){return!1}var GE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,gS=GE&&typeof module=="object"&&module&&!module.nodeType&&module,zQ=gS&&gS.exports===GE,vS=zQ?lh.Buffer:void 0,FQ=vS?vS.isBuffer:void 0,KE=FQ||BQ,HQ="[object Arguments]",VQ="[object Array]",qQ="[object Boolean]",WQ="[object Date]",jQ="[object Error]",YQ="[object Function]",QQ="[object Map]",UQ="[object Number]",GQ="[object Object]",KQ="[object RegExp]",XQ="[object Set]",ZQ="[object String]",JQ="[object WeakMap]",eU="[object ArrayBuffer]",tU="[object DataView]",nU="[object Float32Array]",rU="[object Float64Array]",iU="[object Int8Array]",sU="[object Int16Array]",oU="[object Int32Array]",aU="[object Uint8Array]",lU="[object Uint8ClampedArray]",cU="[object Uint16Array]",uU="[object Uint32Array]",Fn={};Fn[nU]=Fn[rU]=Fn[iU]=Fn[sU]=Fn[oU]=Fn[aU]=Fn[lU]=Fn[cU]=Fn[uU]=!0;Fn[HQ]=Fn[VQ]=Fn[eU]=Fn[qQ]=Fn[tU]=Fn[WQ]=Fn[jQ]=Fn[YQ]=Fn[QQ]=Fn[UQ]=Fn[GQ]=Fn[KQ]=Fn[XQ]=Fn[ZQ]=Fn[JQ]=!1;function hU(t){return Gf(t)&&YE(t.length)&&!!Fn[mm(t)]}function fU(t){return function(e){return t(e)}}var XE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,F0=XE&&typeof module=="object"&&module&&!module.nodeType&&module,dU=F0&&F0.exports===XE,Kb=dU&&FE.process,yS=(function(){try{var t=F0&&F0.require&&F0.require("util").types;return t||Kb&&Kb.binding&&Kb.binding("util")}catch{}})(),bS=yS&&yS.isTypedArray,ZE=bS?fU(bS):hU;function pU(t,e){var n=pw(t),r=!n&&mw(t),i=!n&&!r&&KE(t),s=!n&&!r&&!i&&ZE(t),o=n||r||i||s,a=o?NQ(t.length,String):[],l=a.length;for(var c in t)o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||WE(c,l))||a.push(c);return a}function mU(t,e){return function(n){return t(e(n))}}function gU(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var vU=Object.prototype,yU=vU.hasOwnProperty;function bU(t){if(!vs(t))return gU(t);var e=QE(t),n=[];for(var r in t)r=="constructor"&&(e||!yU.call(t,r))||n.push(r);return n}function JE(t){return vx(t)?pU(t):bU(t)}var Sp=mx(Object,"create");function wU(){this.__data__=Sp?Sp(null):{},this.size=0}function xU(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var kU="__lodash_hash_undefined__",SU=Object.prototype,CU=SU.hasOwnProperty;function OU(t){var e=this.__data__;if(Sp){var n=e[t];return n===kU?void 0:n}return CU.call(e,t)?e[t]:void 0}var MU=Object.prototype,TU=MU.hasOwnProperty;function AU(t){var e=this.__data__;return Sp?e[t]!==void 0:TU.call(e,t)}var _U="__lodash_hash_undefined__";function DU(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Sp&&e===void 0?_U:e,this}function zu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zu.prototype.clear=wU;zu.prototype.delete=xU;zu.prototype.get=OU;zu.prototype.has=AU;zu.prototype.set=DU;function EU(){this.__data__=[],this.size=0}function i2(t,e){for(var n=t.length;n--;)if(r2(t[n][0],e))return n;return-1}var IU=Array.prototype,PU=IU.splice;function NU(t){var e=this.__data__,n=i2(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():PU.call(e,n,1),--this.size,!0}function RU(t){var e=this.__data__,n=i2(e,t);return n<0?void 0:e[n][1]}function LU(t){return i2(this.__data__,t)>-1}function $U(t,e){var n=this.__data__,r=i2(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function bl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bl.prototype.clear=EU;bl.prototype.delete=NU;bl.prototype.get=RU;bl.prototype.has=LU;bl.prototype.set=$U;var eI=mx(lh,"Map");function BU(){this.size=0,this.__data__={hash:new zu,map:new(eI||bl),string:new zu}}function zU(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function s2(t,e){var n=t.__data__;return zU(e)?n[typeof e=="string"?"string":"hash"]:n.map}function FU(t){var e=s2(this,t).delete(t);return this.size-=e?1:0,e}function HU(t){return s2(this,t).get(t)}function VU(t){return s2(this,t).has(t)}function qU(t,e){var n=s2(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Kf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kf.prototype.clear=BU;Kf.prototype.delete=FU;Kf.prototype.get=HU;Kf.prototype.has=VU;Kf.prototype.set=qU;var tI=mU(Object.getPrototypeOf,Object),WU="[object Object]",jU=Function.prototype,YU=Object.prototype,nI=jU.toString,QU=YU.hasOwnProperty,UU=nI.call(Object);function GU(t){if(!Gf(t)||mm(t)!=WU)return!1;var e=tI(t);if(e===null)return!0;var n=QU.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&nI.call(n)==UU}function KU(){this.__data__=new bl,this.size=0}function XU(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function ZU(t){return this.__data__.get(t)}function JU(t){return this.__data__.has(t)}var eG=200;function tG(t,e){var n=this.__data__;if(n instanceof bl){var r=n.__data__;if(!eI||r.length<eG-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kf(r)}return n.set(t,e),this.size=n.size,this}function Xf(t){var e=this.__data__=new bl(t);this.size=e.size}Xf.prototype.clear=KU;Xf.prototype.delete=XU;Xf.prototype.get=ZU;Xf.prototype.has=JU;Xf.prototype.set=tG;var rI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wS=rI&&typeof module=="object"&&module&&!module.nodeType&&module,nG=wS&&wS.exports===rI,xS=nG?lh.Buffer:void 0;xS&&xS.allocUnsafe;function rG(t,e){return t.slice()}var kS=lh.Uint8Array;function iG(t){var e=new t.constructor(t.byteLength);return new kS(e).set(new kS(t)),e}function sG(t,e){var n=iG(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function oG(t){return typeof t.constructor=="function"&&!QE(t)?pQ(tI(t)):{}}function aG(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(n(s[l],l,s)===!1)break}return e}}var lG=aG(),Xb=function(){return lh.Date.now()},cG="Expected a function",uG=Math.max,hG=Math.min;function o2(t,e,n){var r,i,s,o,a,l,c=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(cG);e=hS(e)||0,vs(n)&&(u=!!n.leading,h="maxWait"in n,s=h?uG(hS(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function d(C){var T=r,R=i;return r=i=void 0,c=C,o=t.apply(R,T),o}function p(C){return c=C,a=setTimeout(v,e),u?d(C):o}function m(C){var T=C-l,R=C-c,L=e-T;return h?hG(L,s-R):L}function g(C){var T=C-l,R=C-c;return l===void 0||T>=e||T<0||h&&R>=s}function v(){var C=Xb();if(g(C))return b(C);a=setTimeout(v,m(C))}function b(C){return a=void 0,f&&r?d(C):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function O(){return a===void 0?o:b(Xb())}function k(){var C=Xb(),T=g(C);if(r=arguments,i=this,l=C,T){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(v,e),d(l)}return a===void 0&&(a=setTimeout(v,e)),o}return k.cancel=S,k.flush=O,k}function gw(t,e,n){(n!==void 0&&!r2(t[e],n)||n===void 0&&!(e in t))&&gx(t,e,n)}function fG(t){return Gf(t)&&vx(t)}function vw(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function dG(t){return AQ(t,JE(t))}function pG(t,e,n,r,i,s,o){var a=vw(t,n),l=vw(e,n),c=o.get(l);if(c){gw(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,h=u===void 0;if(h){var f=pw(l),d=!f&&KE(l),p=!f&&!d&&ZE(l);u=l,f||d||p?pw(a)?u=a:fG(a)?u=mQ(a):d?(h=!1,u=rG(l)):p?(h=!1,u=sG(l)):u=[]:GU(l)||mw(l)?(u=a,mw(a)?u=dG(a):(!vs(a)||px(a))&&(u=oG(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),gw(t,n,u)}function yx(t,e,n,r,i){t!==e&&lG(e,function(s,o){if(i||(i=new Xf),vs(s))pG(t,e,o,n,yx,r,i);else{var a=r?r(vw(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),gw(t,o,a)}},JE)}function iI(t,e,n,r,i,s){return vs(t)&&vs(e)&&(s.set(e,t),yx(t,e,void 0,iI,s),s.delete(e)),t}var mG=IQ(function(t,e,n,r){yx(t,e,n,r)}),gG=jE(function(t){return t.push(void 0,iI),qE(mG,void 0,t)}),vG="Expected a function";function a2(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(vG);return vs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),o2(t,e,{leading:r,maxWait:e,trailing:i})}const sI=1024;let yG=0,As=class{constructor(e,n){this.from=e,this.to=n}};class Bt{constructor(e={}){this.id=yG++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hi.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Bt.closedBy=new Bt({deserialize:t=>t.split(" ")});Bt.openedBy=new Bt({deserialize:t=>t.split(" ")});Bt.group=new Bt({deserialize:t=>t.split(" ")});Bt.isolate=new Bt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Bt.contextHash=new Bt({perNode:!0});Bt.lookAhead=new Bt({perNode:!0});Bt.mounted=new Bt({perNode:!0});class tf{constructor(e,n,r,i=!1){this.tree=e,this.overlay=n,this.parser=r,this.bracketed=i}static get(e){return e&&e.props&&e.props[Bt.mounted.id]}}const bG=Object.create(null);let Hi=class oI{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):bG,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new oI(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Bt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Bt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}};Hi.none=new Hi("",Object.create(null),0,8);class l2{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);if(o){i||(i=Object.assign({},r.props));let a=o[1],l=o[0];l.combine&&l.id in i&&(a=l.combine(i[l.id],a)),i[l.id]=a}}n.push(i?new Hi(r.name,i,r.id,r.flags):r)}return new l2(n)}}const r1=new WeakMap,SS=new WeakMap;var vn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(vn||(vn={}));class fn{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=tf.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Pv(this.topNode,e)}cursorAt(e,n=0,r=0){let i=r1.get(this)||this.topNode,s=new Pv(i);return s.moveTo(e,n),r1.set(this,s._tree),s}get topNode(){return new Ur(this,0,0,null)}resolve(e,n=0){let r=Cp(r1.get(this)||this.topNode,e,n,!1);return r1.set(this,r),r}resolveInner(e,n=0){let r=Cp(SS.get(this)||this.topNode,e,n,!0);return SS.set(this,r),r}resolveStack(e,n=0){return kG(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&vn.IncludeAnonymous)>0;for(let l=this.cursor(o|vn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:xx(Hi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new fn(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new fn(Hi.none,n,r,i)))}static build(e){return SG(e)}}fn.empty=new fn(Hi.none,[],[],0);class bx{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new bx(this.buffer,this.index)}}class fc{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Hi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(aI(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new fc(s,o,this.set)}}function aI(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Cp(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Ur&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:vn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Ur&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class lI{cursor(e=0){return new Pv(this,e)}getChild(e,n=null,r=null){let i=CS(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return CS(this,e,n,r)}resolve(e,n=0){return Cp(this,e,n,!1)}resolveInner(e,n=0){return Cp(this,e,n,!0)}matchContext(e){return yw(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Ur extends lI{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){var o;for(let a=this;;){for(let{children:l,positions:c}=a._tree,u=n>0?l.length:-1;e!=u;e+=n){let h=l[e],f=c[e]+a.from;if(!(!(s&vn.EnterBracketed&&h instanceof fn&&((o=tf.get(h))===null||o===void 0?void 0:o.overlay)===null&&(f>=r||f+h.length<=r))&&!aI(i,r,f,f+h.length))){if(h instanceof fc){if(s&vn.ExcludeBuffers)continue;let d=h.findChild(0,h.buffer.length,n,r-f,i);if(d>-1)return new Wo(new wG(a,h,e,f),null,d)}else if(s&vn.IncludeAnonymous||!h.type.isAnonymous||wx(h)){let d;if(!(s&vn.IgnoreMounts)&&(d=tf.get(h))&&!d.overlay)return new Ur(d.tree,f,e,a);let p=new Ur(h,f,e,a);return s&vn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?h.children.length-1:0,n,r,i,s)}}}if(s&vn.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+n:e=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,r=0){let i;if(!(r&vn.IgnoreOverlays)&&(i=tf.get(this._tree))&&i.overlay){let s=e-this.from,o=r&vn.EnterBracketed&&i.bracketed;for(let{from:a,to:l}of i.overlay)if((n>0||o?a<=s:a<s)&&(n<0||o?l>=s:l>s))return new Ur(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function CS(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function yw(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class wG{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Wo extends lI{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Wo(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,r=0){if(r&vn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Wo(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wo(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Wo(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new fn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function cI(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Ur&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new xG(i,n)}class xG{constructor(e,n){this.heads=e,this.node=n}get next(){return cI(this.heads)}}function kG(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Ur?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=tf.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Ur(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Cp(a,e,n,!1))}}return i?cI(i):r}class Pv{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~vn.EnterBracketed,e instanceof Ur)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ur?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&vn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&vn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&vn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&vn.IncludeAnonymous||a instanceof fc||!a.type.isAnonymous||wx(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Wo(this.buffer,n,this.stack[i]);return this.bufferNode=new Wo(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return yw(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return yw(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function wx(t){return t.children.some(e=>e instanceof fc||!e.type.isAnonymous||wx(e))}function SG(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=sI,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new bx(n,n.length):n,l=r.types,c=0,u=0;function h(k,C,T,R,L,I){let{id:F,start:E,end:ee,size:G}=a,W=u,X=c;if(G<0)if(a.next(),G==-1){let fe=s[F];T.push(fe),R.push(E-k);return}else if(G==-3){c=F;return}else if(G==-4){u=F;return}else throw new RangeError(`Unrecognized record size: ${G}`);let te=l[F],ne,ye,A=E-k;if(ee-E<=i&&(ye=g(a.pos-C,L))){let fe=new Uint16Array(ye.size-ye.skip),he=a.pos-ye.size,P=fe.length;for(;a.pos>he;)P=v(ye.start,fe,P);ne=new fc(fe,ee-ye.start,r),A=ye.start-k}else{let fe=a.pos-G;a.next();let he=[],P=[],Ue=F>=o?F:-1,je=0,st=ee;for(;a.pos>fe;)Ue>=0&&a.id==Ue&&a.size>=0?(a.end<=st-i&&(p(he,P,E,je,a.end,st,Ue,W,X),je=he.length,st=a.end),a.next()):I>2500?f(E,fe,he,P):h(E,fe,he,P,Ue,I+1);if(Ue>=0&&je>0&&je<he.length&&p(he,P,E,je,E,st,Ue,W,X),he.reverse(),P.reverse(),Ue>-1&&je>0){let dt=d(te,X);ne=xx(te,he,P,0,he.length,0,ee-E,dt,dt)}else ne=m(te,he,P,ee-E,W-ee,X)}T.push(ne),R.push(A)}function f(k,C,T,R){let L=[],I=0,F=-1;for(;a.pos>C;){let{id:E,start:ee,end:G,size:W}=a;if(W>4)a.next();else{if(F>-1&&ee<F)break;F<0&&(F=G-i),L.push(E,ee,G),I++,a.next()}}if(I){let E=new Uint16Array(I*4),ee=L[L.length-2];for(let G=L.length-3,W=0;G>=0;G-=3)E[W++]=L[G],E[W++]=L[G+1]-ee,E[W++]=L[G+2]-ee,E[W++]=W;T.push(new fc(E,L[2]-ee,r)),R.push(ee-k)}}function d(k,C){return(T,R,L)=>{let I=0,F=T.length-1,E,ee;if(F>=0&&(E=T[F])instanceof fn){if(!F&&E.type==k&&E.length==L)return E;(ee=E.prop(Bt.lookAhead))&&(I=R[F]+E.length+ee)}return m(k,T,R,L,I,C)}}function p(k,C,T,R,L,I,F,E,ee){let G=[],W=[];for(;k.length>R;)G.push(k.pop()),W.push(C.pop()+T-L);k.push(m(r.types[F],G,W,I-L,E-I,ee)),C.push(L-T)}function m(k,C,T,R,L,I,F){if(I){let E=[Bt.contextHash,I];F=F?[E].concat(F):[E]}if(L>25){let E=[Bt.lookAhead,L];F=F?[E].concat(F):[E]}return new fn(k,C,T,R,F)}function g(k,C){let T=a.fork(),R=0,L=0,I=0,F=T.end-i,E={size:0,start:0,skip:0};e:for(let ee=T.pos-k;T.pos>ee;){let G=T.size;if(T.id==C&&G>=0){E.size=R,E.start=L,E.skip=I,I+=4,R+=4,T.next();continue}let W=T.pos-G;if(G<0||W<ee||T.start<F)break;let X=T.id>=o?4:0,te=T.start;for(T.next();T.pos>W;){if(T.size<0)if(T.size==-3||T.size==-4)X+=4;else break e;else T.id>=o&&(X+=4);T.next()}L=te,R+=G,I+=X}return(C<0||R==k)&&(E.size=R,E.start=L,E.skip=I),E.size>4?E:void 0}function v(k,C,T){let{id:R,start:L,end:I,size:F}=a;if(a.next(),F>=0&&R<o){let E=T;if(F>4){let ee=a.pos-(F-4);for(;a.pos>ee;)T=v(k,C,T)}C[--T]=E,C[--T]=I-k,C[--T]=L-k,C[--T]=R}else F==-3?c=R:F==-4&&(u=R);return T}let b=[],S=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,b,S,-1,0);let O=(e=t.length)!==null&&e!==void 0?e:b.length?S[0]+b[0].length:0;return new fn(l[t.topID],b.reverse(),S.reverse(),O)}const OS=new WeakMap;function fg(t,e){if(!t.isAnonymous||e instanceof fc||e.type!=t)return 1;let n=OS.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof fn)){n=1;break}n+=fg(t,r)}OS.set(e,n)}return n}function xx(t,e,n,r,i,s,o,a,l){let c=0;for(let p=r;p<i;p++)c+=fg(t,e[p]);let u=Math.ceil(c*1.5/8),h=[],f=[];function d(p,m,g,v,b){for(let S=g;S<v;){let O=S,k=m[S],C=fg(t,p[S]);for(S++;S<v;S++){let T=fg(t,p[S]);if(C+T>=u)break;C+=T}if(S==O+1){if(C>u){let T=p[O];d(T.children,T.positions,0,T.children.length,m[O]+b);continue}h.push(p[O])}else{let T=m[S-1]+p[S-1].length-k;h.push(xx(t,p,m,O,S,k,T,null,l))}f.push(k+b-s)}}return d(e,n,r,i,0),(a||l)(h,f,o)}class CG{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Wo?this.setBuffer(e.context.buffer,e.index,n):e instanceof Ur&&this.map.set(e.tree,n)}get(e){return e instanceof Wo?this.getBuffer(e.context.buffer,e.index):e instanceof Ur?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Ga{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Ga(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,h=u?u.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let f=o;if(l>=f.from||h<=f.to||c){let d=Math.max(f.from,l)-c,p=Math.min(f.to,h)-c;f=d>=p?null:new Ga(d,p,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}let kx=class{startParse(e,n,r){return typeof e=="string"&&(e=new OG(e)),r=r?r.length?r.map(i=>new As(i.from,i.to)):[new As(0,0)]:[new As(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class OG{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function PDe(t){return(e,n,r,i)=>new TG(e,t,n,r,i)}class MS{constructor(e,n,r,i,s,o){this.parser=e,this.parse=n,this.overlay=r,this.bracketed=i,this.target=s,this.from=o}}function TS(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class MG{constructor(e,n,r,i,s,o,a,l){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.bracketed=o,this.target=a,this.prev=l,this.depth=0,this.ranges=[]}}const bw=new Bt({perNode:!0});class TG{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new fn(r.type,r.children,r.positions,r.length,r.propValues.concat([[bw,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[Bt.mounted.id]=new tf(n,e.overlay,e.parser,e.bracketed),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new DG(this.fragments),n=null,r=null,i=new Pv(new Ur(this.baseTree,this.ranges[0].from,0,null),vn.IncludeAnonymous|vn.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(n){let c=n.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,f=u.to+c.pos;h>=i.from&&f<=i.to&&!n.ranges.some(d=>d.from<f&&d.to>h)&&n.ranges.push({from:h,to:f})}}a=!1}else if(r&&(o=AG(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||(_G(i),n&&n.depth++,r&&r.depth++);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")n=new MG(s.parser,s.overlay,c,this.inner.length,i.from,!!s.bracketed,i.tree,n);else{let u=DS(this.ranges,s.overlay||(i.from<i.to?[new As(i.from,i.to)]:[]));u.length&&TS(u),(u.length||!s.overlay)&&this.inner.push(new MS(s.parser,u.length?s.parser.startParse(this.input,ES(c,u),u):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new As(h.from-i.from,h.to-i.from)):null,!!s.bracketed,i.tree,u.length?u[0].from:i.from)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(i))&&(l===!0&&(l=new As(i.from,i.to)),l.from<l.to)){let c=n.ranges.length-1;c>=0&&n.ranges[c].to==l.from?n.ranges[c]={from:n.ranges[c].from,to:l.to}:n.ranges.push(l)}if(a&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let c=DS(this.ranges,n.ranges);c.length&&(TS(c),this.inner.splice(n.index,0,new MS(n.parser,n.parser.startParse(this.input,ES(n.mounts,c),c),n.ranges.map(u=>new As(u.from-n.start,u.to-n.start)),n.bracketed,n.target,c[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function AG(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function AS(t,e,n,r,i,s){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),i.push(o-s)}}function _G(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function c(u,h,f,d,p,m){let g=n[m],v=[],b=[];AS(o,u,g,v,b,d);let S=a[g+1],O=a[g+2];l.push(v.length);let k=m?c(g+4,a[g+3],o.set.types[a[g]],S,O-S,m-1):e.toTree();return v.push(k),b.push(S-d),AS(o,a[g+3],h,v,b,d),new fn(f,v,b,p)}i.children[s]=c(0,a.length,Hi.none,0,o.length,n.length-1);for(let u of l){let h=t.tree.children[u],f=t.tree.positions[u];t.yield(new Ur(h,f+t.from,u,t._tree))}}class _S{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(vn.IncludeAnonymous|vn.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,vn.IgnoreOverlays|vn.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof fn)n=n.children[0];else break}return!1}}let DG=class{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(bw))!==null&&n!==void 0?n:r.to,this.inner=new _S(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(bw))!==null&&e!==void 0?e:n.to,this.inner=new _S(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(Bt.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}};function DS(t,e){let n=null,r=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[s]=new As(l.from,o),l.to>a&&n.splice(s+1,0,new As(a,l.to))):l.to>a?n[s--]=new As(a,l.to):n.splice(s--,1))}}return r}function EG(t,e,n,r){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==t.length?1e9:o?t[i].to:t[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,n),d=Math.min(u,h,r);f<d&&c.push(new As(f,d))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return c}function ES(t,e){let n=[];for(let{pos:r,mount:i,frag:s}of t){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(f=>new As(f.from+r,f.to+r)),h=EG(e,u,l,c);for(let f=0,d=l;;f++){let p=f==h.length,m=p?c:h[f].from;if(m>d&&n.push(new Ga(d,m,i.tree,-o,s.from>=d||s.openStart,s.to<=m||s.openEnd)),p)break;d=h[f].to}}else n.push(new Ga(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return n}let ww=[],uI=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?uI:ww).push(n=n+t[e])})();function IG(t){if(t<768)return!1;for(let e=0,n=ww.length;;){let r=e+n>>1;if(t<ww[r])n=r;else if(t>=uI[r])e=r+1;else return!0;if(e==n)return!1}}function IS(t){return t>=127462&&t<=127487}const PS=8205;function PG(t,e,n=!0,r=!0){return(n?hI:NG)(t,e,r)}function hI(t,e,n){if(e==t.length)return e;e&&fI(t.charCodeAt(e))&&dI(t.charCodeAt(e-1))&&e--;let r=Zb(t,e);for(e+=NS(r);e<t.length;){let i=Zb(t,e);if(r==PS||i==PS||n&&IG(i))e+=NS(i),r=i;else if(IS(i)){let s=0,o=e-2;for(;o>=0&&IS(Zb(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function NG(t,e,n){for(;e>0;){let r=hI(t,e-2,n);if(r<e)return r;e--}return 0}function Zb(t,e){let n=t.charCodeAt(e);if(!dI(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return fI(r)?(n-55296<<10)+(r-56320)+65536:n}function fI(t){return t>=56320&&t<57344}function dI(t){return t>=55296&&t<56320}function NS(t){return t<65536?1:2}class nn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=kf(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),dg.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=kf(this,e,n);let r=[];return this.decompose(e,n,r,0),dg.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new H0(this),s=new H0(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new H0(this,e)}iterRange(e,n=this.length){return new pI(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new mI(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?nn.empty:e.length<=32?new or(e):dg.from(or.split(e,[]))}}class or extends nn{constructor(e,n=RG(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new LG(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new or(RS(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=pg(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new or(a,o.length+s.length));else{let l=a.length>>1;r.push(new or(a.slice(0,l)),new or(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof or))return super.replace(e,n,r);[e,n]=kf(this,e,n);let i=pg(this.text,pg(r.text,RS(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new or(i,s):dg.from(or.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=kf(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new or(r,i)),r=[],i=-1);return i>-1&&n.push(new or(r,i)),n}}let dg=class Ah extends nn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=kf(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Ah(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=kf(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ah))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new or(d,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(d){let p;if(d.lines>s&&d instanceof Ah)for(let m of d.children)h(m);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof or&&l&&(p=u[u.length-1])instanceof or&&d.lines+p.lines<=32?(l+=d.lines,c+=d.length+1,u[u.length-1]=new or(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&f(),l+=d.lines,c+=d.length+1,u.push(d))}function f(){l!=0&&(a.push(u.length==1?u[0]:Ah.from(u,c)),c=-1,l=u.length=0)}for(let d of e)h(d);return f(),a.length==1?a[0]:new Ah(a,n)}};nn.empty=new or([""],0);function RG(t){let e=-1;for(let n of t)e+=n.length+1;return e}function pg(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function RS(t,e,n){return pg(t,[""],e,n)}class H0{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof or?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof or?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof or){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof or?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class pI{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new H0(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class mI{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(nn.prototype[Symbol.iterator]=function(){return this.iter()},H0.prototype[Symbol.iterator]=pI.prototype[Symbol.iterator]=mI.prototype[Symbol.iterator]=function(){return this});class LG{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function kf(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function xr(t,e,n=!0,r=!0){return PG(t,e,n,r)}function $G(t){return t>=56320&&t<57344}function BG(t){return t>=55296&&t<56320}function Ei(t,e){let n=t.charCodeAt(e);if(!BG(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return $G(r)?(n-55296<<10)+(r-56320)+65536:n}function Sx(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ho(t){return t<65536?1:2}const xw=/\r\n?|\n/;var $r=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})($r||($r={}));class Zo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){kw(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Zo(e)}composeDesc(e){return this.empty?e:e.empty?this:gI(this,e)}mapDesc(e,n=!1){return e.empty?this:Sw(this,e,n)}mapPos(e,n=-1,r=$r.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=$r.Simple&&c>=e&&(r==$r.TrackDel&&i<e&&c>e||r==$r.TrackBefore&&i<e||r==$r.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Zo(e)}static create(e){return new Zo(e)}}class wr extends Zo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kw(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return Sw(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(nn.empty);r.push(o?e.slice(s,s+o):nn.empty)}s+=o}return new wr(n,r)}compose(e){return this.empty?e:e.empty?this:gI(this,e,!0)}map(e,n=!1){return e.empty?this:Sw(this,e,n,!0)}iterChanges(e,n=!1){kw(this,e,n)}get desc(){return Zo.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Op(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Wr(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Wr(n,u,h),h>0&&Jl(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Wr(n,u,-1),Wr(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new wr(n,r),filtered:Zo.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&Wr(i,n-o,-1);let h=new wr(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof wr){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:f=h,insert:d}=u;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let p=d?typeof d=="string"?nn.of(d.split(r||xw)):d:nn.empty,m=p.length;if(h==f&&m==0)return;h<o&&l(),h>o&&Wr(i,h-o,-1),Wr(i,f-h,m),Jl(s,i,p),o=f}}return c(e),l(!a),a}static empty(e){return new wr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(nn.empty);r[i]=nn.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new wr(n,r)}static createSet(e,n){return new wr(e,n)}}function Wr(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Jl(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(nn.empty);t.push(n)}}function kw(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=nn.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function Sw(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Op(t),a=new Op(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Wr(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Wr(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Wr(i,0,o.ins),s&&Jl(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Wr(i,c,l<o.i?o.ins:0),s&&l<o.i&&Jl(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?wr.createSet(i,s):Zo.create(i);throw new Error("Mismatched change set lengths")}}}function gI(t,e,n=!1){let r=[],i=n?[]:null,s=new Op(t),o=new Op(e);for(let a=!1;;){if(s.done&&o.done)return i?wr.createSet(r,i):Zo.create(r);if(s.ins==0)Wr(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Wr(r,0,o.ins,a),i&&Jl(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Wr(r,l,u,a),i&&u&&Jl(i,r,o.text)}else o.ins==-1?(Wr(r,s.off?0:s.len,l,a),i&&Jl(i,r,s.textBit(l))):(Wr(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Jl(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Op{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?nn.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?nn.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let i1=class Cw{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Cw(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Se.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Se.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Se.range(e.anchor,e.head)}static create(e,n,r){return new Cw(e,n,r)}};class Se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Se.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Se([this.main],0)}addRange(e,n=!0){return Se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Se.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Se(e.ranges.map(n=>i1.fromJSON(n)),e.main)}static single(e,n=e){return new Se([Se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Se.normalized(e.slice(),n);r=s.to}return new Se(e,n)}static cursor(e,n=0,r,i){return i1.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?i1.create(n,e,48|s):i1.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?Se.range(l,a):Se.range(a,l))}}return new Se(e,n)}}function vI(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Cx=0;class et{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Cx++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new et(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Ox),!!e.static,e.enables)}of(e){return new mg([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new mg(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new mg(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Ox(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class mg{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Cx++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:(((n=e[h.id])!==null&&n!==void 0?n:1)&1)==0&&u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||Ow(h,u)){let d=r(h);if(a?!LS(d,h.values[o],i):!i(d,h.values[o]))return h.values[o]=d,1}return 0},reconfigure:(h,f)=>{let d,p=f.config.address[s];if(p!=null){let m=Nv(f,p);if(this.dependencies.every(g=>g instanceof et?f.facet(g)===h.facet(g):g instanceof Er?f.field(g,!1)==h.field(g,!1):!0)||(a?LS(d=r(h),m,i):i(d=r(h),m)))return h.values[o]=m,0}else d=r(h);return h.values[o]=d,1}}}}function LS(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Ow(t,e){let n=!1;for(let r of e)V0(t,r)&1&&(n=!0);return n}function zG(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let h=Nv(l,r[u]);if(i[u]==2)for(let f of h)c.push(f);else c.push(h)}return e.combine(c)}return{create(l){for(let c of r)V0(l,c);return l.values[o]=a(l),1},update(l,c){if(!Ow(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=Ow(l,r),h=c.config.facets[e.id],f=c.facet(e);if(h&&!u&&Ox(n,h))return l.values[o]=f,0;let d=a(l);return e.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const s1=et.define({static:!0});class Er{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Er(Cx++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(s1).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(s1),o=i.facet(s1),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,s1.of({field:this,create:e})]}get extension(){return this}}const hu={lowest:4,low:3,default:2,high:1,highest:0};function Ad(t){return e=>new yI(e,t)}const Oc={highest:Ad(hu.highest),high:Ad(hu.high),default:Ad(hu.default),low:Ad(hu.low),lowest:Ad(hu.lowest)};class yI{constructor(e,n){this.inner=e,this.prec=n}}class Fu{of(e){return new Mw(this,e)}reconfigure(e){return Fu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Mw{constructor(e,n){this.compartment=e,this.inner=n}}let $S=class bI{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of FG(e,n,o))f instanceof Er?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(d=>f.slot(d));let u=r?.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=u&&u[f]||[];if(d.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,Ox(m,d))l.push(r.facet(p));else{let g=p.combine(d.map(v=>v.value));l.push(r&&p.compare(g,r.facet(p))?r.facet(p):g)}else{for(let g of d)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(v=>g.dynamicSlot(v)));a[p.id]=c.length<<1,c.push(g=>zG(g,p,d))}}let h=c.map(f=>f(a));return new bI(e,o,h,a,l,s)}};function FG(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof Mw&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Mw){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof yI)s(o.inner,o.prec);else if(o instanceof Er)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof mg)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,hu.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,hu.default),r.reduce((o,a)=>o.concat(a))}function V0(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Nv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const wI=et.define(),Tw=et.define({combine:t=>t.some(e=>e),static:!0}),xI=et.define({combine:t=>t.length?t[0]:void 0,static:!0}),kI=et.define(),SI=et.define(),CI=et.define(),OI=et.define({combine:t=>t.length?t[0]:!1});class wl{constructor(e,n){this.type=e,this.value=n}static define(){return new HG}}class HG{of(e){return new wl(this,e)}}class VG{constructor(e){this.map=e}of(e){return new It(this,e)}}class It{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new It(this.type,n)}is(e){return this.type==e}static define(e={}){return new VG(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}It.reconfigure=It.define();It.appendConfig=It.define();let di=class Ud{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&vI(r,n.newLength),s.some(a=>a.type==Ud.time)||(this.annotations=s.concat(Ud.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Ud(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ud.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}};di.time=wl.define();di.userEvent=wl.define();di.addToHistory=wl.define();di.remote=wl.define();function qG(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function MI(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=wr.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:It.mapEffects(t.effects,i).concat(It.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Aw(t,e,n){let r=e.selection,i=nf(e.annotations);return e.userEvent&&(i=i.concat(di.userEvent.of(e.userEvent))),{changes:e.changes instanceof wr?e.changes:wr.of(e.changes||[],n,t.facet(xI)),selection:r&&(r instanceof Se?r:Se.single(r.anchor,r.head)),effects:nf(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function TI(t,e,n){let r=Aw(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=MI(r,Aw(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=di.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return jG(n?WG(i):i)}function WG(t){let e=t.startState,n=!0;for(let i of e.facet(kI)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:qG(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=wr.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=di.create(e,i,t.selection&&t.selection.map(s),It.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(SI);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof di?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof di?t=s[0]:t=TI(e,nf(s),!1)}return t}function jG(t){let e=t.startState,n=e.facet(CI),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=MI(r,Aw(e,s,t.changes.newLength),!0))}return r==t?t:di.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const YG=[];function nf(t){return t==null?YG:Array.isArray(t)?t:[t]}var Un=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(Un||(Un={}));const QG=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let _w;try{_w=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function UG(t){if(_w)return _w.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||QG.test(n)))return!0}return!1}function GG(t){return e=>{if(!/\S/.test(e))return Un.Space;if(UG(e))return Un.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Un.Word;return Un.Other}}let Sn=class Js{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)V0(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return V0(this,r),Nv(this,r)}update(...e){return TI(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Fu.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(It.reconfigure)?(n=null,r=a.value):a.is(It.appendConfig)&&(n=null,r=nf(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=$S.resolve(r,i,this),s=new Js(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(Tw)?e.newSelection:e.newSelection.asSingle();new Js(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=nf(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=It.mapEffects(o,u).concat(It.mapEffects(nf(l.effects),h))}return{changes:i,selection:Se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof wr?e:wr.of(e,this.doc.length,this.facet(Js.lineSeparator))}toText(e){return nn.of(e.split(this.facet(Js.lineSeparator)||xw))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(V0(this,n),Nv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Er&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Js.create({doc:e.doc,selection:Se.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=$S.resolve(e.extensions||[],new Map),r=e.doc instanceof nn?e.doc:nn.of((e.doc||"").split(n.staticFacet(Js.lineSeparator)||xw)),i=e.selection?e.selection instanceof Se?e.selection:Se.single(e.selection.anchor,e.selection.head):Se.single(0);return vI(i,r.length),n.staticFacet(Tw)||(i=i.asSingle()),new Js(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Js.tabSize)}get lineBreak(){return this.facet(Js.lineSeparator)||`
`}get readOnly(){return this.facet(OI)}phrase(e,...n){for(let r of this.facet(Js.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(wI))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return GG(n.length?n[0]:"")}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=xr(n,o,!1);if(s(n.slice(l,o))!=Un.Word)break;o=l}for(;a<i;){let l=xr(n,a);if(s(n.slice(a,l))!=Un.Word)break;a=l}return o==a?null:Se.range(o+r,a+r)}};Sn.allowMultipleSelections=Tw;Sn.tabSize=et.define({combine:t=>t.length?t[0]:4});Sn.lineSeparator=xI;Sn.readOnly=OI;Sn.phrases=et.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Sn.languageData=wI;Sn.changeFilter=kI;Sn.transactionFilter=SI;Sn.transactionExtender=CI;Fu.reconfigure=It.define();function ca(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class dc{eq(e){return this==e}range(e,n=e){return Mp.create(e,n,this)}}dc.prototype.startSide=dc.prototype.endSide=0;dc.prototype.point=!1;dc.prototype.mapMode=$r.TrackDel;function Mx(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}class Mp{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Mp(e,n,r)}}function Dw(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Tx{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,f,d;if(u==h){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(f=d=p,c.startSide!=c.endSide&&(d=n.mapPos(u,c.endSide),d<f)))continue}else if(f=n.mapPos(u,c.startSide),d=n.mapPos(h,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,d-f)),r.push(c),i.push(f-o),s.push(d-o))}return{mapped:r.length?new Tx(i,s,r,a):null,pos:o}}}class Ut{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Ut(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Dw)),this.isEmpty)return n.length?Ut.of(n):this;let a=new AI(this,null,-1).goto(0),l=0,c=[],u=new il;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let h=n[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Mp.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Ut.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new Ut(r,n,s||Ut.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Tp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Tp.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=BS(o,a,r),c=new _d(o,l,s),u=new _d(a,l,s);r.iterGaps((h,f,d)=>zS(c,h,u,f,d,i)),r.empty&&r.length==0&&zS(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=BS(s,o),l=new _d(s,a,0).goto(r),c=new _d(o,a,0).goto(r);for(;;){if(l.to!=c.to||!Ew(l.active,c.active)||l.point&&(!c.point||!Mx(l.point,c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new _d(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new il;for(let i of e instanceof Mp?[e]:n?KG(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Ut.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Ut.empty;i=i.nextLayer)n=new Ut(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}Ut.empty=new Ut([],[],null,-1);function KG(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Dw(e,r)>0)return t.slice().sort(Dw);e=r}return t}Ut.empty.nextLayer=Ut.empty;class il{finishChunk(e){this.chunks.push(new Tx(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new il)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function BS(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class AI{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Tp{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new AI(o,n,r,s));return i.length==1?i[0]:new Tp(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Jb(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Jb(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Jb(this.heap,0)}}}function Jb(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class _d{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Tp.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){o1(this.active,e),o1(this.activeTo,e),o1(this.activeRank,e),this.minActive=FS(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;a1(this.active,n,r),a1(this.activeTo,n,i),a1(this.activeRank,n,s),e&&a1(e,n,this.cursor.from),this.minActive=FS(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&o1(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function zS(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e,c=!!s.boundChange;for(let u=!1;;){let h=t.to+l-n.to,f=h||t.endSide-n.endSide,d=f<0?t.to+l:n.to,p=Math.min(d,o);if(t.point||n.point?(t.point&&n.point&&Mx(t.point,n.point)&&Ew(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,p,t.point,n.point),u=!1):(u&&s.boundChange(a),p>a&&!Ew(t.active,n.active)&&s.compareRange(a,p,t.active,n.active),c&&p<o&&(h||t.openEnd(d)!=n.openEnd(d))&&(u=!0)),d>o)break;a=d,f<=0&&t.next(),f>=0&&n.next()}}function Ew(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!Mx(t[n],e[n]))return!1;return!0}function o1(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function a1(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function FS(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Zf(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=xr(t,i));return r}function Iw(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=xr(t,i)}return r===!0?-1:t.length}const Pw="",HS=typeof Symbol>"u"?"__"+Pw:Symbol.for(Pw),Nw=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),VS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class pc{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,u,f)}else p!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||f)&&l.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=VS[HS]||1;return VS[HS]=e+1,Pw+e.toString(36)}static mount(e,n,r){let i=e[Nw],s=r&&r.nonce;i?s&&i.setNonce(s):i=new XG(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let qS=new Map;class XG{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=qS.get(r);if(s)return e[Nw]=s;this.sheet=new i.CSSStyleSheet,qS.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Nw]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ap={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ZG=typeof navigator<"u"&&/Mac/.test(navigator.platform),JG=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Rr=0;Rr<10;Rr++)sl[48+Rr]=sl[96+Rr]=String(Rr);for(var Rr=1;Rr<=24;Rr++)sl[Rr+111]="F"+Rr;for(var Rr=65;Rr<=90;Rr++)sl[Rr]=String.fromCharCode(Rr+32),Ap[Rr]=String.fromCharCode(Rr);for(var e4 in sl)Ap.hasOwnProperty(e4)||(Ap[e4]=sl[e4]);function _I(t){var e=ZG&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||JG&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ap:sl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function xn(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)DI(t,arguments[e]);return t}function DI(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)DI(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let oi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Rw=typeof document<"u"?document:{documentElement:{style:{}}};const Lw=/Edge\/(\d+)/.exec(oi.userAgent),EI=/MSIE \d/.test(oi.userAgent),$w=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(oi.userAgent),c2=!!(EI||$w||Lw),WS=!c2&&/gecko\/(\d+)/i.test(oi.userAgent),t4=!c2&&/Chrome\/(\d+)/.exec(oi.userAgent),eK="webkitFontSmoothing"in Rw.documentElement.style,Bw=!c2&&/Apple Computer/.test(oi.vendor),jS=Bw&&(/Mobile\/\w+/.test(oi.userAgent)||oi.maxTouchPoints>2);var nt={mac:jS||/Mac/.test(oi.platform),windows:/Win/.test(oi.platform),linux:/Linux|X11/.test(oi.platform),ie:c2,ie_version:EI?Rw.documentMode||6:$w?+$w[1]:Lw?+Lw[1]:0,gecko:WS,gecko_version:WS?+(/Firefox\/(\d+)/.exec(oi.userAgent)||[0,0])[1]:0,chrome:!!t4,chrome_version:t4?+t4[1]:0,ios:jS,android:/Android\b/.test(oi.userAgent),webkit_version:eK?+(/\bAppleWebKit\/(\d+)/.exec(oi.userAgent)||[0,0])[1]:0,safari:Bw,safari_version:Bw?+(/\bVersion\/(\d+(\.\d+)?)/.exec(oi.userAgent)||[0,0])[1]:0,tabSize:Rw.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Ax(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Rv=Object.create(null);function _x(t,e,n){if(t==e)return!0;t||(t=Rv),e||(e=Rv);let r=Object.keys(t),i=Object.keys(e);if(r.length-0!=i.length-0)return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function tK(t,e){for(let n=t.attributes.length-1;n>=0;n--){let r=t.attributes[n].name;e[r]==null&&t.removeAttribute(r)}for(let n in e){let r=e[n];n=="style"?t.style.cssText=r:t.getAttribute(n)!=r&&t.setAttribute(n,r)}}function YS(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function nK(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}let vo=class{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var zr=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(zr||(zr={}));let mt=class extends dc{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new gm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Hu(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=II(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Hu(e,r,i,n,e.widget||null,!0)}static line(e){return new vm(e)}static set(e,n=!1){return Ut.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};mt.none=Ut.empty;class gm extends mt{constructor(e){let{start:n,end:r}=II(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Ax(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Rv}eq(e){return this==e||e instanceof gm&&this.tagName==e.tagName&&_x(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}gm.prototype.point=!1;class vm extends mt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof vm&&this.spec.class==e.spec.class&&_x(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}vm.prototype.mapMode=$r.TrackBefore;vm.prototype.point=!0;class Hu extends mt{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?$r.TrackBefore:$r.TrackAfter:$r.TrackDel}get type(){return this.startSide!=this.endSide?zr.WidgetRange:this.startSide<=0?zr.WidgetBefore:zr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Hu&&rK(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Hu.prototype.point=!0;function II(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function rK(t,e){return t==e||!!(t&&e&&t.compare(e))}function rf(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class _p extends dc{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof _p&&this.tagName==e.tagName&&_x(this.attributes,e.attributes)}static create(e){return new _p(e.tagName,e.attributes||Rv)}static set(e,n=!1){return Ut.of(e,n)}}_p.prototype.startSide=_p.prototype.endSide=-1;function Sf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function zw(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function q0(t,e){if(!e.anchorNode)return!1;try{return zw(t,e.anchorNode)}catch{return!1}}function W0(t){return t.nodeType==3?Ep(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function j0(t,e,n,r){return n?QS(t,e,n,r,-1)||QS(t,e,n,r,1):!1}function mc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Lv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function QS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ol(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=mc(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?ol(t):0}else return!1}}function ol(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Dp(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function iK(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function PI(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function sK(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(u.nodeType==1){let f,d=u==l.body,p=1,m=1;if(d)f=iK(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:p,scaleY:m}=PI(u,b)),f={left:b.left,right:b.left+u.clientWidth*p,top:b.top,bottom:b.top+u.clientHeight*m}}let g=0,v=0;if(i=="nearest")e.top<f.top?(v=e.top-(f.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=e.top-(f.top+o)));else{let b=e.bottom-e.top,S=f.bottom-f.top;v=(i=="center"&&b<=S?e.top+b/2-S/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-S+o)-f.top}if(r=="nearest"?e.left<f.left?(g=e.left-(f.left+s),n>0&&e.right>f.right+g&&(g=e.right-f.right+s)):e.right>f.right&&(g=e.right-f.right+s,n<0&&e.left<f.left+g&&(g=e.left-(f.left+s))):g=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,g||v)if(d)c.scrollBy(g,v);else{let b=0,S=0;if(v){let O=u.scrollTop;u.scrollTop+=v/m,S=(u.scrollTop-O)*m}if(g){let O=u.scrollLeft;u.scrollLeft+=g/p,b=(u.scrollLeft-O)*p}e={left:e.left-b,top:e.top-S,right:e.right-b,bottom:e.bottom-S},b&&Math.abs(b-g)<1&&(r="nearest"),S&&Math.abs(S-v)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function oK(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class aK{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?ol(n):0),r,Math.min(e.focusOffset,r?ol(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let ru=null;nt.safari&&nt.safari_version>=26&&(ru=!1);function NI(t){if(t.setActive)return t.setActive();if(ru)return t.focus(ru);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(ru==null?{get preventScroll(){return ru={preventScroll:!0},!0}}:void 0),!ru){ru=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let US;function Ep(t,e,n=e){let r=US||(US=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function sf(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function lK(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function cK(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,ol(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=ol(n))}else{if(n==t)return!0;r=mc(n),n=n.parentNode}}function RI(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function LI(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=ol(n)}else if(n.parentNode&&!Lv(n))r=mc(n),n=n.parentNode;else return null}}function $I(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Lv(n))r=mc(n)+1,n=n.parentNode;else return null}}class so{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new so(e.parentNode,mc(e),n)}static after(e,n){return new so(e.parentNode,mc(e)+1,n)}}var An=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(An||(An={}));const Vu=An.LTR,Dx=An.RTL;function BI(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const uK=BI("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),hK=BI("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Fw=Object.create(null),Ao=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Fw[e]=n,Fw[n]=-e}function zI(t){return t<=247?uK[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?hK[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const fK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Va{get dir(){return this.level%2?Dx:Vu}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function FI(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!FI(r.inner,i.inner))return!1}return!0}const On=[];function dK(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,h=l;c<a;c++){let f=zI(t.charCodeAt(c));f==512?f=u:f==8&&h==4&&(f=16),On[c]=f==4?2:f,f&7&&(h=f),u=f}for(let c=o,u=l,h=l;c<a;c++){let f=On[c];if(f==128)c<a-1&&u==On[c+1]&&u&24?f=On[c]=u:On[c]=256;else if(f==64){let d=c+1;for(;d<a&&On[d]==64;)d++;let p=c&&u==8||d<n&&On[d]==8?h==1?1:8:256;for(let m=c;m<d;m++)On[m]=p;c=d-1}else f==8&&h==1&&(On[c]=1);u=f,f&7&&(h=f)}}}function pK(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let h=c,f,d,p;h<u;h++)if(d=Fw[f=t.charCodeAt(h)])if(d<0){for(let m=a-3;m>=0;m-=3)if(Ao[m+1]==-d){let g=Ao[m+2],v=g&2?i:g&4?g&1?s:i:0;v&&(On[h]=On[Ao[m]]=v),a=m;break}}else{if(Ao.length==189)break;Ao[a++]=h,Ao[a++]=f,Ao[a++]=l}else if((p=On[h])==2||p==1){let m=p==i;l=m?0:1;for(let g=a-3;g>=0;g-=3){let v=Ao[g+2];if(v&2)break;if(m)Ao[g+2]|=2;else{if(v&4)break;Ao[g+2]|=4}}}}}function mK(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=On[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(On[u]==256)u++;else break;let h=s==1,f=(u<e?On[u]:r)==1,d=h==f?h?1:2:r;for(let p=u,m=i,g=m?n[m-1].to:t;p>l;)p==g&&(p=n[--m].from,g=m?n[m-1].to:t),On[--p]=d;l=u}else s=c,l++}}}function Hw(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,h=!1;if(c==s.length||l<s[c].from){let m=On[l];m!=a&&(u=!1,h=m==16)}let f=!u&&a==1?[]:null,d=u?r:r+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(h)break e;let m=s[c];if(!u)for(let g=m.to,v=c+1;;){if(g==n)break e;if(v<s.length&&s[v].from==g)g=s[v++].to;else{if(On[g]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Va(l,m.from,d));let g=m.direction==Vu!=!(d%2);Vw(t,g?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(u?On[p]!=a:On[p]==a))break;p++}f?Hw(t,l,p,r+1,i,f,o):l<p&&o.push(new Va(l,p,d)),l=p}else for(let l=n,c=s.length;l>e;){let u=!0,h=!1;if(!c||l>s[c-1].to){let m=On[l-1];m!=a&&(u=!1,h=m==16)}let f=!u&&a==1?[]:null,d=u?r:r+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(h)break e;let m=s[--c];if(!u)for(let g=m.from,v=c;;){if(g==e)break e;if(v&&s[v-1].to==g)g=s[--v].from;else{if(On[g-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Va(m.to,l,d));let g=m.direction==Vu!=!(d%2);Vw(t,g?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(u?On[p-1]!=a:On[p-1]==a))break;p--}f?Hw(t,p,l,r+1,i,f,o):p<l&&o.push(new Va(p,l,d)),l=p}}function Vw(t,e,n,r,i,s,o){let a=e%2?2:1;dK(t,i,s,r,a),pK(t,i,s,r,a),mK(i,s,r,a),Hw(t,i,s,e,n,r,o)}function gK(t,e,n){if(!t)return[new Va(0,0,e==Dx?1:0)];if(e==Vu&&!n.length&&!fK.test(t))return HI(t.length);if(n.length)for(;t.length>On.length;)On[On.length]=256;let r=[],i=e==Vu?0:1;return Vw(t,i,i,n,0,t.length,r),r}function HI(t){return[new Va(0,t,0)]}let VI="";function vK(t,e,n,r,i){var s;let o=r.head-t.from,a=Va.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),c=l.side(i,n)}let u=xr(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),VI=t.text.slice(Math.min(o,u),Math.max(o,u));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<l.level?Se.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):Se.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function yK(t,e,n){for(let r=e;r<n;r++){let i=zI(t.charCodeAt(r));if(i==1)return Vu;if(i==2||i==4)return Dx}return Vu}const qI=et.define(),WI=et.define(),jI=et.define(),YI=et.define(),qw=et.define(),QI=et.define(),UI=et.define(),Ex=et.define(),Ix=et.define(),GI=et.define({combine:t=>t.some(e=>e)}),KI=et.define({combine:t=>t.some(e=>e)}),XI=et.define();class of{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new of(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new of(Se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const l1=It.define({map:(t,e)=>t.map(e)}),ZI=It.define();function Ni(t,e,n){let r=t.facet(YI);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Fa=et.define({combine:t=>t.length?t[0]:!0});let bK=0;const Wh=et.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class lr{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Wh.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Wh.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new lr(bK++,e,r,i,a=>{let l=[];return o&&l.push(u2.of(c=>{let u=c.plugin(a);return u?o(u):mt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return lr.define((r,i)=>new e(r,i),n)}}class n4{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Ni(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Ni(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Ni(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const JI=et.define(),Px=et.define(),u2=et.define(),eP=et.define(),Nx=et.define(),ym=et.define(),tP=et.define();function GS(t,e){let n=t.state.facet(tP);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return Ut.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,h=i;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,p;if(d==null&&(d=yK(e.text,c,u)),l>0&&h.length&&(p=h[h.length-1]).to==c&&p.direction==d)p.to=u,h=p.inner;else{let m={from:c,to:u,direction:d,inner:[]};h.push(m),h=m.inner}}}}),i}const nP=et.define();function Rx(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(nP)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Gd=et.define();class _s{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new _s(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0;;){let a=i<e.length?e[i].fromB:1e9,l=s<n.length?n[s]:1e9,c=Math.min(a,l);if(c==1e9)break;let u=c+o,h=c,f=u;for(;;)if(s<n.length&&n[s]<=h){let d=n[s+1];s+=2,h=Math.max(h,d);for(let p=i;p<e.length&&e[p].fromB<=h;p++)o=e[p].toA-e[p].toB;f=Math.max(f,d+o)}else if(i<e.length&&e[i].fromB<=h){let d=e[i++];h=Math.max(h,d.toB),f=Math.max(f,d.toA),o=d.toA-d.toB}else break;r.push(new _s(u,f,c,h))}return r}}class $v{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=wr.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new _s(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new $v(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const wK=[];class mr{constructor(e,n,r=0){this.dom=e,this.length=n,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return wK}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&tK(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let r=n;for(let i of this.children){if(i==e)return r;r+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let r=mc(this.dom),i=this.length?e>0:n>0;return new so(this.parent.dom,r+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof f2)return e;return null}static get(e){return e.cmTile}}class h2 extends mr{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,r=null,i,s=e?.node==n?e:null,o=0;for(let a of this.children){if(a.sync(e),o+=a.length+a.breakAfter,i=r?r.nextSibling:n.firstChild,s&&i!=a.dom&&(s.written=!0),a.dom.parentNode==n)for(;i&&i!=a.dom;)i=KS(i);else n.insertBefore(a.dom,i);r=a.dom}for(i=r?r.nextSibling:n.firstChild,s&&i&&(s.written=!0);i;)i=KS(i);this.length=o}}function KS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class f2 extends h2{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=mr.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],r=this,i=0,s=0;;)if(i==r.children.length){if(!n.length)return;r=r.parent,r.breakAfter&&s++,i=n.pop()}else{let o=r.children[i++];if(o instanceof sc)n.push(i),r=o,i=0;else{let a=s+o.length,l=e(o,s);if(l!==void 0)return l;s=a+o.breakAfter}}}resolveBlock(e,n){let r,i=-1,s,o=-1;if(this.blockTiles((a,l)=>{let c=l+a.length;if(e>=l&&e<=c){if(a.isWidget()&&n>=-1&&n<=1){if(a.flags&32)return!0;a.flags&16&&(r=void 0)}(l<e||e==c&&(n<-1?a.length:a.covers(1)))&&(!r||!a.isWidget()&&r.isWidget())&&(r=a,i=e-l),(c>e||e==l&&(n>1?a.length:a.covers(-1)))&&(!s||!a.isWidget()&&s.isWidget())&&(s=a,o=e-l)}}),!r&&!s)throw new Error("No tile at position "+e);return r&&n<0||!s?{tile:r,offset:i}:{tile:s,offset:o}}}class sc extends h2{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let r=new sc(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class Cf extends h2{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,r){let i=new Cf(n||document.createElement("div"),e);return(!n||!r)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,n,r){let i=null,s=-1,o=null,a=-1;function l(u,h){for(let f=0,d=0;f<u.children.length&&d<=h;f++){let p=u.children[f],m=d+p.length;m>=h&&(p.isComposite()?l(p,h-d):(!o||o.isHidden&&(n>0||r&&kK(o,p)))&&(m>h||p.flags&32)?(o=p,a=h-d):(d<h||p.flags&16&&!p.isHidden)&&(i=p,s=h-d)),d=m}}l(this,e);let c=(n<0?i:o)||i||o;return c?{tile:c,offset:c==i?s:a}:null}coordsIn(e,n){let r=this.resolveInline(e,n,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),n):xK(this)}domIn(e,n){let r=this.resolveInline(e,n);if(r){let{tile:i,offset:s}=r;if(this.dom.contains(i.dom))return i.isText()?new so(i.dom,Math.min(i.dom.nodeValue.length,s)):i.domPosFor(s,i.flags&16?1:i.flags&32?-1:n);let o=r.tile.parent,a=!1;for(let l of o.children){if(a)return new so(l.dom,0);l==r.tile&&(a=!0)}}return new so(this.dom,0)}}function xK(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=W0(e);return n[n.length-1]||null}function kK(t,e){let n=t.coordsIn(0,1),r=e.coordsIn(0,1);return n&&r&&r.top<n.bottom}class Pi extends h2{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let r=new Pi(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class mu extends mr{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let r=this.dom.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?nt.chrome||nt.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Ep(this.dom,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return nt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Dp(l,o<0):l||null}static of(e,n){let r=new mu(n||document.createTextNode(e),e);return n||(r.flags|=2),r}}class qu extends mr{constructor(e,n,r,i){super(e,n,i),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,r){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;if(r)return Dp(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let l=a?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return Dp(o,!a)}}get overrideDOMText(){if(!this.length)return nn.empty;let{root:e}=this;if(!e)return nn.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,r,i,s){return s||(s=e.toDOM(n),e.editable||(s.contentEditable="false")),new qu(s,r,e,i)}}class Bv extends mr{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return nn.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class SK{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,r){let{tile:i,index:s,beforeBreak:o,parents:a}=this;for(;e||n>0;)if(i.isComposite())if(o){if(!e)break;r&&r.break(),e--,o=!1}else if(s==i.children.length){if(!e&&!a.length)break;r&&r.leave(i),o=!!i.breakAfter,{tile:i,index:s}=a.pop(),s++}else{let l=i.children[s],c=l.breakAfter;(n>0?l.length<=e:l.length<e)&&(!r||r.skip(l,0,l.length)!==!1||!l.isComposite)?(o=!!c,s++,e-=l.length):(a.push({tile:i,index:s}),i=l,s=0,r&&l.isComposite()&&r.enter(l))}else if(s==i.length)o=!!i.breakAfter,{tile:i,index:s}=a.pop(),s++;else if(e){let l=Math.min(e,i.length-s);r&&r.skip(i,s,s+l),e-=l,s+=l}else break;return this.tile=i,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class CK{constructor(e,n,r,i){this.from=e,this.to=n,this.wrapper=r,this.rank=i}}class OK{constructor(e,n,r){this.cache=e,this.root=n,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,r,i){var s;this.flushBuffer();let o=this.ensureMarks(n,r),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)){this.cache.reused.set(a,2);let l=o.children[o.children.length-1]=new mu(a.dom,a.text+e);l.parent=o}else o.append(i||mu.of(e,(s=this.cache.find(mu))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let r=this.curLine;r.dom!=n.line.dom&&(r.setDOM(this.cache.reused.has(n.line)?r4(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let i=r;for(let a=n.marks.length-1;a>=0;a--){let l=n.marks[a],c=i.lastChild;if(c instanceof Pi&&c.mark.eq(l.mark))c.dom!=l.dom&&c.setDOM(r4(l.dom)),i=c;else{if(this.cache.reused.get(l)){let h=mr.get(l.dom);h&&h.setDOM(r4(l.dom))}let u=Pi.of(l.mark,l.dom);i.append(u),i=u}this.cache.reused.set(l,2)}let s=mr.get(e.text);s&&this.cache.reused.set(s,2);let o=new mu(e.text,e.text.nodeValue);o.flags|=8,i.append(o)}addInlineWidget(e,n,r){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let s=this.ensureMarks(n,r);!i&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,r){this.flushBuffer(),this.ensureMarks(n,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var r;e||(e=rP);let i=Cf.start(e,n||((r=this.cache.find(Cf))===null||r===void 0?void 0:r.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var r;let i=this.curLine;for(let s=e.length-1;s>=0;s--){let o=e[s],a;if(n>0&&(a=i.lastChild)&&a instanceof Pi&&a.mark.eq(o))i=a,n--;else{let l=Pi.of(o,(r=this.cache.find(Pi,c=>c.mark.eq(o)))===null||r===void 0?void 0:r.dom);i.append(l),i=l,n=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!XS(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(nt.ios&&XS(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(i4,0,32)||new qu(i4.toDOM(),0,i4,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new CK(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-n.rank||this.wrappers[r-1].to-n.to)<0;)r--;this.wrappers.splice(r,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let r of this.wrappers){let i=n.lastChild;if(r.from<this.pos&&i instanceof sc&&i.wrapper.eq(r.wrapper))n=i;else{let s=sc.of(r.wrapper,(e=this.cache.find(sc,o=>o.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);n.append(s),n=s}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),r=this.cache.find(Bv,void 0,1);return r&&(r.flags=n),r||new Bv(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class MK{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=i;let a=this.textOff=Math.min(e,i.length);return s?null:i.slice(0,a)}let n=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,n);return this.textOff=n,r}}const zv=[qu,Cf,mu,Pi,Bv,sc,f2];for(let t=0;t<zv.length;t++)zv[t].bucket=t;class TK{constructor(e){this.view=e,this.buckets=zv.map(()=>[]),this.index=zv.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,r=this.buckets[n];r.length<6?r.push(e):r[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,r=2){let i=e.bucket,s=this.buckets[i],o=this.index[i];for(let a=s.length-1;a>=0;a--){let l=(a+o)%s.length,c=s[l];if((!n||n(c))&&!this.reused.has(c))return s.splice(l,1),l<o&&this.index[i]--,this.reused.set(c,r),c}return null}findWidget(e,n,r){let i=this.buckets[0];if(i.length)for(let s=0,o=0;;s++){if(s==i.length){if(o)return null;o=1,s=0}let a=i[s];if(!this.reused.has(a)&&(o==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return i.splice(s,1),s<this.index[0]&&this.index[0]--,a.widget==e&&a.length==n&&(a.flags&497)==r?(this.reused.set(a,1),a):(this.reused.set(a,2),new qu(a.dom,n,e,a.flags&-498|r))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class AK{constructor(e,n,r,i,s){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new TK(e),this.text=new MK(e.state.doc),this.builder=new OK(this.cache,new f2(e,e.contentDOM),Ut.iter(r)),this.cache.reused.set(n,2),this.old=new SK(n),this.reuseWalker={skip:(o,a,l)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,n){let r=n&&this.getCompositionContext(n.text);for(let i=0,s=0,o=0;;){let a=o<e.length?e[o++]:null,l=a?a.fromA:this.old.root.length;if(l>i){let c=l-i;this.preserve(c,!o,!a),i=l,s+=c}if(!a)break;n&&a.fromA<=n.range.fromA&&a.toA>=n.range.toA?(this.forward(a.fromA,n.range.fromA,n.range.fromA<n.range.toA?1:-1),this.emit(s,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,r),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,a.toA),this.emit(n.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(s,a.toB)),s=a.toB,i=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,r){let i=EK(this.old),s=this.openMarks;this.old.advance(e,r?1:-1,{skip:(o,a,l)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let c=l>0||a<o.length?qu.of(o.widget,this.view,l-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);c.flags&256?(c.flags&=-2,this.builder.addBlockWidget(c)):(this.builder.ensureLine(null),this.builder.addInlineWidget(c,i,s),s=i.length)}else if(o.isText())this.builder.ensureLine(null),!a&&l==o.length?this.builder.addText(o.text,i,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,l),i,s)),s=i.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof Bv)this.cache.add(o);else if(o instanceof Pi)this.builder.ensureLine(null),this.builder.addMark(o,i,s),this.cache.reused.set(o,1),s=i.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof Pi&&i.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?i.length&&(i.length=s=0):o instanceof Pi&&(i.shift(),s=Math.min(s,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let r=null,i=this.builder,s=0,o=Ut.spans(this.decorations,e,n,{point:(a,l,c,u,h,f)=>{if(c instanceof Hu){if(this.disallowBlockEffectsFor[f]){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=u.length,h>u.length)i.continueWidget(l-a);else{let d=c.widget||(c.block?Of.block:Of.inline),p=_K(c),m=this.cache.findWidget(d,l-a,p)||qu.of(d,this.view,l-a,p);c.block?(c.startSide>0&&i.addLineStartIfNotCovered(r),i.addBlockWidget(m)):(i.ensureLine(r),i.addInlineWidget(m,u,h))}r=null}else r=DK(r,c);l>a&&this.text.skip(l-a)},span:(a,l,c,u)=>{for(let h=a;h<l;){let f=this.text.next(Math.min(512,l-h));f==null?(i.addLineStartIfNotCovered(r),i.addBreak(),h++):(i.ensureLine(r),i.addText(f,c,u),h+=f.length),r=null}}});i.addLineStartIfNotCovered(r),this.openWidget=o>s,this.openMarks=o}forward(e,n,r=1){n-e<=10?this.old.advance(n-e,r,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,r,this.reuseWalker))}getCompositionContext(e){let n=[],r=null;for(let i=e.parentNode;;i=i.parentNode){let s=mr.get(i);if(i==this.view.contentDOM)break;s instanceof Pi?n.push(s):s?.isLine()?r=s:i.nodeName=="DIV"&&!r&&i!=this.view.contentDOM?r=new Cf(i,rP):n.push(Pi.of(new gm({tagName:i.nodeName.toLowerCase(),attributes:nK(i)}),i))}return{line:r,marks:n}}}function XS(t,e){let n=r=>{for(let i of r.children)if((e?i.isText():i.length)||n(i))return!0;return!1};return n(t)}function _K(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const rP={class:"cm-line"};function DK(t,e){let n=e.spec.attributes,r=e.spec.class;return!n&&!r||(t||(t={class:"cm-line"}),n&&Ax(n,t),r&&(t.class+=" "+r)),t}function EK(t){let e=[];for(let n=t.parents.length;n>1;n--){let r=n==t.parents.length?t.tile:t.parents[n].tile;r instanceof Pi&&e.push(r.mark)}return e}function r4(t){let e=mr.get(t);return e&&e.setDOM(t.cloneNode()),t}class Of extends vo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Of.inline=new Of("span");Of.block=new Of("div");const i4=new class extends vo{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class ZS{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=mt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new f2(e,e.contentDOM),this.updateInner([new _s(0,0,0,e.state.doc.length)],null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!FK(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?PK(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:u,to:h}=this.hasComposition;r=new _s(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(nt.ie||nt.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let l=LK(o,this.decorations,e.changes);l.length&&(r=_s.extendWithRanges(r,l));let c=BK(a,this.blockWrappers,e.changes);return c.length&&(r=_s.extendWithRanges(r,c)),s&&!r.some(u=>u.fromA<=s.range.fromA&&u.toA>=s.range.toA)&&(r=s.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(n||e.length){let o=this.tile,a=new AK(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,n),Ww(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=nt.chrome||nt.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||r.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof s4&&i.push(s.dom);r.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(ZI)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,i=this.view.root.activeElement,s=i==r,o=!s&&!(this.view.state.facet(Fa)||r.tabIndex>-1)&&q0(r,this.view.observer.selectionRange)&&!(i&&r.contains(i));if(!(s||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c,u;if(l.empty?u=c=this.inlineDOMNearPos(l.anchor,l.assoc||1):(u=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),c=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),nt.gecko&&l.empty&&!this.hasComposition&&IK(c)){let f=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(f,c.node.childNodes[c.offset]||null)),c=u=new so(f,0),a=!0}let h=this.view.observer.selectionRange;(a||!h.focusNode||(!j0(c.node,c.offset,h.anchorNode,h.anchorOffset)||!j0(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{nt.android&&nt.chrome&&r.contains(h.focusNode)&&zK(h.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let f=Sf(this.view.root);if(f)if(l.empty){if(nt.gecko){let d=NK(c.node,c.offset);if(d&&d!=3){let p=(d==1?LI:$I)(c.node,c.offset);p&&(c=new so(p.node,p.offset))}}f.collapse(c.node,c.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(c.node,c.offset);try{f.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();l.anchor>l.head&&([c,u]=[u,c]),d.setEnd(u.node,u.offset),d.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(d)}o&&this.view.root.activeElement==r&&(r.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,u)),this.impreciseAnchor=c.precise?null:new so(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new so(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&j0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Sf(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=this.lineAt(n.head,n.assoc);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc,n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}posFromDOM(e,n){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=r.posAtStart;if(r.isComposite()){let s;if(e==r.dom)s=r.dom.childNodes[n];else{let o=ol(e)==0?0:n==0?-1:1;for(;;){let a=e.parentNode;if(a==r.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?s=e:s=e.nextSibling}if(s==r.dom.firstChild)return i;for(;s&&!mr.get(s);)s=s.nextSibling;if(!s)return i+r.length;for(let o=0,a=i;;o++){let l=r.children[o];if(l.dom==s)return a;a+=l.length+l.breakAfter}}else return r.isText()?e==r.dom?i+n:i+(n?r.length:0):i}domAtPos(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.domPosFor(e,n):r.domIn(i,n)}inlineDOMNearPos(e,n){let r,i=-1,s=!1,o,a=-1,l=!1;return this.tile.blockTiles((c,u)=>{if(c.isWidget()){if(c.flags&32&&u>=e)return!0;c.flags&16&&(s=!0)}else{let h=u+c.length;if(u<=e&&(r=c,i=e-u,s=h<e),h>=e&&!o&&(o=c,a=e-u,l=u>e),u>e&&o)return!0}}),!r&&!o?this.domAtPos(e,n):(s&&o?r=null:l&&r&&(o=null),r&&n<0||!o?r.domIn(i,n):o.domIn(a,n))}coordsAt(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.widget instanceof s4?null:r.coordsInWidget(i,n,!0):r.coordsIn(i,n)}lineAt(e,n){let{tile:r}=this.tile.resolveBlock(e,n);return r.isLine()?r:null}coordsForChar(e){let{tile:n,offset:r}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function i(s,o){if(s.isComposite())for(let a of s.children){if(a.length>=o){let l=i(a,o);if(l)return l}if(o-=a.length,o<0)break}else if(s.isText()&&o<s.length){let a=xr(s.text,o);if(a==o)return null;let l=Ep(s.dom,o,a).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(c==l.length-1||u.top<u.bottom&&u.left<u.right)return u}}return null}return i(n,r)}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==An.LTR,c=0,u=(h,f,d)=>{for(let p=0;p<h.children.length&&!(f>i);p++){let m=h.children[p],g=f+m.length,v=m.dom.getBoundingClientRect(),{height:b}=v;if(d&&!p&&(c+=v.top-d.top),m instanceof sc)g>r&&u(m,f,v);else if(f>=r&&(c>0&&n.push(-c),n.push(b+c),c=0,o)){let S=m.dom.lastChild,O=S?W0(S):[];if(O.length){let k=O[O.length-1],C=l?k.right-v.left:v.right-k.left;C>a&&(a=C,this.minWidth=s,this.minWidthFrom=f,this.minWidthTo=g)}}d&&p==h.children.length-1&&(c+=d.bottom-v.bottom),f=g+m.breakAfter}};return u(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?An.RTL:An.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,l;for(let c of o.children){if(!c.isText()||/[^ -~]/.test(c.text))return;let u=W0(c.dom);if(u.length!=1)return;a+=u[0].width,l=u[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:l}}});if(e)return e;let n=document.createElement("div"),r,i,s;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let o=W0(n.firstChild)[0];r=n.getBoundingClientRect().height,i=o&&o.width?o.width/27:7,s=o&&o.height?o.height:r,n.remove()}),{lineHeight:r,charWidth:i,textHeight:s}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.view.state.doc.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(mt.replace({widget:new s4(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return mt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(u2).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Nx).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(Ut.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(eP).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(XI))try{if(c(this.view,e.range,e))return!0}catch(u){Ni(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Rx(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;sK(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==An.LTR)}lineHasWidget(e){let n=r=>r.isWidget()||r.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){Ww(this.tile)}}function Ww(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let r of t.children)Ww(r,e)}}function IK(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function iP(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=LI(n.focusNode,n.focusOffset),i=$I(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=mr.get(i.node);if(!a||a.isText()&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=mr.get(r.node);!l||l.isText()&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function PK(t,e,n){let r=iP(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc;return{range:new _s(l.mapPos(s),l.mapPos(o),s,o),text:i}}function NK(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let RK=class{constructor(){this.changes=[]}compareRange(e,n){rf(e,n,this.changes)}comparePoint(e,n){rf(e,n,this.changes)}boundChange(e){rf(e,e,this.changes)}};function LK(t,e,n){let r=new RK;return Ut.compare(t,e,n,r),r.changes}class $K{constructor(){this.changes=[]}compareRange(e,n){rf(e,n,this.changes)}comparePoint(){}boundChange(e){rf(e,e,this.changes)}}function BK(t,e,n){let r=new $K;return Ut.compare(t,e,n,r),r.changes}function zK(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function FK(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}class s4 extends vo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function HK(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return Se.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=xr(i.text,s,!1):a=xr(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=xr(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=xr(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return Se.range(o+i.from,a+i.from)}function VK(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+Iw(o,s,t.state.tabSize)}function jw(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==zr.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function qK(t,e,n,r){let i=jw(t,e.head,e.assoc||-1),s=!r||i.type!=zr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==An.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return Se.cursor(l,n?-1:1)}return Se.cursor(n?i.to:i.from,n?-1:1)}function JS(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=vK(i,s,o,a,n),u=VI;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function WK(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Un.Space&&(i=o),i==o}}function jK(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return Se.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-p.from))),a=(s<0?p.top:p.bottom)+u}let h=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1,d=Yw(t,{x:h,y:a+f*s},!1,s);return Se.cursor(d.pos,d.assoc,void 0,o)}function Y0(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function sP(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Y0(t,i.from,0);o!=i.from&&(s=Se.cursor(o,-1))}else{let o=Y0(t,i.from,-1),a=Y0(t,i.to,1);(o!=i.from||a!=i.to)&&(s=Se.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?Se.create(n,e.mainIndex):e}function o4(t,e,n){let r=Y0(t.state.facet(ym).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Se.cursor(r,r<n.from?1:-1)}class Vo{constructor(e,n){this.pos=e,this.assoc=n}}function Yw(t,e,n,r){let i=t.contentDOM.getBoundingClientRect(),s=i.top+t.viewState.paddingTop,{x:o,y:a}=e,l=a-s,c;for(;;){if(l<0)return new Vo(0,1);if(l>t.viewState.docHeight)return new Vo(t.state.doc.length,-1);if(c=t.elementAtHeight(l),r==null)break;if(c.type==zr.Text){let f=t.docView.coordsAt(r<0?c.from:c.to,r);if(f&&(r<0?f.top<=l+s:f.bottom>=l+s))break}let h=t.viewState.heightOracle.textHeight/2;l=r>0?c.bottom+h:c.top-h}if(t.viewport.from>=c.to||t.viewport.to<=c.from){if(n)return null;if(c.type==zr.Text){let h=VK(t,i,c,o,a);return new Vo(h,h==c.from?1:-1)}}if(c.type!=zr.Text)return l<(c.top+c.bottom)/2?new Vo(c.from,1):new Vo(c.to,-1);let u=t.docView.lineAt(c.from,2);return(!u||u.length!=c.length)&&(u=t.docView.lineAt(c.from,-2)),oP(t,u,c.from,o,a)}function oP(t,e,n,r,i){let s=-1,o=null,a=1e9,l=1e9,c=i,u=i,h=(f,d)=>{for(let p=0;p<f.length;p++){let m=f[p];if(m.top==m.bottom)continue;let g=m.left>r?m.left-r:m.right<r?r-m.right:0,v=m.top>i?m.top-i:m.bottom<i?i-m.bottom:0;m.top<=u&&m.bottom>=c&&(c=Math.min(m.top,c),u=Math.max(m.bottom,u),v=0),(s<0||(v-l||g-a)<0)&&(s>=0&&l&&a<g&&o.top<=u-2&&o.bottom>=c+2?l=0:(s=d,a=g,l=v,o=m))}};if(e.isText()){for(let d=0;d<e.length;){let p=xr(e.text,d);if(h(Ep(e.dom,d,p).getClientRects(),d),!a&&!l)break;d=p}return r>(o.left+o.right)/2==(eC(t,s+n)==An.LTR)?new Vo(n+xr(e.text,s),-1):new Vo(n+s,1)}else{if(!e.length)return new Vo(n,1);for(let m=0;m<e.children.length;m++){let g=e.children[m];if(g.flags&48)continue;let v=(g.dom.nodeType==1?g.dom:Ep(g.dom,0,g.length)).getClientRects();if(h(v,m),!a&&!l)break}let f=e.children[s],d=e.posBefore(f,n);return f.isComposite()||f.isText()?oP(t,f,d,Math.max(o.left,Math.min(o.right,r)),i):r>(o.left+o.right)/2==(eC(t,s+n)==An.LTR)?new Vo(d+f.length,-1):new Vo(d,1)}}function eC(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[Va.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const Kd="";class YK{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(Sn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Kd}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=mr.get(i),a=i.nextSibling;if(a==n){o?.breakAfter&&!a&&r!=this.view.contentDOM&&this.lineBreak();break}let l=mr.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:Lv(i))||Lv(a)&&(i.nodeName!="BR"||o?.isWidget())&&this.text.length>s)&&!UK(a,n)&&this.lineBreak(),i=a}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){let n=mr.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(QK(e,r.node,r.offset)?n:0))}}function QK(t,e,n){for(;;){if(!e||n<ol(e))return!1;if(e==t)return!0;n=mc(e)+1,e=e.parentNode}}function UK(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=mr.get(t);if(!r?.isWidget())return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}class tC{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class GK{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=aP(e.docView.tile,n,r,0))){let a=s||o?[]:XK(e),l=new YK(a,e);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=ZK(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!zw(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!zw(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((nt.ios||nt.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(l,c),f=Math.max(l,c),d=u.from-h,p=u.to-f;(d==0||d==1||h==0)&&(p==0||p==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Se.range(c,l)):this.newSel=Se.single(c,l)}}}function aP(t,e,n,r){if(t.isComposite()){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<t.children.length;l++){let h=t.children[l],f=c+h.length;if(c<e&&f>n)return aP(h,e,n,c);if(f>=e&&i==-1&&(i=l,s=c),c>n&&h.dom.parentNode==t.dom){o=l,a=u;break}u=f,c=f+h.breakAfter}return{from:s,to:a<0?r+t.length:a,startDOM:(i?t.children[i-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:o<t.children.length&&o>=0?t.children[o].dom:null}}else return t.isText()?{from:r,to:r+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function lP(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||nt.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=cP(t.state.doc.sliceString(o,a,Kd),e.text,l-o,c);u&&(nt.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Kd+Kd&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:nn.of(e.text.slice(u.from,u.toB).split(Kd))})}else r&&(!t.hasFocus&&t.state.facet(Fa)||Fv(r,i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(nt.mac||nt.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Se.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:nn.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:nt.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Se.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:nn.of([" "])}),n)return Lx(t,n,r,s);if(r&&!Fv(r,i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=sP(t.state.facet(ym).map(l=>l(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function Lx(t,e,n,r=-1){if(nt.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(nt.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&sf(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&sf(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&sf(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=KK(t,e,n));return t.state.facet(QI).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function KK(t,e,n){let r,i=t.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let l=e.from<s.from?-1:1,c=l<0?s.from:s.to,u=Y0(i.facet(ym).map(h=>h(t)),c,l);e.from==u&&(o=u)}if(o>-1)r={changes:e,selection:Se.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",c=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let l=i.changes(e),c=n&&n.main.to<=l.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),h,f=n&&iP(t,n.main.head);if(f){let p=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-p}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:c||p.map(l)};let m=p.to-d,g=m-u.length;if(t.state.sliceDoc(g,m)!=u||m>=h.from&&g<=h.to)return{range:p};let v=i.changes({from:g,to:m,insert:e.insert}),b=p.to-s.to;return{changes:v,range:c?Se.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):p.map(v)}})}else r={changes:l,selection:c&&i.selection.replaceRange(c)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:a,scrollIntoView:!0})}function cP(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function XK(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new tC(n,r)),(i!=n||s!=r)&&e.push(new tC(i,s))),e}function ZK(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Se.single(n+e,r+e):null}function Fv(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}let JK=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,nt.safari&&e.contentDOM.addEventListener("input",()=>null),nt.gecko&&pX(e.contentDOM.ownerDocument)}handleEvent(e){!aX(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=eX(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&hP.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),nt.android&&nt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return nt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=uP.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||tX.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,sf(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:nt.safari&&!nt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function nC(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Ni(n.state,i)}}}function eX(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(nC(r.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(nC(r.value,l))}}for(let r in fo)n(r).handlers.push(fo[r]);for(let r in Fs)n(r).observers.push(Fs[r]);return e}const uP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tX="dthko",hP=[16,17,18,20,91,92,224,225],c1=6;function u1(t){return Math.max(0,t)*.7+8}function nX(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class rX{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=oK(e.contentDOM),this.atoms=e.state.facet(ym).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Sn.allowMultipleSelections)&&iX(e,n),this.dragging=oX(e,n)&&pP(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&nX(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Rx(this.view);e.clientX-l.left<=i+c1?n=-u1(i-e.clientX):e.clientX+l.right>=o-c1&&(n=u1(e.clientX-o)),e.clientY-l.top<=s+c1?r=-u1(s-e.clientY):e.clientY+l.bottom>=a-c1&&(r=u1(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=sP(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function iX(t,e){let n=t.state.facet(qI);return n.length?n[0](e):nt.mac?e.metaKey:e.ctrlKey}function sX(t,e){let n=t.state.facet(WI);return n.length?n[0](e):nt.mac?!e.altKey:!e.ctrlKey}function oX(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Sf(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function aX(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=mr.get(n))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const fo=Object.create(null),Fs=Object.create(null),fP=nt.ie&&nt.ie_version<15||nt.ios&&nt.webkit_version<604;function lX(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),dP(t,n.value)},50)}function d2(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function dP(t,e){e=d2(t.state,Ex,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Qw!=null&&n.selection.ranges.every(l=>l.empty)&&Qw==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:h},range:Se.cursor(c.from+h.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Se.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Fs.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};fo.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Fs.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Fs.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};fo.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(jI))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=uX(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new rX(t,e,n,r)),r&&t.observer.ignore(()=>{NI(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function rC(t,e,n,r){if(r==1)return Se.cursor(e,n);if(r==2)return HK(t.state,e,n);{let i=t.docView.lineAt(e,n),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,Se.range(o,a)}}const cX=nt.ie&&nt.ie_version<=11;let iC=null,sC=0,oC=0;function pP(t){if(!cX)return t.detail;let e=iC,n=oC;return iC=t,oC=Date.now(),sC=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(sC+1)%3:1}function uX(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=pP(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=t.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),c,u=rC(t,l.pos,l.assoc,r);if(n.pos!=l.pos&&!o){let h=rC(t,n.pos,n.assoc,r),f=Math.min(h.from,u.from),d=Math.max(h.to,u.to);u=f<u.from?Se.range(f,d):Se.range(d,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=hX(i,l.pos))?c:a?i.addRange(u):Se.create([u])}}}function hX(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}fo.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.tile.nearest(e.target);if(i&&i.isWidget()){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=Se.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",d2(t.state,Ix,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};fo.dragend=t=>(t.inputState.draggedContent=null,!1);function aC(t,e,n,r){if(n=d2(t.state,Ex,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&sX(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}fo.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&aC(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return aC(t,e,r,!0),!0}return!1};fo.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=fP?null:e.clipboardData;return n?(dP(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(lX(t),!1)};function fX(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function dX(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:d2(t,Ix,e.join(t.lineBreak)),ranges:n,linewise:r}}let Qw=null;fo.copy=fo.cut=(t,e)=>{let n=Sf(t.root);if(n&&!q0(t.contentDOM,n))return!1;let{text:r,ranges:i,linewise:s}=dX(t.state);if(!r&&!s)return!1;Qw=s?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=fP?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",r),!0):(fX(t,r),!1)};const mP=wl.define();function gP(t,e){let n=[];for(let r of t.facet(UI)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:mP.of(!0)}):null}function vP(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=gP(t.state,e);n?t.dispatch(n):t.update([])}},10)}Fs.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),vP(t)};Fs.blur=t=>{t.observer.clearSelectionRange(),vP(t)};Fs.compositionstart=Fs.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Fs.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,nt.chrome&&nt.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Fs.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};fo.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return Lx(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let i;if(nt.chrome&&nt.android&&(i=uP.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return nt.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),nt.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Fs.compositionend(t,e),20),!1};const lC=new Set;function pX(t){lC.has(t)||(lC.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const cC=["pre-wrap","normal","pre-line","break-spaces"];let Mf=!1;function uC(){Mf=!1}class mX{constructor(e){this.lineWrapping=e,this.doc=nn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return cC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=cC.indexOf(e)>-1,l=Math.abs(n-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(r-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class gX{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ro{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?zr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Hu?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ro(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Ln=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(Ln||(Ln={}));const gg=.001;class pi{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>gg&&(Mf=!0),this.height=e)}replace(e,n,r){return pi.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:h}=i[a],f=s.lineAt(l,Ln.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=c?f:s.lineAt(c,Ln.ByPosNoHeight,r,0,0);for(h+=d.to-c,c=d.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,Ln.ByPosNoHeight,r,0,0));u+=f.from-l,l=f.from;let p=$x.build(r.setDoc(o),e,u,h);s=Hv(s,s.replace(l,c,p))}return s.updateHeight(r,0)}static empty(){return new rs(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new yX(pi.of(e.slice(0,n)),o,pi.of(e.slice(r)))}}function Hv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Mf=!0),e)}pi.prototype.size=1;const vX=mt.replace({});class yP extends pi{constructor(e,n,r){super(e,n),this.deco=r,this.spaceAbove=0}mainBlock(e,n){return new ro(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,r,i){return this.spaceAbove&&e<r+this.spaceAbove?new ro(i,0,r,this.spaceAbove,vX):this.mainBlock(r,i)}lineAt(e,n,r,i,s){let o=this.mainBlock(i,s);return this.spaceAbove?this.blockAt(0,r,i,s).join(o):o}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.lineAt(0,Ln.ByPos,r,i,s))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class rs extends yP{constructor(e,n,r){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,n){return new ro(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof rs||i instanceof Nr&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Nr?i=new rs(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):pi.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setMeasuredHeight(i):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Nr extends pi{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),h=a+u.length*l,f=Math.max(r,e-h/2);return new ro(u.from,u.length,f,h,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:h}=n.doc.line(s+c);return new ro(u,h,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==Ln.ByHeight)return this.blockAt(e,r,i,s);if(n==Ln.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new ro(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,h=c.number-o,f=i+a*h+l*(c.from-s-h);return new ro(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,h=i;u<=n;){let f=r.doc.lineAt(u);if(u==e){let p=f.number-a;h+=l*p+c*(e-s-p)}let d=l+c*f.length;o(new ro(f.from,f.length,h,d,0)),h+=d,u=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Nr?r[r.length-1]=new Nr(s.length+i):r.push(null,new Nr(i-1))}if(e>0){let s=r[0];s instanceof Nr?r[0]=new Nr(e+s.length):r.unshift(new Nr(e-1),null)}return pi.of(r)}decomposeLeft(e,n){n.push(new Nr(e-1),null)}decomposeRight(e,n){n.push(null,new Nr(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new Nr(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++],f=0;h<0&&(f=-h,h=i.heights[i.index++]),l==-1?l=h:Math.abs(h-l)>=gg&&(l=-2);let d=new rs(u,h,f);d.outdated=!1,o.push(d),a+=u+1}a<=s&&o.push(null,new Nr(s-a).updateHeight(e,a));let c=pi.of(o);return(l<0||Math.abs(c.height-this.height)>=gg||Math.abs(l-this.heightMetrics(e,n).perLine)>=gg)&&(Mf=!0),Hv(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class yX extends pi{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==Ln.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==Ln.ByPosNoHeight?Ln.ByPosNoHeight:Ln.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,Ln.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&hC(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),hC(s,a)}return pi.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?pi.of(this.break?[e,null,n]:[e,n]):(this.left=Hv(this.left,e),this.right=Hv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function hC(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Nr&&(r=t[e+1])instanceof Nr&&t.splice(e-1,3,new Nr(n.length+1+r.length))}const bX=5;class $x{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof rs?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new rs(r-this.pos,-1,0)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new yP(o,i,r)):(o||s||i>=bX)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new rs(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let r=new Nr(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof rs)return e;let n=new rs(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof rs)&&!this.isCovered?this.nodes.push(new rs(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof rs&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new $x(r,e);return Ut.spans(n,r,i,s,0),s.finish(r)}}function wX(t,e,n){let r=new xX;return Ut.compare(t,e,n,r,0),r.changes}class xX{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&rf(e,n,this.changes,5)}}function kX(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?i.innerHeight:l,f.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function SX(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function CX(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class a4{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return mt.replace({widget:new OX(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class OX extends vo{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class fC{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=dC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=An.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Px).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new mX(n),this.stateDeco=pC(e),this.heightMap=pi.empty().applyChanges(this.stateDeco,nn.empty,this.heightOracle.setDoc(e.doc),[new _s(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=mt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new h1(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?dC:new Bx(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Xd(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=pC(this.state);let i=e.changedRanges,s=_s.extendWithRanges(i,wX(r,this.stateDeco,e?e.changes:wr.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);uC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Mf)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(KI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?An.RTL:An.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:O,scaleY:k}=PI(n,a);(O>.005&&Math.abs(this.scaleX-O)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=O,this.scaleY=k,c|=16,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=RI(e.scrollDOM);let p=(this.printing?CX:kX)(n,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!SX(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let O=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(O)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:C,textHeight:T}=e.docView.measureTextSize();o=k>0&&i.refresh(s,k,C,T,Math.max(5,b/C),O),o&&(e.docView.minWidth=0,c|=16)}m>0&&g>0?u=Math.max(m,g):m<0&&g<0&&(u=Math.min(m,g)),uC();for(let k of this.viewports){let C=k.from==this.viewport.from?O:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?pi.empty().applyChanges(this.stateDeco,nn.empty,this.heightOracle,[new _s(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new gX(k.from,C))}Mf&&(c|=2)}let S=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new h1(i.lineAt(o-r*1e3,Ln.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Ln.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,Ln.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=h.top:f=h.bottom-u,l=new h1(i.lineAt(f-1e3/2,Ln.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,Ln.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new h1(this.heightMap.lineAt(r,Ln.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Ln.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Ln.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Ln.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new a4(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=An.LTR&&!r)return[];let a=[],l=(u,h,f,d)=>{if(h-u<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let v of m)if(v>u&&v<h){l(u,v-10,f,d),l(v+10,h,f,d);return}let g=TX(e,v=>v.from>=f.from&&v.to<=f.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-h)<s&&!m.some(b=>v.from<b&&v.to>b));if(!g){if(h<f.to&&n&&r&&n.visibleRanges.some(S=>S.from<=h&&S.to>=h)){let S=n.moveToLineBoundary(Se.cursor(h),!1,!0).head;S>u&&(h=S)}let v=this.gapSize(f,u,h,d),b=r||v<2e6?v:2e6;g=new a4(u,h,v,b)}a.push(g)},c=u=>{if(u.length<o||u.type!=zr.Text)return;let h=MX(u.from,u.to,this.stateDeco);if(h.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,v;if(f!=null){let b=d1(h,f),S=((this.visibleBottom-this.visibleTop)/2+m)/u.height;g=b-S,v=b+S}else g=(this.visibleTop-u.top-m)/u.height,v=(this.visibleBottom-u.top+m)/u.height;d=f1(h,g),p=f1(h,v)}else{let m=h.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,v=0;if(m>2e6)for(let C of e)C.from>=u.from&&C.from<u.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=C.size-C.displaySize);let b=this.pixelViewport.left+v,S=this.pixelViewport.right+v,O,k;if(f!=null){let C=d1(h,f),T=((S-b)/2+g)/m;O=C-T,k=C+T}else O=(b-g)/m,k=(S+g)/m;d=f1(h,O),p=f1(h,k)}d>u.from&&l(u.from,d,u,h),p<u.to&&l(p,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,r,i){let s=d1(i,r)-d1(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){a4.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=mt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Ut.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Xd(this.heightMap.lineAt(e,Ln.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Xd(this.heightMap.lineAt(this.scaler.fromDOM(e),Ln.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Xd(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class h1{constructor(e,n){this.from=e,this.to=n}}function MX(t,e,n){let r=[],i=t,s=0;return Ut.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function f1({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function d1(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function TX(t,e){for(let n of t)if(e(n))return n}const dC={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function pC(t){let e=t.facet(u2).filter(r=>typeof r!="function"),n=t.facet(Nx).filter(r=>typeof r!="function");return n.length&&e.push(Ut.join(n)),e}class Bx{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,Ln.ByPos,e,0,0).top,u=n.lineAt(l,Ln.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Bx?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Xd(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new ro(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Xd(i,e)):t._content)}const p1=et.define({combine:t=>t.join(" ")}),Uw=et.define({combine:t=>t.indexOf(!0)>-1}),Gw=pc.newName(),bP=pc.newName(),wP=pc.newName(),xP={"&light":"."+bP,"&dark":"."+wP};function Kw(t,e,n){return new pc(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const AX=Kw("."+Gw,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},xP),_X={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},l4=nt.ie&&nt.ie_version<=11;let DX=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new aK,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(nt.ie&&nt.ie_version<=11||nt.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&nt.android&&e.constructor.EDIT_CONTEXT!==!1&&!(nt.chrome&&nt.chrome_version<126)&&(this.editContext=new IX(e),e.state.facet(Fa)&&(e.contentDOM.editContext=this.editContext.editContext)),l4&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Fa)?r.root.activeElement!=this.dom:!q0(this.dom,i))return;let s=i.anchorNode&&r.docView.tile.nearest(i.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(nt.ie&&nt.ie_version<=11||nt.android&&nt.chrome)&&!r.state.selection.main.empty&&i.focusNode&&j0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Sf(e.root);if(!n)return!1;let r=nt.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&EX(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=q0(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&cK(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,_X),l4&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),l4&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&sf(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&q0(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new GK(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=lP(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!Fv(this.view.state.selection,n.newSel.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let r=mC(n,e.previousSibling||e.target.previousSibling,-1),i=mC(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Fa)!=e.state.facet(Fa)&&(e.view.contentDOM.editContext=e.state.facet(Fa)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function mC(t,e,n){for(;e;){let r=mr.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function gC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor,1);return j0(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function EX(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return gC(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?gC(t,n):null}class IX{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c=l-a>r.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let u=cP(e.state.sliceDoc(a,l),r.text,(c?i.from:i.to)-a,c?"end":null);if(!u){let f=Se.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));Fv(f,i)||e.dispatch({selection:f,userEvent:"select"});return}let h={from:u.from+a,to:u.toA+a,insert:nn.of(r.text.slice(u.from,u.toB).split(`
`))};if((nt.mac||nt.android)&&h.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:l,insert:nn.of([r.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let f=this.to-this.from+(h.to-h.from+h.insert.length);Lx(e,h,Se.single(this.toEditorPos(r.selectionStart,f),this.toEditorPos(r.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(mt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:ZI.of(mt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Sf(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(r)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,n+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let Ze=class Xw{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||lK(e.parent)||document,this.viewState=new fC(e.state||Sn.create(e)),e.scrollTo&&e.scrollTo.is(l1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Wh).map(i=>new n4(i));for(let i of this.plugins)i.update(this);this.observer=new DX(this),this.inputState=new JK(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ZS(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let n=e.length==1&&e[0]instanceof di?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(mP))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=gP(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Sn.phrases)!=this.state.facet(Sn.phrases))return this.setState(s);i=$v.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new of(d.empty?d:Se.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(l1)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Vv.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Gd)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(p1)!=i.state.facet(p1)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(qw))try{f(i)}catch(d){Ni(this.state,d,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!lP(this,u)&&c.force&&sf(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new fC(e),this.plugins=e.facet(Wh).map(r=>new n4(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new ZS(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Wh),r=e.state.facet(Wh);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new n4(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Ni(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(RI(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(d=>{try{return d.read(this)}catch(p){return Ni(this.state,p),vC}}),h=$v.create(this,this.state,[]),f=!1;h.flags|=l,n?n.flags|=l:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(u[d]!=vC)try{let p=c[d];p.write&&p.write(u[d],this)}catch(p){Ni(this.state,p)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(qw))a(n)}get themeClasses(){return Gw+" "+(this.state.facet(Uw)?wP:bP)+" "+this.state.facet(p1)}updateAttrs(){let e=yC(this,JI,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Fa)?"true":"false",class:"cm-content",style:`${nt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),yC(this,Px,n);let r=this.observer.ignore(()=>{let i=YS(this.contentDOM,this.contentAttrs,n),s=YS(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Xw.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Gd);let e=this.state.facet(Xw.cspNonce);pc.mount(this.root,this.styleModules.concat(AX).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return o4(this,e,JS(this,e,n,r))}moveByGroup(e,n){return o4(this,e,JS(this,e,n,r=>WK(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return Se.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return qK(this,e,n,r)}moveVertically(e,n,r){return o4(this,e,jK(this,e,n,r))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let r=Yw(this,e,n);return r&&r.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),Yw(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Va.find(s,e-i.from,-1,n)];return Dp(r,o.dir==An.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(GI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>PX)return HI(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||FI(s.isolates,r=GS(this,e))))return s.order;r||(r=GS(this,e));let i=gK(e.text,n,r);return this.bidiCache.push(new Vv(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||nt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{NI(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return l1.of(new of(typeof e=="number"?Se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return l1.of(new of(Se.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return lr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return lr.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=pc.newName(),i=[p1.of(r),Gd.of(Kw(`.${r}`,e))];return n&&n.dark&&i.push(Uw.of(!0)),i}static baseTheme(e){return Oc.lowest(Gd.of(Kw("."+Gw,e,xP)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&mr.get(r)||mr.get(e);return((n=i?.root)===null||n===void 0?void 0:n.view)||null}};Ze.styleModule=Gd;Ze.inputHandler=QI;Ze.clipboardInputFilter=Ex;Ze.clipboardOutputFilter=Ix;Ze.scrollHandler=XI;Ze.focusChangeEffect=UI;Ze.perLineTextDirection=GI;Ze.exceptionSink=YI;Ze.updateListener=qw;Ze.editable=Fa;Ze.mouseSelectionStyle=jI;Ze.dragMovesSelection=WI;Ze.clickAddsSelectionRange=qI;Ze.decorations=u2;Ze.blockWrappers=eP;Ze.outerDecorations=Nx;Ze.atomicRanges=ym;Ze.bidiIsolatedRanges=tP;Ze.scrollMargins=nP;Ze.darkTheme=Uw;Ze.cspNonce=et.define({combine:t=>t.length?t[0]:""});Ze.contentAttributes=Px;Ze.editorAttributes=JI;Ze.lineWrapping=Ze.contentAttributes.of({class:"cm-lineWrapping"});Ze.announce=It.define();const PX=4096,vC={};class Vv{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:An.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new Vv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function yC(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&Ax(o,n)}return n}const NX=nt.mac?"mac":nt.windows?"win":nt.linux?"linux":"key";function RX(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function m1(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const LX=Oc.default(Ze.domEventHandlers({keydown(t,e){return SP(kP(e.state),t,e,"editor")}})),ch=et.define({enables:LX}),bC=new WeakMap;function kP(t){let e=t.facet(ch),n=bC.get(e);return n||bC.set(e,n=zX(e.reduce((r,i)=>r.concat(i),[]))),n}function $X(t,e,n){return SP(kP(t.state),e,t,n)}let Ul=null;const BX=4e3;function zX(t,e=NX){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var h,f;let d=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>RX(v,e));for(let v=1;v<p.length;v++){let b=p.slice(0,v).join(" ");i(b,!0),d[b]||(d[b]={preventDefault:!0,stopPropagation:!1,run:[S=>{let O=Ul={view:S,prefix:b,scope:o};return setTimeout(()=>{Ul==O&&(Ul=null)},BX),!0}]})}let m=p.join(" ");i(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0),u&&(g.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let f in u)u[f].run.push(d=>h(d,Zw))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let Zw=null;function SP(t,e,n,r){Zw=e;let i=_I(e),s=Ei(i,0),o=Ho(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;Ul&&Ul.view==n&&Ul.scope==r&&(a=Ul.prefix+" ",hP.indexOf(e.keyCode)<0&&(c=!0,Ul=null));let h=new Set,f=g=>{if(g){for(let v of g.run)if(!h.has(v)&&(h.add(v),v(n)))return g.stopPropagation&&(u=!0),!0;g.preventDefault&&(g.stopPropagation&&(u=!0),c=!0)}return!1},d=t[r],p,m;return d&&(f(d[a+m1(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(nt.windows&&e.ctrlKey&&e.altKey)&&!(nt.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(p=sl[e.keyCode])&&p!=i?(f(d[a+m1(p,e,!0)])||e.shiftKey&&(m=Ap[e.keyCode])!=i&&m!=p&&f(d[a+m1(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(d[a+m1(i,e,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),Zw=null,l}class bm{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=CP(e);return[new bm(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return FX(e,n,r)}}function CP(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==An.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function wC(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function FX(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==An.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=CP(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),d=jw(t,r,1),p=jw(t,i,-1),m=d.type==zr.Text?d:null,g=p.type==zr.Text?p:null;if(m&&(t.lineWrapping||d.widgetLineBreaks)&&(m=wC(t,r,1,m)),g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=wC(t,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return b(S(n.from,n.to,m));{let k=m?S(n.from,null,m):O(d,!1),C=g?S(null,n.to,g):O(p,!0),T=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<C.top?T.push(v(h,k.bottom,f,C.top)):k.bottom<C.top&&t.elementAtHeight((k.bottom+C.top)/2).type==zr.Text&&(k.bottom=C.top=(k.bottom+C.top)/2),b(k).concat(T).concat(b(C))}function v(k,C,T,R){return new bm(e,k-l.left,C-l.top,T-k,R-C)}function b({top:k,bottom:C,horizontal:T}){let R=[];for(let L=0;L<T.length;L+=2)R.push(v(T[L],k,T[L+1],C));return R}function S(k,C,T){let R=1e9,L=-1e9,I=[];function F(G,W,X,te,ne){let ye=t.coordsAtPos(G,G==T.to?-2:2),A=t.coordsAtPos(X,X==T.from?2:-2);!ye||!A||(R=Math.min(ye.top,A.top,R),L=Math.max(ye.bottom,A.bottom,L),ne==An.LTR?I.push(s&&W?h:ye.left,s&&te?f:A.right):I.push(!s&&te?h:A.left,!s&&W?f:ye.right))}let E=k??T.from,ee=C??T.to;for(let G of t.visibleRanges)if(G.to>E&&G.from<ee)for(let W=Math.max(G.from,E),X=Math.min(G.to,ee);;){let te=t.state.doc.lineAt(W);for(let ne of t.bidiSpans(te)){let ye=ne.from+te.from,A=ne.to+te.from;if(ye>=X)break;A>W&&F(Math.max(ye,W),k==null&&ye<=E,Math.min(A,X),C==null&&A>=ee,ne.dir)}if(W=te.to+1,W>=X)break}return I.length==0&&F(E,k==null,ee,C==null,t.textDirection),{top:R,bottom:L,horizontal:I}}function O(k,C){let T=a.top+(C?k.top:k.bottom);return{top:T,bottom:T,horizontal:[]}}}function HX(t,e){return t.constructor==e.constructor&&t.eq(e)}class VX{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(vg)!=e.state.facet(vg)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(vg);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!HX(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,nt.safari&&nt.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const vg=et.define();function OP(t){return[lr.define(e=>new VX(e,t)),vg.of(t)]}const Ip=et.define({combine(t){return ca(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function MP(t={}){return[Ip.of(t),qX,WX,jX,KI.of(!0)]}function TP(t){return t.startState.facet(Ip)!=t.state.facet(Ip)}const qX=OP({above:!0,markers(t){let{state:e}=t,n=e.facet(Ip),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:Se.cursor(i.head,i.head>i.anchor?-1:1);for(let l of bm.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=TP(t);return n&&xC(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){xC(e.state,t)},class:"cm-cursorLayer"});function xC(t,e){e.style.animationDuration=t.facet(Ip).cursorBlinkRate+"ms"}const WX=OP({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:bm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||TP(t)},class:"cm-selectionLayer"}),jX=Oc.highest(Ze.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),AP=It.define({map(t,e){return t==null?null:e.mapPos(t)}}),Zd=Er.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(AP)?r.value:n,t)}}),YX=lr.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Zd);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Zd)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Zd),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Zd)!=t&&this.view.dispatch({effects:AP.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function QX(){return[Zd,YX]}function kC(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function UX(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class GX{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let h=r(a,l,c);h&&u(c,c+a[0].length,h)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new il,r=n.add.bind(n);for(let{from:i,to:s}of UX(e,this.maxLength))kC(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),h=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){h=a;break}}let f=[],d,p=(m,g,v)=>f.push(v.range(m,g));if(l==c)for(this.regexp.lastIndex=u-l.from;(d=this.regexp.exec(l.text))&&d.index<h-l.from;)this.addMatch(d,e,d.index+l.from,p);else kC(e.state.doc,this.regexp,u,h,(m,g)=>this.addMatch(g,e,m,p));n=n.update({filterFrom:u,filterTo:h,filter:(m,g)=>m<u||g>h,add:f})}}return n}}const Jw=/x/.unicode!=null?"gu":"g",KX=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Jw),XX={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let c4=null;function ZX(){var t;if(c4==null&&typeof document<"u"&&document.body){let e=document.body.style;c4=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return c4||!1}const yg=et.define({combine(t){let e=ca(t,{render:null,specialChars:KX,addSpecialChars:null});return(e.replaceTabs=!ZX())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Jw)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Jw)),e}});function JX(t={}){return[yg.of(t),eZ()]}let SC=null;function eZ(){return SC||(SC=lr.fromClass(class{constructor(t){this.view=t,this.decorations=mt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(yg)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new GX({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Ei(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Zf(o.text,a,r-o.from);return mt.replace({widget:new iZ((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=mt.replace({widget:new rZ(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(yg);t.startState.facet(yg)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const tZ="";function nZ(t){return t>=32?tZ:t==10?"":String.fromCharCode(9216+t)}class rZ extends vo{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=nZ(this.code),r=e.state.phrase("Control character")+" "+(XX[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class iZ extends vo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function sZ(){return aZ}const oZ=mt.line({class:"cm-activeLine"}),aZ=lr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(oZ.range(i.from)),e=i.from)}return mt.set(n)}},{decorations:t=>t.decorations});class lZ extends vo{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?W0(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=Dp(n[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function cZ(t){let e=lr.fromClass(class{constructor(n){this.view=n,this.placeholder=t?mt.set([mt.widget({widget:new lZ(t),side:1}).range(0)]):mt.none}get decorations(){return this.view.state.doc.length?mt.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,Ze.contentAttributes.of({"aria-placeholder":t})]:e}const e3=2e3;function uZ(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>e3||n.off>e3||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let c=t.doc.line(l);c.length<=a&&s.push(Se.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let c=t.doc.line(l),u=Iw(c.text,o,t.tabSize,!0);if(u<0)s.push(Se.cursor(c.to));else{let h=Iw(c.text,a,t.tabSize);s.push(Se.range(c.from+u,c.from+h))}}}return s}function hZ(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function CC(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>e3?-1:i==r.length?hZ(t,e.clientX):Zf(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function fZ(t,e){let n=CC(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=CC(t,i);if(!a)return r;let l=uZ(t.state,n,a);return l.length?o?Se.create(l.concat(r.ranges)):Se.create(l):r}}:null}function dZ(t){let e=(n=>n.altKey&&n.button==0);return Ze.mouseSelectionStyle.of((n,r)=>e(r)?fZ(n,r):null)}const pZ={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},mZ={style:"cursor: crosshair"};function gZ(t={}){let[e,n]=pZ[t.key||"Alt"],r=lr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,Ze.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?mZ:null})]}const g1="-10000px";class _P{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==c.create&&(u=h)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let h=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function vZ(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const u4=et.define({combine:t=>{var e,n,r;return{position:nt.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||vZ}}}),OC=new WeakMap,zx=lr.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(u4);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new _P(t,Fx,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(u4);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=g1,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(nt.safari){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else n=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=Rx(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(u4).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=t.pos[a],f=t.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1)){u.style.top=g1;continue}let d=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=f.right-f.left,g=(e=OC.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||bZ,b=this.view.textDirection==An.LTR,S=f.width>r.right-r.left?b?r.left:r.right-f.width:b?Math.max(r.left,Math.min(h.left-(d?14:0)+v.x,r.right-m)):Math.min(Math.max(r.left,h.left-m+(d?14:0)-v.x),r.right-m),O=this.above[a];!l.strictSide&&(O?h.top-g-p-v.y<r.top:h.bottom+g+p+v.y>r.bottom)&&O==r.bottom-h.bottom>h.top-r.top&&(O=this.above[a]=!O);let k=(O?h.top-r.top:r.bottom-h.bottom)-p;if(k<g&&c.resize!==!1){if(k<this.view.defaultLineHeight){u.style.top=g1;continue}OC.set(c,g),u.style.height=(g=k)/s+"px"}else u.style.height&&(u.style.height="");let C=O?h.top-g-p-v.y:h.bottom+p+v.y,T=S+m;if(c.overlap!==!0)for(let R of o)R.left<T&&R.right>S&&R.top<C+g&&R.bottom>C&&(C=O?R.top-g-2-p:R.bottom+p+2);if(this.position=="absolute"?(u.style.top=(C-t.parent.top)/s+"px",MC(u,(S-t.parent.left)/i)):(u.style.top=C/s+"px",MC(u,S/i)),d){let R=h.left+(b?v.x:-v.x)-(S+14-7);d.style.left=R/i+"px"}c.overlap!==!0&&o.push({left:S,top:C,right:T,bottom:C+g}),u.classList.toggle("cm-tooltip-above",O),u.classList.toggle("cm-tooltip-below",!O),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=g1}},{eventObservers:{scroll(){this.maybeMeasure()}}});function MC(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const yZ=Ze.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),bZ={x:0,y:0},Fx=et.define({enables:[zx,yZ]}),qv=et.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class p2{static create(e){return new p2(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new _P(e,qv,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const wZ=Fx.compute([qv],t=>{let e=t.facet(qv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:p2.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class xZ{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.tile.nearest(n.target);if(!r)return;let i,s=1;if(r.isWidget())i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==An.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Ni(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(zx),n=e?e.manager.tooltips.findIndex(r=>r.create==p2.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!kZ(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!SZ(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const v1=4;function kZ(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-v1&&e.clientX<=r+v1&&e.clientY>=i-v1&&e.clientY<=s+v1}function SZ(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function CZ(t,e={}){let n=It.define(),r=Er.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,$r.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(OZ)&&(i=[]);return i},provide:i=>qv.from(i)});return{active:r,extension:[r,lr.define(i=>new xZ(i,t,r,n,e.hoverTime||300)),wZ]}}function DP(t,e){let n=t.plugin(zx);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const OZ=It.define(),TC=et.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Hx(t,e){let n=t.plugin(EP),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const EP=lr.fromClass(class{constructor(t){this.input=t.state.facet(Pp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(TC);this.top=new y1(t,!0,e.topContainer),this.bottom=new y1(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(TC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new y1(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new y1(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Pp);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Ze.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class y1{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=AC(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=AC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function AC(t){let e=t.nextSibling;return t.remove(),e}const Pp=et.define({enables:EP});function MZ(t,e){let n,r=new Promise(o=>n=o),i=o=>TZ(o,e,n);t.state.field(h4,!1)?t.dispatch({effects:IP.of(i)}):t.dispatch({effects:It.appendConfig.of(h4.init(()=>[i]))});let s=PP.of(i);return{close:s,result:r.then(o=>((t.win.queueMicrotask||(l=>t.win.setTimeout(l,10)))(()=>{t.state.field(h4).indexOf(i)>-1&&t.dispatch({effects:s})}),o))}}const h4=Er.define({create(){return[]},update(t,e){for(let n of e.effects)n.is(IP)?t=[n.value].concat(t):n.is(PP)&&(t=t.filter(r=>r!=n.value));return t},provide:t=>Pp.computeN([t],e=>e.field(t))}),IP=It.define(),PP=It.define();function TZ(t,e,n){let r=e.content?e.content(t,()=>o(null)):null;if(!r){if(r=xn("form"),e.input){let a=xn("input",e.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),r.appendChild(xn("label",(e.label||"")+": ",a))}else r.appendChild(document.createTextNode(e.label||""));r.appendChild(document.createTextNode(" ")),r.appendChild(xn("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let i=r.nodeName=="FORM"?[r]:r.querySelectorAll("form");for(let a=0;a<i.length;a++){let l=i[a];l.addEventListener("keydown",c=>{c.keyCode==27?(c.preventDefault(),o(null)):c.keyCode==13&&(c.preventDefault(),o(l))}),l.addEventListener("submit",c=>{c.preventDefault(),o(l)})}let s=xn("div",r,xn("button",{onclick:()=>o(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(s.className=e.class),s.classList.add("cm-dialog");function o(a){s.contains(s.ownerDocument.activeElement)&&t.focus(),n(a)}return{dom:s,top:e.top,mount:()=>{if(e.focus){let a;typeof e.focus=="string"?a=r.querySelector(e.focus):a=r.querySelector("input")||r.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class al extends dc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}al.prototype.elementClass="";al.prototype.toDOM=void 0;al.prototype.mapMode=$r.TrackBefore;al.prototype.startSide=al.prototype.endSide=-1;al.prototype.point=!0;const bg=et.define(),AZ=et.define(),_Z={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ut.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Q0=et.define();function DZ(t){return[NP(),Q0.of({..._Z,...t})]}const _C=et.define({combine:t=>t.some(e=>e)});function NP(t){return[EZ]}const EZ=lr.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Q0).map(e=>new EC(t,e)),this.fixed=!t.state.facet(_C);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(_C)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Ut.iter(this.view.state.facet(bg),this.view.viewport.from),r=[],i=this.gutters.map(s=>new IZ(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==zr.Text&&o){t3(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==zr.Text){t3(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Q0),n=t.state.facet(Q0),r=t.docChanged||t.heightChanged||t.viewportChanged||!Ut.eq(t.startState.facet(bg),t.state.facet(bg),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new EC(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Ze.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==An.LTR?{left:r,right:i}:{right:r,left:i}})});function DC(t){return Array.isArray(t)?t:[t]}function t3(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class IZ{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Ut.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new RP(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];t3(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(AZ)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class EC{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=DC(n.markers(e)),n.initialSpacer&&(this.spacer=new RP(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=DC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Ut.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class RP{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),PZ(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function PZ(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const NZ=et.define(),RZ=et.define(),jh=et.define({combine(t){return ca(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class f4 extends al{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function d4(t,e){return t.state.facet(jh).formatNumber(e,t.state)}const LZ=Q0.compute([jh],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(NZ)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new f4(d4(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(RZ)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(jh)!=e.state.facet(jh),initialSpacer(e){return new f4(d4(e,IC(e.state.doc.lines)))},updateSpacer(e,n){let r=d4(n.view,IC(n.view.state.doc.lines));return r==e.number?e:new f4(r)},domEventHandlers:t.facet(jh).domEventHandlers,side:"before"}));function $Z(t={}){return[jh.of(t),NP(),LZ]}function IC(t){let e=9;for(;e<t;)e=e*10+9;return e}const BZ=new class extends al{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},zZ=bg.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(BZ.range(i)))}return Ut.of(e)});function FZ(){return zZ}let HZ=0;class Os{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=HZ++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Os&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new Os(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Wv(e);return r=>r.modified.indexOf(n)>-1?r:Wv.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let VZ=0;class Wv{constructor(e){this.name=e,this.instances=[],this.id=VZ++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&qZ(n,a.modified));if(r)return r;let i=[],s=new Os(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=WZ(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Wv.get(a,l));return s}}function qZ(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function WZ(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function LP(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Np(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return $P.add(e)}const $P=new Bt({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let s=new Np(i.tags,i.mode,i.context);n?n.next=s:r=s,n=s}return r}});class Np{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Np.empty=new Np([],2,null);function BP(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function jZ(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function YZ(t,e,n,r=0,i=t.length){let s=new QZ(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class QZ{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,u=UZ(e)||Np.empty,h=jZ(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(Bt.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(f.tree.type)),m=e.firstChild();for(let g=0,v=a;;g++){let b=g<f.overlay.length?f.overlay[g]:null,S=b?b.from+a:l,O=Math.max(n,v),k=Math.min(r,S);if(O<k&&m)for(;e.from<k&&(this.highlightRange(e,O,k,i,s),this.startSpan(Math.min(k,e.to),c),!(e.to>=S||!e.nextSibling())););if(!b||S>r)break;v=b.to+a,v>n&&(this.highlightRange(d.cursor(),Math.max(n,b.from+a),Math.min(r,v),"",p),this.startSpan(Math.min(r,v),c))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function UZ(t){let e=t.type.prop($P);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ge=Os.define,b1=Ge(),ql=Ge(),PC=Ge(ql),NC=Ge(ql),Wl=Ge(),w1=Ge(Wl),p4=Ge(Wl),Eo=Ge(),Uc=Ge(Eo),_o=Ge(),Do=Ge(),n3=Ge(),Dd=Ge(n3),x1=Ge(),x={comment:b1,lineComment:Ge(b1),blockComment:Ge(b1),docComment:Ge(b1),name:ql,variableName:Ge(ql),typeName:PC,tagName:Ge(PC),propertyName:NC,attributeName:Ge(NC),className:Ge(ql),labelName:Ge(ql),namespace:Ge(ql),macroName:Ge(ql),literal:Wl,string:w1,docString:Ge(w1),character:Ge(w1),attributeValue:Ge(w1),number:p4,integer:Ge(p4),float:Ge(p4),bool:Ge(Wl),regexp:Ge(Wl),escape:Ge(Wl),color:Ge(Wl),url:Ge(Wl),keyword:_o,self:Ge(_o),null:Ge(_o),atom:Ge(_o),unit:Ge(_o),modifier:Ge(_o),operatorKeyword:Ge(_o),controlKeyword:Ge(_o),definitionKeyword:Ge(_o),moduleKeyword:Ge(_o),operator:Do,derefOperator:Ge(Do),arithmeticOperator:Ge(Do),logicOperator:Ge(Do),bitwiseOperator:Ge(Do),compareOperator:Ge(Do),updateOperator:Ge(Do),definitionOperator:Ge(Do),typeOperator:Ge(Do),controlOperator:Ge(Do),punctuation:n3,separator:Ge(n3),bracket:Dd,angleBracket:Ge(Dd),squareBracket:Ge(Dd),paren:Ge(Dd),brace:Ge(Dd),content:Eo,heading:Uc,heading1:Ge(Uc),heading2:Ge(Uc),heading3:Ge(Uc),heading4:Ge(Uc),heading5:Ge(Uc),heading6:Ge(Uc),contentSeparator:Ge(Eo),list:Ge(Eo),quote:Ge(Eo),emphasis:Ge(Eo),strong:Ge(Eo),link:Ge(Eo),monospace:Ge(Eo),strikethrough:Ge(Eo),inserted:Ge(),deleted:Ge(),changed:Ge(),invalid:Ge(),meta:x1,documentMeta:Ge(x1),annotation:Ge(x1),processingInstruction:Ge(x1),definition:Os.defineModifier("definition"),constant:Os.defineModifier("constant"),function:Os.defineModifier("function"),standard:Os.defineModifier("standard"),local:Os.defineModifier("local"),special:Os.defineModifier("special")};for(let t in x){let e=x[t];e instanceof Os&&(e.name=t)}BP([{tag:x.link,class:"tok-link"},{tag:x.heading,class:"tok-heading"},{tag:x.emphasis,class:"tok-emphasis"},{tag:x.strong,class:"tok-strong"},{tag:x.keyword,class:"tok-keyword"},{tag:x.atom,class:"tok-atom"},{tag:x.bool,class:"tok-bool"},{tag:x.url,class:"tok-url"},{tag:x.labelName,class:"tok-labelName"},{tag:x.inserted,class:"tok-inserted"},{tag:x.deleted,class:"tok-deleted"},{tag:x.literal,class:"tok-literal"},{tag:x.string,class:"tok-string"},{tag:x.number,class:"tok-number"},{tag:[x.regexp,x.escape,x.special(x.string)],class:"tok-string2"},{tag:x.variableName,class:"tok-variableName"},{tag:x.local(x.variableName),class:"tok-variableName tok-local"},{tag:x.definition(x.variableName),class:"tok-variableName tok-definition"},{tag:x.special(x.variableName),class:"tok-variableName2"},{tag:x.definition(x.propertyName),class:"tok-propertyName tok-definition"},{tag:x.typeName,class:"tok-typeName"},{tag:x.namespace,class:"tok-namespace"},{tag:x.className,class:"tok-className"},{tag:x.macroName,class:"tok-macroName"},{tag:x.propertyName,class:"tok-propertyName"},{tag:x.operator,class:"tok-operator"},{tag:x.comment,class:"tok-comment"},{tag:x.meta,class:"tok-meta"},{tag:x.invalid,class:"tok-invalid"},{tag:x.punctuation,class:"tok-punctuation"}]);var m4;const gu=new Bt;function zP(t){return et.define({combine:t?e=>e.concat(t):void 0})}const GZ=new Bt;class Ds{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Sn.prototype.hasOwnProperty("tree")||Object.defineProperty(Sn.prototype,"tree",{get(){return _r(this)}}),this.parser=n,this.extension=[gc.of(this),Sn.languageData.of((s,o,a)=>{let l=RC(s,o,a),c=l.type.prop(gu);if(!c)return[];let u=s.facet(c),h=l.type.prop(GZ);if(h){let f=l.resolve(o-l.from,a);for(let d of h)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return RC(e,n,r).type.prop(gu)==this.data}findRegions(e){let n=e.facet(gc);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(gu)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Bt.mounted);if(a){if(a.tree.prop(gu)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof fn&&i(c,s.positions[l]+o)}};return i(_r(e),0),r}get allowsNesting(){return!0}}Ds.setState=It.define();function RC(t,e,n){let r=t.facet(gc),i=_r(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,vn.ExcludeBuffers|vn.EnterBracketed))s.type.isTop&&(i=s);return i}class jv extends Ds{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=zP(e.languageData);return new jv(n,e.parser.configure({props:[gu.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new jv(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function _r(t){let e=t.field(Ds.state,!1);return e?e.tree:fn.empty}class KZ{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ed=null,r3=class i3{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new i3(e,n,[],fn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new KZ(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=fn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ga.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ga.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ed;Ed=this;try{return e()}finally{Ed=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=LC(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,f)=>l.push({fromA:c,toA:u,fromB:h,toB:f})),r=Ga.applyChanges(r,l),i=fn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new i3(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=LC(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends kx{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Ed;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new fn(Hi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ed}};function LC(t,e,n){return Ga.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Tf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Tf(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=r3.create(e.facet(gc).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Tf(r)}}Ds.state=Er.define({create:Tf.init,update(t,e){for(let n of e.effects)if(n.is(Ds.setState))return n.value;return e.startState.facet(gc)!=e.state.facet(gc)?Tf.init(e.state):t.apply(e)}});let FP=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(FP=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const g4=typeof navigator<"u"&&(!((m4=navigator.scheduling)===null||m4===void 0)&&m4.isInputPending)?()=>navigator.scheduling.isInputPending():null,XZ=lr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Ds.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Ds.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=FP(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Ds.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!g4?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>g4&&g4()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ds.setState.of(new Tf(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ni(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),gc=et.define({combine(t){return t.length?t[0]:null},enables:t=>[Ds.state,XZ,Ze.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class HP{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class se{constructor(e,n,r,i,s,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new se(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(s=>s==n))return i;if(r)for(let i of e)for(let s of i.alias){let o=n.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+s.length])))return i}return null}}const ZZ=et.define(),wm=et.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Wu(t){let e=t.facet(wm);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Rp(t,e){let n="",r=t.tabSize,i=t.facet(wm)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Vx(t,e){t instanceof Sn&&(t=new m2(t));for(let r of t.state.facet(ZZ)){let i=r(t,e);if(i!==void 0)return i}let n=_r(t.state);return n.length>=e?JZ(t,n,e):null}class m2{constructor(e,n={}){this.state=e,this.options=n,this.unit=Wu(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Zf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const qx=new Bt;function JZ(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return VP(r,t,n)}function VP(t,e,n){for(let r=t;r;r=r.next){let i=tJ(r.node);if(i)return i(Wx.create(e,n,r))}return 0}function eJ(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function tJ(t){let e=t.type.prop(qx);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Bt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>qP(o,!0,1,void 0,s&&!eJ(o)?i.from:void 0)}return t.parent==null?nJ:null}function nJ(){return 0}class Wx extends m2{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Wx(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(rJ(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return VP(this.context.next,this.base,this.pos)}}function rJ(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function iJ(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function HDe({closing:t,align:e=!0,units:n=1}){return r=>qP(r,e,n,t)}function qP(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?iJ(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const VDe=t=>t.baseIndent;function sJ({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const oJ=200;function aJ(){return Sn.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+oJ)return t;let s=n.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=Vx(o,u.from);if(h==null)continue;let f=/^\s*/.exec(u.text)[0],d=Rp(o,h);f!=d&&l.push({from:u.from,to:u.from+f.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const lJ=et.define(),WP=new Bt;function cJ(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function uJ(t,e,n){let r=_r(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(WP);if(l&&(a.to<r.length-50||r.length==t.doc.length||!hJ(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function hJ(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Yv(t,e,n){for(let r of t.facet(lJ)){let i=r(t,e,n);if(i)return i}return uJ(t,e,n)}function jP(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const g2=It.define({map:jP}),xm=It.define({map:jP});function YP(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const ju=Er.define({create(){return mt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=$C(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(g2)&&!fJ(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(GP),i=r?mt.replace({widget:new bJ(r(e.state,n.value))}):BC;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(xm)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=$C(t,e.selection.main.head)),t},provide:t=>Ze.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(BC.range(r,i))}return mt.set(e,!0)}});function $C(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Qv(t,e,n){var r;let i=null;return(r=t.field(ju,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function fJ(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function QP(t,e){return t.field(ju,!1)?e:e.concat(It.appendConfig.of(KP()))}const dJ=t=>{for(let e of YP(t)){let n=Yv(t.state,e.from,e.to);if(n)return t.dispatch({effects:QP(t.state,[g2.of(n),UP(t,n)])}),!0}return!1},pJ=t=>{if(!t.state.field(ju,!1))return!1;let e=[];for(let n of YP(t)){let r=Qv(t.state,n.from,n.to);r&&e.push(xm.of(r),UP(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function UP(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Ze.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const mJ=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=Yv(e,i.from,i.to);s&&n.push(g2.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:QP(t.state,n)}),!!n.length},gJ=t=>{let e=t.state.field(ju,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(xm.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},vJ=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:dJ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:pJ},{key:"Ctrl-Alt-[",run:mJ},{key:"Ctrl-Alt-]",run:gJ}],yJ={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},GP=et.define({combine(t){return ca(t,yJ)}});function KP(t){return[ju,kJ]}function XP(t,e){let{state:n}=t,r=n.facet(GP),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Qv(t.state,a.from,a.to);l&&t.dispatch({effects:xm.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const BC=mt.replace({widget:new class extends vo{toDOM(t){return XP(t,null)}}});class bJ extends vo{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return XP(e,this.value)}}const wJ={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class v4 extends al{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function xJ(t={}){let e={...wJ,...t},n=new v4(e,!0),r=new v4(e,!1),i=lr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(gc)!=o.state.facet(gc)||o.startState.field(ju,!1)!=o.state.field(ju,!1)||_r(o.startState)!=_r(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new il;for(let l of o.viewportLineBlocks){let c=Qv(o.state,l.from,l.to)?r:Yv(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,DZ({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Ut.empty},initialSpacer(){return new v4(e,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Qv(o.state,a.from,a.to);if(c)return o.dispatch({effects:xm.of(c)}),!0;let u=Yv(o.state,a.from,a.to);return u?(o.dispatch({effects:g2.of(u)}),!0):!1}}}),KP()]}const kJ=Ze.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Jf{constructor(e,n){this.specs=e;let r;function i(a){let l=pc.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Ds?a=>a.prop(gu)==o.data:o?a=>a==o:void 0,this.style=BP(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new pc(r):null,this.themeType=n.themeType}static define(e,n){return new Jf(e,n||{})}}const s3=et.define(),ZP=et.define({combine(t){return t.length?[t[0]]:null}});function y4(t){let e=t.facet(s3);return e.length?e:t.facet(ZP)}function jx(t,e){let n=[CJ],r;return t instanceof Jf&&(t.module&&n.push(Ze.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(ZP.of(t)):r?n.push(s3.computeN([Ze.darkTheme],i=>i.facet(Ze.darkTheme)==(r=="dark")?[t]:[])):n.push(s3.of(t)),n}class SJ{constructor(e){this.markCache=Object.create(null),this.tree=_r(e.state),this.decorations=this.buildDeco(e,y4(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=_r(e.state),r=y4(e.state),i=r!=y4(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return mt.none;let r=new il;for(let{from:i,to:s}of e.visibleRanges)YZ(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=mt.mark({class:l})))},i,s);return r.finish()}}const CJ=Oc.high(lr.fromClass(SJ,{decorations:t=>t.decorations})),OJ=Jf.define([{tag:x.meta,color:"#404740"},{tag:x.link,textDecoration:"underline"},{tag:x.heading,textDecoration:"underline",fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strong,fontWeight:"bold"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:x.keyword,color:"#708"},{tag:[x.atom,x.bool,x.url,x.contentSeparator,x.labelName],color:"#219"},{tag:[x.literal,x.inserted],color:"#164"},{tag:[x.string,x.deleted],color:"#a11"},{tag:[x.regexp,x.escape,x.special(x.string)],color:"#e40"},{tag:x.definition(x.variableName),color:"#00f"},{tag:x.local(x.variableName),color:"#30a"},{tag:[x.typeName,x.namespace],color:"#085"},{tag:x.className,color:"#167"},{tag:[x.special(x.variableName),x.macroName],color:"#256"},{tag:x.definition(x.propertyName),color:"#00c"},{tag:x.comment,color:"#940"},{tag:x.invalid,color:"#f00"}]),MJ=Ze.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),JP=1e4,eN="()[]{}",tN=et.define({combine(t){return ca(t,{afterCursor:!0,brackets:eN,maxScanDistance:JP,renderMatch:_J})}}),TJ=mt.mark({class:"cm-matchingBracket"}),AJ=mt.mark({class:"cm-nonmatchingBracket"});function _J(t){let e=[],n=t.matched?TJ:AJ;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const DJ=Er.define({create(){return mt.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(tN);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=jo(e.state,i.head,-1,r)||i.head>0&&jo(e.state,i.head-1,1,r)||r.afterCursor&&(jo(e.state,i.head,1,r)||i.head<e.state.doc.length&&jo(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return mt.set(n,!0)},provide:t=>Ze.decorations.from(t)}),EJ=[DJ,MJ];function IJ(t={}){return[tN.of(t),EJ]}const PJ=new Bt;function o3(t,e,n){let r=t.prop(e<0?Bt.openedBy:Bt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function a3(t){let e=t.type.prop(PJ);return e?e(t.node):t}function jo(t,e,n,r={}){let i=r.maxScanDistance||JP,s=r.brackets||eN,o=_r(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=o3(l.type,n,s);if(c&&l.from<l.to){let u=a3(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return NJ(t,e,n,l,u,c,s)}}return RJ(t,e,n,o,a.type,i,s)}function NJ(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let h=a3(u);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(o3(u.type,n,o))c++;else if(o3(u.type,-n,o)){if(c==0){let h=a3(u);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function RJ(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!u.next().done&&f<=s;){let d=u.value;n<0&&(f+=d.length);let p=e+f*n;for(let m=n>0?0:d.length-1,g=n>0?d.length:-1;m!=g;m+=n){let v=o.indexOf(d[m]);if(!(v<0||r.resolveInner(p+m,1).type!=i))if(v%2==0==n>0)h++;else{if(h==1)return{start:c,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};h--}}n>0&&(f+=d.length)}return u.done?{start:c,matched:!1}:null}function zC(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class nN{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=zC(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:zC(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function LJ(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||$J,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Ux,mergeTokens:t.mergeTokens!==!1}}function $J(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const FC=new WeakMap;class Yx extends Ds{constructor(e){let n=zP(e.languageData),r=LJ(e),i,s=new class extends kx{createParse(o,a,l){return new zJ(i,o,a,l)}};super(n,s,[],e.name),this.topNode=VJ(n,this),i=this,this.streamParser=r,this.stateAfter=new Bt({perNode:!0}),this.tokenTable=e.tokenTable?new oN(r.tokenTable):HJ}static define(e){return new Yx(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=FC.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=Qx(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=r?r(l.from):-1,h=new nN(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;h.pos<c-l.from;)iN(this.streamParser.token,h,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return r&&n==null&&FC.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function Qx(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof fn&&l<i&&Qx(t,a,l,r,i);if(c)return c}return null}function rN(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof fn){if(!(l=rN(t,a,n-o,r-o,i)))break;return i?new fn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function BJ(t,e,n,r,i){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&Qx(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=r&&(c=rN(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(i?Wu(i):4),tree:fn.empty}}let zJ=class{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=r3.get(),o=i[0].from,{state:a,tree:l}=BJ(e,r,o,this.to,s?.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Wu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=r3.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let a=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new nN(n,e?e.state.tabSize:4,e?Wu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=iN(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=fn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:FJ,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new fn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new fn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function iN(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Ux=Object.create(null),Lp=[Hi.none],FJ=new l2(Lp),HC=[],VC=Object.create(null),sN=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])sN[t]=aN(Ux,e);class oN{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),sN)}resolve(e){return e?this.table[e]||(this.table[e]=aN(this.extra,e)):0}}const HJ=new oN(Ux);function b4(t,e){HC.indexOf(t)>-1||(HC.push(t),console.warn(e))}function aN(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||x[c];u?typeof u=="function"?l.length?l=l.map(u):b4(c,`Modifier ${c} used at start of tag`):l.length?b4(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:b4(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=VC[i];if(s)return s.id;let o=VC[i]=Hi.define({id:Lp.length,name:r,props:[LP({[r]:n})]});return Lp.push(o),o.id}function VJ(t,e){let n=Hi.define({id:Lp.length,name:"Document",props:[gu.add(()=>t),qx.add(()=>r=>e.getIndent(r))],top:!0});return Lp.push(n),n}An.RTL,An.LTR;function Oe(t){return new HP(Yx.define(t))}function _l(t){return ce(()=>import("./index-CAu-cvfz.js"),[],import.meta.url).then(e=>e.sql({dialect:e[t]}))}const qJ=[se.of({name:"C",extensions:["c","h","ino"],load(){return ce(()=>import("./index-BgawqCgI.js"),[],import.meta.url).then(t=>t.cpp())}}),se.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return ce(()=>import("./index-BgawqCgI.js"),[],import.meta.url).then(t=>t.cpp())}}),se.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return _l("Cassandra")}}),se.of({name:"CSS",extensions:["css"],load(){return ce(()=>Promise.resolve().then(()=>Ybe),void 0,import.meta.url).then(t=>t.css())}}),se.of({name:"Go",extensions:["go"],load(){return ce(()=>import("./index-BRslUUQa.js"),[],import.meta.url).then(t=>t.go())}}),se.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return ce(()=>import("./index-DZSbPZXO.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.html())}}),se.of({name:"Java",extensions:["java"],load(){return ce(()=>import("./index-ryLtgTZO.js"),[],import.meta.url).then(t=>t.java())}}),se.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return ce(()=>import("./index-lnXAYWKB.js"),[],import.meta.url).then(t=>t.javascript())}}),se.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load(){return ce(()=>import("./index-CHIUQYfg.js"),__vite__mapDeps([2,0,1]),import.meta.url).then(t=>t.jinja())}}),se.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return ce(()=>import("./index-CHIEC65w.js"),[],import.meta.url).then(t=>t.json())}}),se.of({name:"JSX",extensions:["jsx"],load(){return ce(()=>import("./index-lnXAYWKB.js"),[],import.meta.url).then(t=>t.javascript({jsx:!0}))}}),se.of({name:"LESS",extensions:["less"],load(){return ce(()=>import("./index-DFihSV8p.js"),[],import.meta.url).then(t=>t.less())}}),se.of({name:"Liquid",extensions:["liquid"],load(){return ce(()=>import("./index-BYeN6ag-.js"),__vite__mapDeps([3,0,1]),import.meta.url).then(t=>t.liquid())}}),se.of({name:"MariaDB SQL",load(){return _l("MariaSQL")}}),se.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return ce(()=>import("./index-DWLIyLd3.js"),__vite__mapDeps([4,0,1]),import.meta.url).then(t=>t.markdown())}}),se.of({name:"MS SQL",load(){return _l("MSSQL")}}),se.of({name:"MySQL",load(){return _l("MySQL")}}),se.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return ce(()=>import("./index-C86zjrtT.js"),__vite__mapDeps([5,0,1]),import.meta.url).then(t=>t.php())}}),se.of({name:"PLSQL",extensions:["pls"],load(){return _l("PLSQL")}}),se.of({name:"PostgreSQL",load(){return _l("PostgreSQL")}}),se.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return ce(()=>import("./index-CSrBsXRc.js"),[],import.meta.url).then(t=>t.python())}}),se.of({name:"Rust",extensions:["rs"],load(){return ce(()=>import("./index-4MgabLr7.js"),[],import.meta.url).then(t=>t.rust())}}),se.of({name:"Sass",extensions:["sass"],load(){return ce(()=>import("./index-SHaRip24.js"),[],import.meta.url).then(t=>t.sass({indented:!0}))}}),se.of({name:"SCSS",extensions:["scss"],load(){return ce(()=>import("./index-SHaRip24.js"),[],import.meta.url).then(t=>t.sass())}}),se.of({name:"SQL",extensions:["sql"],load(){return _l("StandardSQL")}}),se.of({name:"SQLite",load(){return _l("SQLite")}}),se.of({name:"TSX",extensions:["tsx"],load(){return ce(()=>import("./index-lnXAYWKB.js"),[],import.meta.url).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),se.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return ce(()=>import("./index-lnXAYWKB.js"),[],import.meta.url).then(t=>t.javascript({typescript:!0}))}}),se.of({name:"WebAssembly",extensions:["wat","wast"],load(){return ce(()=>import("./index-Cr76hY5r.js"),[],import.meta.url).then(t=>t.wast())}}),se.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return ce(()=>import("./index-13fSOMa9.js"),[],import.meta.url).then(t=>t.xml())}}),se.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return ce(()=>import("./index-9pzhdNCq.js"),[],import.meta.url).then(t=>t.yaml())}}),se.of({name:"APL",extensions:["dyalog","apl"],load(){return ce(()=>import("./apl-B4CMkyY2.js"),[],import.meta.url).then(t=>Oe(t.apl))}}),se.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return ce(()=>import("./asciiarmor-Df11BRmG.js"),[],import.meta.url).then(t=>Oe(t.asciiArmor))}}),se.of({name:"ASN.1",extensions:["asn","asn1"],load(){return ce(()=>import("./asn1-EdZsLKOL.js"),[],import.meta.url).then(t=>Oe(t.asn1({})))}}),se.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return ce(()=>import("./asterisk-B-8jnY81.js"),[],import.meta.url).then(t=>Oe(t.asterisk))}}),se.of({name:"Brainfuck",extensions:["b","bf"],load(){return ce(()=>import("./brainfuck-C4LP7Hcl.js"),[],import.meta.url).then(t=>Oe(t.brainfuck))}}),se.of({name:"Cobol",extensions:["cob","cpy"],load(){return ce(()=>import("./cobol-CWcv1MsR.js"),[],import.meta.url).then(t=>Oe(t.cobol))}}),se.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.csharp))}}),se.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return ce(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(t=>Oe(t.clojure))}}),se.of({name:"ClojureScript",extensions:["cljs"],load(){return ce(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(t=>Oe(t.clojure))}}),se.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return ce(()=>import("./css-BnMrqG3P.js"),[],import.meta.url).then(t=>Oe(t.gss))}}),se.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return ce(()=>import("./cmake-BQqOBYOt.js"),[],import.meta.url).then(t=>Oe(t.cmake))}}),se.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return ce(()=>import("./coffeescript-S37ZYGWr.js"),[],import.meta.url).then(t=>Oe(t.coffeeScript))}}),se.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return ce(()=>import("./commonlisp-DBKNyK5s.js"),[],import.meta.url).then(t=>Oe(t.commonLisp))}}),se.of({name:"Cypher",extensions:["cyp","cypher"],load(){return ce(()=>import("./cypher-C_CwsFkJ.js"),[],import.meta.url).then(t=>Oe(t.cypher))}}),se.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return ce(()=>import("./python-BuPzkPfP.js"),[],import.meta.url).then(t=>Oe(t.cython))}}),se.of({name:"Crystal",extensions:["cr"],load(){return ce(()=>import("./crystal-SjHAIU92.js"),[],import.meta.url).then(t=>Oe(t.crystal))}}),se.of({name:"D",extensions:["d"],load(){return ce(()=>import("./d-pRatUO7H.js"),[],import.meta.url).then(t=>Oe(t.d))}}),se.of({name:"Dart",extensions:["dart"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.dart))}}),se.of({name:"diff",extensions:["diff","patch"],load(){return ce(()=>import("./diff-DbItnlRl.js"),[],import.meta.url).then(t=>Oe(t.diff))}}),se.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return ce(()=>import("./dockerfile-BKs6k2Af.js"),__vite__mapDeps([6,7]),import.meta.url).then(t=>Oe(t.dockerFile))}}),se.of({name:"DTD",extensions:["dtd"],load(){return ce(()=>import("./dtd-DF_7sFjM.js"),[],import.meta.url).then(t=>Oe(t.dtd))}}),se.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return ce(()=>import("./dylan-DwRh75JA.js"),[],import.meta.url).then(t=>Oe(t.dylan))}}),se.of({name:"EBNF",load(){return ce(()=>import("./ebnf-CDyGwa7X.js"),[],import.meta.url).then(t=>Oe(t.ebnf))}}),se.of({name:"ECL",extensions:["ecl"],load(){return ce(()=>import("./ecl-Cabwm37j.js"),[],import.meta.url).then(t=>Oe(t.ecl))}}),se.of({name:"edn",extensions:["edn"],load(){return ce(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(t=>Oe(t.clojure))}}),se.of({name:"Eiffel",extensions:["e"],load(){return ce(()=>import("./eiffel-CnydiIhH.js"),[],import.meta.url).then(t=>Oe(t.eiffel))}}),se.of({name:"Elm",extensions:["elm"],load(){return ce(()=>import("./elm-vLlmbW-K.js"),[],import.meta.url).then(t=>Oe(t.elm))}}),se.of({name:"Erlang",extensions:["erl"],load(){return ce(()=>import("./erlang-BNw1qcRV.js"),[],import.meta.url).then(t=>Oe(t.erlang))}}),se.of({name:"Esper",load(){return ce(()=>import("./sql-D0XecflT.js"),[],import.meta.url).then(t=>Oe(t.esper))}}),se.of({name:"Factor",extensions:["factor"],load(){return ce(()=>import("./factor-kuTfRLto.js"),__vite__mapDeps([8,7]),import.meta.url).then(t=>Oe(t.factor))}}),se.of({name:"FCL",load(){return ce(()=>import("./fcl-Kvtd6kyn.js"),[],import.meta.url).then(t=>Oe(t.fcl))}}),se.of({name:"Forth",extensions:["forth","fth","4th"],load(){return ce(()=>import("./forth-Ffai-XNe.js"),[],import.meta.url).then(t=>Oe(t.forth))}}),se.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return ce(()=>import("./fortran-DYz_wnZ1.js"),[],import.meta.url).then(t=>Oe(t.fortran))}}),se.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return ce(()=>import("./mllike-CXdrOF99.js"),[],import.meta.url).then(t=>Oe(t.fSharp))}}),se.of({name:"Gas",extensions:["s"],load(){return ce(()=>import("./gas-Bneqetm1.js"),[],import.meta.url).then(t=>Oe(t.gas))}}),se.of({name:"Gherkin",extensions:["feature"],load(){return ce(()=>import("./gherkin-heZmZLOM.js"),[],import.meta.url).then(t=>Oe(t.gherkin))}}),se.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return ce(()=>import("./groovy-D9Dt4D0W.js"),[],import.meta.url).then(t=>Oe(t.groovy))}}),se.of({name:"Haskell",extensions:["hs"],load(){return ce(()=>import("./haskell-Cw1EW3IL.js"),[],import.meta.url).then(t=>Oe(t.haskell))}}),se.of({name:"Haxe",extensions:["hx"],load(){return ce(()=>import("./haxe-H-WmDvRZ.js"),[],import.meta.url).then(t=>Oe(t.haxe))}}),se.of({name:"HXML",extensions:["hxml"],load(){return ce(()=>import("./haxe-H-WmDvRZ.js"),[],import.meta.url).then(t=>Oe(t.hxml))}}),se.of({name:"HTTP",load(){return ce(()=>import("./http-DBlCnlav.js"),[],import.meta.url).then(t=>Oe(t.http))}}),se.of({name:"IDL",extensions:["pro"],load(){return ce(()=>import("./idl-BEugSyMb.js"),[],import.meta.url).then(t=>Oe(t.idl))}}),se.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return ce(()=>import("./javascript-iXu5QeM3.js"),[],import.meta.url).then(t=>Oe(t.jsonld))}}),se.of({name:"Julia",extensions:["jl"],load(){return ce(()=>import("./julia-DuME0IfC.js"),[],import.meta.url).then(t=>Oe(t.julia))}}),se.of({name:"Kotlin",extensions:["kt","kts"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.kotlin))}}),se.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return ce(()=>import("./livescript-BwQOo05w.js"),[],import.meta.url).then(t=>Oe(t.liveScript))}}),se.of({name:"Lua",extensions:["lua"],load(){return ce(()=>import("./lua-BgMRiT3U.js"),[],import.meta.url).then(t=>Oe(t.lua))}}),se.of({name:"mIRC",extensions:["mrc"],load(){return ce(()=>import("./mirc-CjQqDB4T.js"),[],import.meta.url).then(t=>Oe(t.mirc))}}),se.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return ce(()=>import("./mathematica-DTrFuWx2.js"),[],import.meta.url).then(t=>Oe(t.mathematica))}}),se.of({name:"Modelica",extensions:["mo"],load(){return ce(()=>import("./modelica-Dc1JOy9r.js"),[],import.meta.url).then(t=>Oe(t.modelica))}}),se.of({name:"MUMPS",extensions:["mps"],load(){return ce(()=>import("./mumps-BT43cFF4.js"),[],import.meta.url).then(t=>Oe(t.mumps))}}),se.of({name:"Mbox",extensions:["mbox"],load(){return ce(()=>import("./mbox-CNhZ1qSd.js"),[],import.meta.url).then(t=>Oe(t.mbox))}}),se.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return ce(()=>import("./nginx-DdIZxoE0.js"),[],import.meta.url).then(t=>Oe(t.nginx))}}),se.of({name:"NSIS",extensions:["nsh","nsi"],load(){return ce(()=>import("./nsis-LdVXkNf5.js"),__vite__mapDeps([9,7]),import.meta.url).then(t=>Oe(t.nsis))}}),se.of({name:"NTriples",extensions:["nt","nq"],load(){return ce(()=>import("./ntriples-BfvgReVJ.js"),[],import.meta.url).then(t=>Oe(t.ntriples))}}),se.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.objectiveC))}}),se.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.objectiveCpp))}}),se.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return ce(()=>import("./mllike-CXdrOF99.js"),[],import.meta.url).then(t=>Oe(t.oCaml))}}),se.of({name:"Octave",extensions:["m"],load(){return ce(()=>import("./octave-Ck1zUtKM.js"),[],import.meta.url).then(t=>Oe(t.octave))}}),se.of({name:"Oz",extensions:["oz"],load(){return ce(()=>import("./oz-BzwKVEFT.js"),[],import.meta.url).then(t=>Oe(t.oz))}}),se.of({name:"Pascal",extensions:["p","pas"],load(){return ce(()=>import("./pascal--L3eBynH.js"),[],import.meta.url).then(t=>Oe(t.pascal))}}),se.of({name:"Perl",extensions:["pl","pm"],load(){return ce(()=>import("./perl-CdXCOZ3F.js"),[],import.meta.url).then(t=>Oe(t.perl))}}),se.of({name:"Pig",extensions:["pig"],load(){return ce(()=>import("./pig-CevX1Tat.js"),[],import.meta.url).then(t=>Oe(t.pig))}}),se.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return ce(()=>import("./powershell-CFHJl5sT.js"),[],import.meta.url).then(t=>Oe(t.powerShell))}}),se.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return ce(()=>import("./properties-C78fOPTZ.js"),[],import.meta.url).then(t=>Oe(t.properties))}}),se.of({name:"ProtoBuf",extensions:["proto"],load(){return ce(()=>import("./protobuf-ChK-085T.js"),[],import.meta.url).then(t=>Oe(t.protobuf))}}),se.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return ce(()=>import("./pug-DeIclll2.js"),__vite__mapDeps([10,11]),import.meta.url).then(t=>Oe(t.pug))}}),se.of({name:"Puppet",extensions:["pp"],load(){return ce(()=>import("./puppet-DMA9R1ak.js"),[],import.meta.url).then(t=>Oe(t.puppet))}}),se.of({name:"Q",extensions:["q"],load(){return ce(()=>import("./q-pXgVlZs6.js"),[],import.meta.url).then(t=>Oe(t.q))}}),se.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return ce(()=>import("./r-B6wPVr8A.js"),[],import.meta.url).then(t=>Oe(t.r))}}),se.of({name:"RPM Changes",load(){return ce(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(t=>Oe(t.rpmChanges))}}),se.of({name:"RPM Spec",extensions:["spec"],load(){return ce(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(t=>Oe(t.rpmSpec))}}),se.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return ce(()=>import("./ruby-B2Rjki9n.js"),[],import.meta.url).then(t=>Oe(t.ruby))}}),se.of({name:"SAS",extensions:["sas"],load(){return ce(()=>import("./sas-B4kiWyti.js"),[],import.meta.url).then(t=>Oe(t.sas))}}),se.of({name:"Scala",extensions:["scala"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.scala))}}),se.of({name:"Scheme",extensions:["scm","ss"],load(){return ce(()=>import("./scheme-C41bIUwD.js"),[],import.meta.url).then(t=>Oe(t.scheme))}}),se.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return ce(()=>import("./shell-CjFT_Tl9.js"),[],import.meta.url).then(t=>Oe(t.shell))}}),se.of({name:"Sieve",extensions:["siv","sieve"],load(){return ce(()=>import("./sieve-C3Gn_uJK.js"),[],import.meta.url).then(t=>Oe(t.sieve))}}),se.of({name:"Smalltalk",extensions:["st"],load(){return ce(()=>import("./smalltalk-CnHTOXQT.js"),[],import.meta.url).then(t=>Oe(t.smalltalk))}}),se.of({name:"Solr",load(){return ce(()=>import("./solr-DehyRSwq.js"),[],import.meta.url).then(t=>Oe(t.solr))}}),se.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return ce(()=>import("./mllike-CXdrOF99.js"),[],import.meta.url).then(t=>Oe(t.sml))}}),se.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return ce(()=>import("./sparql-DkYu6x3z.js"),[],import.meta.url).then(t=>Oe(t.sparql))}}),se.of({name:"Spreadsheet",alias:["excel","formula"],load(){return ce(()=>import("./spreadsheet-BCZA_wO0.js"),[],import.meta.url).then(t=>Oe(t.spreadsheet))}}),se.of({name:"Squirrel",extensions:["nut"],load(){return ce(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(t=>Oe(t.squirrel))}}),se.of({name:"Stylus",extensions:["styl"],load(){return ce(()=>import("./stylus-B533Al4x.js"),[],import.meta.url).then(t=>Oe(t.stylus))}}),se.of({name:"Swift",extensions:["swift"],load(){return ce(()=>import("./swift-BzpIVaGY.js"),[],import.meta.url).then(t=>Oe(t.swift))}}),se.of({name:"sTeX",load(){return ce(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(t=>Oe(t.stex))}}),se.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return ce(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(t=>Oe(t.stex))}}),se.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return ce(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(t=>Oe(t.verilog))}}),se.of({name:"Tcl",extensions:["tcl"],load(){return ce(()=>import("./tcl-DVfN8rqt.js"),[],import.meta.url).then(t=>Oe(t.tcl))}}),se.of({name:"Textile",extensions:["textile"],load(){return ce(()=>import("./textile-CnDTJFAw.js"),[],import.meta.url).then(t=>Oe(t.textile))}}),se.of({name:"TiddlyWiki",load(){return ce(()=>import("./tiddlywiki-DO-Gjzrf.js"),[],import.meta.url).then(t=>Oe(t.tiddlyWiki))}}),se.of({name:"Tiki wiki",load(){return ce(()=>import("./tiki-DGYXhP31.js"),[],import.meta.url).then(t=>Oe(t.tiki))}}),se.of({name:"TOML",extensions:["toml"],load(){return ce(()=>import("./toml-Bm5Em-hy.js"),[],import.meta.url).then(t=>Oe(t.toml))}}),se.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return ce(()=>import("./troff-wAsdV37c.js"),[],import.meta.url).then(t=>Oe(t.troff))}}),se.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return ce(()=>import("./ttcn-CfJYG6tj.js"),[],import.meta.url).then(t=>Oe(t.ttcn))}}),se.of({name:"TTCN_CFG",extensions:["cfg"],load(){return ce(()=>import("./ttcn-cfg-B9xdYoR4.js"),[],import.meta.url).then(t=>Oe(t.ttcnCfg))}}),se.of({name:"Turtle",extensions:["ttl"],load(){return ce(()=>import("./turtle-B1tBg_DP.js"),[],import.meta.url).then(t=>Oe(t.turtle))}}),se.of({name:"Web IDL",extensions:["webidl"],load(){return ce(()=>import("./webidl-ZXfAyPTL.js"),[],import.meta.url).then(t=>Oe(t.webIDL))}}),se.of({name:"VB.NET",extensions:["vb"],load(){return ce(()=>import("./vb-CmGdzxic.js"),[],import.meta.url).then(t=>Oe(t.vb))}}),se.of({name:"VBScript",extensions:["vbs"],load(){return ce(()=>import("./vbscript-BuJXcnF6.js"),[],import.meta.url).then(t=>Oe(t.vbScript))}}),se.of({name:"Velocity",extensions:["vtl"],load(){return ce(()=>import("./velocity-D8B20fx6.js"),[],import.meta.url).then(t=>Oe(t.velocity))}}),se.of({name:"Verilog",extensions:["v"],load(){return ce(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(t=>Oe(t.verilog))}}),se.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return ce(()=>import("./vhdl-lSbBsy5d.js"),[],import.meta.url).then(t=>Oe(t.vhdl))}}),se.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load(){return ce(()=>import("./xquery-DzFWVndE.js"),[],import.meta.url).then(t=>Oe(t.xQuery))}}),se.of({name:"Yacas",extensions:["ys"],load(){return ce(()=>import("./yacas-BJ4BC0dw.js"),[],import.meta.url).then(t=>Oe(t.yacas))}}),se.of({name:"Z80",extensions:["z80"],load(){return ce(()=>import("./z80-Hz9HOZM7.js"),[],import.meta.url).then(t=>Oe(t.z80))}}),se.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return ce(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(t=>Oe(t.mscgen))}}),se.of({name:"X",extensions:["xu"],load(){return ce(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(t=>Oe(t.xu))}}),se.of({name:"MsGenny",extensions:["msgenny"],load(){return ce(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(t=>Oe(t.msgenny))}}),se.of({name:"Vue",extensions:["vue"],load(){return ce(()=>import("./index-DZFSNlzo.js"),__vite__mapDeps([12,0,1]),import.meta.url).then(t=>t.vue())}}),se.of({name:"Angular Template",load(){return ce(()=>import("./index-qxWy-VKT.js"),__vite__mapDeps([13,0,1]),import.meta.url).then(t=>t.angular())}})],WJ="#e5c07b",qC="#e06c75",jJ="#56b6c2",YJ="#ffffff",wg="#abb2bf",l3="#7d8799",QJ="#61afef",UJ="#98c379",WC="#d19a66",GJ="#c678dd",KJ="#21252b",jC="#2c313a",YC="#282c34",w4="#353a42",XJ="#3E4451",QC="#528bff",ZJ=Ze.theme({"&":{color:wg,backgroundColor:YC},".cm-content":{caretColor:QC},".cm-cursor, .cm-dropCursor":{borderLeftColor:QC},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:XJ},".cm-panels":{backgroundColor:KJ,color:wg},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:YC,color:l3,border:"none"},".cm-activeLineGutter":{backgroundColor:jC},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:w4},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:w4,borderBottomColor:w4},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:jC,color:wg}}},{dark:!0}),JJ=Jf.define([{tag:x.keyword,color:GJ},{tag:[x.name,x.deleted,x.character,x.propertyName,x.macroName],color:qC},{tag:[x.function(x.variableName),x.labelName],color:QJ},{tag:[x.color,x.constant(x.name),x.standard(x.name)],color:WC},{tag:[x.definition(x.name),x.separator],color:wg},{tag:[x.typeName,x.className,x.number,x.changed,x.annotation,x.modifier,x.self,x.namespace],color:WJ},{tag:[x.operator,x.operatorKeyword,x.url,x.escape,x.regexp,x.link,x.special(x.string)],color:jJ},{tag:[x.meta,x.comment],color:l3},{tag:x.strong,fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:x.link,color:l3,textDecoration:"underline"},{tag:x.heading,fontWeight:"bold",color:qC},{tag:[x.atom,x.bool,x.special(x.variableName)],color:WC},{tag:[x.processingInstruction,x.string,x.inserted],color:UJ},{tag:x.invalid,color:YJ}]),eee=[ZJ,jx(JJ)];function Pr(t){this.content=t}Pr.prototype={constructor:Pr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Pr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Pr(n)},addToStart:function(t,e){return new Pr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Pr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Pr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Pr.from(t),t.size?new Pr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Pr.from(t),t.size?new Pr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Pr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Pr.from=function(t){if(t instanceof Pr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Pr(e)};function lN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=lN(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function cN(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=cN(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Ae{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ae(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ae(r,i)}cutByIndex(e,n){return e==n?Ae.empty:e==0&&n==this.content.length?this:new Ae(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ae(i,s)}addToStart(e){return new Ae([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ae(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return lN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return cN(this,e,n,r)}findIndex(e){if(e==0)return k1(0,e);if(e==this.size)return k1(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?k1(n+1,s):k1(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ae.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ae(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ae.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ae(n||e,r)}static from(e){if(!e)return Ae.empty;if(e instanceof Ae)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ae([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ae.empty=new Ae([],0);const x4={index:0,offset:0};function k1(t,e){return x4.index=t,x4.offset=e,x4}function Uv(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Uv(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Uv(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class Ft{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Uv(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ft.none;if(e instanceof Ft)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}Ft.none=[];class Gv extends Error{}let Ke=class _h{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=hN(this.content,e+this.openStart,n);return r&&new _h(r,this.openStart,this.openEnd)}removeBetween(e,n){return new _h(uN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return _h.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new _h(Ae.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new _h(e,r,i)}};Ke.empty=new Ke(Ae.empty,0,0);function uN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(uN(s.content,e-i-1,n-i-1)))}function hN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=hN(o.content,e-s-1,n,o);return a&&t.replaceChild(i,o.copy(a))}function tee(t,e,n){if(n.openStart>t.depth)throw new Gv("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Gv("Inconsistent open depths");return fN(t,e,n,0)}function fN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=fN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Tu(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=nee(n,t);return Tu(s,pN(t,o,a,e,r))}else return Tu(s,Kv(t,e,r))}function dN(t,e){if(!e.type.compatibleContent(t.type))throw new Gv("Cannot join "+e.type.name+" onto "+t.type.name)}function c3(t,e,n){let r=t.node(n);return dN(r,e.node(n)),r}function Mu(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function U0(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Mu(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Mu(i.child(a),r);e&&e.depth==n&&e.textOffset&&Mu(e.nodeBefore,r)}function Tu(t,e){return t.type.checkContent(e),t.copy(e)}function pN(t,e,n,r,i){let s=t.depth>i&&c3(t,e,i+1),o=r.depth>i&&c3(n,r,i+1),a=[];return U0(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(dN(s,o),Mu(Tu(s,pN(t,e,n,r,i+1)),a)):(s&&Mu(Tu(s,Kv(t,e,i+1)),a),U0(e,n,i,a),o&&Mu(Tu(o,Kv(n,r,i+1)),a)),U0(r,null,i,a),new Ae(a)}function Kv(t,e,n){let r=[];if(U0(null,t,n,r),t.depth>n){let i=c3(t,e,n+1);Mu(Tu(i,Kv(t,e,n+1)),r)}return U0(e,null,n,r),new Ae(r)}function nee(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ae.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class $p{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ft.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new mN(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new $p(n,r,s)}static resolveCached(e,n){let r=UC.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else UC.set(e,r=new ree);let i=r.elts[r.i]=$p.resolve(e,n);return r.i=(r.i+1)%iee,i}}class ree{constructor(){this.elts=[],this.i=0}}const iee=12,UC=new WeakMap;class mN{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const see=Object.create(null);let Ka=class u3{constructor(e,n,r,i=Ft.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Uv(this.attrs,n||e.defaultAttrs||see)&&Ft.sameSet(this.marks,r||Ft.none)}copy(e=null){return e==this.content?this:new u3(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new u3(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Ke.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Ke(c,i.depth-o,s.depth-o)}replace(e,n,r){return tee(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return $p.resolveCached(this,e)}resolveNoCache(e){return $p.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ae.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ft.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ft.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ae.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Ka.prototype.text=void 0;let oee=class h3 extends Ka{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new h3(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new h3(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function gN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Yu{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new aee(e,n);if(r.next==null)return Yu.empty;let i=vN(r);r.next&&r.err("Unexpected trailing text");let s=pee(dee(i));return mee(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ae.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Yu.empty=new Yu(!0);class aee{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function vN(t){let e=[];do e.push(lee(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function lee(t){let e=[];do e.push(cee(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cee(t){let e=fee(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=uee(t,e);else break;return e}function GC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function uee(t,e){let n=GC(t),r=n;return t.eat(",")&&(t.next!="}"?r=GC(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function hee(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function fee(t){if(t.eat("(")){let e=vN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=hee(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function dee(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function yN(t,e){return e-t}function KC(t,e){let n=[];return r(e),n.sort(yN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function pee(t){let e=Object.create(null);return n(KC(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);KC(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Yu(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(yN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function mee(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function bN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function wN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function xN(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function kN(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new vee(t,r,e[r]);return n}let Xv=class SN{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=kN(e,r.attrs),this.defaultAttrs=bN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Yu.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:wN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ka(this,this.computeAttrs(e),Ae.from(n),Ft.setFrom(r))}createChecked(e=null,n,r){return n=Ae.from(n),this.checkContent(n),new Ka(this,this.computeAttrs(e),n,Ft.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ae.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ae.empty,!0);return s?new Ka(this,e,n.append(s),Ft.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){xN(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ft.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new SN(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function gee(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}let vee=class{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?gee(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}};class v2{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=kN(e,i.attrs),this.excluded=null;let s=bN(this.attrs);this.instance=s?new Ft(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ft(this,wN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new v2(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){xN(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class CN{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Pr.from(e.nodes),n.marks=Pr.from(e.marks||{}),this.nodes=Xv.compile(this.spec.nodes,this),this.marks=v2.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Yu.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?XC(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:XC(this,o.split(" "))}this.nodeFromJSON=i=>Ka.fromJSON(this,i),this.markFromJSON=i=>Ft.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Xv){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new oee(r,r.defaultAttrs,e,Ft.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function XC(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function yee(t){return t.tag!=null}function bee(t){return t.style!=null}class Qu{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(yee(i))this.tags.push(i);else if(bee(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new JC(this,n,!1);return r.addAll(e,Ft.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new JC(this,n,!0);return r.addAll(e,Ft.none,n.from,n.to),Ke.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(kee(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=eO(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=eO(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qu(e,Qu.schemaRules(e)))}}const ON={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},MN={ol:!0,ul:!0},Bp=1,f3=2,G0=4;function ZC(t,e,n){return e!=null?(e?Bp:0)|(e==="full"?f3:0):t&&t.whitespace=="pre"?Bp|f3:n&~G0}class S1{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ft.none,this.match=s||(o&G0?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ae.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Bp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ae.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ae.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ON.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class JC{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=ZC(null,n.preserveWhitespace,0)|(r?G0:0);i?s=new S1(i.type,i.attrs,Ft.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new S1(null,null,Ft.none,!0,null,o):s=new S1(e.schema.topNodeType,null,Ft.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&f3?"full":this.localPreserveWS||(i.options&Bp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;MN.hasOwnProperty(o)&&this.parser.normalizeLists&&xee(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:wee.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(ON.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let h=l&&l.skip?n:this.readStyles(e,n);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ft.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):tO(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=ZC(e,s,o.options);o.options&G0&&o.content.length==0&&(a|=G0);let l=Ft.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):tO(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new S1(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Bp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function xee(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&MN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function kee(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function eO(t){let e={};for(let n in t)e[n]=t[n];return e}function tO(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class uh{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=k4(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=xg(k4(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&xg(k4(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return xg(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new uh(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=nO(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return nO(e.marks)}}function nO(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function k4(t){return t.document||window.document}const rO=new WeakMap;function See(t){let e=rO.get(t);return e===void 0&&rO.set(t,e=Cee(t)),e}function Cee(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function xg(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=See(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=u;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:p}=xg(t,f,n,r);if(l.appendChild(d),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const TN=65535,AN=Math.pow(2,16);function Oee(t,e){return t+e*AN}function iO(t){return t&TN}function Mee(t){return(t-(t&TN))/AN}const _N=1,DN=2,kg=4,EN=8;class d3{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&EN)>0}get deletedBefore(){return(this.delInfo&(_N|kg))>0}get deletedAfter(){return(this.delInfo&(DN|kg))>0}get deletedAcross(){return(this.delInfo&kg)>0}}class as{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&as.empty)return as.empty}recover(e){let n=0,r=iO(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Mee(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:n:n,d=l+i+(f<0?0:u);if(r)return d;let p=e==(n<0?l:h)?null:Oee(a/3,e-l),m=e==l?DN:e==h?_N:kg;return(n<0?e!=l:e!=h)&&(m|=EN),new d3(d,m,p)}i+=u-c}return r?e+i:new d3(e+i,0,null)}touches(e,n){let r=0,i=iO(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new as(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?as.empty:new as(e<0?[0,-e,0]:[0,0,e])}}as.empty=new as([]);class zp{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new zp(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new zp;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new d3(e,i,null)}}const S4=Object.create(null);class Xr{getMap(){return as.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=S4[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in S4)throw new RangeError("Duplicate use of step JSON ID "+e);return S4[e]=n,n.prototype.jsonID=e,n}}class dr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new dr(e,null)}static fail(e){return new dr(null,e)}static fromReplace(e,n,r,i){try{return dr.ok(e.replace(n,r,i))}catch(s){if(s instanceof Gv)return dr.fail(s.message);throw s}}}function Gx(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Gx(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ae.fromArray(r)}class qa extends Xr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ke(Gx(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return dr.fromReplace(e,this.from,this.to,s)}invert(){return new Yo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new qa(n.pos,r.pos,this.mark)}merge(e){return e instanceof qa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new qa(n.from,n.to,e.markFromJSON(n.mark))}}Xr.jsonID("addMark",qa);class Yo extends Xr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Ke(Gx(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return dr.fromReplace(e,this.from,this.to,r)}invert(){return new qa(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yo(n.from,n.to,e.markFromJSON(n.mark))}}Xr.jsonID("removeMark",Yo);class ec extends Xr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return dr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return dr.fromReplace(e,this.pos,this.pos+1,new Ke(Ae.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ec(this.pos,n.marks[i]);return new ec(this.pos,this.mark)}}return new Uu(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ec(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ec(n.pos,e.markFromJSON(n.mark))}}Xr.jsonID("addNodeMark",ec);class Uu extends Xr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return dr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return dr.fromReplace(e,this.pos,this.pos+1,new Ke(Ae.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ec(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Uu(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Uu(n.pos,e.markFromJSON(n.mark))}}Xr.jsonID("removeNodeMark",Uu);class Cr extends Xr{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&p3(e,this.from,this.to)?dr.fail("Structure replace would overwrite content"):dr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new as([this.from,this.to-this.from,this.slice.size])}invert(e){return new Cr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Cr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Cr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Ke.empty:new Ke(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Cr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Ke.empty:new Ke(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Cr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Cr(n.from,n.to,Ke.fromJSON(e,n.slice),!!n.structure)}}Xr.jsonID("replace",Cr);class Gr extends Xr{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(p3(e,this.from,this.gapFrom)||p3(e,this.gapTo,this.to)))return dr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return dr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?dr.fromReplace(e,this.from,this.to,r):dr.fail("Content does not fit in gap")}getMap(){return new as([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Gr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Gr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Gr(n.from,n.to,n.gapFrom,n.gapTo,Ke.fromJSON(e,n.slice),n.insert,!!n.structure)}}Xr.jsonID("replaceAround",Gr);function p3(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Tee(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),d=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(h[m])?o.to=d:i.push(o=new Yo(f,d,h[m])));a&&a.to==f?a.to=d:s.push(a=new qa(f,d,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Aee(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof v2){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],f;for(let d=0;d<i.length;d++){let p=i[d];p.step==s-1&&h.eq(i[d].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Yo(o.from,o.to,o.style)))}function Kx(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,h=r.matchType(c.type);if(!h)o.push(new Cr(a,u,Ke.empty));else{r=h;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Yo(a,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(c.text);)p||(p=new Ke(Ae.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Cr(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(Ae.empty,!0);t.replace(a,a,new Ke(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function _ee(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function y2(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!_ee(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Dee(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Ae.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=Ae.from(r.node(p).copy(u)),h++):l--;let f=Ae.empty,d=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=Ae.from(i.node(p).copy(f)),d++):c++;t.step(new Gr(l,c,o,a,new Ke(u.append(f),h,d),u.size-h,!0))}function Xx(t,e,n=null,r=t){let i=Eee(t,e),s=i&&Iee(r,e);return s?i.map(sO).concat({type:e,attrs:n}).concat(s.map(sO)):null}function sO(t){return{type:t,attrs:null}}function Eee(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Iee(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function Pee(t,e,n){let r=Ae.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ae.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Gr(i,s,i,s,new Ke(r,0,0),n.length,!0))}function Nee(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&Ree(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!p?c=!1:!d&&p&&(c=!0)}c===!1&&PN(t,o,a,s),Kx(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),h=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new Gr(h,f,h+1,f-1,new Ke(Ae.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&IN(t,o,a,s),!1}})}function IN(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function PN(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Ree(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Lee(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Gr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Ke(Ae.from(o),0,0),1,!0))}function K0(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let d=h.content.cutByIndex(f,h.childCount),p=r&&r[u+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(f+1,h.childCount)||!m.type.validContent(d))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function $ee(t,e,n=1,r){let i=t.doc.resolve(e),s=Ae.empty,o=Ae.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Ae.from(i.node(a).copy(s));let u=r&&r[c];o=Ae.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Cr(e,e,new Ke(s.append(o),n,n),!0))}function b2(t,e){let n=t.resolve(e),r=n.index();return zee(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Bee(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function zee(t,e){return!!(t&&e&&!t.isLeaf&&Bee(t,e))}function Fee(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);u&&!h?r=!1:!u&&h&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);PN(t,u.node(),u.before(),a)}o.inlineContent&&Kx(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Cr(c,l.map(e+n,-1),Ke.empty,!0)),r===!0){let u=t.doc.resolve(c);IN(t,u.node(),u.before(),t.steps.length)}return t}function Hee(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Vee(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function w2(t,e,n=e,r=Ke.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return NN(i,s,r)?new Cr(e,n,r):new qee(i,s,r).fit()}function NN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class qee{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ae.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ae.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Ke(s,o,a);return e>-1?new Gr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Cr(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=C4(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Ae.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=C4(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ke(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=C4(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Ke(Jd(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Ke(Jd(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let d=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push(RN(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?d:-1)))}let p=c==a.childCount;p||(d=-1),this.placed=e0(this.placed,n,Ae.from(u)),this.frontier[n].match=h,p&&d<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<d;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=p?e==0?Ke.empty:new Ke(Jd(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new Ke(Jd(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!O4(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=O4(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=O4(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=e0(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=e0(this.placed,this.depth,Ae.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ae.empty,!0);n.childCount&&(this.placed=e0(this.placed,this.frontier.length,n))}}function Jd(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Jd(t.firstChild.content,e-1,n)))}function e0(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(e0(t.lastChild.content,e-1,n)))}function C4(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function RN(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,RN(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ae.empty,!0)))),t.copy(r)}function O4(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Wee(n,s.content,o)?a:null}function Wee(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jee(t){return t.spec.defining||t.spec.definingForContent}function Yee(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(NN(i,s,r))return t.step(new Cr(e,n,r));let o=$N(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,d=i.pos-1;f>0;f--,d--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==d&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,d=0;;d++){let p=f.firstChild;if(c.push(p),d==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let d=c[f],p=jee(d.type);if(p&&!d.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(p||!d.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let d=(f+u+1)%(r.openStart+1),p=c[d];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],v=!0;g<0&&(v=!1,g=-g);let b=i.node(g-1),S=i.index(g-1);if(b.canReplaceWith(S,S,p.type,p.marks))return t.replace(i.before(g),v?s.after(g):n,new Ke(LN(r.content,0,r.openStart,d),d,r.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>h));f--){let d=o[f];d<0||(e=i.before(d),n=s.after(d))}}function LN(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(LN(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ae.empty,!0))}return t}function Qee(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Hee(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Ke(Ae.from(r),0,0))}function Uee(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=$N(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function $N(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class af extends Xr{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return dr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return dr.fromReplace(e,this.pos,this.pos+1,new Ke(Ae.from(i),0,n.isLeaf?0:1))}getMap(){return as.empty}invert(e){return new af(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new af(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new af(n.pos,n.attr,n.value)}}Xr.jsonID("attr",af);class Fp extends Xr{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return dr.ok(r)}getMap(){return as.empty}invert(e){return new Fp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fp(n.attr,n.value)}}Xr.jsonID("docAttr",Fp);let Af=class extends Error{};Af=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Af.prototype=Object.create(Error.prototype);Af.prototype.constructor=Af;Af.prototype.name="TransformError";class BN{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new zp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Af(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{e=Math.min(e,a),n=Math.max(n,l)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Ke.empty){let i=w2(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Ke(Ae.from(r),0,0))}delete(e,n){return this.replace(e,n,Ke.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Yee(this,e,n,r),this}replaceRangeWith(e,n,r){return Qee(this,e,n,r),this}deleteRange(e,n){return Uee(this,e,n),this}lift(e,n){return Dee(this,e,n),this}join(e,n=1){return Fee(this,e,n),this}wrap(e,n){return Pee(this,e,n),this}setBlockType(e,n=e,r,i=null){return Nee(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Lee(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new af(e,n,r)),this}setDocAttribute(e,n){return this.step(new Fp(e,n)),this}addNodeMark(e,n){return this.step(new ec(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ft)n.isInSet(r.marks)&&this.step(new Uu(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Uu(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return $ee(this,e,n,r),this}addMark(e,n,r){return Tee(this,e,n,r),this}removeMark(e,n,r){return Aee(this,e,n,r),this}clearIncompatible(e,n,r){return Kx(this,e,n,r),this}}const M4=Object.create(null);class Dt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new zN(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Ke.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Ke.empty:n),a==0&&lO(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),lO(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ct(e):Dh(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Dh(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Dh(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new $i(e.node(0))}static atStart(e){return Dh(e,e,0,0,1)||new $i(e)}static atEnd(e){return Dh(e,e,e.content.size,e.childCount,-1)||new $i(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=M4[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in M4)throw new RangeError("Duplicate use of selection JSON ID "+e);return M4[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ct.between(this.$anchor,this.$head).getBookmark()}}Dt.prototype.visible=!0;class zN{constructor(e,n){this.$from=e,this.$to=n}}let oO=!1;function aO(t){!oO&&!t.parent.inlineContent&&(oO=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ct extends Dt{constructor(e,n=e){aO(e),aO(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Dt.near(r);let i=e.resolve(n.map(this.anchor));return new ct(i.parent.inlineContent?i:r,r)}replace(e,n=Ke.empty){if(super.replace(e,n),n==Ke.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ct&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new x2(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ct(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Dt.findFrom(n,r,!0)||Dt.findFrom(n,-r,!0);if(s)n=s.$head;else return Dt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Dt.findFrom(e,-r,!0)||Dt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ct(e,n)}}Dt.jsonID("text",ct);class x2{constructor(e,n){this.anchor=e,this.head=n}map(e){return new x2(e.map(this.anchor),e.map(this.head))}resolve(e){return ct.between(e.resolve(this.anchor),e.resolve(this.head))}}class yt extends Dt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Dt.near(s):new yt(s)}content(){return new Ke(Ae.from(this.node),0,0)}eq(e){return e instanceof yt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zx(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new yt(e.resolve(n.anchor))}static create(e,n){return new yt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}yt.prototype.visible=!1;Dt.jsonID("node",yt);class Zx{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new x2(r,r):new Zx(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&yt.isSelectable(r)?new yt(n):Dt.near(n)}}class $i extends Dt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Ke.empty){if(n==Ke.empty){e.delete(0,e.doc.content.size);let r=Dt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new $i(e)}map(e){return new $i(e)}eq(e){return e instanceof $i}getBookmark(){return Gee}}Dt.jsonID("all",$i);const Gee={map(){return this},resolve(t){return new $i(t)}};function Dh(t,e,n,r,i,s=!1){if(e.inlineContent)return ct.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&yt.isSelectable(a))return yt.create(t,n-(i<0?a.nodeSize:0))}else{let l=Dh(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function lO(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Cr||i instanceof Gr))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Dt.near(t.doc.resolve(o),n))}const cO=1,C1=2,uO=4;class Kee extends BN{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|cO)&~C1,this.storedMarks=null,this}get selectionSet(){return(this.updated&cO)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=C1,this}ensureMarks(e){return Ft.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&C1)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~C1,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ft.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Dt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=uO,this}get scrolledIntoView(){return(this.updated&uO)>0}}function hO(t,e){return!e||!t?t:t.bind(e)}class t0{constructor(e,n,r){this.name=e,this.init=hO(n.init,r),this.apply=hO(n.apply,r)}}const Xee=[new t0("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new t0("selection",{init(t,e){return t.selection||Dt.atStart(e.doc)},apply(t){return t.selection}}),new t0("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new t0("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class T4{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Xee.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new t0(r.key,r.spec.state,r))})}}class tc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new tc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Kee(this)}static create(e){let n=new T4(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new tc(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new T4(this.schema,e.plugins),r=n.fields,i=new tc(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new T4(e.schema,e.plugins),s=new tc(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ka.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Dt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function FN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=FN(i,e,{})),n[r]=i}return n}class Wn{constructor(e){this.spec=e,this.props={},e.props&&FN(e.props,this,this.props),this.key=e.key?e.key.key:HN("plugin")}getState(e){return e[this.key]}}const A4=Object.create(null);function HN(t){return t in A4?t+"$"+ ++A4[t]:(A4[t]=0,t+"$")}class jn{constructor(e="key"){this.key=HN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Vi{constructor(e,n,r={}){this.match=e,this.match=e,this.handler=typeof n=="string"?Zee(n):n,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function Zee(t){return function(e,n,r,i){let s=t;if(n[1]){let o=n[0].lastIndexOf(n[1]);s+=n[0].slice(o+n[1].length),r+=o;let a=r-i;a>0&&(s=n[0].slice(o-a,o)+s,r=i)}return e.tr.insertText(s,r,i)}}const Jee=(t,e)=>{let n=t.plugins;for(let r=0;r<n.length;r++){let i=n[r],s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){let o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l--)o.step(a.steps[l].invert(a.docs[l]));if(s.text){let l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to);e(o)}return!0}}return!1};new Vi(/--$/,"",{inCodeMark:!1});new Vi(/\.\.\.$/,"",{inCodeMark:!1});new Vi(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Vi(/"$/,"",{inCodeMark:!1});new Vi(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Vi(/'$/,"",{inCodeMark:!1});function Jx(t,e,n=null,r){return new Vi(t,(i,s,o,a)=>{let l=n instanceof Function?n(s):n,c=i.tr.delete(o,a),u=c.doc.resolve(o),h=u.blockRange(),f=h&&Xx(h,e,l);if(!f)return null;c.wrap(h,f);let d=c.doc.resolve(o-1).nodeBefore;return d&&d.type==e&&b2(c.doc,o-1)&&(!r||r(s,d))&&c.join(o-1),c})}function ek(t,e,n=null){return new Vi(t,(r,i,s,o)=>{let a=r.doc.resolve(s),l=n instanceof Function?n(i):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?r.tr.delete(s,o).setBlockType(s,s,e,l):null})}var qi=(t=>(t.docTypeError="docTypeError",t.contextNotFound="contextNotFound",t.timerNotFound="timerNotFound",t.ctxCallOutOfScope="ctxCallOutOfScope",t.createNodeInParserFail="createNodeInParserFail",t.stackOverFlow="stackOverFlow",t.parserMatchError="parserMatchError",t.serializerMatchError="serializerMatchError",t.getAtomFromSchemaFail="getAtomFromSchemaFail",t.expectDomTypeError="expectDomTypeError",t.callCommandBeforeEditorView="callCommandBeforeEditorView",t.missingRootElement="missingRootElement",t.missingNodeInSchema="missingNodeInSchema",t.missingMarkInSchema="missingMarkInSchema",t.ctxNotBind="ctxNotBind",t.missingYjsDoc="missingYjsDoc",t))(qi||{});class bs extends Error{constructor(e,n){super(n),this.name="MilkdownError",this.code=e}}const ete=(t,e)=>typeof e=="function"?"[Function]":e,k2=t=>JSON.stringify(t,ete);function tte(t){return new bs(qi.docTypeError,`Doc type error, unsupported type: ${k2(t)}`)}function nte(t){return new bs(qi.contextNotFound,`Context "${t}" not found, do you forget to inject it?`)}function rte(t){return new bs(qi.timerNotFound,`Timer "${t}" not found, do you forget to record it?`)}function S2(){return new bs(qi.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function ite(t,e,n){const i=`Cannot create node for ${"name"in t?t.name:t}`,s=u=>{if(u==null)return"null";if(Array.isArray(u))return`[${u.map(s).join(", ")}]`;if(typeof u=="object")return"toJSON"in u&&typeof u.toJSON=="function"?JSON.stringify(u.toJSON()):"spec"in u?JSON.stringify(u.spec):JSON.stringify(u);if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")return JSON.stringify(u);if(typeof u=="function")return`[Function: ${u.name||"anonymous"}]`;try{return String(u)}catch{return"[Unserializable]"}},o=["[Description]",i],a=["[Attributes]",e],l=["[Content]",(n??[]).map(u=>u?typeof u=="object"&&"type"in u?`${u}`:s(u):"null")],c=[o,a,l].reduce((u,[h,f])=>{const d=`${h}: ${s(f)}.`;return u.concat(d)},[]);return new bs(qi.createNodeInParserFail,c.join(`
`))}function VN(){return new bs(qi.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function ste(t){return new bs(qi.parserMatchError,`Cannot match target parser for node: ${k2(t)}.`)}function ote(t){return new bs(qi.serializerMatchError,`Cannot match target serializer for node: ${k2(t)}.`)}function ate(t,e){return new bs(qi.getAtomFromSchemaFail,`Cannot get ${t}: ${e} from schema.`)}function yo(t){return new bs(qi.expectDomTypeError,`Expect to be a dom, but get: ${k2(t)}.`)}function _4(){return new bs(qi.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function lte(t){return new bs(qi.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${t}" in schema.`)}function cte(t){return new bs(qi.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${t}" in schema.`)}const vc=typeof navigator<"u"?navigator:null,fO=typeof document<"u"?document:null,Mc=vc&&vc.userAgent||"",m3=/Edge\/(\d+)/.exec(Mc),qN=/MSIE \d/.exec(Mc),g3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mc),C2=!!(qN||g3||m3),ute=qN?document.documentMode:g3?+g3[1]:m3?+m3[1]:0,WN=!C2&&/gecko\/(\d+)/i.test(Mc),hte=WN&&+(/Firefox\/(\d+)/.exec(Mc)||[0,0])[1],v3=!C2&&/Chrome\/(\d+)/.exec(Mc),fte=!!v3,dte=v3?+v3[1]:0,jN=!C2&&!!vc&&/Apple Computer/.test(vc.vendor),YN=jN&&(/Mobile\/\w+/.test(Mc)||!!vc&&vc.maxTouchPoints>2),pte=YN||(vc?/Mac/.test(vc.platform):!1),mte=/Android \d/.test(Mc),QN=!!fO&&"webkitFontSmoothing"in fO.documentElement.style,gte=QN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var O1=Object.freeze({__proto__:null,android:mte,chrome:fte,chrome_version:dte,gecko:WN,gecko_version:hte,ie:C2,ie_version:ute,ios:YN,mac:pte,safari:jN,webkit:QN,webkit_version:gte});function D4(t,e,n,r,i,s){if(t.composing)return!1;const o=t.state,a=o.doc.resolve(e);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"")+r;for(let c of i){const u=c,h=u.match.exec(l),f=h&&h[0]&&u.handler(o,h,e-(h[0].length-r.length),n);if(f)return u.undoable!==!1&&f.setMeta(s,{transform:f,from:e,to:n,text:r}),t.dispatch(f),!0}return!1}const vte=new jn("MILKDOWN_CUSTOM_INPUTRULES");function yte({rules:t}){const e=new Wn({key:vte,isInputRules:!0,state:{init(){return null},apply(n,r){const i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,s){return D4(n,r,i,s,t,e)},handleDOMEvents:{compositionend:n=>(setTimeout(()=>{const{$cursor:r}=n.state.selection;r&&D4(n,r.pos,r.pos,"",t,e)}),!1)},handleKeyDown(n,r){if(r.key!=="Enter")return!1;const{$cursor:i}=n.state.selection;return i?D4(n,i.pos,i.pos,`
`,t,e):!1}}});return e}function km(t,e,n={}){return new Vi(t,(r,i,s,o)=>{var a,l,c,u;const{tr:h}=r,f=i.length;let d=i[f-1],p=i[0],m=[],g=o;const v={group:d,fullMatch:p,start:s,end:o},b=(a=n.updateCaptured)==null?void 0:a.call(n,v);if(Object.assign(v,b),{group:d,fullMatch:p,start:s,end:o}=v,p===null||d?.trim()==="")return null;if(d){const S=p.search(/\S/),O=s+p.indexOf(d),k=O+d.length;m=(l=h.storedMarks)!=null?l:[],k<o&&h.delete(k,o),O>s&&h.delete(s+S,O),g=s+S+d.length;const C=(c=n.getAttr)==null?void 0:c.call(n,i);h.addMark(s,g,e.create(C)),h.setStoredMarks(m),(u=n.beforeDispatch)==null||u.call(n,{match:i,start:s,end:o,tr:h})}return h})}function bte(t,e,n={}){return new Vi(t,(r,i,s,o)=>{var a,l,c;const{tr:u}=r;let h=i[1],f=i[0];const d={group:h,fullMatch:f,start:s,end:o},p=(a=n.updateCaptured)==null?void 0:a.call(n,d);if(Object.assign(d,p),{group:h,fullMatch:f,start:s,end:o}=d,f===null||!h||h.trim()==="")return null;const m=(l=n.getAttr)==null?void 0:l.call(n,i),g=e.createAndFill(m);return g&&(u.replaceRangeWith(e.isBlock?u.doc.resolve(s).before():s,o,g),(c=n.beforeDispatch)==null||c.call(n,{match:[f,h??""],start:s,end:o,tr:u})),u})}var wte=Object.defineProperty,xte=Object.defineProperties,kte=Object.getOwnPropertyDescriptors,dO=Object.getOwnPropertySymbols,Ste=Object.prototype.hasOwnProperty,Cte=Object.prototype.propertyIsEnumerable,pO=(t,e,n)=>e in t?wte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ote=(t,e)=>{for(var n in e||(e={}))Ste.call(e,n)&&pO(t,n,e[n]);if(dO)for(var n of dO(e))Cte.call(e,n)&&pO(t,n,e[n]);return t},Mte=(t,e)=>xte(t,kte(e));function mO(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function O2(t,e,n){const i=t.state.doc.content.size,s=mO(e,0,i),o=mO(n,0,i),a=t.coordsAtPos(s),l=t.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),h=Math.min(a.left,l.left),f=Math.max(a.right,l.right),d=f-h,p=u-c,v={top:c,bottom:u,left:h,right:f,width:d,height:p,x:h,y:c};return Mte(Ote({},v),{toJSON:()=>v})}function UN(t){return Object.assign(Object.create(t),t).setTime(Date.now())}function Tte(t,e){return Array.isArray(t)&&t.includes(e.type)||e.type===t}function Ate(t){if(t.content.childCount===1){const e=t.content.firstChild;if(e?.type.name==="text"&&e.marks.length===0)return e;if(e?.type.name==="paragraph"&&e.childCount===1){const n=e.firstChild;if(n?.type.name==="text"&&n.marks.length===0)return n}}return!1}function Jo(t){return e=>{for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r)){const i=e.before(n),s=e.after(n);return{from:i,to:s,node:r}}}}}function _te(t,e){return Jo(n=>n.type===e)(t)}function Dte(t,e){const n=e.nodes[t];if(!n)throw ate("node",t);return n}function GN(t){return e=>{for(let n=e.depth;n>0;n--){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}}function Ete(t){return e=>GN(t)(e.$from)}function Ite(t,e){if(!(t instanceof yt))return;const{node:n,$from:r}=t;if(Tte(e,n))return{node:n,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const KN=(t,e)=>{const{selection:n,doc:r}=t;if(n instanceof yt)return{hasNode:n.node.type===e,pos:n.from,target:n.node};const{from:i,to:s}=n;let o=!1,a=-1,l=null;return r.nodesBetween(i,s,(c,u)=>l?!1:c.type===e?(o=!0,a=u,l=c,!1):!0),{hasNode:o,pos:a,target:l}};class XN{constructor(){this.sliceMap=new Map,this.get=e=>{const n=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);if(!n){const r=typeof e=="string"?e:e.name;throw nte(r)}return n},this.remove=e=>{const n=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);n&&this.sliceMap.delete(n.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(n=>n.type.name===e):this.sliceMap.has(e.id)}}class Pte{constructor(e,n,r){this.#t=[],this.#r=()=>{this.#t.forEach(i=>i(this.#e))},this.set=i=>{this.#e=i,this.#r()},this.get=()=>this.#e,this.update=i=>{this.#e=i(this.#e),this.#r()},this.type=r,this.#e=n,e.set(r.id,this)}#t;#e;#r;on(e){return this.#t.push(e),()=>{this.#t=this.#t.filter(n=>n!==e)}}once(e){const n=this.on(r=>{e(r),n()});return n}off(e){this.#t=this.#t.filter(n=>n!==e)}offAll(){this.#t=[]}}class Nte{constructor(e,n){this.id=Symbol(`Context-${n}`),this.name=n,this._defaultValue=e,this._typeInfo=()=>{throw S2()}}create(e,n=this._defaultValue){return new Pte(e,n,this)}}const Yt=(t,e)=>new Nte(t,e);class Rte{constructor(e,n,r){this.#n=new Set,this.#a=new Set,this.#i=new Map,this.#s=new Map,this.read=()=>({metadata:this.#t,injectedSlices:[...this.#n].map(i=>({name:typeof i=="string"?i:i.name,value:this.#o(i)})),consumedSlices:[...this.#a].map(i=>({name:typeof i=="string"?i:i.name,value:this.#o(i)})),recordedTimers:[...this.#i].map(([i,{duration:s}])=>({name:i.name,duration:s,status:this.#l(i)})),waitTimers:[...this.#s].map(([i,{duration:s}])=>({name:i.name,duration:s,status:this.#l(i)}))}),this.onRecord=i=>{this.#i.set(i,{start:Date.now(),duration:0})},this.onClear=i=>{this.#i.delete(i)},this.onDone=i=>{const s=this.#i.get(i);s&&(s.duration=Date.now()-s.start)},this.onWait=(i,s)=>{const o=Date.now();s.finally(()=>{this.#s.set(i,{duration:Date.now()-o})}).catch(console.error)},this.onInject=i=>{this.#n.add(i)},this.onRemove=i=>{this.#n.delete(i)},this.onUse=i=>{this.#a.add(i)},this.#o=i=>this.#e.get(i).get(),this.#l=i=>this.#r.get(i).status,this.#e=e,this.#r=n,this.#t=r}#t;#e;#r;#n;#a;#i;#s;#o;#l}class tk{constructor(e,n,r){this.produce=i=>i&&Object.keys(i).length?new tk(this.#t,this.#e,{...i}):this,this.inject=(i,s)=>{const o=i.create(this.#t.sliceMap);return s!=null&&o.set(s),this.#n?.onInject(i),this},this.remove=i=>(this.#t.remove(i),this.#n?.onRemove(i),this),this.record=i=>(i.create(this.#e.store),this.#n?.onRecord(i),this),this.clearTimer=i=>(this.#e.remove(i),this.#n?.onClear(i),this),this.isInjected=i=>this.#t.has(i),this.isRecorded=i=>this.#e.has(i),this.use=i=>(this.#n?.onUse(i),this.#t.get(i)),this.get=i=>this.use(i).get(),this.set=(i,s)=>this.use(i).set(s),this.update=(i,s)=>this.use(i).update(s),this.timer=i=>this.#e.get(i),this.done=i=>{this.timer(i).done(),this.#n?.onDone(i)},this.wait=i=>{const s=this.timer(i).start();return this.#n?.onWait(i,s),s},this.waitTimers=async i=>{await Promise.all(this.get(i).map(s=>this.wait(s)))},this.#t=e,this.#e=n,this.#r=r,r&&(this.#n=new Rte(e,n,r))}#t;#e;#r;#n;get meta(){return this.#r}get inspector(){return this.#n}}class Lte{constructor(){this.store=new Map,this.get=e=>{const n=this.store.get(e.id);if(!n)throw rte(e.name);return n},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class $te{constructor(e,n){this.#t=null,this.#e=null,this.#n="pending",this.start=()=>(this.#t??=new Promise((r,i)=>{this.#e=s=>{s instanceof CustomEvent&&s.detail.id===this.#r&&(this.#n="resolved",this.#a(),s.stopImmediatePropagation(),r())},this.#i(()=>{this.#n==="pending"&&(this.#n="rejected"),this.#a(),i(new Error(`Timing ${this.type.name} timeout.`))}),this.#n="pending",addEventListener(this.type.name,this.#e)}),this.#t),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:this.#r}});dispatchEvent(r)},this.#a=()=>{this.#e&&removeEventListener(this.type.name,this.#e)},this.#i=r=>{setTimeout(()=>{r()},this.type.timeout)},this.#r=Symbol(n.name),this.type=n,e.set(n.id,this)}#t;#e;#r;#n;get status(){return this.#n}#a;#i}class Bte{constructor(e,n=3e3){this.create=r=>new $te(r,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=n}}const ua=(t,e=3e3)=>new Bte(t,e),zte={};function nk(t,e){const n=zte,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ZN(t,r,i)}function ZN(t,e,n){if(Fte(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return gO(t.children,e,n)}return Array.isArray(t)?gO(t,e,n):""}function gO(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=ZN(t[i],e,n);return r.join("")}function Fte(t){return!!(t&&typeof t=="object")}const vO=document.createElement("i");function rk(t){const e="&"+t+";";vO.innerHTML=e;const n=vO.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ds(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ms(t,e){return t.length>0?(ds(t,t.length,0,e),t):e}const yO={}.hasOwnProperty;function JN(t){const e={};let n=-1;for(;++n<t.length;)Hte(e,t[n]);return e}function Hte(t,e){let n;for(n in e){const i=(yO.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){yO.call(i,o)||(i[o]=[]);const a=s[o];Vte(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Vte(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ds(t,0,0,r)}function eR(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ao(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ui=Tc(/[A-Za-z]/),Ri=Tc(/[\dA-Za-z]/),qte=Tc(/[#-'*+\--9=?A-Z^-~]/);function Zv(t){return t!==null&&(t<32||t===127)}const y3=Tc(/\d/),Wte=Tc(/[\dA-Fa-f]/),jte=Tc(/[!-/:-@[-`{-~]/);function ft(t){return t!==null&&t<-2}function Dn(t){return t!==null&&(t<0||t===32)}function Gt(t){return t===-2||t===-1||t===32}const M2=Tc(new RegExp("\\p{P}|\\p{S}","u")),Gu=Tc(/\s/);function Tc(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function jt(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Gt(l)?(t.enter(n),a(l)):e(l)}function a(l){return Gt(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const Yte={tokenize:Qte};function Qte(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),jt(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ft(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const Ute={tokenize:Gte},bO={tokenize:Kte};function Gte(t){const e=this,n=[];let r=0,i,s,o;return a;function a(S){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,c)(S)}return c(S)}function l(S){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const O=e.events.length;let k=O,C;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){C=e.events[k][1].end;break}v(r);let T=O;for(;T<e.events.length;)e.events[T][1].end={...C},T++;return ds(e.events,k+1,0,e.events.slice(O)),e.events.length=T,c(S)}return a(S)}function c(S){if(r===n.length){if(!i)return f(S);if(i.currentConstruct&&i.currentConstruct.concrete)return p(S);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(bO,u,h)(S)}function u(S){return i&&b(),v(r),f(S)}function h(S){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(S)}function f(S){return e.containerState={},t.attempt(bO,d,p)(S)}function d(S){return r++,n.push([e.currentConstruct,e.containerState]),f(S)}function p(S){if(S===null){i&&b(),v(0),t.consume(S);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(S)}function m(S){if(S===null){g(t.exit("chunkFlow"),!0),v(0),t.consume(S);return}return ft(S)?(t.consume(S),g(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(S),m)}function g(S,O){const k=e.sliceStream(S);if(O&&k.push(null),S.previous=s,s&&(s.next=S),s=S,i.defineSkip(S.start),i.write(k),e.parser.lazy[S.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const T=e.events.length;let R=T,L,I;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(L){I=e.events[R][1].end;break}L=!0}for(v(r),C=T;C<e.events.length;)e.events[C][1].end={...I},C++;ds(e.events,R+1,0,e.events.slice(T)),e.events.length=C}}function v(S){let O=n.length;for(;O-- >S;){const k=n[O];e.containerState=k[1],k[0].exit.call(e,t)}n.length=S}function b(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Kte(t,e,n){return jt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _f(t){if(t===null||Dn(t)||Gu(t))return 1;if(M2(t))return 2}function T2(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const b3={name:"attention",resolveAll:Xte,tokenize:Zte};function Xte(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};wO(h,-l),wO(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ms(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ms(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ms(c,T2(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ms(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Ms(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,ds(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Zte(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=_f(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=_f(l),h=!u||u===2&&i||n.includes(l),f=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(u||!h)),e(l)}}function wO(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Jte={name:"autolink",tokenize:ene};function ene(t,e,n){let r=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return ui(d)?(t.consume(d),o):d===64?n(d):c(d)}function o(d){return d===43||d===45||d===46||Ri(d)?(r=1,a(d)):c(d)}function a(d){return d===58?(t.consume(d),r=0,l):(d===43||d===45||d===46||Ri(d))&&r++<32?(t.consume(d),a):(r=0,c(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||Zv(d)?n(d):(t.consume(d),l)}function c(d){return d===64?(t.consume(d),u):qte(d)?(t.consume(d),c):n(d)}function u(d){return Ri(d)?h(d):n(d)}function h(d){return d===46?(t.consume(d),r=0,u):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):f(d)}function f(d){if((d===45||Ri(d))&&r++<63){const p=d===45?f:h;return t.consume(d),p}return n(d)}}const Sm={partial:!0,tokenize:tne};function tne(t,e,n){return r;function r(s){return Gt(s)?jt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ft(s)?e(s):n(s)}}const tR={continuation:{tokenize:rne},exit:ine,name:"blockQuote",tokenize:nne};function nne(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Gt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function rne(t,e,n){const r=this;return i;function i(o){return Gt(o)?jt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(tR,e,n)(o)}}function ine(t){t.exit("blockQuote")}const nR={name:"characterEscape",tokenize:sne};function sne(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return jte(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const rR={name:"characterReference",tokenize:one};function one(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Ri,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Wte,u):(t.enter("characterReferenceValue"),s=7,o=y3,u(h))}function u(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===Ri&&!rk(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const xO={partial:!0,tokenize:lne},kO={concrete:!0,name:"codeFenced",tokenize:ane};function ane(t,e,n){const r=this,i={partial:!0,tokenize:k};let s=0,o=0,a;return l;function l(C){return c(C)}function c(C){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===a?(o++,t.consume(C),u):o<3?n(C):(t.exit("codeFencedFenceSequence"),Gt(C)?jt(t,h,"whitespace")(C):h(C))}function h(C){return C===null||ft(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(xO,m,O)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||ft(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):Gt(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),jt(t,d,"whitespace")(C)):C===96&&C===a?n(C):(t.consume(C),f)}function d(C){return C===null||ft(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||ft(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===a?n(C):(t.consume(C),p)}function m(C){return t.attempt(i,O,g)(C)}function g(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),v}function v(C){return s>0&&Gt(C)?jt(t,b,"linePrefix",s+1)(C):b(C)}function b(C){return C===null||ft(C)?t.check(xO,m,O)(C):(t.enter("codeFlowValue"),S(C))}function S(C){return C===null||ft(C)?(t.exit("codeFlowValue"),b(C)):(t.consume(C),S)}function O(C){return t.exit("codeFenced"),e(C)}function k(C,T,R){let L=0;return I;function I(W){return C.enter("lineEnding"),C.consume(W),C.exit("lineEnding"),F}function F(W){return C.enter("codeFencedFence"),Gt(W)?jt(C,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):E(W)}function E(W){return W===a?(C.enter("codeFencedFenceSequence"),ee(W)):R(W)}function ee(W){return W===a?(L++,C.consume(W),ee):L>=o?(C.exit("codeFencedFenceSequence"),Gt(W)?jt(C,G,"whitespace")(W):G(W)):R(W)}function G(W){return W===null||ft(W)?(C.exit("codeFencedFence"),T(W)):R(W)}}}function lne(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const E4={name:"codeIndented",tokenize:une},cne={partial:!0,tokenize:hne};function une(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),jt(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):ft(c)?t.attempt(cne,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||ft(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function hne(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ft(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):jt(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ft(o)?i(o):n(o)}}const fne={name:"codeText",previous:pne,resolve:dne,tokenize:mne};function dne(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function pne(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mne(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):ft(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||ft(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class gne{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Id(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Id(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Id(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Id(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Id(this.left,n.reverse())}}}function Id(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function iR(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new gne(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,vne(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return ds(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function vne(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,f=-1,d=n,p=0,m=0;const g=[m];for(;d;){for(;t.get(++i)[1]!==d;);s.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),f=g.length;f--;){const v=a.slice(g[f],g[f+1]),b=s.pop();l.push([b,b+v.length-1]),t.splice(b,2,v)}for(l.reverse(),f=-1;++f<l.length;)c[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return c}const yne={resolve:wne,tokenize:xne},bne={partial:!0,tokenize:kne};function wne(t){return iR(t),t}function xne(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):ft(a)?t.check(bne,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function kne(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),jt(t,s,"linePrefix")}function s(o){if(o===null||ft(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function sR(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),f):v===null||v===32||v===41||Zv(v)?n(v):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(v))}function f(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(v))}function d(v){return v===62?(t.exit("chunkString"),t.exit(a),f(v)):v===null||v===60||ft(v)?n(v):(t.consume(v),v===92?p:d)}function p(v){return v===60||v===62||v===92?(t.consume(v),d):d(v)}function m(v){return!u&&(v===null||v===41||Dn(v))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):u<c&&v===40?(t.consume(v),u++,m):v===41?(t.consume(v),u--,m):v===null||v===32||v===40||Zv(v)?n(v):(t.consume(v),v===92?g:m)}function g(v){return v===40||v===41||v===92?(t.consume(v),m):m(v)}}function oR(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),t.enter(s),u}function u(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):ft(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||ft(d)||a++>999?(t.exit("chunkString"),u(d)):(t.consume(d),l||(l=!Gt(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(t.consume(d),a++,h):h(d)}}function aR(t,e,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?n(f):ft(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),jt(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||ft(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function X0(t,e){let n;return r;function r(i){return ft(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Gt(i)?jt(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const Sne={name:"definition",tokenize:One},Cne={partial:!0,tokenize:Mne};function One(t,e,n){const r=this;let i;return s;function s(d){return t.enter("definition"),o(d)}function o(d){return oR.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=ao(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):n(d)}function l(d){return Dn(d)?X0(t,c)(d):c(d)}function c(d){return sR(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function u(d){return t.attempt(Cne,h,h)(d)}function h(d){return Gt(d)?jt(t,f,"whitespace")(d):f(d)}function f(d){return d===null||ft(d)?(t.exit("definition"),r.parser.defined.push(i),e(d)):n(d)}}function Mne(t,e,n){return r;function r(a){return Dn(a)?X0(t,i)(a):n(a)}function i(a){return aR(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Gt(a)?jt(t,o,"whitespace")(a):o(a)}function o(a){return a===null||ft(a)?e(a):n(a)}}const Tne={name:"hardBreakEscape",tokenize:Ane};function Ane(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ft(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const _ne={name:"headingAtx",resolve:Dne,tokenize:Ene};function Dne(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ds(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Ene(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Dn(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||ft(u)?(t.exit("atxHeading"),e(u)):Gt(u)?jt(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Dn(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const Ine=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],SO=["pre","script","style","textarea"],Pne={concrete:!0,name:"htmlFlow",resolveTo:Lne,tokenize:$ne},Nne={partial:!0,tokenize:zne},Rne={partial:!0,tokenize:Bne};function Lne(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function $ne(t,e,n){const r=this;let i,s,o,a,l;return c;function c(P){return u(P)}function u(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),h}function h(P){return P===33?(t.consume(P),f):P===47?(t.consume(P),s=!0,m):P===63?(t.consume(P),i=3,r.interrupt?e:A):ui(P)?(t.consume(P),o=String.fromCharCode(P),g):n(P)}function f(P){return P===45?(t.consume(P),i=2,d):P===91?(t.consume(P),i=5,a=0,p):ui(P)?(t.consume(P),i=4,r.interrupt?e:A):n(P)}function d(P){return P===45?(t.consume(P),r.interrupt?e:A):n(P)}function p(P){const Ue="CDATA[";return P===Ue.charCodeAt(a++)?(t.consume(P),a===Ue.length?r.interrupt?e:E:p):n(P)}function m(P){return ui(P)?(t.consume(P),o=String.fromCharCode(P),g):n(P)}function g(P){if(P===null||P===47||P===62||Dn(P)){const Ue=P===47,je=o.toLowerCase();return!Ue&&!s&&SO.includes(je)?(i=1,r.interrupt?e(P):E(P)):Ine.includes(o.toLowerCase())?(i=6,Ue?(t.consume(P),v):r.interrupt?e(P):E(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?b(P):S(P))}return P===45||Ri(P)?(t.consume(P),o+=String.fromCharCode(P),g):n(P)}function v(P){return P===62?(t.consume(P),r.interrupt?e:E):n(P)}function b(P){return Gt(P)?(t.consume(P),b):I(P)}function S(P){return P===47?(t.consume(P),I):P===58||P===95||ui(P)?(t.consume(P),O):Gt(P)?(t.consume(P),S):I(P)}function O(P){return P===45||P===46||P===58||P===95||Ri(P)?(t.consume(P),O):k(P)}function k(P){return P===61?(t.consume(P),C):Gt(P)?(t.consume(P),k):S(P)}function C(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,T):Gt(P)?(t.consume(P),C):R(P)}function T(P){return P===l?(t.consume(P),l=null,L):P===null||ft(P)?n(P):(t.consume(P),T)}function R(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||Dn(P)?k(P):(t.consume(P),R)}function L(P){return P===47||P===62||Gt(P)?S(P):n(P)}function I(P){return P===62?(t.consume(P),F):n(P)}function F(P){return P===null||ft(P)?E(P):Gt(P)?(t.consume(P),F):n(P)}function E(P){return P===45&&i===2?(t.consume(P),X):P===60&&i===1?(t.consume(P),te):P===62&&i===4?(t.consume(P),fe):P===63&&i===3?(t.consume(P),A):P===93&&i===5?(t.consume(P),ye):ft(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Nne,he,ee)(P)):P===null||ft(P)?(t.exit("htmlFlowData"),ee(P)):(t.consume(P),E)}function ee(P){return t.check(Rne,G,he)(P)}function G(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),W}function W(P){return P===null||ft(P)?ee(P):(t.enter("htmlFlowData"),E(P))}function X(P){return P===45?(t.consume(P),A):E(P)}function te(P){return P===47?(t.consume(P),o="",ne):E(P)}function ne(P){if(P===62){const Ue=o.toLowerCase();return SO.includes(Ue)?(t.consume(P),fe):E(P)}return ui(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),ne):E(P)}function ye(P){return P===93?(t.consume(P),A):E(P)}function A(P){return P===62?(t.consume(P),fe):P===45&&i===2?(t.consume(P),A):E(P)}function fe(P){return P===null||ft(P)?(t.exit("htmlFlowData"),he(P)):(t.consume(P),fe)}function he(P){return t.exit("htmlFlow"),e(P)}}function Bne(t,e,n){const r=this;return i;function i(o){return ft(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function zne(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Sm,e,n)}}const Fne={name:"htmlText",tokenize:Hne};function Hne(t,e,n){const r=this;let i,s,o;return a;function a(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),l}function l(A){return A===33?(t.consume(A),c):A===47?(t.consume(A),k):A===63?(t.consume(A),S):ui(A)?(t.consume(A),R):n(A)}function c(A){return A===45?(t.consume(A),u):A===91?(t.consume(A),s=0,p):ui(A)?(t.consume(A),b):n(A)}function u(A){return A===45?(t.consume(A),d):n(A)}function h(A){return A===null?n(A):A===45?(t.consume(A),f):ft(A)?(o=h,te(A)):(t.consume(A),h)}function f(A){return A===45?(t.consume(A),d):h(A)}function d(A){return A===62?X(A):A===45?f(A):h(A)}function p(A){const fe="CDATA[";return A===fe.charCodeAt(s++)?(t.consume(A),s===fe.length?m:p):n(A)}function m(A){return A===null?n(A):A===93?(t.consume(A),g):ft(A)?(o=m,te(A)):(t.consume(A),m)}function g(A){return A===93?(t.consume(A),v):m(A)}function v(A){return A===62?X(A):A===93?(t.consume(A),v):m(A)}function b(A){return A===null||A===62?X(A):ft(A)?(o=b,te(A)):(t.consume(A),b)}function S(A){return A===null?n(A):A===63?(t.consume(A),O):ft(A)?(o=S,te(A)):(t.consume(A),S)}function O(A){return A===62?X(A):S(A)}function k(A){return ui(A)?(t.consume(A),C):n(A)}function C(A){return A===45||Ri(A)?(t.consume(A),C):T(A)}function T(A){return ft(A)?(o=T,te(A)):Gt(A)?(t.consume(A),T):X(A)}function R(A){return A===45||Ri(A)?(t.consume(A),R):A===47||A===62||Dn(A)?L(A):n(A)}function L(A){return A===47?(t.consume(A),X):A===58||A===95||ui(A)?(t.consume(A),I):ft(A)?(o=L,te(A)):Gt(A)?(t.consume(A),L):X(A)}function I(A){return A===45||A===46||A===58||A===95||Ri(A)?(t.consume(A),I):F(A)}function F(A){return A===61?(t.consume(A),E):ft(A)?(o=F,te(A)):Gt(A)?(t.consume(A),F):L(A)}function E(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),i=A,ee):ft(A)?(o=E,te(A)):Gt(A)?(t.consume(A),E):(t.consume(A),G)}function ee(A){return A===i?(t.consume(A),i=void 0,W):A===null?n(A):ft(A)?(o=ee,te(A)):(t.consume(A),ee)}function G(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||Dn(A)?L(A):(t.consume(A),G)}function W(A){return A===47||A===62||Dn(A)?L(A):n(A)}function X(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function te(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),ne}function ne(A){return Gt(A)?jt(t,ye,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):ye(A)}function ye(A){return t.enter("htmlTextData"),o(A)}}const ik={name:"labelEnd",resolveAll:jne,resolveTo:Yne,tokenize:Qne},Vne={tokenize:Une},qne={tokenize:Gne},Wne={tokenize:Kne};function jne(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ds(t,0,t.length,n),t}function Yne(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ms(a,t.slice(s+1,s+r+3)),a=Ms(a,[["enter",u,e]]),a=Ms(a,T2(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Ms(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Ms(a,t.slice(o+1)),a=Ms(a,[["exit",l,e]]),ds(t,s,t.length,a),t}function Qne(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(ao(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(Vne,u,o?u:h)(f):f===91?t.attempt(qne,u,o?c:h)(f):o?u(f):h(f)}function c(f){return t.attempt(Wne,u,h)(f)}function u(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function Une(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Dn(h)?X0(t,s)(h):s(h)}function s(h){return h===41?u(h):sR(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Dn(h)?X0(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?aR(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return Dn(h)?X0(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function Gne(t,e,n){const r=this;return i;function i(a){return oR.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ao(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function Kne(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const Xne={name:"labelStartImage",resolveAll:ik.resolveAll,tokenize:Zne};function Zne(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Jne={name:"labelStartLink",resolveAll:ik.resolveAll,tokenize:ere};function ere(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const I4={name:"lineEnding",tokenize:tre};function tre(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),jt(t,e,"linePrefix")}}const Sg={name:"thematicBreak",tokenize:nre};function nre(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||ft(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Gt(c)?jt(t,a,"whitespace")(c):a(c))}}const Oi={continuation:{tokenize:ore},exit:lre,name:"list",tokenize:sre},rre={partial:!0,tokenize:cre},ire={partial:!0,tokenize:are};function sre(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const p=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:y3(d)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(Sg,n,c)(d):c(d);if(!r.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return n(d)}function l(d){return y3(d)&&++o<10?(t.consume(d),l):(!r.interrupt||o<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),c(d)):n(d)}function c(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,t.check(Sm,r.interrupt?n:u,t.attempt(rre,f,h))}function u(d){return r.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return Gt(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),f):n(d)}function f(d){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function ore(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Sm,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,jt(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Gt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(ire,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,jt(t,t.attempt(Oi,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function are(t,e,n){const r=this;return jt(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function lre(t){t.exit(this.containerState.type)}function cre(t,e,n){const r=this;return jt(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Gt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const CO={name:"setextUnderline",resolveTo:ure,tokenize:hre};function ure(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function hre(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Gt(c)?jt(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ft(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const fre={tokenize:dre};function dre(t){const e=this,n=t.attempt(Sm,r,t.attempt(this.parser.constructs.flowInitial,i,jt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(yne,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const pre={resolveAll:cR()},mre=lR("string"),gre=lR("text");function lR(t){return{resolveAll:cR(t==="text"?vre:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function cR(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function vre(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const yre={42:Oi,43:Oi,45:Oi,48:Oi,49:Oi,50:Oi,51:Oi,52:Oi,53:Oi,54:Oi,55:Oi,56:Oi,57:Oi,62:tR},bre={91:Sne},wre={[-2]:E4,[-1]:E4,32:E4},xre={35:_ne,42:Sg,45:[CO,Sg],60:Pne,61:CO,95:Sg,96:kO,126:kO},kre={38:rR,92:nR},Sre={[-5]:I4,[-4]:I4,[-3]:I4,33:Xne,38:rR,42:b3,60:[Jte,Fne],91:Jne,92:[Tne,nR],93:ik,95:b3,96:fne},Cre={null:[b3,pre]},Ore={null:[42,95]},Mre={null:[]},Tre=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ore,contentInitial:bre,disable:Mre,document:yre,flow:xre,flowInitial:wre,insideSpan:Cre,string:kre,text:Sre},Symbol.toStringTag,{value:"Module"}));function Are(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:T(k),check:T(C),consume:b,enter:S,exit:O,interrupt:T(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:t,previous:null,sliceSerialize:f,sliceStream:d,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(F){return o=Ms(o,F),g(),o[o.length-1]!==null?[]:(R(e,0),c.events=T2(s,c.events,c),c.events)}function f(F,E){return Dre(d(F),E)}function d(F){return _re(o,F)}function p(){const{_bufferIndex:F,_index:E,line:ee,column:G,offset:W}=r;return{_bufferIndex:F,_index:E,line:ee,column:G,offset:W}}function m(F){i[F.line]=F.column,I()}function g(){let F;for(;r._index<o.length;){const E=o[r._index];if(typeof E=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<E.length;)v(E.charCodeAt(r._bufferIndex));else v(E)}}function v(F){u=u(F)}function b(F){ft(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,I()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=F}function S(F,E){const ee=E||{};return ee.type=F,ee.start=p(),c.events.push(["enter",ee,c]),a.push(ee),ee}function O(F){const E=a.pop();return E.end=p(),c.events.push(["exit",E,c]),E}function k(F,E){R(F,E.from)}function C(F,E){E.restore()}function T(F,E){return ee;function ee(G,W,X){let te,ne,ye,A;return Array.isArray(G)?he(G):"tokenize"in G?he([G]):fe(G);function fe(st){return dt;function dt(bt){const Nt=bt!==null&&st[bt],Ot=bt!==null&&st.null,Kt=[...Array.isArray(Nt)?Nt:Nt?[Nt]:[],...Array.isArray(Ot)?Ot:Ot?[Ot]:[]];return he(Kt)(bt)}}function he(st){return te=st,ne=0,st.length===0?X:P(st[ne])}function P(st){return dt;function dt(bt){return A=L(),ye=st,st.partial||(c.currentConstruct=st),st.name&&c.parser.constructs.disable.null.includes(st.name)?je():st.tokenize.call(E?Object.assign(Object.create(c),E):c,l,Ue,je)(bt)}}function Ue(st){return F(ye,A),W}function je(st){return A.restore(),++ne<te.length?P(te[ne]):X}}}function R(F,E){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&ds(c.events,E,c.events.length-E,F.resolve(c.events.slice(E),c)),F.resolveTo&&(c.events=F.resolveTo(c.events,c))}function L(){const F=p(),E=c.previous,ee=c.currentConstruct,G=c.events.length,W=Array.from(a);return{from:G,restore:X};function X(){r=F,c.previous=E,c.currentConstruct=ee,c.events.length=G,a=W,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function _re(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Dre(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function Ere(t){const r={constructs:JN([Tre,...(t||{}).extensions||[]]),content:i(Yte),defined:[],document:i(Ute),flow:i(fre),lazy:{},string:i(mre),text:i(gre)};return r;function i(s){return o;function o(a){return Are(r,s,a)}}}function Ire(t){for(;!iR(t););return t}const OO=/[\0\t\n\r]/g;function Pre(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(OO.lastIndex=h,c=OO.exec(s),f=c&&c.index!==void 0?c.index:s.length,d=s.charCodeAt(f),!c){e=s.slice(h);break}if(d===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),d){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Nre=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uR(t){return t.replace(Nre,Rre)}function Rre(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return eR(n.slice(s?2:1),s?16:10)}return rk(n)||t}function Z0(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?MO(t.position):"start"in t||"end"in t?MO(t):"line"in t||"column"in t?w3(t):""}function w3(t){return TO(t&&t.line)+":"+TO(t&&t.column)}function MO(t){return w3(t&&t.start)+"-"+w3(t&&t.end)}function TO(t){return t&&typeof t=="number"?t:1}const hR={}.hasOwnProperty;function Lre(t,e,n){return typeof e!="string"&&(n=e,e=void 0),$re(n)(Ire(Ere(n).document().write(Pre()(t,e,!0))))}function $re(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Te),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(pe),blockQuote:s(Ot),characterEscape:L,characterReference:L,codeFenced:s(Kt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Kt,o),codeText:s($,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(V),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ie),hardBreakEscape:s(ge),hardBreakTrailing:s(ge),htmlFlow:s(ve,o),htmlFlowData:L,htmlText:s(ve,o),htmlTextData:L,image:s(De),label:o,link:s(Te),listItem:s(we),listItemValue:f,listOrdered:s(Me,h),listUnordered:s(Me),paragraph:s(tt),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(pe),strong:s(qe),thematicBreak:s(it)},exit:{atxHeading:l(),atxHeadingSequence:k,autolink:l(),autolinkEmail:Nt,autolinkProtocol:bt,blockQuote:l(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:je,characterReferenceMarkerNumeric:je,characterReferenceValue:st,characterReference:dt,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:l(v),codeText:l(W),codeTextData:I,data:I,definition:l(),definitionDestinationString:O,definitionLabelString:b,definitionTitleString:S,emphasis:l(),hardBreakEscape:l(E),hardBreakTrailing:l(E),htmlFlow:l(ee),htmlFlowData:I,htmlText:l(G),htmlTextData:I,image:l(te),label:ye,labelText:ne,lineEnding:F,link:l(X),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Ue,resourceDestinationString:A,resourceTitleString:fe,resource:he,setextHeading:l(R),setextHeadingLineSequence:T,setextHeadingText:C,strong:l(),thematicBreak:l()}};fR(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(J){let de={type:"root",children:[]};const Ve={stack:[de],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},lt=[];let gt=-1;for(;++gt<J.length;)if(J[gt][1].type==="listOrdered"||J[gt][1].type==="listUnordered")if(J[gt][0]==="enter")lt.push(gt);else{const Xt=lt.pop();gt=i(J,Xt,gt)}for(gt=-1;++gt<J.length;){const Xt=e[J[gt][0]];hR.call(Xt,J[gt][1].type)&&Xt[J[gt][1].type].call(Object.assign({sliceSerialize:J[gt][2].sliceSerialize},Ve),J[gt][1])}if(Ve.tokenStack.length>0){const Xt=Ve.tokenStack[Ve.tokenStack.length-1];(Xt[1]||AO).call(Ve,void 0,Xt[0])}for(de.position={start:Dl(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:Dl(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},gt=-1;++gt<e.transforms.length;)de=e.transforms[gt](de)||de;return de}function i(J,de,Ve){let lt=de-1,gt=-1,Xt=!1,sn,an,Yn,Ht;for(;++lt<=Ve;){const $t=J[lt];switch($t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{$t[0]==="enter"?gt++:gt--,Ht=void 0;break}case"lineEndingBlank":{$t[0]==="enter"&&(sn&&!Ht&&!gt&&!Yn&&(Yn=lt),Ht=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ht=void 0}if(!gt&&$t[0]==="enter"&&$t[1].type==="listItemPrefix"||gt===-1&&$t[0]==="exit"&&($t[1].type==="listUnordered"||$t[1].type==="listOrdered")){if(sn){let xe=lt;for(an=void 0;xe--;){const B=J[xe];if(B[1].type==="lineEnding"||B[1].type==="lineEndingBlank"){if(B[0]==="exit")continue;an&&(J[an][1].type="lineEndingBlank",Xt=!0),B[1].type="lineEnding",an=xe}else if(!(B[1].type==="linePrefix"||B[1].type==="blockQuotePrefix"||B[1].type==="blockQuotePrefixWhitespace"||B[1].type==="blockQuoteMarker"||B[1].type==="listItemIndent"))break}Yn&&(!an||Yn<an)&&(sn._spread=!0),sn.end=Object.assign({},an?J[an][1].start:$t[1].end),J.splice(an||lt,0,["exit",sn,$t[2]]),lt++,Ve++}if($t[1].type==="listItemPrefix"){const xe={type:"listItem",_spread:!1,start:Object.assign({},$t[1].start),end:void 0};sn=xe,J.splice(lt,0,["enter",xe,$t[2]]),lt++,Ve++,Yn=void 0,Ht=!0}}}return J[de][1]._spread=Xt,Ve}function s(J,de){return Ve;function Ve(lt){a.call(this,J(lt),lt),de&&de.call(this,lt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(J,de,Ve){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([de,Ve||void 0]),J.position={start:Dl(de.start),end:void 0}}function l(J){return de;function de(Ve){J&&J.call(this,Ve),c.call(this,Ve)}}function c(J,de){const Ve=this.stack.pop(),lt=this.tokenStack.pop();if(lt)lt[0].type!==J.type&&(de?de.call(this,J,lt[0]):(lt[1]||AO).call(this,J,lt[0]));else throw new Error("Cannot close `"+J.type+"` ("+Z0({start:J.start,end:J.end})+"): its not open");Ve.position.end=Dl(J.end)}function u(){return nk(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(J){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function d(){const J=this.resume(),de=this.stack[this.stack.length-1];de.lang=J}function p(){const J=this.resume(),de=this.stack[this.stack.length-1];de.meta=J}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const J=this.resume(),de=this.stack[this.stack.length-1];de.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const J=this.resume(),de=this.stack[this.stack.length-1];de.value=J.replace(/(\r?\n|\r)$/g,"")}function b(J){const de=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=de,Ve.identifier=ao(this.sliceSerialize(J)).toLowerCase()}function S(){const J=this.resume(),de=this.stack[this.stack.length-1];de.title=J}function O(){const J=this.resume(),de=this.stack[this.stack.length-1];de.url=J}function k(J){const de=this.stack[this.stack.length-1];if(!de.depth){const Ve=this.sliceSerialize(J).length;de.depth=Ve}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function T(J){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function L(J){const Ve=this.stack[this.stack.length-1].children;let lt=Ve[Ve.length-1];(!lt||lt.type!=="text")&&(lt=Xe(),lt.position={start:Dl(J.start),end:void 0},Ve.push(lt)),this.stack.push(lt)}function I(J){const de=this.stack.pop();de.value+=this.sliceSerialize(J),de.position.end=Dl(J.end)}function F(J){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=de.children[de.children.length-1];Ve.position.end=Dl(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(de.type)&&(L.call(this,J),I.call(this,J))}function E(){this.data.atHardBreak=!0}function ee(){const J=this.resume(),de=this.stack[this.stack.length-1];de.value=J}function G(){const J=this.resume(),de=this.stack[this.stack.length-1];de.value=J}function W(){const J=this.resume(),de=this.stack[this.stack.length-1];de.value=J}function X(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=de,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function te(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=de,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function ne(J){const de=this.sliceSerialize(J),Ve=this.stack[this.stack.length-2];Ve.label=uR(de),Ve.identifier=ao(de).toLowerCase()}function ye(){const J=this.stack[this.stack.length-1],de=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const lt=J.children;Ve.children=lt}else Ve.alt=de}function A(){const J=this.resume(),de=this.stack[this.stack.length-1];de.url=J}function fe(){const J=this.resume(),de=this.stack[this.stack.length-1];de.title=J}function he(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Ue(J){const de=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=de,Ve.identifier=ao(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function je(J){this.data.characterReferenceType=J.type}function st(J){const de=this.sliceSerialize(J),Ve=this.data.characterReferenceType;let lt;Ve?(lt=eR(de,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):lt=rk(de);const gt=this.stack[this.stack.length-1];gt.value+=lt}function dt(J){const de=this.stack.pop();de.position.end=Dl(J.end)}function bt(J){I.call(this,J);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(J)}function Nt(J){I.call(this,J);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(J)}function Ot(){return{type:"blockquote",children:[]}}function Kt(){return{type:"code",lang:null,meta:null,value:""}}function $(){return{type:"inlineCode",value:""}}function V(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ie(){return{type:"emphasis",children:[]}}function pe(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function ve(){return{type:"html",value:""}}function De(){return{type:"image",title:null,url:"",alt:null}}function Te(){return{type:"link",title:null,url:"",children:[]}}function Me(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function we(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function tt(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function Xe(){return{type:"text",value:""}}function it(){return{type:"thematicBreak"}}}function Dl(t){return{line:t.line,column:t.column,offset:t.offset}}function fR(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?fR(t,r):Bre(t,r)}}function Bre(t,e){let n;for(n in e)if(hR.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function AO(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Z0({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Z0({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Z0({start:e.start,end:e.end})+") is still open")}function x3(t){const e=this;e.parser=n;function n(r){return Lre(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const _O={}.hasOwnProperty;function zre(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&_O.call(i,t)){const l=String(i[t]);o=_O.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Fre={}.hasOwnProperty;function dR(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)dR(t,e.extensions[n]);for(r in e)if(Fre.call(e,r))switch(r){case"extensions":break;case"unsafe":{DO(t[r],e[r]);break}case"join":{DO(t[r],e[r]);break}case"handlers":{Hre(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function DO(t,e){e&&t.push(...e)}function Hre(t,e){e&&Object.assign(t,e)}function Vre(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),qre);return i(),o}function qre(t,e,n){return">"+(n?"":" ")+t}function pR(t,e){return EO(t,e.inConstruct,!0)&&!EO(t,e.notInConstruct,!1)}function EO(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function IO(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&pR(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function mR(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function k3(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Wre(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function jre(t,e,n,r){const i=Wre(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(k3(t,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,Yre);return h(),f}const a=n.createTracker(r),l=i.repeat(Math.max(mR(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function Yre(t,e,n){return(n?"":"    ")+t}function sk(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Qre(t,e,n,r){const i=sk(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function Ure(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function yc(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Jv(t,e,n){const r=_f(t),i=_f(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}gR.peek=Gre;function gR(t,e,n,r){const i=Ure(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=Jv(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=yc(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=Jv(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+yc(h));const d=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},a+l+d}function Gre(t,e,n){return n.options.emphasis||"*"}const A2=(function(t){if(t==null)return Jre;if(typeof t=="function")return _2(t);if(typeof t=="object")return Array.isArray(t)?Kre(t):Xre(t);if(typeof t=="string")return Zre(t);throw new Error("Expected function, string, or object as test")});function Kre(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=A2(t[n]);return _2(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Xre(t){const e=t;return _2(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Zre(t){return _2(e);function e(n){return n&&n.type===t}}function _2(t){return e;function e(n,r,i){return!!(eie(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Jre(){return!0}function eie(t){return t!==null&&typeof t=="object"&&"type"in t}const vR=[],tie=!0,S3=!1,C3="skip";function ok(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=A2(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=vR,p,m,g;if((!e||s(l,c,u[u.length-1]||void 0))&&(d=nie(n(l,u)),d[0]===S3))return d;if("children"in l&&l.children){const v=l;if(v.children&&d[0]!==C3)for(m=(r?v.children.length:-1)+o,g=u.concat(v);m>-1&&m<v.children.length;){const b=v.children[m];if(p=a(b,m,g)(),p[0]===S3)return p;m=typeof p[1]=="number"?p[1]:m+o}}return d}}}function nie(t){return Array.isArray(t)?t:typeof t=="number"?[tie,t]:t==null?vR:[t]}function Ac(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),ok(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}function yR(t,e){let n=!1;return Ac(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,S3}),!!((!t.depth||t.depth<3)&&nk(t)&&(e.options.setext||n))}function rie(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(yR(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=yc(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}bR.peek=iie;function bR(t){return t.value||""}function iie(){return"<"}wR.peek=sie;function wR(t,e,n,r){const i=sk(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function sie(){return"!"}xR.peek=oie;function xR(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function oie(){return"!"}kR.peek=aie;function kR(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function aie(){return"`"}function SR(t,e){const n=nk(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}CR.peek=lie;function CR(t,e,n,r){const i=sk(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(SR(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=u,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function lie(t,e,n){return SR(t,n)?"<":"["}OR.peek=cie;function OR(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function cie(){return"["}function ak(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function uie(t){const e=ak(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function hie(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function MR(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function fie(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?hie(n):ak(n);const a=t.ordered?o==="."?")":".":uie(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),MR(n)===o&&u){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function die(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function pie(t,e,n,r){const i=die(n);let s=n.bulletCurrent||ak(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(h,f,d){return f?(d?"":" ".repeat(o))+h:(d?s:s+" ".repeat(o-s.length))+h}}function mie(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const gie=A2(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function vie(t,e,n,r){return(t.children.some(function(o){return gie(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function yie(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}TR.peek=bie;function TR(t,e,n,r){const i=yie(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=Jv(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=yc(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=Jv(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+yc(h));const d=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},a+l+d}function bie(t,e,n){return n.options.strong||"*"}function wie(t,e,n,r){return n.safe(t.value,r)}function xie(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function kie(t,e,n){const r=(MR(n)+(n.options.ruleSpaces?" ":"")).repeat(xie(n));return n.options.ruleSpaces?r.slice(0,-1):r}const lk={blockquote:Vre,break:IO,code:jre,definition:Qre,emphasis:gR,hardBreak:IO,heading:rie,html:bR,image:wR,imageReference:xR,inlineCode:kR,link:CR,linkReference:OR,list:fie,listItem:pie,paragraph:mie,root:vie,strong:TR,text:wie,thematicBreak:kie},Sie=[Cie];function Cie(t,e,n,r){if(e.type==="code"&&k3(e,r)&&(t.type==="list"||t.type===e.type&&k3(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&yR(e,r))?void 0:n.spread?1:0}const Gc=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Oie=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Gc},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Gc},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Gc},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Gc},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Gc},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Gc},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Gc},{atBreak:!0,character:"~"}];function Mie(t){return t.label||!t.identifier?t.label||"":uR(t.identifier)}function Tie(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function Aie(t,e,n){const r=e.indexStack,i=t.children||[],s=[];let o=-1,a=n.before,l;r.push(-1);let c=e.createTracker(n);for(;++o<i.length;){const u=i[o];let h;if(r[r.length-1]=o,o+1<i.length){let p=e.handle.handlers[i[o+1].type];p&&p.peek&&(p=p.peek),h=p?p(i[o+1],t,e,{before:"",after:"",...c.current()}).charAt(0):""}else h=n.after;s.length>0&&(a==="\r"||a===`
`)&&u.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),a=" ",c=e.createTracker(n),c.move(s.join("")));let f=e.handle(u,t,e,{...c.current(),after:h,before:a});l&&l===f.slice(0,1)&&(f=yc(l.charCodeAt(0))+f.slice(1));const d=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,l=void 0,d&&(s.length>0&&d.before&&a===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+yc(a.charCodeAt(0))),d.after&&(l=h)),c.move(f),s.push(f),a=f.slice(-1)}return r.pop(),s.join("")}function _ie(t,e,n){const r=e.indexStack,i=t.children||[],s=e.createTracker(n),o=[];let a=-1;for(r.push(-1);++a<i.length;){const l=i[a];r[r.length-1]=a,o.push(s.move(e.handle(l,t,e,{before:`
`,after:`
`,...s.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),a<i.length-1&&o.push(s.move(Die(l,i[a+1],t,e)))}return r.pop(),o.join("")}function Die(t,e,n,r){let i=r.join.length;for(;i--;){const s=r.join[i](t,e,n,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const Eie=/\r?\n|\r/g;function Iie(t,e){const n=[];let r=0,i=0,s;for(;s=Eie.exec(t);)o(t.slice(r,s.index)),n.push(s[0]),r=s.index+s[0].length,i++;return o(t.slice(r)),n.join("");function o(a){n.push(e(a,i,!a))}}function Pie(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),i=[],s=[],o={};let a=-1;for(;++a<t.unsafe.length;){const u=t.unsafe[a];if(!pR(t.stack,u))continue;const h=t.compilePattern(u);let f;for(;f=h.exec(r);){const d="before"in u||!!u.atBreak,p="after"in u,m=f.index+(d?f[1].length:0);i.includes(m)?(o[m].before&&!d&&(o[m].before=!1),o[m].after&&!p&&(o[m].after=!1)):(i.push(m),o[m]={before:d,after:p})}}i.sort(Nie);let l=n.before?n.before.length:0;const c=r.length-(n.after?n.after.length:0);for(a=-1;++a<i.length;){const u=i[a];u<l||u>=c||u+1<c&&i[a+1]===u+1&&o[u].after&&!o[u+1].before&&!o[u+1].after||i[a-1]===u-1&&o[u].before&&!o[u-1].before&&!o[u-1].after||(l!==u&&s.push(PO(r.slice(l,u),"\\")),l=u,/[!-/:-@[-`{-~]/.test(r.charAt(u))&&(!n.encode||!n.encode.includes(r.charAt(u)))?s.push("\\"):(s.push(yc(r.charCodeAt(u))),l++))}return s.push(PO(r.slice(l,c),n.after)),s.join("")}function Nie(t,e){return t-e}function PO(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],s=t+e;let o=-1,a=0,l;for(;l=n.exec(s);)r.push(l.index);for(;++o<r.length;)a!==r[o]&&i.push(t.slice(a,r[o])),i.push("\\"),a=r[o];return i.push(t.slice(a)),i.join("")}function Rie(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,i=n.line||1,s=n.column||1;return{move:l,current:o,shift:a};function o(){return{now:{line:i,column:s},lineShift:r}}function a(c){r+=c}function l(c){const u=c||"",h=u.split(/\r?\n|\r/g),f=h[h.length-1];return i+=h.length-1,s=h.length===1?s+f.length:1+f.length+r,u}}function Lie(t,e){const n=e||{},r={associationId:Mie,containerPhrasing:Fie,containerFlow:Hie,createTracker:Rie,compilePattern:Tie,enter:s,handlers:{...lk},handle:void 0,indentLines:Iie,indexStack:[],join:[...Sie],options:{},safe:Vie,stack:[],unsafe:[...Oie]};dR(r,n),r.options.tightDefinitions&&r.join.push(zie),r.handle=zre("type",{invalid:$ie,unknown:Bie,handlers:r.handlers});let i=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(o){return r.stack.push(o),a;function a(){r.stack.pop()}}}function $ie(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function Bie(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function zie(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function Fie(t,e){return Aie(t,this,e)}function Hie(t,e){return _ie(t,this,e)}function Vie(t,e){return Pie(this,t,e)}function O3(t){const e=this;e.compiler=n;function n(r){return Lie(r,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}}function NO(t){if(t)throw t}var P4,RO;function qie(){if(RO)return P4;RO=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),h=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!h)return!1;var f;for(f in c);return typeof f>"u"||t.call(c,f)},o=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return P4=function l(){var c,u,h,f,d,p,m=arguments[0],g=1,v=arguments.length,b=!1;for(typeof m=="boolean"&&(b=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<v;++g)if(c=arguments[g],c!=null)for(u in c)h=a(m,u),f=a(c,u),m!==f&&(b&&f&&(s(f)||(d=i(f)))?(d?(d=!1,p=h&&i(h)?h:[]):p=h&&s(h)?h:{},o(m,{name:u,newValue:l(b,p,f)})):typeof f<"u"&&o(m,{name:u,newValue:f}));return m},P4}var Wie=qie();const N4=ux(Wie);function M3(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function jie(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?Yie(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Yie(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}class Wi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Z0(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Wi.prototype.file="";Wi.prototype.name="";Wi.prototype.reason="";Wi.prototype.message="";Wi.prototype.stack="";Wi.prototype.column=void 0;Wi.prototype.line=void 0;Wi.prototype.ancestors=void 0;Wi.prototype.cause=void 0;Wi.prototype.fatal=void 0;Wi.prototype.place=void 0;Wi.prototype.ruleId=void 0;Wi.prototype.source=void 0;const Lo={basename:Qie,dirname:Uie,extname:Gie,join:Kie,sep:"/"};function Qie(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Cm(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function Uie(t){if(Cm(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Gie(t){Cm(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Kie(...t){let e=-1,n;for(;++e<t.length;)Cm(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Xie(n)}function Xie(t){Cm(t);const e=t.codePointAt(0)===47;let n=Zie(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Zie(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Cm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Jie={cwd:ese};function ese(){return"/"}function T3(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function tse(t){if(typeof t=="string")t=new URL(t);else if(!T3(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return nse(t)}function nse(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const R4=["history","path","basename","stem","extname","dirname"];class rse{constructor(e){let n;e?T3(e)?n={path:e}:typeof e=="string"||ise(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Jie.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<R4.length;){const s=R4[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)R4.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Lo.basename(this.path):void 0}set basename(e){$4(e,"basename"),L4(e,"basename"),this.path=Lo.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Lo.dirname(this.path):void 0}set dirname(e){LO(this.basename,"dirname"),this.path=Lo.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Lo.extname(this.path):void 0}set extname(e){if(L4(e,"extname"),LO(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lo.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){T3(e)&&(e=tse(e)),$4(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Lo.basename(this.path,this.extname):void 0}set stem(e){$4(e,"stem"),L4(e,"stem"),this.path=Lo.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Wi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function L4(t,e){if(t&&t.includes(Lo.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Lo.sep+"`")}function $4(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function LO(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ise(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sse=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),ose={}.hasOwnProperty;class ck extends sse{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=jie()}copy(){const e=new ck;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(N4(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(F4("data",this.frozen),this.namespace[e]=n,this):ose.call(this.namespace,e)&&this.namespace[e]||void 0:e?(F4("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=M1(e),r=this.parser||this.Parser;return B4("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),B4("process",this.parser||this.Parser),z4("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=M1(e),l=r.parse(a);r.run(l,a,function(u,h,f){if(u||!h||!f)return c(u);const d=h,p=r.stringify(d,f);lse(p)?f.value=p:f.result=p,c(u,f)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),B4("processSync",this.parser||this.Parser),z4("processSync",this.compiler||this.Compiler),this.process(e,i),BO("processSync","process",n),r;function i(s,o){n=!0,NO(s),r=o}}run(e,n,r){$O(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=M1(n);i.run(e,l,c);function c(u,h,f){const d=h||e;u?a(u):o?o(d):r(void 0,d,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),BO("runSync","run",r),i;function s(o,a){NO(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=M1(n),i=this.compiler||this.Compiler;return z4("stringify",i),$O(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(F4("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=N4(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[d,...p]=u;const m=r[f][1];M3(m)&&M3(d)&&(d=N4(!0,m,d)),r[f]=[c,d,...p]}}}}const A3=new ck().freeze();function B4(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function z4(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function F4(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $O(t){if(!M3(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function BO(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function M1(t){return ase(t)?t:new rse(t)}function ase(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function lse(t){return typeof t=="string"||cse(t)}function cse(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}var AR=t=>{throw TypeError(t)},_R=(t,e,n)=>e.has(t)||AR("Cannot "+n),Wt=(t,e,n)=>(_R(t,e,"read from private field"),n?n.call(t):e.get(t)),hr=(t,e,n)=>e.has(t)?AR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Hn=(t,e,n,r)=>(_R(t,e,"write to private field"),e.set(t,n),n),Io,n0,Cg,Og,Mg,r0,i0,Aa,s0,Tg,Ag,o0,_g,a0,Dg,Eg,Eh,iu,Ig,l0;class DR{}let ER=class{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{this.top()?.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw VN();return e}}};class uk extends DR{constructor(e,n,r){super(),this.type=e,this.content=n,this.attrs=r}push(e,...n){this.content.push(e,...n)}pop(){return this.content.pop()}static create(e,n,r){return new uk(e,n,r)}}const _3=class extends ER{constructor(e){super(),hr(this,Io),hr(this,n0),hr(this,Cg),hr(this,Og),hr(this,Mg),hr(this,r0),hr(this,i0),Hn(this,Io,Ft.none),Hn(this,n0,n=>n.isText),Hn(this,Cg,(n,r)=>{if(Wt(this,n0).call(this,n)&&Wt(this,n0).call(this,r)&&Ft.sameSet(n.marks,r.marks))return this.schema.text(n.text+r.text,n.marks)}),Hn(this,Og,n=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(n));if(!r)throw ste(n);return r}),Hn(this,Mg,n=>{const r=Wt(this,Og).call(this,n);r.spec.parseMarkdown.runner(this,n,r)}),this.injectRoot=(n,r,i)=>(this.openNode(r,i),this.next(n.children),this),this.openNode=(n,r)=>(this.open(uk.create(n,[],r)),this),Hn(this,r0,()=>{Hn(this,Io,Ft.none);const n=this.close();return Wt(this,i0).call(this,n.type,n.attrs,n.content)}),this.closeNode=()=>{try{Wt(this,r0).call(this)}catch(n){console.error(n)}return this},Hn(this,i0,(n,r,i)=>{const s=n.createAndFill(r,i,Wt(this,Io));if(!s)throw ite(n,r,i);return this.push(s),s}),this.addNode=(n,r,i)=>{try{Wt(this,i0).call(this,n,r,i)}catch(s){console.error(s)}return this},this.openMark=(n,r)=>{const i=n.create(r);return Hn(this,Io,i.addToSet(Wt(this,Io))),this},this.closeMark=n=>(Hn(this,Io,n.removeFromSet(Wt(this,Io))),this),this.addText=n=>{try{const r=this.top();if(!r)throw VN();const i=r.pop(),s=this.schema.text(n,Wt(this,Io));if(!i)return r.push(s),this;const o=Wt(this,Cg).call(this,i,s);return o?(r.push(o),this):(r.push(i,s),this)}catch(r){return console.error(r),this}},this.build=()=>{let n;do n=Wt(this,r0).call(this);while(this.size());return n},this.next=(n=[])=>([n].flat().forEach(r=>Wt(this,Mg).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(n,r)=>{const i=n.runSync(n.parse(r),r);return this.next(i),this},this.schema=e}};Io=new WeakMap;n0=new WeakMap;Cg=new WeakMap;Og=new WeakMap;Mg=new WeakMap;r0=new WeakMap;i0=new WeakMap;_3.create=(t,e)=>{const n=new _3(t);return r=>(n.run(e,r),n.toDoc())};let use=_3;const D3=class extends DR{constructor(e,n,r,i={}){super(),this.type=e,this.children=n,this.value=r,this.props=i,this.push=(s,...o)=>{this.children||(this.children=[]),this.children.push(s,...o)},this.pop=()=>this.children?.pop()}};D3.create=(t,e,n,r={})=>new D3(t,e,n,r);let zO=D3;const hse=t=>Object.prototype.hasOwnProperty.call(t,"size"),E3=class extends ER{constructor(e){super(),hr(this,Aa),hr(this,s0),hr(this,Tg),hr(this,Ag),hr(this,o0),hr(this,_g),hr(this,a0),hr(this,Dg),hr(this,Eg),hr(this,Eh),hr(this,iu),hr(this,Ig),hr(this,l0),Hn(this,Aa,Ft.none),Hn(this,s0,n=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(n));if(!r)throw ote(n.type);return r}),Hn(this,Tg,n=>Wt(this,s0).call(this,n).spec.toMarkdown.runner(this,n)),Hn(this,Ag,(n,r)=>Wt(this,s0).call(this,n).spec.toMarkdown.runner(this,n,r)),Hn(this,o0,n=>{const{marks:r}=n,i=a=>a.type.spec.priority??50;[...r].sort((a,l)=>i(a)-i(l)).every(a=>!Wt(this,Ag).call(this,a,n))&&Wt(this,Tg).call(this,n),r.forEach(a=>Wt(this,l0).call(this,a))}),Hn(this,_g,(n,r)=>{if(n.type===r||n.children?.length!==1)return n;const i=l=>{if(l.type===r)return l;if(l.children?.length!==1)return null;const[c]=l.children;return c?i(c):null},s=i(n);if(!s)return n;const o=s.children?[...s.children]:void 0,a={...n,children:o};return a.children=o,s.children=[a],s}),Hn(this,a0,n=>{const{children:r}=n;return r&&(n.children=r.reduce((i,s,o)=>{if(o===0)return[s];const a=i.at(-1);if(a&&a.isMark&&s.isMark){s=Wt(this,_g).call(this,s,a.type);const{children:l,...c}=s,{children:u,...h}=a;if(s.type===a.type&&l&&u&&JSON.stringify(c)===JSON.stringify(h)){const f={...h,children:[...u,...l]};return i.slice(0,-1).concat(Wt(this,a0).call(this,f))}}return i.concat(s)},[])),n}),Hn(this,Dg,n=>{const r={...n.props,type:n.type};return n.children&&(r.children=n.children),n.value&&(r.value=n.value),r}),this.openNode=(n,r,i)=>(this.open(zO.create(n,void 0,r,i)),this),Hn(this,Eg,(n,r)=>{let i="",s="";const o=n.children;let a=-1,l=-1;const c=h=>{h&&h.forEach((f,d)=>{f.type==="text"&&f.value&&(a<0&&(a=d),l=d)})};if(o){c(o);const h=o?.[l],f=o?.[a];if(h&&h.value.endsWith(" ")){const d=h.value,p=d.trimEnd();s=d.slice(p.length),h.value=p}if(f&&f.value.startsWith(" ")){const d=f.value,p=d.trimStart();i=d.slice(0,d.length-p.length),f.value=p}}i.length&&Wt(this,iu).call(this,"text",void 0,i);const u=r();return s.length&&Wt(this,iu).call(this,"text",void 0,s),u}),Hn(this,Eh,(n=!1)=>{const r=this.close(),i=()=>Wt(this,iu).call(this,r.type,r.children,r.value,r.props);return n?Wt(this,Eg).call(this,r,i):i()}),this.closeNode=()=>(Wt(this,Eh).call(this),this),Hn(this,iu,(n,r,i,s)=>{const o=zO.create(n,r,i,s),a=Wt(this,a0).call(this,Wt(this,Dg).call(this,o));return this.push(a),a}),this.addNode=(n,r,i,s)=>(Wt(this,iu).call(this,n,r,i,s),this),Hn(this,Ig,(n,r,i,s)=>n.isInSet(Wt(this,Aa))?this:(Hn(this,Aa,n.addToSet(Wt(this,Aa))),this.openNode(r,i,{...s,isMark:!0}))),Hn(this,l0,n=>{n.isInSet(Wt(this,Aa))&&(Hn(this,Aa,n.type.removeFromSet(Wt(this,Aa))),Wt(this,Eh).call(this,!0))}),this.withMark=(n,r,i,s)=>(Wt(this,Ig).call(this,n,r,i,s),this),this.closeMark=n=>(Wt(this,l0).call(this,n),this),this.build=()=>{let n=null;do n=Wt(this,Eh).call(this);while(this.size());return n},this.next=n=>hse(n)?(n.forEach(r=>{Wt(this,o0).call(this,r)}),this):(Wt(this,o0).call(this,n),this),this.toString=n=>n.stringify(this.build()),this.run=n=>(this.next(n),this),this.schema=e}};Aa=new WeakMap;s0=new WeakMap;Tg=new WeakMap;Ag=new WeakMap;o0=new WeakMap;_g=new WeakMap;a0=new WeakMap;Dg=new WeakMap;Eg=new WeakMap;Eh=new WeakMap;iu=new WeakMap;Ig=new WeakMap;l0=new WeakMap;E3.create=(t,e)=>{const n=new E3(t);return r=>(n.run(r),n.toString(e))};let fse=E3;const hk=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function IR(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const PR=(t,e,n)=>{let r=IR(t,n);if(!r)return!1;let i=fk(r);if(!i){let o=r.blockRange(),a=o&&y2(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if($R(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Df(s,"end")||yt.isSelectable(s)))for(let o=r.depth;;o--){let a=w2(t.doc,r.before(o),r.after(o),Ke.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Df(s,"end")?Dt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):yt.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},dse=(t,e,n)=>{let r=IR(t,n);if(!r)return!1;let i=fk(r);return i?pse(t,i,e):!1};function pse(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=w2(t.doc,s,l,Ke.empty);if(!c||c.from!=s||c instanceof Cr&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(ct.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Df(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const NR=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=fk(r)}let o=s&&s.nodeBefore;return!o||!yt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(yt.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function fk(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function mse(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const gse=(t,e,n)=>{let r=mse(t,n);if(!r)return!1;let i=RR(r);if(!i)return!1;let s=i.nodeAfter;if($R(t,i,e,1))return!0;if(r.parent.content.size==0&&(Df(s,"start")||yt.isSelectable(s))){let o=w2(t.doc,r.before(),r.after(),Ke.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Df(s,"start")?Dt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):yt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},vse=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=RR(r)}let o=s&&s.nodeAfter;return!o||!yt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(yt.create(t.doc,s.pos)).scrollIntoView()),!0)};function RR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const yse=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function dk(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const LR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=dk(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Dt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},bse=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof $i||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=dk(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(ct.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},wse=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(K0(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&y2(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function xse(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof yt&&e.selection.node.isBlock)return!r.parentOffset||!K0(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let d=r.depth;;d--)if(r.node(d).isBlock){l=r.end(d)==r.pos+(r.depth-d),c=r.start(d)==r.pos-(r.depth-d),a=dk(r.node(d-1).contentMatchAt(r.indexAfter(d-1))),s.unshift(l&&a?{type:a}:null),o=d;break}else{if(d==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof ct||e.selection instanceof $i)&&u.deleteSelection();let h=u.mapping.map(r.pos),f=K0(u.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=K0(u.doc,h,s.length,s)),!f)return!1;if(u.split(h,s.length,s),!l&&c&&r.node(o).type!=a){let d=u.mapping.map(r.before(o)),p=u.doc.resolve(d);a&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const kse=xse(),Sse=(t,e)=>(e&&e(t.tr.setSelection(new $i(t.doc))),!0);function Cse(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||b2(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function $R(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Cse(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let d=e.pos+s.nodeSize,p=Ae.empty;for(let v=o.length-1;v>=0;v--)p=Ae.from(o[v].create(null,p));p=Ae.from(i.copy(p));let m=t.tr.step(new Gr(e.pos-1,d,e.pos,d,new Ke(p,1,0),o.length,!0)),g=m.doc.resolve(d+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&b2(m.doc,g.pos)&&m.join(g.pos),n(m.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Dt.findFrom(e,1),h=u&&u.$from.blockRange(u.$to),f=h&&y2(h);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Df(s,"start",!0)&&Df(i,"end")){let d=i,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(n){let v=Ae.empty;for(let S=p.length-1;S>=0;S--)v=Ae.from(p[S].copy(v));let b=t.tr.step(new Gr(e.pos-p.length,e.pos+s.nodeSize,e.pos+g,e.pos+s.nodeSize-g,new Ke(v,p.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function BR(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(ct.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Ose=BR(-1),Mse=BR(1);function pk(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&Xx(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Hp(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function Tse(t,e,n,r){for(let i=0;i<e.length;i++){let{$from:s,$to:o}=e[i],a=s.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(s.pos,o.pos,(l,c)=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(n)}),a)return!0}return!1}function D2(t,e=null,n){return function(r,i){let{empty:s,$cursor:o,ranges:a}=r.selection;if(s&&!o||!Tse(r.doc,a,t))return!1;if(i)if(o)t.isInSet(r.storedMarks||o.marks())?i(r.tr.removeStoredMark(t)):i(r.tr.addStoredMark(t.create(e)));else{let l,c=r.tr;l=!a.some(u=>r.doc.rangeHasMark(u.$from.pos,u.$to.pos,t));for(let u=0;u<a.length;u++){let{$from:h,$to:f}=a[u];if(!l)c.removeMark(h.pos,f.pos,t);else{let d=h.pos,p=f.pos,m=h.nodeAfter,g=f.nodeBefore,v=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,b=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;d+v<p&&(d+=v,p-=b),c.addMark(d,p,t.create(e))}}i(c.scrollIntoView())}return!0}}function ed(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let H4=ed(hk,PR,NR),FO=ed(hk,gse,vse);const Ra={Enter:ed(yse,bse,wse,kse),"Mod-Enter":LR,Backspace:H4,"Mod-Backspace":H4,"Shift-Backspace":H4,Delete:FO,"Mod-Delete":FO,"Mod-a":Sse},zR={"Ctrl-h":Ra.Backspace,"Alt-Backspace":Ra["Mod-Backspace"],"Ctrl-d":Ra.Delete,"Ctrl-Alt-Backspace":Ra["Mod-Delete"],"Alt-Delete":Ra["Mod-Delete"],"Alt-d":Ra["Mod-Delete"],"Ctrl-a":Ose,"Ctrl-e":Mse};for(let t in Ra)zR[t]=Ra[t];const Ase=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,_se=Ase?zR:Ra,Dse=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Ese=typeof navigator<"u"&&/Win/.test(navigator.platform);function Ise(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Dse?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Pse(t){let e=Object.create(null);for(let n in t)e[Ise(n)]=t[n];return e}function V4(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function FR(t){return new Wn({props:{handleKeyDown:mk(t)}})}function mk(t){let e=Pse(t);return function(n,r){let i=_I(r),s,o=e[V4(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[V4(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Ese&&r.ctrlKey&&r.altKey)&&(s=sl[r.keyCode])&&s!=i){let a=e[V4(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Lr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ef=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let I3=null;const Pa=function(t,e,n){let r=I3||(I3=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Nse=function(){I3=null},Ku=function(t,e,n,r){return n&&(HO(t,e,n,r,-1)||HO(t,e,n,r,1))},Rse=/^(img|br|input|textarea|hr)$/i;function HO(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ts(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Om(t)||Rse.test(t.nodeName)||t.contentEditable=="false")return!1;e=Lr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ts(t):0}else return!1}}function Ts(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Lse(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ts(t)}else if(t.parentNode&&!Om(t))e=Lr(t),t=t.parentNode;else return null}}function $se(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Om(t))e=Lr(t)+1,t=t.parentNode;else return null}}function Bse(t,e,n){for(let r=e==0,i=e==Ts(t);r||i;){if(t==n)return!0;let s=Lr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Ts(t)}}function Om(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const E2=function(t){return t.focusNode&&Ku(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function fu(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function zse(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Fse(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ts(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ts(r.startContainer),r.startOffset)}}}const na=typeof navigator<"u"?navigator:null,VO=typeof document<"u"?document:null,_c=na&&na.userAgent||"",P3=/Edge\/(\d+)/.exec(_c),HR=/MSIE \d/.exec(_c),N3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_c),Bi=!!(HR||N3||P3),oc=HR?document.documentMode:N3?+N3[1]:P3?+P3[1]:0,Ls=!Bi&&/gecko\/(\d+)/i.test(_c);Ls&&+(/Firefox\/(\d+)/.exec(_c)||[0,0])[1];const R3=!Bi&&/Chrome\/(\d+)/.exec(_c),Mr=!!R3,VR=R3?+R3[1]:0,Fr=!Bi&&!!na&&/Apple Computer/.test(na.vendor),If=Fr&&(/Mobile\/\w+/.test(_c)||!!na&&na.maxTouchPoints>2),Cs=If||(na?/Mac/.test(na.platform):!1),qR=na?/Win/.test(na.platform):!1,Wa=/Android \d/.test(_c),Mm=!!VO&&"webkitFontSmoothing"in VO.documentElement.style,Hse=Mm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Vse(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Sa(t,e){return typeof t=="number"?t:t[e]}function qse(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function qO(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Ef(o);continue}let a=o,l=a==s.body,c=l?Vse(s):qse(a),u=0,h=0;if(e.top<c.top+Sa(r,"top")?h=-(c.top-e.top+Sa(i,"top")):e.bottom>c.bottom-Sa(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Sa(i,"top")-c.top:e.bottom-c.bottom+Sa(i,"bottom")),e.left<c.left+Sa(r,"left")?u=-(c.left-e.left+Sa(i,"left")):e.right>c.right-Sa(r,"right")&&(u=e.right-c.right+Sa(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,p=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let m=a.scrollLeft-d,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Ef(o)}}function Wse(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:WR(t.dom)}}function WR(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ef(r));return e}function jse({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;jR(n,r==0?0:r-e)}function jR(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Sh=null;function Yse(t){if(t.setActive)return t.setActive();if(Sh)return t.focus(Sh);let e=WR(t);t.focus(Sh==null?{get preventScroll(){return Sh={preventScroll:!0},!0}}:void 0),Sh||(Sh=!1,jR(e,0))}function YR(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Pa(u).getClientRects();else continue;for(let d=0;d<f.length;d++){let p=f[d];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Qse(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:YR(n,i)}function Qse(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=Ll(r,1);if(o.top!=o.bottom&&gk(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function gk(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Use(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Gse(t,e,n){let{node:r,offset:i}=YR(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Kse(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function QR(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(gk(e,c))return QR(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function Xse(t,e){let n=t.dom.ownerDocument,r,i=0,s=Fse(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!gk(e,c)||(o=QR(t.dom,e,c),!o))return null}if(Fr)for(let c=o;r&&c;c=Ef(c))c.draggable&&(r=void 0);if(o=Use(o,e),r){if(Ls&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Mm&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=Kse(t,r,i,e))}a==null&&(a=Gse(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function WO(t){return t.top<t.bottom||t.left<t.right}function Ll(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(WO(r))return r}return Array.prototype.find.call(n,WO)||t.getBoundingClientRect()}const Zse=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function UR(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Mm||Ls;if(r.nodeType==3)if(o&&(Zse.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Ll(Pa(r,i,i),n);if(Ls&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Ll(Pa(r,i-1,i-1),-1);if(c.top==l.top){let u=Ll(Pa(r,i,i+1),-1);if(u.top!=l.top)return Pd(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Pd(Ll(Pa(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Ts(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return q4(l.getBoundingClientRect(),!1)}if(s==null&&i<Ts(r)){let l=r.childNodes[i];if(l.nodeType==1)return q4(l.getBoundingClientRect(),!0)}return q4(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Ts(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Pa(l,Ts(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Pd(Ll(c,1),!1)}if(s==null&&i<Ts(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Pa(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Pd(Ll(c,-1),!0)}return Pd(Ll(r.nodeType==3?Pa(r):r,-n),n>=0)}function Pd(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function q4(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function GR(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Jse(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return GR(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=UR(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Pa(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const eoe=/[\u0590-\u08ac]/;function toe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!eoe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:GR(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let d=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!d.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):r.pos==r.start()||r.pos==r.end()}let jO=null,YO=null,QO=!1;function noe(t,e,n){return jO==e&&YO==n?QO:(jO=e,YO=n,QO=n=="up"||n=="down"?Jse(t,e,n):toe(t,e,n))}const $s=0,UO=1,vu=2,ra=3;class Tm{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=$s,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Lr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof XR){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof KR&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Lr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Lr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Lr(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Lr(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],g=p+m.size;if(s>p&&o<g)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=g}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),h=!1;if((Ls||Fr)&&e==n){let{node:d,offset:p}=a;if(d.nodeType==3){if(h=!!(p&&d.nodeValue[p-1]==`
`),h&&p==d.nodeValue.length)for(let m=d,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:Lr(g)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=d.childNodes[p-1];h=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Ls&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||h&&Fr)&&Ku(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Ku(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(h&&Ls)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?vu:UO,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ra:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?vu:ra}r=o}this.dirty=vu}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?vu:UO;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class KR extends Tm{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==$s&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class roe extends Tm{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xu extends Tm{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=uh.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Xu(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ra||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ra&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=$s){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=$s}}slice(e,n,r){let i=Xu.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=$3(s,n,o,r)),e>0&&(s=$3(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ac extends Tm{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=uh.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=eL(u,r,n),c?l=new ioe(e,n,r,i,u,h||null,f,c,s,o+1):n.isText?new I2(e,n,r,i,u,f,s):new ac(e,n,r,i,u,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ae.empty)}return e}matchesNode(e,n,r){return this.dirty==$s&&e.eq(this.node)&&ey(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new ooe(this,o&&o.node,e);coe(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e,u):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?Ft.none:this.node.child(u).marks,r,e,u),l.placeWidget(c,e,i)},(c,u,h,f)=>{l.syncToMarks(c.marks,r,e,f);let d;l.findNodeMatch(c,u,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,d,e)||l.updateNextNode(c,u,h,e,f,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==vu)&&(o&&this.protectLocalComposition(e,o),ZR(this.contentDOM,this.children,e),If&&uoe(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ct)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=hoe(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new roe(this,s,n,i);e.input.compositionNodes.push(o),this.children=$3(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==ra||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=$s}updateOuterDeco(e){if(ey(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=JR(this.dom,this.nodeDOM,L3(this.outerDeco,this.node,n),L3(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function GO(t,e,n,r,i){eL(r,e,t);let s=new ac(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class I2 extends ac{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==ra||this.dirty!=$s&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=$s||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=$s,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new I2(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ra)}get domAtom(){return!1}isText(e){return this.node.text==e}}class XR extends Tm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$s&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ioe extends ac{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==ra)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ZR(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=KO(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof Xu){let l=r?r.previousSibling:t.lastChild;ZR(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=KO(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const J0=function(t){t&&(this.nodeName=t)};J0.prototype=Object.create(null);const yu=[new J0];function L3(t,e,n){if(t.length==0)return yu;let r=n?yu[0]:new J0,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new J0(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new J0(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function JR(t,e,n,r){if(n==yu&&r==yu)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=yu[0]),i=l}soe(i,a||yu[0],o)}return i}function soe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function eL(t,e,n){return JR(t,t,yu,L3(e,n,t.nodeType!=1))}function ey(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function KO(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ooe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=aoe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=$s,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1,c=this.top.children.length;i<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let u=this.index;u<c;u++){let h=this.top.children[u];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Xu.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==ra&&o.dom==o.contentDOM&&(o.dirty=vu),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ac){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=ra&&ey(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=vu,h.updateChildren(i,o+1),h.dirty=$s),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!ey(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=ac.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=ac.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new KR(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Xu;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof I2)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Fr||Mr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new XR(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function aoe(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Xu)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function loe(t,e){return t.type.side-e.type.side}function coe(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(loe);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let f,d;if(l)d=-1,f=l,l=null;else if(c<t.childCount)d=c,f=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let v=0;v<a.length;v++)a[v].to<g&&(g=a[v].to);g<p&&(l=f.cut(g-s),f=f.cut(0,g-s),p=g,d=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();r(f,m,e.forChild(s,f),d),s=p}}function uoe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function hoe(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function $3(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function vk(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(E2(n)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&yt.isSelectable(h)&&i.parent&&!(h.isInline&&Bse(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new yt(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=o,f=o;for(let d=0;d<n.rangeCount;d++){let p=n.getRangeAt(d);h=Math.min(h,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=yk(t,u,a,h)}return c}function tL(t){return t.editable?t.hasFocus():rL(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xa(t,e=!1){let n=t.state.selection;if(nL(t,n),!!tL(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Mr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ku(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)doe(t);else{let{anchor:r,head:i}=n,s,o;XO&&!(n instanceof ct)&&(n.$from.parent.inlineContent||(s=ZO(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=ZO(t,n.to))),t.docView.setSelection(r,i,t,e),XO&&(s&&JO(s),o&&JO(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&foe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const XO=Fr||Mr&&VR<63;function ZO(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Fr&&i&&i.contentEditable=="false")return W4(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return W4(i);if(s)return W4(s)}}function W4(t){return t.contentEditable="true",Fr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function JO(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function foe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!tL(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function doe(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Lr(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Bi&&oc<=11&&(n.disabled=!0,n.disabled=!1)}function nL(t,e){if(e instanceof yt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(eM(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else eM(t)}function eM(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function yk(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ct.between(e,n,r)}function tM(t){return t.editable&&!t.hasFocus()?!1:rL(t)}function rL(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function poe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ku(e.node,e.offset,n.anchorNode,n.anchorOffset)}function B3(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Dt.findFrom(s,e)}function jl(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function nM(t,e,n){let r=t.state.selection;if(r instanceof ct)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return jl(t,new ct(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=B3(t.state,e);return i&&i instanceof yt?jl(t,i):!1}else if(!(Cs&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?yt.isSelectable(s)?jl(t,new yt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Mm?jl(t,new ct(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof yt&&r.node.isInline)return jl(t,new ct(e>0?r.$to:r.$from));{let i=B3(t.state,e);return i?jl(t,i):!1}}}function ty(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ep(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ch(t,e){return e<0?moe(t):goe(t)}function moe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Ls&&n.nodeType==1&&r<ty(n)&&ep(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ep(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(iL(n))break;{let a=n.previousSibling;for(;a&&ep(a,-1);)i=n.parentNode,s=Lr(a),a=a.previousSibling;if(a)n=a,r=ty(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?z3(t,n,r):i&&z3(t,i,s)}function goe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=ty(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ep(a,1))s=n,o=++r;else break}else{if(iL(n))break;{let a=n.nextSibling;for(;a&&ep(a,1);)s=a.parentNode,o=Lr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=ty(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&z3(t,s,o)}function iL(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function voe(t,e){for(;t&&e==t.childNodes.length&&!Om(t);)e=Lr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function yoe(t,e){for(;t&&!e&&!Om(t);)e=Lr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function z3(t,e,n){if(e.nodeType!=3){let s,o;(o=voe(e,n))?(e=o,n=0):(s=yoe(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(E2(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Xa(t)},50)}function rM(t,e){let n=t.state.doc.resolve(e);if(!(Mr||qR)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function iM(t,e,n){let r=t.state.selection;if(r instanceof ct&&!r.empty||n.indexOf("s")>-1||Cs&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=B3(t.state,e);if(o&&o instanceof yt)return jl(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof $i?Dt.near(o,e):Dt.findFrom(o,e);return a?jl(t,a):!1}return!1}function sM(t,e){if(!(t.state.selection instanceof ct))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function oM(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function boe(t){if(!Fr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;oM(t,r,"true"),setTimeout(()=>oM(t,r,"false"),20)}return!1}function woe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function xoe(t,e){let n=e.keyCode,r=woe(e);if(n==8||Cs&&n==72&&r=="c")return sM(t,-1)||Ch(t,-1);if(n==46&&!e.shiftKey||Cs&&n==68&&r=="c")return sM(t,1)||Ch(t,1);if(n==13||n==27)return!0;if(n==37||Cs&&n==66&&r=="c"){let i=n==37?rM(t,t.state.selection.from)=="ltr"?-1:1:-1;return nM(t,i,r)||Ch(t,i)}else if(n==39||Cs&&n==70&&r=="c"){let i=n==39?rM(t,t.state.selection.from)=="ltr"?1:-1:1;return nM(t,i,r)||Ch(t,i)}else{if(n==38||Cs&&n==80&&r=="c")return iM(t,-1,r)||Ch(t,-1);if(n==40||Cs&&n==78&&r=="c")return boe(t)||iM(t,1,r)||Ch(t,1);if(r==(Cs?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function bk(t,e){t.someProp("transformCopied",d=>{e=d(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let d=r.firstChild;n.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),r=d.content}let o=t.someProp("clipboardSerializer")||uh.fromSchema(t.state.schema),a=uL(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=cL[c.nodeName.toLowerCase()]);){for(let d=u.length-1;d>=0;d--){let p=a.createElement(u[d]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",d=>d(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function sL(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return a=new Ke(Ae.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(h)a=h;else{let f=i.marks(),{schema:d}=t.state,p=uh.fromSchema(d);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(d.text(m,f)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=Ooe(n),Mm&&Moe(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Qu.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!koe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Toe(aM(a,+u[1],+u[2]),u[4]);else if(a=Ke.maxOpen(Soe(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let d=a.content.firstChild;h<a.openStart&&!d.type.spec.isolating;h++,d=d.firstChild);for(let d=a.content.lastChild;f<a.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);a=aM(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const koe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Soe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&aL(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=lL(o[o.length-1],s.length));let u=oL(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Ae.from(o)}return t}function oL(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ae.from(t));return t}function aL(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=aL(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ae.from(oL(n,t,i+1))))}}function lL(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,lL(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ae.empty,!0);return t.copy(n.append(r))}function F3(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=F3(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ae.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function aM(t,e,n){return e<t.openStart&&(t=new Ke(F3(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Ke(F3(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const cL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let lM=null;function uL(){return lM||(lM=document.implementation.createHTMLDocument("title"))}let j4=null;function Coe(t){let e=window.trustedTypes;return e?(j4||(j4=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),j4.createHTML(t)):t}function Ooe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=uL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&cL[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Coe(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Moe(t){let e=t.querySelectorAll(Mr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Toe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ae.from(l.create(r[a+1],i)),s++,o++}return new Ke(i,s,o)}const gi={},vi={},Aoe={touchstart:!0,touchmove:!0};class _oe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Doe(t){for(let e in gi){let n=gi[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Ioe(t,r)&&!wk(t,r)&&(t.editable||!(r.type in vi))&&n(t,r)},Aoe[e]?{passive:!0}:void 0)}Fr&&t.dom.addEventListener("input",()=>null),H3(t)}function nc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Eoe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function H3(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>wk(t,r))})}function wk(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Ioe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Poe(t,e){!wk(t,e)&&gi[e.type]&&(t.editable||!(e.type in vi))&&gi[e.type](t,e)}vi.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!fL(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Wa&&Mr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),If&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,fu(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||xoe(t,n)?n.preventDefault():nc(t,"key")};vi.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};vi.keypress=(t,e)=>{let n=e;if(fL(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Cs&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ct)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function P2(t){return{left:t.clientX,top:t.clientY}}function Noe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function xk(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function lf(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Roe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&yt.isSelectable(r)?(lf(t,new yt(n)),!0):!1}function Loe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof yt&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(yt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(lf(t,yt.create(t.state.doc,i)),!0):!1}function $oe(t,e,n,r,i){return xk(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Loe(t,n):Roe(t,n))}function Boe(t,e,n,r){return xk(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function zoe(t,e,n,r){return xk(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Foe(t,n,r)}function Foe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(lf(t,ct.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)lf(t,ct.create(r,a+1,a+1+o.content.size));else if(yt.isSelectable(o))lf(t,yt.create(r,a));else continue;return!0}}function kk(t){return ny(t)}const hL=Cs?"metaKey":"ctrlKey";gi.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=kk(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Noe(n,t.input.lastClick)&&!n[hL]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(P2(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Hoe(t,o,n,!!r)):(s=="doubleClick"?Boe:zoe)(t,o.pos,o.inside,n)?n.preventDefault():nc(t,"pointer"))};class Hoe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[hL],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof yt&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ls&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),nc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(P2(e))),this.updateAllowDefault(e),this.allowDefault||!n?nc(this.view,"pointer"):$oe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Fr&&this.mightDrag&&!this.mightDrag.node.isAtom||Mr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(lf(this.view,Dt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):nc(this.view,"pointer")}move(e){this.updateAllowDefault(e),nc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}gi.touchstart=t=>{t.input.lastTouch=Date.now(),kk(t),nc(t,"pointer")};gi.touchmove=t=>{t.input.lastTouch=Date.now(),nc(t,"pointer")};gi.contextmenu=t=>kk(t);function fL(t,e){return t.composing?!0:Fr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Voe=Wa?5e3:-1;vi.compositionstart=vi.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ct&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Mr&&qR&&qoe(t)))t.markCursor=t.state.storedMarks||n.marks(),ny(t,!0),t.markCursor=null;else if(ny(t,!e.selection.empty),Ls&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}dL(t,Voe)};function qoe(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}vi.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,dL(t,20))};function dL(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ny(t),e))}function pL(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=joe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Woe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Lse(e.focusNode,e.focusOffset),r=$se(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function joe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ny(t,e=!1){if(!(Wa&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pL(t),e||t.docView&&t.docView.dirty){let n=vk(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Yoe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Vp=Bi&&oc<15||If&&Hse<604;gi.copy=vi.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Vp?null:n.clipboardData,o=r.content(),{dom:a,text:l}=bk(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Yoe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Qoe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Uoe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?qp(t,r.value,null,i,e):qp(t,r.textContent,r.innerHTML,i,e)},50)}function qp(t,e,n,r,i){let s=sL(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||Ke.empty)))return!0;if(!s)return!1;let o=Qoe(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mL(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}vi.paste=(t,e)=>{let n=e;if(t.composing&&!Wa)return;let r=Vp?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&qp(t,mL(r),r.getData("text/html"),i,n)?n.preventDefault():Uoe(t,n)};class gL{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Goe=Cs?"altKey":"ctrlKey";function vL(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Goe]}gi.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(P2(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof yt?i.to-1:i.to))){if(r&&r.mightDrag)o=yt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let h=t.docView.nearestDesc(n.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=yt.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=bk(t,a);(!n.dataTransfer.files.length||!Mr||VR>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Vp?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Vp||n.dataTransfer.setData("text/plain",c),t.dragging=new gL(u,vL(t,n),o)};gi.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};vi.dragover=vi.dragenter=(t,e)=>e.preventDefault();vi.drop=(t,e)=>{try{Koe(t,e,t.dragging)}finally{t.dragging=null}};function Koe(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(P2(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",d=>{s=d(s,t,!1)}):s=sL(t,mL(e.dataTransfer),Vp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&vL(t,e));if(t.someProp("handleDrop",d=>d(t,e,s||Ke.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Vee(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:d}=n;d?d.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(u?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(u&&yt.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new yt(f));else{let d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,v)=>d=v),l.setSelection(yk(t,f,l.doc.resolve(d)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}gi.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xa(t)},20))};gi.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};gi.beforeinput=(t,e)=>{if(Mr&&Wa&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,fu(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in vi)gi[t]=vi[t];function Wp(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class ry{constructor(e,n){this.toDOM=e,this.spec=n||Au,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new pr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof ry&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Wp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class lc{constructor(e,n){this.attrs=e,this.spec=n||Au}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new pr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof lc&&Wp(this.attrs,e.attrs)&&Wp(this.spec,e.spec)}static is(e){return e.type instanceof lc}destroy(){}}class Sk{constructor(e,n){this.attrs=e,this.spec=n||Au}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new pr(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Sk&&Wp(this.attrs,e.attrs)&&Wp(this.spec,e.spec)}destroy(){}}class pr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new pr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new pr(e,e,new ry(n,r))}static inline(e,n,r,i){return new pr(e,n,new lc(r,i))}static node(e,n,r,i){return new pr(e,n,new Sk(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof lc}get widget(){return this.type instanceof ry}}const Ih=[],Au={};class Mn{constructor(e,n){this.local=e.length?e:Ih,this.children=n.length?n:Ih}static create(e,n){return n.length?iy(n,e,0,Au):qr}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==qr||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Au)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Xoe(this.children,o||[],e,n,r,i,s):o?new Mn(o.sort(_u),Ih):qr}add(e,n){return n.length?this==qr?Mn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=bL(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,iy(u,a,c+1,Au)),s+=3}});let o=yL(s?wL(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Mn(o.length?this.local.concat(o).sort(_u):this.local,i||this.children)}remove(e){return e.length==0||this==qr?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=qr?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Mn(i,r):qr}forChild(e,n){if(this==qr)return this;if(n.isLeaf)return Mn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof lc){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Mn(i.sort(_u),Ih);return r?new Gl([a,r]):a}return r||qr}eq(e){if(this==e)return!0;if(!(e instanceof Mn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ck(this.localsInner(e))}localsInner(e){if(this==qr)return Ih;if(e.inlineContent||!this.local.some(lc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof lc||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Mn.empty=new Mn([],[]);Mn.removeOverlap=Ck;const qr=Mn.empty;class Gl{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Au));return Gl.from(r)}forChild(e,n){if(n.isLeaf)return Mn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=qr&&(s instanceof Gl?r=r.concat(s.members):r.push(s))}return Gl.from(r)}eq(e){if(!(e instanceof Gl)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Ck(r?n:n.sort(_u)):Ih}static from(e){switch(e.length){case 0:return qr;case 1:return e[0];default:return new Gl(e.every(n=>n instanceof Mn)?e:e.reduce((n,r)=>n.concat(r instanceof Mn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Xoe(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((f,d,p,m)=>{let g=m-p-(d-f);for(let v=0;v<a.length;v+=3){let b=a[v+1];if(b<0||f>b+u-h)continue;let S=a[v]+u-h;d>=S?a[v+1]=f<=S?-2:-1:f>=u&&g&&(a[v]+=g,a[v+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),d=f-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==d){let v=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);v!=qr?(a[c]=h,a[c+1]=d,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Zoe(a,t,e,n,i,s,o),u=iy(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let d=u.children[h];for(;f<a.length&&a[f]<d;)f+=3;a.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Mn(e.sort(_u),a)}function yL(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new pr(i.from+e,i.to+e,i.type))}return n}function Zoe(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function bL(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function wL(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function iy(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=bL(t,a,l+n);if(c){s=!0;let u=iy(c,a,n+l+1,r);u!=qr&&i.push(l,l+a.nodeSize,u)}});let o=yL(s?wL(t):t,-n).sort(_u);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Mn(o,i):qr}function _u(t,e){return t.from-e.from||t.to-e.to}function Ck(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),cM(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),cM(e,i,r.copy(s.from,r.to)));break}}}return e}function cM(t,e,n){for(;e<t.length&&_u(n,t[e])>0;)e++;t.splice(e,0,n)}function Y4(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=qr&&e.push(r)}),t.cursorWrapper&&e.push(Mn.create(t.state.doc,[t.cursorWrapper.deco])),Gl.from(e)}const Joe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},eae=Bi&&oc<=11;class tae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class nae{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tae,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Bi&&oc<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Fr&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),eae&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Joe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tM(this.view)){if(this.suppressingSelectionUpdates)return Xa(this.view);if(Bi&&oc<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ku(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ef(s))n.add(s);for(let s=e.anchorNode;s;s=Ef(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&tM(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Ls&&l.length){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,f]=u;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of u){let d=f.parentNode;d&&d.nodeName=="LI"&&(!h||sae(e,h)!=d)&&f.remove()}}}else if((Mr||Fr)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let h=u.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&E2(r)&&(c=vk(e))&&c.eq(Dt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xa(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),rae(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,oae(e,l)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xa(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let h=e.addedNodes[u];n.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Bi&&oc<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Lr(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Lr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let uM=new WeakMap,hM=!1;function rae(t){if(!uM.has(t)&&(uM.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ls,hM)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),hM=!0}}function fM(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Ku(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function iae(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return fM(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?fM(t,n):null}function sae(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function oae(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let s of e)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&t.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function aae(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],E2(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Mr&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let v=r.childNodes[g-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){s=g;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||Qu.fromSchema(t.state.schema),d=h.resolve(o),p=null,m=f.parse(r,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:lae,context:d});if(c&&c[0].pos!=null){let g=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=g),p={anchor:g+o,head:v+o}}return{doc:m,sel:p,from:o,to:a}}function lae(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Fr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Fr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const cae=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function uae(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=vk(t,T);if(R&&!t.state.selection.eq(R)){if(Mr&&Wa&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",I=>I(t,fu(13,"Enter"))))return;let L=t.state.tr.setSelection(R);T=="pointer"?L.setMeta("pointer",!0):T=="key"&&L.scrollIntoView(),s&&L.setMeta("composition",s),t.dispatch(L)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=aae(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),f,d;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,d="end"):(f=t.state.selection.from,d="start"),t.input.lastKeyCode=null;let p=dae(h.content,c.doc.content,c.from,f,d);if(p&&t.input.domChangeCount++,(If&&t.input.lastIOSEnter>Date.now()-225||Wa)&&i.some(T=>T.nodeType==1&&!cae.test(T.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",T=>T(t,fu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof ct&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=dM(t,t.state.doc,c.sel);if(T&&!T.eq(t.state.selection)){let R=t.state.tr.setSelection(T);s&&R.setMeta("composition",s),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof ct&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Bi&&oc<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),v=u.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&v.end()>=p.endA;if((If&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!b&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"","")))&&t.someProp("handleKeyDown",T=>T(t,fu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&fae(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",T=>T(t,fu(8,"Backspace")))){Wa&&Mr&&t.domObserver.suppressSelectionUpdates();return}Mr&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Wa&&!b&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,fu(13,"Enter"))})},20));let S=p.start,O=p.endA,k=T=>{let R=T||t.state.tr.replace(S,O,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let L=dM(t,R.doc,c.sel);L&&!(Mr&&t.composing&&L.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(L.head==S||L.head==R.mapping.map(O)-1)||Bi&&L.empty&&L.head==S)&&R.setSelection(L)}return s&&R.setMeta("composition",s),R.scrollIntoView()},C;if(b)if(m.pos==g.pos){Bi&&oc<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xa(t),20));let T=k(t.state.tr.delete(S,O)),R=u.resolve(p.start).marksAcross(u.resolve(p.endA));R&&T.ensureMarks(R),t.dispatch(T)}else if(p.endA==p.endB&&(C=hae(m.parent.content.cut(m.parentOffset,g.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start())))){let T=k(t.state.tr);C.type=="add"?T.addMark(S,O,C.mark):T.removeMark(S,O,C.mark),t.dispatch(T)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let T=m.parent.textBetween(m.parentOffset,g.parentOffset),R=()=>k(t.state.tr.insertText(T,S,O));t.someProp("handleTextInput",L=>L(t,S,O,T,R))||t.dispatch(R())}else t.dispatch(k());else t.dispatch(k())}function dM(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:yk(t,e.resolve(n.anchor),e.resolve(n.head))}function hae(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Ae.from(c).eq(t))return{mark:a,type:o}}function fae(t,e,n,r,i){if(n-e<=i.pos-r.pos||Q4(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Q4(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Q4(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Q4(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function dae(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&pM(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&pM(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function pM(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Ok{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new _oe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(bM),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vM(this),gM(this),this.nodeViews=yM(this),this.docView=GO(this.state.doc,mM(this),Y4(this),this.dom,this),this.domObserver=new nae(this,(r,i,s,o)=>uae(this,r,i,s,o)),this.domObserver.start(),Doe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&H3(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(bM),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(pL(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let d=yM(this);mae(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&H3(this),this.editable=vM(this),gM(this);let l=Y4(this),c=mM(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Wse(this);if(o){this.domObserver.stop();let d=h&&(Bi||Mr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&pae(i.selection,e.selection);if(h){let p=Mr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Woe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=GO(e.doc,c,l,this.dom,this)),p&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&poe(this))?Xa(this,d):(nL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&jse(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof yt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&qO(this,n.getBoundingClientRect(),e)}else qO(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new gL(e.slice,e.move,i<0?void 0:yt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Bi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Yse(this.dom),Xa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Xse(this,e)}coordsAtPos(e,n=1){return UR(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return noe(this,n||this.state,e)}pasteHTML(e,n){return qp(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return qp(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return bk(this,e)}destroy(){this.docView&&(Eoe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Y4(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Nse())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Poe(this,e)}domSelectionRange(){let e=this.domSelection();return e?Fr&&this.root.nodeType===11&&zse(this.dom.ownerDocument)==this.dom&&iae(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ok.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function mM(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[pr.node(0,t.state.doc.content.size,e)]}function gM(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:pr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function vM(t){return!t.someProp("editable",e=>e(t.state)===!1)}function pae(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function yM(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function mae(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function bM(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function xl(t,e){return t.meta={package:"@milkdown/core",group:"System",...e},t}const xL={text:(t,e,n,r)=>{const i=t.value;return/^[^*_\\]*\s+$/.test(i)?i:n.safe(i,{...r,encode:[]})},strong:(t,e,n,r)=>{const i=t.marker||n.options.strong||"*",s=n.enter("strong"),o=n.createTracker(r);let a=o.move(i+i);return a+=o.move(n.containerPhrasing(t,{before:a,after:i,...o.current()})),a+=o.move(i+i),s(),a},emphasis:(t,e,n,r)=>{const i=t.marker||n.options.emphasis||"*",s=n.enter("emphasis"),o=n.createTracker(r);let a=o.move(i);return a+=o.move(n.containerPhrasing(t,{before:a,after:i,...o.current()})),a+=o.move(i),s(),a}},Tn=Yt({},"editorView"),c0=Yt({},"editorState"),U4=Yt([],"initTimer"),V3=Yt({},"editor"),jp=Yt([],"inputRules"),ll=Yt([],"prosePlugins"),Yp=Yt([],"remarkPlugins"),Qp=Yt([],"nodeView"),Up=Yt([],"markView"),Du=Yt(A3().use(x3).use(O3),"remark"),tp=Yt({handlers:xL,encode:[]},"remarkStringifyOptions"),Pg=ua("ConfigReady");function gae(t){const e=n=>(n.record(Pg),async()=>(await t(n),n.done(Pg),()=>{n.clearTimer(Pg)}));return xl(e,{displayName:"Config"}),e}const Eu=ua("InitReady");function vae(t){const e=n=>(n.inject(V3,t).inject(ll,[]).inject(Yp,[]).inject(jp,[]).inject(Qp,[]).inject(Up,[]).inject(tp,{handlers:xL,encode:[]}).inject(Du,A3().use(x3).use(O3)).inject(U4,[Pg]).record(Eu),async()=>{await n.waitTimers(U4);const r=n.get(tp);return n.set(Du,A3().use(x3).use(O3,r)),n.done(Eu),()=>{n.remove(V3).remove(ll).remove(Yp).remove(jp).remove(Qp).remove(Up).remove(tp).remove(Du).remove(U4).clearTimer(Eu)}});return xl(e,{displayName:"Init"}),e}const mi=ua("SchemaReady"),G4=Yt([],"schemaTimer"),lo=Yt({},"schema"),np=Yt([],"nodes"),rp=Yt([],"marks");function wM(t){return{...t,parseDOM:t.parseDOM?.map(e=>({priority:t.priority,...e}))}}const kL=t=>(t.inject(lo,{}).inject(np,[]).inject(rp,[]).inject(G4,[Eu]).record(mi),async()=>{await t.waitTimers(G4);const e=t.get(Du),r=t.get(Yp).reduce((a,l)=>a.use(l.plugin,l.options),e);t.set(Du,r);const i=Object.fromEntries(t.get(np).map(([a,l])=>[a,wM(l)])),s=Object.fromEntries(t.get(rp).map(([a,l])=>[a,wM(l)])),o=new CN({nodes:i,marks:s});return t.set(lo,o),t.done(mi),()=>{t.remove(lo).remove(np).remove(rp).remove(G4).clearTimer(mi)}});xl(kL,{displayName:"Schema"});class SL{constructor(){this.#t=new XN,this.#e=null,this.setCtx=e=>{this.#e=e},this.chain=()=>{if(this.#e==null)throw _4();const e=this.#e,n=[],r=this.get.bind(this),i={run:()=>{const o=ed(...n),a=e.get(Tn);return o(a.state,a.dispatch,a)},inline:o=>(n.push(o),i),pipe:s.bind(this)};function s(o,a){const l=r(o);return n.push(l(a)),i}return i}}#t;#e;get ctx(){return this.#e}create(e,n){const r=e.create(this.#t.sliceMap);return r.set(n),r}get(e){return this.#t.get(e).get()}remove(e){return this.#t.remove(e)}call(e,n){if(this.#e==null)throw _4();const i=this.get(e)(n),s=this.#e.get(Tn);return i(s.state,s.dispatch,s)}inline(e){if(this.#e==null)throw _4();const n=this.#e.get(Tn);return e(n.state,n.dispatch,n)}}function yae(t="cmdKey"){return Yt((()=>()=>!1),t)}const at=Yt(new SL,"commands"),K4=Yt([mi],"commandsTimer"),ip=ua("CommandsReady"),CL=t=>{const e=new SL;return e.setCtx(t),t.inject(at,e).inject(K4,[mi]).record(ip),async()=>(await t.waitTimers(K4),t.done(ip),()=>{t.remove(at).remove(K4).clearTimer(ip)})};xl(CL,{displayName:"Commands"});function bae(t){const e=ed(Jee,hk,dse,NR);return t.Backspace=e,t}class OL{constructor(){this.#t=null,this.#e=[],this.setCtx=e=>{this.#t=e},this.add=e=>(this.#e.push(e),()=>{this.#e=this.#e.filter(n=>n!==e)}),this.addObjectKeymap=e=>{const n=[];return Object.entries(e).forEach(([r,i])=>{if(typeof i=="function"){const s={key:r,onRun:()=>i};this.#e.push(s),n.push(()=>{this.#e=this.#e.filter(o=>o!==s)})}else this.#e.push(i),n.push(()=>{this.#e=this.#e.filter(s=>s!==i)})}),()=>{n.forEach(r=>r())}},this.addBaseKeymap=()=>{const e=bae(_se);return this.addObjectKeymap(e)},this.build=()=>{const e={};return this.#e.forEach(r=>{e[r.key]=[...e[r.key]||[],r]}),Object.fromEntries(Object.entries(e).map(([r,i])=>{const s=i.sort((a,l)=>(l.priority??50)-(a.priority??50));return[r,(a,l,c)=>{const u=this.#t;if(u==null)throw S2();const h=s.map(d=>d.onRun(u));return ed(...h)(a,l,c)}]}))}}#t;#e;get ctx(){return this.#t}}const sy=Yt(new OL,"keymap"),X4=Yt([mi],"keymapTimer"),sp=ua("KeymapReady"),wae=t=>{const e=new OL;return e.setCtx(t),t.inject(sy,e).inject(X4,[mi]).record(sp),async()=>(await t.waitTimers(X4),t.done(sp),()=>{t.remove(sy).remove(X4).clearTimer(sp)})},Ng=ua("ParserReady"),ML=(()=>{throw S2()}),cf=Yt(ML,"parser"),Z4=Yt([],"parserTimer"),TL=t=>(t.inject(cf,ML).inject(Z4,[mi]).record(Ng),async()=>{await t.waitTimers(Z4);const e=t.get(Du),n=t.get(lo);return t.set(cf,use.create(n,e)),t.done(Ng),()=>{t.remove(cf).remove(Z4).clearTimer(Ng)}});xl(TL,{displayName:"Parser"});const op=ua("SerializerReady"),J4=Yt([],"serializerTimer"),AL=(()=>{throw S2()}),uf=Yt(AL,"serializer"),_L=t=>(t.inject(uf,AL).inject(J4,[mi]).record(op),async()=>{await t.waitTimers(J4);const e=t.get(Du),n=t.get(lo);return t.set(uf,fse.create(n,e)),t.done(op),()=>{t.remove(uf).remove(J4).clearTimer(op)}});xl(_L,{displayName:"Serializer"});const Rg=Yt("","defaultValue"),Lg=Yt(t=>t,"stateOptions"),e5=Yt([],"editorStateTimer"),$g=ua("EditorStateReady");function xae(t,e,n){if(typeof t=="string")return e(t);if(t.type==="html")return Qu.fromSchema(n).parse(t.dom);if(t.type==="json")return Ka.fromJSON(n,t.value);throw tte(t)}const kae=new jn("MILKDOWN_STATE_TRACKER"),DL=t=>(t.inject(Rg,"").inject(c0,{}).inject(Lg,e=>e).inject(e5,[Ng,op,ip,sp]).record($g),async()=>{await t.waitTimers(e5);const e=t.get(lo),n=t.get(cf),r=t.get(jp),i=t.get(Lg),s=t.get(ll),o=t.get(Rg),a=xae(o,n,e),l=t.get(sy),c=l.addBaseKeymap(),u=[...s,new Wn({key:kae,state:{init:()=>{},apply:(d,p,m,g)=>{t.set(c0,g)}}}),yte({rules:r}),FR(l.build())];t.set(ll,u);const h=i({schema:e,doc:a,plugins:u}),f=tc.create(h);return t.set(c0,f),t.done($g),()=>{c(),t.remove(Rg).remove(c0).remove(Lg).remove(e5).clearTimer($g)}});xl(DL,{displayName:"EditorState"});const Gp=Yt([],"pasteRule"),t5=Yt([mi],"pasteRuleTimer"),Bg=ua("PasteRuleReady"),EL=t=>(t.inject(Gp,[]).inject(t5,[mi]).record(Bg),async()=>(await t.waitTimers(t5),t.done(Bg),()=>{t.remove(Gp).remove(t5).clearTimer(Bg)}));xl(EL,{displayName:"PasteRule"});const zg=ua("EditorViewReady"),n5=Yt([],"editorViewTimer"),ap=Yt({},"editorViewOptions"),Fg=Yt(null,"root"),q3=Yt(null,"rootDOM"),W3=Yt({},"rootAttrs");function Sae(t,e){const n=document.createElement("div");n.className="milkdown",t.appendChild(n),e.set(q3,n);const r=e.get(W3);return Object.entries(r).forEach(([i,s])=>n.setAttribute(i,s)),n}function Cae(t){t.classList.add("editor"),t.setAttribute("role","textbox")}const Oae=new jn("MILKDOWN_VIEW_CLEAR"),IL=t=>(t.inject(Fg,document.body).inject(Tn,{}).inject(ap,{}).inject(q3,null).inject(W3,{}).inject(n5,[$g,Bg]).record(zg),async()=>{await t.wait(Eu);const e=t.get(Fg)||document.body,n=typeof e=="string"?document.querySelector(e):e;t.update(ll,l=>[new Wn({key:Oae,view:c=>{const u=n?Sae(n,t):void 0;return(()=>{if(u&&n){const f=c.dom;n.replaceChild(u,f),u.appendChild(f)}})(),{destroy:()=>{u?.parentNode&&u?.parentNode.replaceChild(c.dom,u),u?.remove()}}}}),...l]),await t.waitTimers(n5);const r=t.get(c0),i=t.get(ap),s=Object.fromEntries(t.get(Qp)),o=Object.fromEntries(t.get(Up)),a=new Ok(n,{state:r,nodeViews:s,markViews:o,transformPasted:(l,c,u)=>(t.get(Gp).sort((h,f)=>(f.priority??50)-(h.priority??50)).map(h=>h.run).forEach(h=>{l=h(l,c,u)}),l),...i});return Cae(a.dom),t.set(Tn,a),t.done(zg),()=>{a?.destroy(),t.remove(Fg).remove(Tn).remove(ap).remove(q3).remove(W3).remove(n5).clearTimer(zg)}});xl(IL,{displayName:"EditorView"});var oy=(t=>(t.Idle="Idle",t.OnCreate="OnCreate",t.Created="Created",t.OnDestroy="OnDestroy",t.Destroyed="Destroyed",t))(oy||{});class Mk{constructor(){this.#t=!1,this.#e="Idle",this.#r=[],this.#n=()=>{},this.#a=new XN,this.#i=new Lte,this.#s=new Map,this.#o=new Map,this.#l=new tk(this.#a,this.#i),this.#u=()=>{const e=gae(async r=>{await Promise.all(this.#r.map(i=>Promise.resolve(i(r))))}),n=[kL,TL,_L,CL,wae,EL,DL,IL,vae(this),e];this.#c(n,this.#o)},this.#c=(e,n)=>{e.forEach(r=>{const i=this.#l.produce(this.#t?r.meta:void 0),s=r(i);n.set(r,{ctx:i,handler:s,cleanup:void 0})})},this.#h=(e,n=!1)=>Promise.all([e].flat().map(async r=>{const s=this.#s.get(r)?.cleanup;return n?this.#s.delete(r):this.#s.set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s})),this.#d=async()=>{await Promise.all([...this.#o.entries()].map(async([e,{cleanup:n}])=>typeof n=="function"?n():n)),this.#o.clear()},this.#f=e=>{this.#e=e,this.#n(e)},this.#p=e=>[...e.entries()].map(async([n,r])=>{const{ctx:i,handler:s}=r;if(!s)return;const o=await s();e.set(n,{ctx:i,handler:s,cleanup:o})}),this.enableInspector=(e=!0)=>(this.#t=e,this),this.onStatusChange=e=>(this.#n=e,this),this.config=e=>(this.#r.push(e),this),this.removeConfig=e=>(this.#r=this.#r.filter(n=>n!==e),this),this.use=e=>{const n=[e].flat();return n.flat().forEach(r=>{this.#s.set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),this.#e==="Created"&&this.#c(n,this.#s),this},this.remove=async e=>this.#e==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(n=>{setTimeout(()=>{n(this.remove(e))},50)})):(await this.#h([e].flat(),!0),this),this.create=async()=>this.#e==="OnCreate"?this:(this.#e==="Created"&&await this.destroy(),this.#f("OnCreate"),this.#u(),this.#c([...this.#s.keys()],this.#s),await Promise.all([this.#p(this.#o),this.#p(this.#s)].flat()),this.#f("Created"),this),this.destroy=async(e=!1)=>this.#e==="Destroyed"||this.#e==="OnDestroy"?this:this.#e==="OnCreate"?new Promise(n=>{setTimeout(()=>{n(this.destroy(e))},50)}):(e&&(this.#r=[]),this.#f("OnDestroy"),await this.#h([...this.#s.keys()],e),await this.#d(),this.#f("Destroyed"),this),this.action=e=>e(this.#l),this.inspect=()=>this.#t?[...this.#o.values(),...this.#s.values()].map(({ctx:e})=>e?.inspector?.read()).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new Mk}#t;#e;#r;#n;#a;#i;#s;#o;#l;#u;#c;#h;#d;#f;#p;get ctx(){return this.#l}get status(){return this.#e}}function _t(t,e){const n=yae(t),r=i=>async()=>{r.key=n,await i.wait(ip);const s=e(i);return i.get(at).create(n,s),r.run=o=>i.get(at).call(t,o),()=>{i.get(at).remove(n)}};return r}function Zr(t){const e=n=>async()=>{await n.wait(mi);const r=t(n);return n.update(jp,i=>[...i,r]),e.inputRule=r,()=>{n.update(jp,i=>i.filter(s=>s!==r))}};return e}function Mae(t){const e=n=>async()=>{await n.wait(mi);const r=t(n);return n.update(Gp,i=>[...i,r]),e.pasteRule=r,()=>{n.update(Gp,i=>i.filter(s=>s!==r))}};return e}function Tae(t,e){const n=r=>async()=>{const i=e(r);return r.update(rp,s=>[...s.filter(o=>o[0]!==t),[t,i]]),n.id=t,n.schema=i,()=>{r.update(rp,s=>s.filter(([o])=>o!==t))}};return n.type=r=>{const i=r.get(lo).marks[t];if(!i)throw cte(t);return i},n}function Tk(t,e){const n=r=>async()=>{const i=e(r);return r.update(np,s=>[...s.filter(o=>o[0]!==t),[t,i]]),n.id=t,n.schema=i,()=>{r.update(np,s=>s.filter(([o])=>o!==t))}};return n.type=r=>{const i=r.get(lo).nodes[t];if(!i)throw lte(t);return i},n}function vr(t){let e;const n=r=>async()=>(await r.wait(mi),e=t(r),r.update(ll,i=>[...i,e]),()=>{r.update(ll,i=>i.filter(s=>s!==e))});return n.plugin=()=>e,n.key=()=>e.spec.key,n}function PL(t){const e=n=>async()=>{await n.wait(sp);const r=n.get(sy),i=t(n),s=r.addObjectKeymap(i);return e.keymap=i,()=>{s()}};return e}function Am(t,e){const n=r=>async()=>{await r.wait(mi);const i=e(r);return t.type(r)instanceof Xv?r.update(Qp,s=>[...s,[t.id,i]]):r.update(Up,s=>[...s,[t.id,i]]),n.view=i,n.type=t,()=>{t.type(r)instanceof Xv?r.update(Qp,s=>s.filter(o=>o[0]!==t.id)):r.update(Up,s=>s.filter(o=>o[0]!==t.id))}};return n}function bn(t,e){const n=Yt(t,e),r=i=>(i.inject(n),()=>()=>{i.remove(n)});return r.key=n,r}function cr(t,e){const n=bn(e,t),r=Tk(t,s=>s.get(n.key)(s)),i=[n,r];return i.id=r.id,i.node=r,i.type=s=>r.type(s),i.ctx=n,i.key=n.key,i.extendSchema=s=>{const o=s(e);return cr(t,o)},i}function td(t,e){const n=bn(e,t),r=Tae(t,s=>s.get(n.key)(s)),i=[n,r];return i.id=r.id,i.mark=r,i.type=s=>r.type(s),i.ctx=n,i.key=n.key,i.extendSchema=s=>{const o=s(e);return td(t,o)},i}function ji(t,e){const n=Object.fromEntries(Object.entries(e).map(([o,{shortcuts:a,priority:l}])=>[o,{shortcuts:a,priority:l}])),r=bn(n,`${t}Keymap`),i=PL(o=>{const a=o.get(r.key),l=Object.entries(e).flatMap(([c,{command:u}])=>{const h=a[c],f=[h.shortcuts].flat(),d=h.priority;return f.map(p=>[p,{key:p,onRun:u,priority:d}])});return Object.fromEntries(l)}),s=[r,i];return s.ctx=r,s.shortcuts=i,s.key=r.key,s.keymap=i.keymap,s}const bo=(t,e=()=>({}))=>bn(e,`${t}Attr`),_m=(t,e=()=>({}))=>bn(e,`${t}Attr`);function ha(t,e,n){const r=bn({},t),i=o=>async()=>{await o.wait(Eu);const l={plugin:e(o),options:o.get(r.key)};return o.update(Yp,c=>[...c,l]),()=>{o.update(Yp,c=>c.filter(u=>u!==l))}},s=[r,i];return s.id=t,s.plugin=i,s.options=r,s}function Aae(t){return e=>{const n=e.get(Tn);return e.get(lo),e.get(uf)(n.state.doc)}}function _ae(t,e=!1){return n=>{const r=n.get(Tn),s=n.get(cf)(t);if(!s)return;if(!e){const{state:u}=r;return r.dispatch(u.tr.replace(0,u.doc.content.size,new Ke(s.content,0,0)))}const o=n.get(lo),a=n.get(Lg),l=n.get(ll),c=tc.create({schema:o,doc:s,plugins:l,...a});r.updateState(c)}}const ay=Math.min,Iu=Math.max,ly=Math.round,T1=Math.floor,ea=t=>({x:t,y:t}),Dae={left:"right",right:"left",bottom:"top",top:"bottom"},Eae={start:"end",end:"start"};function xM(t,e,n){return Iu(t,ay(e,n))}function N2(t,e){return typeof t=="function"?t(e):t}function Zu(t){return t.split("-")[0]}function R2(t){return t.split("-")[1]}function NL(t){return t==="x"?"y":"x"}function RL(t){return t==="y"?"height":"width"}const Iae=new Set(["top","bottom"]);function rc(t){return Iae.has(Zu(t))?"y":"x"}function LL(t){return NL(rc(t))}function Pae(t,e,n){n===void 0&&(n=!1);const r=R2(t),i=LL(t),s=RL(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=cy(o)),[o,cy(o)]}function Nae(t){const e=cy(t);return[j3(t),e,j3(e)]}function j3(t){return t.replace(/start|end/g,e=>Eae[e])}const kM=["left","right"],SM=["right","left"],Rae=["top","bottom"],Lae=["bottom","top"];function $ae(t,e,n){switch(t){case"top":case"bottom":return n?e?SM:kM:e?kM:SM;case"left":case"right":return e?Rae:Lae;default:return[]}}function Bae(t,e,n,r){const i=R2(t);let s=$ae(Zu(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(j3)))),s}function cy(t){return t.replace(/left|right|bottom|top/g,e=>Dae[e])}function zae(t){return{top:0,right:0,bottom:0,left:0,...t}}function Fae(t){return typeof t!="number"?zae(t):{top:t,right:t,bottom:t,left:t}}function uy(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function CM(t,e,n){let{reference:r,floating:i}=t;const s=rc(e),o=LL(e),a=RL(o),l=Zu(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let d;switch(l){case"top":d={x:u,y:r.y-i.height};break;case"bottom":d={x:u,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:h};break;case"left":d={x:r.x-i.width,y:h};break;default:d={x:r.x,y:r.y}}switch(R2(e)){case"start":d[o]-=f*(n&&c?-1:1);break;case"end":d[o]+=f*(n&&c?-1:1);break}return d}const Hae=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=CM(c,r,l),f=r,d={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:b,y:S,data:O,reset:k}=await v({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:d,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,h=S??h,d={...d,[g]:{...d[g],...O}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:h}=CM(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:d}};async function $L(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=N2(e,t),p=Fae(d),g=a[f?h==="floating"?"reference":"floating":h],v=uy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=uy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:S,strategy:l}):b);return{top:(v.top-k.top+p.top)/O.y,bottom:(k.bottom-v.bottom+p.bottom)/O.y,left:(v.left-k.left+p.left)/O.x,right:(k.right-v.right+p.right)/O.x}}const Vae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=N2(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Zu(i),b=rc(a),S=Zu(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(S||!m?[cy(a)]:Nae(a)),C=p!=="none";!f&&C&&k.push(...Bae(a,m,p,O));const T=[a,...k],R=await $L(e,g),L=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&L.push(R[v]),h){const G=Pae(i,o,O);L.push(R[G[0]],R[G[1]])}if(I=[...I,{placement:i,overflows:L}],!L.every(G=>G<=0)){var F,E;const G=(((F=s.flip)==null?void 0:F.index)||0)+1,W=T[G];if(W&&(!(h==="alignment"?b!==rc(W):!1)||I.every(ne=>rc(ne.placement)===b?ne.overflows[0]>0:!0)))return{data:{index:G,overflows:I},reset:{placement:W}};let X=(E=I.filter(te=>te.overflows[0]<=0).sort((te,ne)=>te.overflows[1]-ne.overflows[1])[0])==null?void 0:E.placement;if(!X)switch(d){case"bestFit":{var ee;const te=(ee=I.filter(ne=>{if(C){const ye=rc(ne.placement);return ye===b||ye==="y"}return!0}).map(ne=>[ne.placement,ne.overflows.filter(ye=>ye>0).reduce((ye,A)=>ye+A,0)]).sort((ne,ye)=>ne[1]-ye[1])[0])==null?void 0:ee[0];te&&(X=te);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}},qae=new Set(["left","top"]);async function Wae(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Zu(n),a=R2(n),l=rc(n)==="y",c=qae.has(o)?-1:1,u=s&&l?-1:1,h=N2(e,t);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*u,y:f*c}:{x:f*c,y:d*u}}const jae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Wae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Yae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...l}=N2(t,e),c={x:n,y:r},u=await $L(e,l),h=rc(Zu(i)),f=NL(h);let d=c[f],p=c[h];if(s){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=d+u[g],S=d-u[v];d=xM(b,d,S)}if(o){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=p+u[g],S=p-u[v];p=xM(b,p,S)}const m=a.fn({...e,[f]:d,[h]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[h]:o}}}}}};function L2(){return typeof window<"u"}function nd(t){return BL(t)?(t.nodeName||"").toLowerCase():"#document"}function ps(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fa(t){var e;return(e=(BL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BL(t){return L2()?t instanceof Node||t instanceof ps(t).Node:!1}function po(t){return L2()?t instanceof Element||t instanceof ps(t).Element:!1}function ia(t){return L2()?t instanceof HTMLElement||t instanceof ps(t).HTMLElement:!1}function OM(t){return!L2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ps(t).ShadowRoot}const Qae=new Set(["inline","contents"]);function Dm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=mo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Qae.has(i)}const Uae=new Set(["table","td","th"]);function Gae(t){return Uae.has(nd(t))}const Kae=[":popover-open",":modal"];function $2(t){return Kae.some(e=>{try{return t.matches(e)}catch{return!1}})}const Xae=["transform","translate","scale","rotate","perspective"],Zae=["transform","translate","scale","rotate","perspective","filter"],Jae=["paint","layout","strict","content"];function Ak(t){const e=_k(),n=po(t)?mo(t):t;return Xae.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Zae.some(r=>(n.willChange||"").includes(r))||Jae.some(r=>(n.contain||"").includes(r))}function ele(t){let e=bc(t);for(;ia(e)&&!Pf(e);){if(Ak(e))return e;if($2(e))return null;e=bc(e)}return null}function _k(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tle=new Set(["html","body","#document"]);function Pf(t){return tle.has(nd(t))}function mo(t){return ps(t).getComputedStyle(t)}function B2(t){return po(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bc(t){if(nd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||OM(t)&&t.host||fa(t);return OM(e)?e.host:e}function zL(t){const e=bc(t);return Pf(e)?t.ownerDocument?t.ownerDocument.body:t.body:ia(e)&&Dm(e)?e:zL(e)}function Kp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=zL(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ps(i);if(s){const a=Y3(o);return e.concat(o,o.visualViewport||[],Dm(i)?i:[],a&&n?Kp(a):[])}return e.concat(i,Kp(i,[],n))}function Y3(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function FL(t){const e=mo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ia(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=ly(n)!==s||ly(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Dk(t){return po(t)?t:t.contextElement}function hf(t){const e=Dk(t);if(!ia(e))return ea(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=FL(e);let o=(s?ly(n.width):n.width)/r,a=(s?ly(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const nle=ea(0);function HL(t){const e=ps(t);return!_k()||!e.visualViewport?nle:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rle(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ps(t)?!1:e}function Ju(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Dk(t);let o=ea(1);e&&(r?po(r)&&(o=hf(r)):o=hf(t));const a=rle(s,n,r)?HL(s):ea(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=ps(s),d=r&&po(r)?ps(r):r;let p=f,m=Y3(p);for(;m&&r&&d!==p;){const g=hf(m),v=m.getBoundingClientRect(),b=mo(m),S=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,O=v.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,h*=g.y,l+=S,c+=O,p=ps(m),m=Y3(p)}}return uy({width:u,height:h,x:l,y:c})}function z2(t,e){const n=B2(t).scrollLeft;return e?e.left+n:Ju(fa(t)).left+n}function VL(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-z2(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function ile(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=fa(r),a=e?$2(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=ea(1);const u=ea(0),h=ia(r);if((h||!h&&!s)&&((nd(r)!=="body"||Dm(o))&&(l=B2(r)),ia(r))){const d=Ju(r);c=hf(r),u.x=d.x+r.clientLeft,u.y=d.y+r.clientTop}const f=o&&!h&&!s?VL(o,l):ea(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function sle(t){return Array.from(t.getClientRects())}function ole(t){const e=fa(t),n=B2(t),r=t.ownerDocument.body,i=Iu(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Iu(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+z2(t);const a=-n.scrollTop;return mo(r).direction==="rtl"&&(o+=Iu(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const MM=25;function ale(t,e){const n=ps(t),r=fa(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=_k();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=z2(r);if(c<=0){const u=r.ownerDocument,h=u.body,f=getComputedStyle(h),d=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(r.clientWidth-h.clientWidth-d);p<=MM&&(s-=p)}else c<=MM&&(s+=c);return{width:s,height:o,x:a,y:l}}const lle=new Set(["absolute","fixed"]);function cle(t,e){const n=Ju(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ia(t)?hf(t):ea(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function TM(t,e,n){let r;if(e==="viewport")r=ale(t,n);else if(e==="document")r=ole(fa(t));else if(po(e))r=cle(e,n);else{const i=HL(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return uy(r)}function qL(t,e){const n=bc(t);return n===e||!po(n)||Pf(n)?!1:mo(n).position==="fixed"||qL(n,e)}function ule(t,e){const n=e.get(t);if(n)return n;let r=Kp(t,[],!1).filter(a=>po(a)&&nd(a)!=="body"),i=null;const s=mo(t).position==="fixed";let o=s?bc(t):t;for(;po(o)&&!Pf(o);){const a=mo(o),l=Ak(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&lle.has(i.position)||Dm(o)&&!l&&qL(t,o))?r=r.filter(u=>u!==o):i=a,o=bc(o)}return e.set(t,r),r}function hle(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?$2(e)?[]:ule(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=TM(e,u,i);return c.top=Iu(h.top,c.top),c.right=ay(h.right,c.right),c.bottom=ay(h.bottom,c.bottom),c.left=Iu(h.left,c.left),c},TM(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function fle(t){const{width:e,height:n}=FL(t);return{width:e,height:n}}function dle(t,e,n){const r=ia(e),i=fa(e),s=n==="fixed",o=Ju(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ea(0);function c(){l.x=z2(i)}if(r||!r&&!s)if((nd(e)!=="body"||Dm(i))&&(a=B2(e)),r){const d=Ju(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?VL(i,a):ea(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function r5(t){return mo(t).position==="static"}function AM(t,e){if(!ia(t)||mo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return fa(t)===n&&(n=n.ownerDocument.body),n}function WL(t,e){const n=ps(t);if($2(t))return n;if(!ia(t)){let i=bc(t);for(;i&&!Pf(i);){if(po(i)&&!r5(i))return i;i=bc(i)}return n}let r=AM(t,e);for(;r&&Gae(r)&&r5(r);)r=AM(r,e);return r&&Pf(r)&&r5(r)&&!Ak(r)?n:r||ele(t)||n}const ple=async function(t){const e=this.getOffsetParent||WL,n=this.getDimensions,r=await n(t.floating);return{reference:dle(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mle(t){return mo(t).direction==="rtl"}const gle={convertOffsetParentRelativeRectToViewportRelativeRect:ile,getDocumentElement:fa,getClippingRect:hle,getOffsetParent:WL,getElementRects:ple,getClientRects:sle,getDimensions:fle,getScale:hf,isElement:po,isRTL:mle};function jL(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vle(t,e){let n=null,r;const i=fa(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:d}=c;if(a||e(),!f||!d)return;const p=T1(h),m=T1(i.clientWidth-(u+f)),g=T1(i.clientHeight-(h+d)),v=T1(u),S={rootMargin:-p+"px "+-m+"px "+-g+"px "+-v+"px",threshold:Iu(0,ay(1,l))||1};let O=!0;function k(C){const T=C[0].intersectionRatio;if(T!==l){if(!O)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!jL(c,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(k,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,S)}n.observe(t)}return o(!0),s}function _M(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Dk(t),u=i||s?[...c?Kp(c):[],...Kp(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&a?vle(c,n):null;let f=-1,d=null;o&&(d=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&d&&(d.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=d)==null||S.observe(e)})),n()}),c&&!l&&d.observe(c),d.observe(e));let p,m=l?Ju(t):null;l&&g();function g(){const v=Ju(t);m&&!jL(m,v)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{var v;u.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),h?.(),(v=d)==null||v.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const eh=jae,yle=Yae,Ek=Vae,sa=(t,e,n)=>{const r=new Map,i={platform:gle,...n},s={...i.platform,_c:r};return Hae(t,e,{...i,platform:s})};function Em(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-block",...e}}),t}const ble=t=>!Jo(n=>n.type.name==="table")(t),F2=bn({filterNodes:ble},"blockConfig");Em(F2,{displayName:"Ctx<blockConfig>"});function wle(t,e,n){if(!t.dom.parentElement)return null;try{const i=t.posAtCoords({left:e.x,top:e.y})?.inside;if(i==null||i<0)return null;let s=t.state.doc.resolve(i),o=t.state.doc.nodeAt(i),a=t.nodeDOM(i);const l=u=>{const h=s.depth>=1&&s.index(s.depth)===0;if(!(u||h))return;const d=s.before(s.depth);o=t.state.doc.nodeAt(d),a=t.nodeDOM(d),s=t.state.doc.resolve(d),n(s,o)||l(!0)},c=n(s,o);return l(!c),!a||!o?null:{node:o,$pos:s,el:a}}catch{return null}}const DM=O1.ie&&O1.ie_version<15||O1.ios&&O1.webkit_version<604,EM=20;class xle{constructor(){this.#e=()=>{if(!this.#n)return null;const e=this.#n,n=this.#o;if(n&&yt.isSelectable(e.node)){const r=yt.create(n.state.doc,e.$pos.pos);return n.dispatch(n.state.tr.setSelection(r)),n.focus(),this.#r=r,r}return null},this.#r=null,this.#n=null,this.#a=void 0,this.#i=!1,this.#u=()=>{this.#l?.({type:"hide"}),this.#n=null},this.#c=e=>{this.#n=e,this.#l?.({type:"show",active:e})},this.bind=(e,n)=>{this.#t=e,this.#l=n},this.addEvent=e=>{e.addEventListener("mousedown",this.#h),e.addEventListener("mouseup",this.#d),e.addEventListener("dragstart",this.#f),e.addEventListener("dragend",this.#p)},this.removeEvent=e=>{e.removeEventListener("mousedown",this.#h),e.removeEventListener("mouseup",this.#d),e.removeEventListener("dragstart",this.#f),e.removeEventListener("dragend",this.#p)},this.unBind=()=>{this.#l=void 0},this.#h=()=>{this.#a=this.#n?.el.getBoundingClientRect(),this.#e()},this.#d=()=>{if(!this.#i){requestAnimationFrame(()=>{this.#a&&this.#o?.focus()});return}this.#i=!1,this.#r=null},this.#f=e=>{this.#i=!0;const n=this.#o;if(!n)return;n.dom.dataset.dragging="true";const r=this.#r;if(e.dataTransfer&&r){const i=r.content();e.dataTransfer.effectAllowed="copyMove";const{dom:s,text:o}=n.serializeForClipboard(i);e.dataTransfer.clearData(),e.dataTransfer.setData(DM?"Text":"text/html",s.innerHTML),DM||e.dataTransfer.setData("text/plain",o);const a=this.#n?.el;a&&e.dataTransfer.setDragImage(a,0,0),n.dragging={slice:i,move:!0}}},this.#p=()=>{this.#o&&this.#m(this.#o)},this.keydownCallback=e=>(this.#u(),this.#i=!1,e.dom.dataset.dragging="false",!1),this.#g=a2((e,n)=>{if(!e.editable)return;const r=e.dom.getBoundingClientRect(),i=r.left+r.width/2;if(!(e.root.elementFromPoint(i,n.clientY)instanceof Element)){this.#u();return}const o=this.#s;if(!o)return;const a=wle(e,{x:i,y:n.clientY},o);if(!a){this.#u();return}this.#c(a)},200),this.mousemoveCallback=(e,n)=>(e.composing||!e.editable||this.#g(e,n),!1),this.dragoverCallback=(e,n)=>{if(this.#i){const r=this.#o?.dom.parentElement;if(!r)return!1;const i=r.scrollHeight>r.clientHeight,s=r.getBoundingClientRect();if(i){if(r.scrollTop>0&&Math.abs(n.y-s.y)<EM){const l=r.scrollTop>10?r.scrollTop-10:0;return r.scrollTop=l,!1}const o=Math.round(e.dom.getBoundingClientRect().height);if(Math.round(r.scrollTop+s.height)<o&&Math.abs(n.y-(s.height+s.y))<EM){const l=r.scrollTop+10;return r.scrollTop=l,!1}}}return!1},this.dragenterCallback=e=>{e.dragging&&(this.#i=!0,e.dom.dataset.dragging="true")},this.dragleaveCallback=(e,n)=>{const r=n.clientX,i=n.clientY;(r<0||i<0||r>window.innerWidth||i>window.innerHeight)&&(this.#n=null,this.#m(e))},this.dropCallback=e=>(this.#m(e),!1),this.dragendCallback=e=>{this.#m(e)},this.#m=e=>{this.#i=!1,e.dom.dataset.dragging="false"}}#t;#e;#r;#n;#a;#i;get#s(){try{return this.#t?.get(F2.key).filterNodes}catch{return}}get#o(){return this.#t?.get(Tn)}#l;#u;#c;#h;#d;#f;#p;#g;#m}const Ik=bn(()=>new xle,"blockService"),H2=bn({},"blockServiceInstance");Em(Ik,{displayName:"Ctx<blockService>"});Em(H2,{displayName:"Ctx<blockServiceInstance>"});const V2=bn({},"blockSpec");Em(V2,{displayName:"Ctx<blockSpec>"});const Pk=vr(t=>{const e=new jn("MILKDOWN_BLOCK"),r=t.get(Ik.key)();t.set(H2.key,r);const i=t.get(V2.key);return new Wn({key:e,...i,props:{...i.props,handleDOMEvents:{drop:s=>r.dropCallback(s),pointermove:(s,o)=>r.mousemoveCallback(s,o),keydown:s=>r.keydownCallback(s),dragover:(s,o)=>r.dragoverCallback(s,o),dragleave:(s,o)=>r.dragleaveCallback(s,o),dragenter:s=>r.dragenterCallback(s),dragend:s=>r.dragendCallback(s)}}})});Em(Pk,{displayName:"Prose<block>"});class kle{constructor(e){this.#n=null,this.#i=!1,this.update=()=>{requestAnimationFrame(()=>{if(!this.#i)try{this.#h(),this.#i=!0}catch{}})},this.destroy=()=>{this.#r?.unBind(),this.#r?.removeEvent(this.#t),this.#t.remove()},this.show=n=>{const r=n.el,i=this.#e.get(Tn).dom,s={ctx:this.#e,active:n,editorDom:i,blockDom:this.#t},o={contextElement:r,getBoundingClientRect:()=>this.#u?this.#u(s):r.getBoundingClientRect()},a=[Ek()];if(this.#l){const l=this.#l(s),c=eh(l);a.push(c)}sa(o,this.#t,{placement:this.#c?this.#c(s):"left",middleware:[...a,...this.#s],...this.#o}).then(({x:l,y:c})=>{Object.assign(this.#t.style,{left:`${l}px`,top:`${c}px`}),this.#t.dataset.show="true"}).catch(console.error)},this.hide=()=>{this.#t.dataset.show="false"},this.#e=e.ctx,this.#t=e.content,this.#l=e.getOffset,this.#u=e.getPosition,this.#c=e.getPlacement,this.#s=e.middleware??[],this.#o=e.floatingUIOptions??{},this.#a=e.root,this.hide()}#t;#e;#r;#n;#a;#i;#s;#o;#l;#u;#c;get active(){return this.#n}#h(){const e=this.#e.get(Tn);(this.#a??e.dom.parentElement??document.body).appendChild(this.#t);const r=this.#e.get(H2.key);r.bind(this.#e,i=>{i.type==="hide"?(this.hide(),this.#n=null):i.type==="show"&&(this.show(i.active),this.#n=i.active)}),this.#r=r,this.#r.addEvent(this.#t),this.#t.draggable=!0}}const q2=[V2,F2,Ik,H2,Pk];q2.key=V2.key;q2.pluginKey=Pk.key;function Sle(t,e){return function(n,r){let{$from:i,$to:s,node:o}=n.selection;if(o&&o.isBlock||i.depth<2||!i.sameParent(s))return!1;let a=i.node(-1);if(a.type!=t)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let h=Ae.empty,f=i.index(-1)?1:i.index(-2)?2:3;for(let v=i.depth-f;v>=i.depth-3;v--)h=Ae.from(i.node(v).copy(h));let d=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;h=h.append(Ae.from(t.createAndFill()));let p=i.before(i.depth-(f-1)),m=n.tr.replace(p,i.after(-d),new Ke(h,4-f,0)),g=-1;m.doc.nodesBetween(p,m.doc.content.size,(v,b)=>{if(g>-1)return!1;v.isTextblock&&v.content.size==0&&(g=b+1)}),g>-1&&m.setSelection(Dt.near(m.doc.resolve(g))),r(m.scrollIntoView())}return!0}let l=s.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=n.tr.delete(i.pos,s.pos),u=l?[null,{type:l}]:void 0;return K0(c.doc,i.pos,2,u)?(r&&r(c.split(i.pos,2,u).scrollIntoView()),!0):!1}}function Cle(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Ole(e,n,t,s):Mle(e,n,s):!0:!1}}function Ole(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Gr(s-1,o,s,o,new Ke(Ae.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new mN(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=y2(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return b2(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Mle(t,e,n){let r=t.tr,i=n.parent;for(let d=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)d-=i.child(p).nodeSize,r.delete(d-1,d+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ae.empty:Ae.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return r.step(new Gr(h-(a?1:0),f+(l?1:0),h+1,f-1,new Ke((a?Ae.empty:Ae.from(i.copy(Ae.empty))).append(l?Ae.empty:Ae.from(i.copy(Ae.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Tle(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Ae.from(c?t.create():null),h=new Ke(Ae.from(t.create(null,Ae.from(a.type.create(null,u)))),c?3:1,0),f=s.start,d=s.end;n(e.tr.step(new Gr(f-(c?3:1),d,f,d,h,1,!0)).scrollIntoView())}return!0}}function Ale(t){const e=new Map;if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return Ac(t,"definition",function(r){const i=IM(r.identifier);i&&!e.get(i)&&e.set(i,r)}),n;function n(r){const i=IM(r);return e.get(i)}}function IM(t){return String(t||"").toUpperCase()}function _le(){return function(t){const e=Ale(t);Ac(t,function(n,r,i){if(n.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[C3,r];if(n.type==="imageReference"||n.type==="linkReference"){const s=e(n.identifier);if(s&&i&&typeof r=="number")return i.children[r]=n.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:n.alt}:{type:"link",url:s.url,title:s.title,children:n.children},[C3,r]}})}}function YL(t,e){if(!(e.childCount>=1&&e.lastChild?.type.name==="hardbreak")){t.next(e.content);return}const r=[];e.content.forEach((i,s,o)=>{o!==e.childCount-1&&r.push(i)}),t.next(Ae.fromArray(r))}function be(t,e){return Object.assign(t,{meta:{package:"@milkdown/preset-commonmark",...e}}),t}const Nk=_m("emphasis");be(Nk,{displayName:"Attr<emphasis>",group:"Emphasis"});const hh=td("emphasis",t=>({attrs:{marker:{default:t.get(tp).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",t.get(Nk.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,n,r)=>{e.openMark(r,{marker:n.marker}),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,n)=>{e.withMark(n,"emphasis",void 0,{marker:n.attrs.marker})}}}));be(hh.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});be(hh.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const W2=_t("ToggleEmphasis",t=>()=>D2(hh.type(t)));be(W2,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const QL=Zr(t=>km(/(?:^|[^*])\*([^*]+)\*$/,hh.type(t),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:n})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:n+1}}));be(QL,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const UL=Zr(t=>km(/\b_(?![_\s])(.*?[^_\s])_\b/,hh.type(t),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:n})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:n+1}}));be(UL,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const Rk=ji("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:t=>{const e=t.get(at);return()=>e.call(W2.key)}}});be(Rk.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});be(Rk.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const Lk=_m("strong");be(Lk,{displayName:"Attr<strong>",group:"Strong"});const rd=td("strong",t=>({attrs:{marker:{default:t.get(tp).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",t.get(Lk.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,n,r)=>{e.openMark(r,{marker:n.marker}),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,n)=>{e.withMark(n,"strong",void 0,{marker:n.attrs.marker})}}}));be(rd.mark,{displayName:"MarkSchema<strong>",group:"Strong"});be(rd.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const j2=_t("ToggleStrong",t=>()=>D2(rd.type(t)));be(j2,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const GL=Zr(t=>km(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),rd.type(t),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));be(GL,{displayName:"InputRule<strong>",group:"Strong"});const $k=ji("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:t=>{const e=t.get(at);return()=>e.call(j2.key)}}});be($k.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});be($k.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const Bk=_m("inlineCode");be(Bk,{displayName:"Attr<inlineCode>",group:"InlineCode"});const ja=td("inlineCode",t=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",t.get(Bk.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,n,r)=>{e.openMark(r),e.addText(n.value),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,n,r)=>{e.withMark(n,"inlineCode",r.text||"")}}}));be(ja.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});be(ja.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const Y2=_t("ToggleInlineCode",t=>()=>(e,n)=>{const{selection:r,tr:i}=e;if(r.empty)return!1;const{from:s,to:o}=r;return e.doc.rangeHasMark(s,o,ja.type(t))?(n?.(i.removeMark(s,o,ja.type(t))),!0):(Object.keys(e.schema.marks).filter(c=>c!==ja.type.name).map(c=>e.schema.marks[c]).forEach(c=>{i.removeMark(s,o,c)}),n?.(i.addMark(s,o,ja.type(t).create())),!0)});be(Y2,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const KL=Zr(t=>km(/(?:`)([^`]+)(?:`)$/,ja.type(t)));be(KL,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const zk=ji("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:t=>{const e=t.get(at);return()=>e.call(Y2.key)}}});be(zk.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});be(zk.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const Fk=_m("link");be(Fk,{displayName:"Attr<link>",group:"Link"});const co=td("link",t=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw yo(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...t.get(Fk.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,n,r)=>{const i=n.url,s=n.title;e.openMark(r,{href:i,title:s}),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,n)=>{e.withMark(n,"link",void 0,{title:n.attrs.title,url:n.attrs.href})}}}));be(co.mark,{displayName:"MarkSchema<link>",group:"Link"});const XL=_t("ToggleLink",t=>(e={})=>D2(co.type(t),e));be(XL,{displayName:"Command<toggleLinkCommand>",group:"Link"});const ZL=_t("UpdateLink",t=>(e={})=>(n,r)=>{if(!r)return!1;let i,s=-1;const{selection:o}=n,{from:a,to:l}=o;if(n.doc.nodesBetween(a,a===l?l+1:l,(p,m)=>{if(co.type(t).isInSet(p.marks))return i=p,s=m,!1}),!i)return!1;const c=i.marks.find(({type:p})=>p===co.type(t));if(!c)return!1;const u=s,h=s+i.nodeSize,{tr:f}=n,d=co.type(t).create({...c.attrs,...e});return d?(r(f.removeMark(u,h,c).addMark(u,h,d).setSelection(new ct(f.selection.$anchor)).scrollIntoView()),!0):!1});be(ZL,{displayName:"Command<updateLinkCommand>",group:"Link"});const JL=Tk("doc",()=>({content:"block+",parseMarkdown:{match:({type:t})=>t==="root",runner:(t,e,n)=>{t.injectRoot(e,n)}},toMarkdown:{match:t=>t.type.name==="doc",runner:(t,e)=>{t.openNode("root"),t.next(e.content)}}}));be(JL,{displayName:"NodeSchema<doc>",group:"Doc"});function Dle(t){return ok(t,e=>e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes(e.value?.trim()),(e,n)=>{if(!n.length)return;const r=n[n.length-1];if(!r)return;const i=r.children.indexOf(e);i!==-1&&r.children.splice(i,1)},!0)}const Q2=ha("remark-preserve-empty-line",()=>()=>Dle);be(Q2.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});be(Q2.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const Hk=bo("paragraph");be(Hk,{displayName:"Attr<paragraph>",group:"Paragraph"});const wo=cr("paragraph",t=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",t.get(Hk.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,n,r)=>{e.openNode(r),n.children?e.next(n.children):e.addText(n.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,n)=>{const i=t.get(Tn).state?.doc.lastChild;e.openNode("paragraph"),(!n.content||n.content.size===0)&&n!==i&&Ele(t)?e.addNode("html",void 0,"<br />"):YL(e,n),e.closeNode()}}}));function Ele(t){let e=!1;try{t.get(Q2.id),e=!0}catch{e=!1}return e}be(wo.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});be(wo.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const Vk=_t("TurnIntoText",t=>()=>Hp(wo.type(t)));be(Vk,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const qk=ji("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:t=>{const e=t.get(at);return()=>e.call(Vk.key)}}});be(qk.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});be(qk.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const Ile=Array(6).fill(0).map((t,e)=>e+1);function Ple(t){return t.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const U2=bn(Ple,"headingIdGenerator");be(U2,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const Wk=bo("heading");be(Wk,{displayName:"Attr<heading>",group:"Heading"});const is=cr("heading",t=>{const e=t.get(U2.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:Ile.map(n=>({tag:`h${n}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw yo(r);return{level:n,id:r.id}}})),toDOM:n=>[`h${n.attrs.level}`,{...t.get(Wk.key)(n),id:n.attrs.id||e(n)},0],parseMarkdown:{match:({type:n})=>n==="heading",runner:(n,r,i)=>{const s=r.depth;n.openNode(i,{level:s}),n.next(r.children),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="heading",runner:(n,r)=>{n.openNode("heading",void 0,{depth:r.attrs.level}),YL(n,r),n.closeNode()}}}});be(is.node,{displayName:"NodeSchema<heading>",group:"Heading"});be(is.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const e$=Zr(t=>ek(/^(?<hashes>#+)\s$/,is.type(t),e=>{const n=e.groups?.hashes?.length||0,r=t.get(Tn),{$from:i}=r.state.selection,s=i.node();if(s.type.name==="heading"){let o=Number(s.attrs.level)+Number(n);return o>6&&(o=6),{level:o}}return{level:n}}));be(e$,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Yl=_t("WrapInHeading",t=>e=>(e??=1,e<1?Hp(wo.type(t)):Hp(is.type(t),{level:e})));be(Yl,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const jk=_t("DowngradeHeading",t=>()=>(e,n,r)=>{const{$from:i}=e.selection,s=i.node();if(s.type!==is.type(t)||!e.selection.empty||i.parentOffset!==0)return!1;const o=s.attrs.level-1;return o?(n?.(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...s.attrs,level:o})),!0):Hp(wo.type(t))(e,n,r)});be(jk,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const Yk=ji("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:t=>{const e=t.get(at);return()=>e.call(Yl.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:t=>{const e=t.get(at);return()=>e.call(Yl.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:t=>{const e=t.get(at);return()=>e.call(Yl.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:t=>{const e=t.get(at);return()=>e.call(Yl.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:t=>{const e=t.get(at);return()=>e.call(Yl.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:t=>{const e=t.get(at);return()=>e.call(Yl.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:t=>{const e=t.get(at);return()=>e.call(jk.key)}}});be(Yk.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});be(Yk.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Qk=bo("blockquote");be(Qk,{displayName:"Attr<blockquote>",group:"Blockquote"});const id=cr("blockquote",t=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",t.get(Qk.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,n,r)=>{e.openNode(r).next(n.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,n)=>{e.openNode("blockquote").next(n.content).closeNode()}}}));be(id.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});be(id.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const t$=Zr(t=>Jx(/^\s*>\s$/,id.type(t)));be(t$,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const Uk=_t("WrapInBlockquote",t=>()=>pk(id.type(t)));be(Uk,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const Gk=ji("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:t=>{const e=t.get(at);return()=>e.call(Uk.key)}}});be(Gk.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});be(Gk.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const Kk=bo("codeBlock",()=>({pre:{},code:{}}));be(Kk,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const oa=cr("code_block",t=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw yo(e);return{language:e.dataset.language}}}],toDOM:e=>{const n=t.get(Kk.key)(e),r=e.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...n.pre,...i},["code",n.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,n,r)=>{const i=n.lang??"",s=n.value;e.openNode(r,{language:i}),s&&e.addText(s),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,n)=>{e.addNode("code",void 0,n.content.firstChild?.text||"",{lang:n.attrs.language})}}}));be(oa.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});be(oa.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const n$=Zr(t=>ek(/^```(?<language>[a-z]*)?[\s\n]$/,oa.type(t),e=>({language:e.groups?.language??""})));be(n$,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const Xk=_t("CreateCodeBlock",t=>(e="")=>Hp(oa.type(t),{language:e}));be(Xk,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const Nle=_t("UpdateCodeBlockLanguage",()=>({pos:t,language:e}={pos:-1,language:""})=>(n,r)=>t>=0?(r?.(n.tr.setNodeAttribute(t,"language",e)),!0):!1);be(Nle,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const Zk=ji("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:t=>{const e=t.get(at);return()=>e.call(Xk.key)}}});be(Zk.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});be(Zk.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const Jk=bo("image");be(Jk,{displayName:"Attr<image>",group:"Image"});const fh=cr("image",t=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw yo(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...t.get(Jk.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,n,r)=>{const i=n.url,s=n.alt,o=n.title;e.addNode(r,{src:i,alt:s,title:o})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,n)=>{e.addNode("image",void 0,void 0,{title:n.attrs.title,url:n.attrs.src,alt:n.attrs.alt})}}}));be(fh.node,{displayName:"NodeSchema<image>",group:"Image"});be(fh.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const r$=_t("InsertImage",t=>(e={})=>(n,r)=>{if(!r)return!0;const{src:i="",alt:s="",title:o=""}=e,a=fh.type(t).create({src:i,alt:s,title:o});return a&&r(n.tr.replaceSelectionWith(a).scrollIntoView()),!0});be(r$,{displayName:"Command<insertImageCommand>",group:"Image"});const i$=_t("UpdateImage",t=>(e={})=>(n,r)=>{const i=Ite(n.selection,fh.type(t));if(!i)return!1;const{node:s,pos:o}=i,a={...s.attrs},{src:l,alt:c,title:u}=e;return l!==void 0&&(a.src=l),c!==void 0&&(a.alt=c),u!==void 0&&(a.title=u),r?.(n.tr.setNodeMarkup(o,void 0,a).scrollIntoView()),!0});be(i$,{displayName:"Command<updateImageCommand>",group:"Image"});const Rle=Zr(t=>new Vi(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,n,r,i)=>{const[s,o,a="",l]=n;return s?e.tr.replaceWith(r,i,fh.type(t).create({src:a,alt:o,title:l})):null}));be(Rle,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const hy=bo("hardbreak",t=>({"data-type":"hardbreak","data-is-inline":t.attrs.isInline}));be(hy,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Pu=cr("hardbreak",t=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",t.get(hy.key)(e)," "]:["br",t.get(hy.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,n,r)=>{e.addNode(r,{isInline:!!n.data?.isInline})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,n)=>{n.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));be(Pu.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});be(Pu.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const e6=_t("InsertHardbreak",t=>()=>(e,n)=>{const{selection:r,tr:i}=e;if(!(r instanceof ct))return!1;if(r.empty){const s=r.$from.node();if(s.childCount>0&&s.lastChild?.type.name==="hardbreak")return n?.(i.replaceRangeWith(r.to-1,r.to,e.schema.node("paragraph")).setSelection(Dt.near(i.doc.resolve(r.to))).scrollIntoView()),!0}return n?.(i.setMeta("hardbreak",!0).replaceSelectionWith(Pu.type(t).create()).scrollIntoView()),!0});be(e6,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const t6=ji("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:t=>{const e=t.get(at);return()=>e.call(e6.key)}}});be(t6.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});be(t6.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const n6=bo("hr");be(n6,{displayName:"Attr<hr>",group:"Hr"});const sd=cr("hr",t=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",t.get(n6.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,n,r)=>{e.addNode(r)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));be(sd.node,{displayName:"NodeSchema<hr>",group:"Hr"});be(sd.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const s$=Zr(t=>new Vi(/^(?:---|___\s|\*\*\*\s)$/,(e,n,r,i)=>{const{tr:s}=e;return n[0]&&s.replaceWith(r-1,i,sd.type(t).create()),s}));be(s$,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const o$=_t("InsertHr",t=>()=>(e,n)=>{if(!n)return!0;const r=wo.node.type(t).create(),{tr:i,selection:s}=e,{from:o}=s,a=sd.type(t).create();if(!a)return!0;const l=i.replaceSelectionWith(a).insert(o,r),c=Dt.findFrom(l.doc.resolve(o),1,!0);return c&&n(l.setSelection(c).scrollIntoView()),!0});be(o$,{displayName:"Command<insertHrCommand>",group:"Hr"});const r6=bo("bulletList");be(r6,{displayName:"Attr<bulletList>",group:"BulletList"});const dh=cr("bullet_list",t=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw yo(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...t.get(r6.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:n})=>e==="list"&&!n,runner:(e,n,r)=>{const i=n.spread!=null?`${n.spread}`:"false";e.openNode(r,{spread:i}).next(n.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,n)=>{e.openNode("list",void 0,{ordered:!1,spread:n.attrs.spread}).next(n.content).closeNode()}}}));be(dh.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});be(dh.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const a$=Zr(t=>Jx(/^\s*([-+*])\s$/,dh.type(t)));be(a$,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const i6=_t("WrapInBulletList",t=>()=>pk(dh.type(t)));be(i6,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const s6=ji("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:t=>{const e=t.get(at);return()=>e.call(i6.key)}}});be(s6.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});be(s6.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const o6=bo("orderedList");be(o6,{displayName:"Attr<orderedList>",group:"OrderedList"});const ph=cr("ordered_list",t=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw yo(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...t.get(o6.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:n})=>e==="list"&&!!n,runner:(e,n,r)=>{const i=n.spread!=null?`${n.spread}`:"true";e.openNode(r,{spread:i}).next(n.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,n)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:n.attrs.spread==="true"}),e.next(n.content),e.closeNode()}}}));be(ph.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});be(ph.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const l$=Zr(t=>Jx(/^\s*(\d+)\.\s$/,ph.type(t),e=>({order:Number(e[1])}),(e,n)=>n.childCount+n.attrs.order===Number(e[1])));be(l$,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const a6=_t("WrapInOrderedList",t=>()=>pk(ph.type(t)));be(a6,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const l6=ji("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:t=>{const e=t.get(at);return()=>e.call(a6.key)}}});be(l6.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});be(l6.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const c6=bo("listItem");be(c6,{displayName:"Attr<listItem>",group:"ListItem"});const xo=cr("list_item",t=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw yo(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...t.get(c6.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,n,r)=>{const i=n.label!=null?`${n.label}.`:"",s=n.label!=null?"ordered":"bullet",o=n.spread!=null?`${n.spread}`:"true";e.openNode(r,{label:i,listType:s,spread:o}),e.next(n.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,n)=>{e.openNode("listItem",void 0,{spread:n.attrs.spread}),e.next(n.content),e.closeNode()}}}));be(xo.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});be(xo.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const u6=_t("SinkListItem",t=>()=>Tle(xo.type(t)));be(u6,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const h6=_t("LiftListItem",t=>()=>Cle(xo.type(t)));be(h6,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const f6=_t("SplitListItem",t=>()=>Sle(xo.type(t)));be(f6,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function Lle(t){return(e,n,r)=>{const{selection:i}=e;if(!(i instanceof ct))return!1;const{empty:s,$from:o}=i;return!s||o.parentOffset!==0||o.node(-1).type!==xo.type(t)?!1:PR(e,n,r)}}const d6=_t("LiftFirstListItem",t=>()=>Lle(t));be(d6,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const p6=ji("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:t=>{const e=t.get(at);return()=>e.call(f6.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:t=>{const e=t.get(at);return()=>e.call(u6.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:t=>{const e=t.get(at);return()=>e.call(h6.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:t=>{const e=t.get(at);return()=>e.call(d6.key)}}});be(p6.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});be(p6.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const c$=Tk("text",()=>({group:"inline",parseMarkdown:{match:({type:t})=>t==="text",runner:(t,e)=>{t.addText(e.value)}},toMarkdown:{match:t=>t.type.name==="text",runner:(t,e)=>{t.addNode("text",void 0,e.text)}}}));be(c$,{displayName:"NodeSchema<text>",group:"Text"});const m6=bo("html");be(m6,{displayName:"Attr<html>",group:"Html"});const g6=cr("html",t=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const n=document.createElement("span"),r={...t.get(m6.key)(e),"data-value":e.attrs.value,"data-type":"html"};return n.textContent=e.attrs.value,["span",r,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,n,r)=>{e.addNode(r,{value:n.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,n)=>{e.addNode("html",void 0,n.attrs.value)}}}));be(g6.node,{displayName:"NodeSchema<html>",group:"Html"});be(g6.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const $le=[JL,Hk,wo,U2,Wk,is,hy,Pu,Qk,id,Kk,oa,n6,sd,Jk,fh,r6,dh,o6,ph,c6,xo,Nk,hh,Lk,rd,Bk,ja,Fk,co,m6,g6,c$].flat(),Ble=[t$,a$,l$,n$,s$,e$].flat(),zle=[QL,UL,KL,GL],Ph=_t("IsMarkSelected",()=>t=>e=>{if(!t)return!1;const{doc:n,selection:r}=e;return n.rangeHasMark(r.from,r.to,t)}),u$=_t("IsNoteSelected",()=>t=>e=>t?KN(e,t).hasNode:!1),Ir=_t("ClearTextInCurrentBlock",()=>()=>(t,e)=>{let n=t.tr;const{$from:r,$to:i}=n.selection,{pos:s}=r,{pos:o}=i,a=s-r.node().content.size;return a<0?!1:(n=n.deleteRange(a,o),e?.(n),!0)}),_a=_t("SetBlockType",()=>t=>(e,n)=>{const{nodeType:r,attrs:i=null}=t??{};if(!r)return!1;const s=e.tr,{from:o,to:a}=s.selection;try{s.setBlockType(o,a,r,i)}catch{return!1}return n?.(s),!0}),u0=_t("WrapInBlockType",()=>t=>(e,n)=>{const{nodeType:r,attrs:i=null}=t??{};if(!r)return!1;let s=e.tr;try{const{$from:o,$to:a}=s.selection,l=o.blockRange(a),c=l&&Xx(l,r,i);if(!c)return!1;s=s.wrap(l,c)}catch{return!1}return n?.(s),!0}),h0=_t("AddBlockType",()=>t=>(e,n)=>{const{nodeType:r,attrs:i=null}=t??{};if(!r)return!1;const s=e.tr;try{const o=r instanceof Ka?r:r.createAndFill(i);if(!o)return!1;s.replaceSelectionWith(o)}catch{return!1}return n?.(s),!0}),h$=_t("SelectTextNearPos",()=>t=>(e,n)=>{const{pos:r}=t??{};if(r==null)return!1;const i=(o,a,l)=>Math.min(Math.max(o,a),l),s=e.tr;try{const o=e.doc.resolve(i(r,0,e.doc.content.size));s.setSelection(ct.near(o))}catch{return!1}return n?.(s.scrollIntoView()),!0}),Fle=[Vk,Uk,Yl,jk,Xk,e6,o$,r$,i$,a6,i6,u6,f6,h6,d6,W2,Y2,j2,XL,ZL,Ph,u$,Ir,_a,u0,h0,h$],Hle=[Gk,Zk,t6,Yk,p6,l6,s6,qk,Rk,zk,$k].flat(),v6=ha("remarkAddOrderInList",()=>()=>t=>{Ac(t,"list",e=>{if(e.ordered){const n=e.start??1;e.children.forEach((r,i)=>{r.label=i+n})}})});be(v6.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});be(v6.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const y6=ha("remarkLineBreak",()=>()=>t=>{const e=/[\t ]*(?:\r?\n|\r)/g;Ac(t,"text",(n,r,i)=>{if(!n.value||typeof n.value!="string")return;const s=[];let o=0;e.lastIndex=0;let a=e.exec(n.value);for(;a;){const c=a.index;o!==c&&s.push({type:"text",value:n.value.slice(o,c)}),s.push({type:"break",data:{isInline:!0}}),o=c+a[0].length,a=e.exec(n.value)}if(s.length>0&&i&&typeof r=="number")return o<n.value.length&&s.push({type:"text",value:n.value.slice(o)}),i.children.splice(r,1,...s),r+s.length})});be(y6.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});be(y6.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const b6=ha("remarkInlineLink",()=>_le);be(b6.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});be(b6.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const Vle=t=>!!t.children,qle=t=>t.type==="html";function Wle(t,e){return n(t,0,null)[0];function n(r,i,s){if(Vle(r)){const o=[];for(let a=0,l=r.children.length;a<l;a++){const c=r.children[a];if(c){const u=n(c,a,r);if(u)for(let h=0,f=u.length;h<f;h++){const d=u[h];d&&o.push(d)}}}r.children=o}return e(r,i,s)}}const jle=["root","blockquote","listItem"],w6=ha("remarkHTMLTransformer",()=>()=>t=>{Wle(t,(e,n,r)=>qle(e)?(r&&jle.includes(r.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});be(w6.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});be(w6.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const x6=ha("remarkMarker",()=>()=>(t,e)=>{const n=r=>e.value.charAt(r.position.start.offset);Ac(t,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=n(r)})});be(x6.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});be(x6.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const f$=vr(()=>{let t=!1;const e=new jn("MILKDOWN_INLINE_NODES_CURSOR"),n=new Wn({key:e,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,s=i.nodeBefore,o=i.nodeAfter;return!!(s&&o&&s.isInline&&!s.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>t?(t=!1,requestAnimationFrame(()=>{if(n.getState(r.state)){const o=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",o))}}),!0):!1,compositionstart:r=>(n.getState(r.state)&&(t=!0),!1),beforeinput:(r,i)=>{if(n.getState(r.state)&&i instanceof InputEvent&&i.data&&!t){const o=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",o)),!0}return!1}},decorations(r){if(n.getState(r)){const o=r.selection.$from.pos,a=document.createElement("span"),l=pr.widget(o,a,{side:-1}),c=document.createElement("span"),u=pr.widget(o,c);return setTimeout(()=>{a.contentEditable="true",c.contentEditable="true"}),Mn.create(r.doc,[l,u])}return Mn.empty}}});return n});be(f$,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const d$=vr(t=>new Wn({key:new jn("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,n,r)=>{if(!e.length)return;const[i]=e;if(!i)return;const[s]=i.steps;if(i.getMeta("hardbreak")){if(!(s instanceof Cr))return;const{from:l}=s;return r.tr.setNodeMarkup(l,Pu.type(t),void 0,[])}if(s instanceof qa){let l=r.tr;const{from:c,to:u}=s;return r.doc.nodesBetween(c,u,(h,f)=>{h.type===Pu.type(t)&&(l=l.setNodeMarkup(f,Pu.type(t),void 0,[]))}),l}}}));be(d$,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const k6=bn(["table","code_block"],"hardbreakFilterNodes");be(k6,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const p$=vr(t=>{const e=t.get(k6.key);return new Wn({key:new jn("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(n,r)=>{const i=n.getMeta("hardbreak"),[s]=n.steps;if(i&&s){const{from:o}=s,a=r.doc.resolve(o);let l=a.depth,c=!0;for(;l>0;)e.includes(a.node(l).type.name)&&(c=!1),l--;return c}return!0}})});be(p$,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const m$=vr(t=>{const e=new jn("MILKDOWN_HEADING_ID"),n=r=>{if(r.composing)return;const i=t.get(U2.key),s=r.state.tr.setMeta("addToHistory",!1);let o=!1;const a={};r.state.doc.descendants((l,c)=>{if(l.type===is.type(t)){if(l.textContent.trim().length===0)return;const u=l.attrs;let h=i(l);a[h]?(a[h]+=1,h+=`-#${a[h]}`):a[h]=1,u.id!==h&&(o=!0,s.setMeta(e,!0).setNodeMarkup(c,void 0,{...u,id:h}))}}),o&&r.dispatch(s)};return new Wn({key:e,view:r=>(n(r),{update:(i,s)=>{i.state.doc.eq(s.doc)||n(i)}})})});be(m$,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const g$=vr(t=>{const e=(n,r,i)=>{if(!i.selection||n.some(h=>h.getMeta("addToHistory")===!1||!h.isGeneric))return null;const s=ph.type(t),o=dh.type(t),a=xo.type(t),l=(h,f)=>{let d=!1;const p=`${f+1}.`;return h.label!==p&&(h.label=p,d=!0),d};let c=i.tr,u=!1;return i.doc.descendants((h,f,d,p)=>{if(h.type===o){const m=h.maybeChild(0);m?.type===a&&m.attrs.listType==="ordered"&&(u=!0,c.setNodeMarkup(f,s,{spread:"true"}),h.descendants((g,v,b,S)=>{if(g.type===a){const O={...g.attrs};l(O,S)&&(c=c.setNodeMarkup(v,void 0,O))}return!1}))}else if(h.type===a&&d?.type===s){const m={...h.attrs};let g=!1;m.listType!=="ordered"&&(m.listType="ordered",g=!0),d?.maybeChild(0)&&(g=l(m,p)),g&&(c=c.setNodeMarkup(f,void 0,m),u=!0)}}),u?c.setMeta("addToHistory",!1):null};return new Wn({key:new jn("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:e})});be(g$,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const Yle=[d$,k6,p$,f$,v6,b6,y6,w6,x6,Q2,m$,g$].flat(),Qle=[$le,Ble,zle,Fle,Hle,Yle].flat();function Ule(t){const e=bn({},`${t}_SLASH_SPEC`),n=vr(i=>{const s=i.get(e.key);return new Wn({key:new jn(`${t}_SLASH`),...s})}),r=[e,n];return r.key=e.key,r.pluginKey=n.key,e.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${t}`},n.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${t}`},r}class Gle{constructor(e){this.#t=!1,this.onShow=()=>{},this.onHide=()=>{},this.#u=(n,r)=>{const{state:i,composing:s}=n,{selection:o,doc:a}=i,{ranges:l}=o,c=Math.min(...l.map(d=>d.$from.pos)),u=Math.max(...l.map(d=>d.$to.pos)),h=r&&r.doc.eq(a)&&r.selection.eq(o);if(this.#t||((this.#n??n.dom.parentElement??document.body).appendChild(this.element),this.#t=!0),s||h)return;if(!this.#s(n,r)){this.hide();return}sa({getBoundingClientRect:()=>O2(n,c,u)},this.element,{placement:"bottom-start",middleware:[Ek(),eh(this.#l),...this.#e],...this.#r}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()},this.update=(n,r)=>{this.#o(n,r)},this.getContent=(n,r=i=>i.type.name==="paragraph")=>{const{selection:i}=n.state,{empty:s,$from:o}=i,a=n.state.selection instanceof ct;if(typeof document>"u")return;const l=this.element.contains(document.activeElement),c=!n.hasFocus()&&!l,u=!n.editable,f=!Ete(r)(n.state.selection);if(!(c||u||!s||!a||f))return o.parent.textBetween(Math.max(0,o.parentOffset-500),o.parentOffset,void 0,"")},this.destroy=()=>{this.#o.cancel()},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=e.content,this.#a=e.debounce??200,this.#s=e.shouldShow??this.#c,this.#i=e.trigger??"/",this.#l=e.offset,this.#e=e.middleware??[],this.#r=e.floatingUIOptions??{},this.#n=e.root,this.#o=o2(this.#u,this.#a)}#t;#e;#r;#n;#a;#i;#s;#o;#l;#u;#c(e){const n=this.getContent(e);if(!n)return!1;const r=n.at(-1);return r?Array.isArray(this.#i)?this.#i.includes(r):this.#i===r:!1}}function v$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=v$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kr(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=v$(t))&&(r&&(r+=" "),r+=e);return r}const{entries:y$,setPrototypeOf:PM,isFrozen:Kle,getPrototypeOf:Xle,getOwnPropertyDescriptor:Zle}=Object;let{freeze:yi,seal:Hs,create:Q3}=Object,{apply:U3,construct:G3}=typeof Reflect<"u"&&Reflect;yi||(yi=function(e){return e});Hs||(Hs=function(e){return e});U3||(U3=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return e.apply(n,i)});G3||(G3=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const A1=bi(Array.prototype.forEach),Jle=bi(Array.prototype.lastIndexOf),NM=bi(Array.prototype.pop),Nd=bi(Array.prototype.push),ece=bi(Array.prototype.splice),Hg=bi(String.prototype.toLowerCase),i5=bi(String.prototype.toString),s5=bi(String.prototype.match),Rd=bi(String.prototype.replace),tce=bi(String.prototype.indexOf),nce=bi(String.prototype.trim),to=bi(Object.prototype.hasOwnProperty),ri=bi(RegExp.prototype.test),Ld=rce(TypeError);function bi(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return U3(t,e,r)}}function rce(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return G3(t,n)}}function qt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hg;PM&&PM(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(Kle(e)||(e[r]=s),i=s)}t[i]=!0}return t}function ice(t){for(let e=0;e<t.length;e++)to(t,e)||(t[e]=null);return t}function Po(t){const e=Q3(null);for(const[n,r]of y$(t))to(t,n)&&(Array.isArray(r)?e[n]=ice(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Po(r):e[n]=r);return e}function $d(t,e){for(;t!==null;){const r=Zle(t,e);if(r){if(r.get)return bi(r.get);if(typeof r.value=="function")return bi(r.value)}t=Xle(t)}function n(){return null}return n}const RM=yi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),o5=yi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),a5=yi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sce=yi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),l5=yi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oce=yi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),LM=yi(["#text"]),$M=yi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),c5=yi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),BM=yi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_1=yi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ace=Hs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lce=Hs(/<%[\w\W]*|[\w\W]*%>/gm),cce=Hs(/\$\{[\w\W]*/gm),uce=Hs(/^data-[\-\w.\u00B7-\uFFFF]+$/),hce=Hs(/^aria-[\-\w]+$/),b$=Hs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fce=Hs(/^(?:\w+script|data):/i),dce=Hs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),w$=Hs(/^html$/i),pce=Hs(/^[a-z][.\w]*(-[.\w]+)+$/i);var zM=Object.freeze({__proto__:null,ARIA_ATTR:hce,ATTR_WHITESPACE:dce,CUSTOM_ELEMENT:pce,DATA_ATTR:uce,DOCTYPE_NAME:w$,ERB_EXPR:lce,IS_ALLOWED_URI:b$,IS_SCRIPT_OR_DATA:fce,MUSTACHE_EXPR:ace,TMPLIT_EXPR:cce});const Bd={element:1,text:3,progressingInstruction:7,comment:8,document:9},mce=function(){return typeof window>"u"?null:window},gce=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},FM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function x$(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mce();const e=ht=>x$(ht);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==Bd.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:d}=t,p=l.prototype,m=$d(p,"cloneNode"),g=$d(p,"remove"),v=$d(p,"nextSibling"),b=$d(p,"childNodes"),S=$d(p,"parentNode");if(typeof o=="function"){const ht=n.createElement("template");ht.content&&ht.content.ownerDocument&&(n=ht.content.ownerDocument)}let O,k="";const{implementation:C,createNodeIterator:T,createDocumentFragment:R,getElementsByTagName:L}=n,{importNode:I}=r;let F=FM();e.isSupported=typeof y$=="function"&&typeof S=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:ee,TMPLIT_EXPR:G,DATA_ATTR:W,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:ne,CUSTOM_ELEMENT:ye}=zM;let{IS_ALLOWED_URI:A}=zM,fe=null;const he=qt({},[...RM,...o5,...a5,...l5,...LM]);let P=null;const Ue=qt({},[...$M,...c5,...BM,..._1]);let je=Object.seal(Q3(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),st=null,dt=null;const bt=Object.seal(Q3(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Nt=!0,Ot=!0,Kt=!1,$=!0,V=!1,ie=!0,pe=!1,ge=!1,ve=!1,De=!1,Te=!1,Me=!1,we=!0,tt=!1;const qe="user-content-";let Xe=!0,it=!1,J={},de=null;const Ve=qt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let lt=null;const gt=qt({},["audio","video","img","source","image","track"]);let Xt=null;const sn=qt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),an="http://www.w3.org/1998/Math/MathML",Yn="http://www.w3.org/2000/svg",Ht="http://www.w3.org/1999/xhtml";let $t=Ht,xe=!1,B=null;const Ce=qt({},[an,Yn,Ht],i5);let Fe=qt({},["mi","mo","mn","ms","mtext"]),kt=qt({},["annotation-xml"]);const dn=qt({},["title","style","font","a","script"]);let Cn=null;const ur=["application/xhtml+xml","text/html"],Qi="text/html";let ln=null,ni=null;const ir=n.createElement("form"),Xs=function(j){return j instanceof RegExp||j instanceof Function},Ui=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ni&&ni===j)){if((!j||typeof j!="object")&&(j={}),j=Po(j),Cn=ur.indexOf(j.PARSER_MEDIA_TYPE)===-1?Qi:j.PARSER_MEDIA_TYPE,ln=Cn==="application/xhtml+xml"?i5:Hg,fe=to(j,"ALLOWED_TAGS")?qt({},j.ALLOWED_TAGS,ln):he,P=to(j,"ALLOWED_ATTR")?qt({},j.ALLOWED_ATTR,ln):Ue,B=to(j,"ALLOWED_NAMESPACES")?qt({},j.ALLOWED_NAMESPACES,i5):Ce,Xt=to(j,"ADD_URI_SAFE_ATTR")?qt(Po(sn),j.ADD_URI_SAFE_ATTR,ln):sn,lt=to(j,"ADD_DATA_URI_TAGS")?qt(Po(gt),j.ADD_DATA_URI_TAGS,ln):gt,de=to(j,"FORBID_CONTENTS")?qt({},j.FORBID_CONTENTS,ln):Ve,st=to(j,"FORBID_TAGS")?qt({},j.FORBID_TAGS,ln):Po({}),dt=to(j,"FORBID_ATTR")?qt({},j.FORBID_ATTR,ln):Po({}),J=to(j,"USE_PROFILES")?j.USE_PROFILES:!1,Nt=j.ALLOW_ARIA_ATTR!==!1,Ot=j.ALLOW_DATA_ATTR!==!1,Kt=j.ALLOW_UNKNOWN_PROTOCOLS||!1,$=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,V=j.SAFE_FOR_TEMPLATES||!1,ie=j.SAFE_FOR_XML!==!1,pe=j.WHOLE_DOCUMENT||!1,De=j.RETURN_DOM||!1,Te=j.RETURN_DOM_FRAGMENT||!1,Me=j.RETURN_TRUSTED_TYPE||!1,ve=j.FORCE_BODY||!1,we=j.SANITIZE_DOM!==!1,tt=j.SANITIZE_NAMED_PROPS||!1,Xe=j.KEEP_CONTENT!==!1,it=j.IN_PLACE||!1,A=j.ALLOWED_URI_REGEXP||b$,$t=j.NAMESPACE||Ht,Fe=j.MATHML_TEXT_INTEGRATION_POINTS||Fe,kt=j.HTML_INTEGRATION_POINTS||kt,je=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&Xs(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(je.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&Xs(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(je.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(je.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),V&&(Ot=!1),Te&&(De=!0),J&&(fe=qt({},LM),P=[],J.html===!0&&(qt(fe,RM),qt(P,$M)),J.svg===!0&&(qt(fe,o5),qt(P,c5),qt(P,_1)),J.svgFilters===!0&&(qt(fe,a5),qt(P,c5),qt(P,_1)),J.mathMl===!0&&(qt(fe,l5),qt(P,BM),qt(P,_1))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?bt.tagCheck=j.ADD_TAGS:(fe===he&&(fe=Po(fe)),qt(fe,j.ADD_TAGS,ln))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?bt.attributeCheck=j.ADD_ATTR:(P===Ue&&(P=Po(P)),qt(P,j.ADD_ATTR,ln))),j.ADD_URI_SAFE_ATTR&&qt(Xt,j.ADD_URI_SAFE_ATTR,ln),j.FORBID_CONTENTS&&(de===Ve&&(de=Po(de)),qt(de,j.FORBID_CONTENTS,ln)),j.ADD_FORBID_CONTENTS&&(de===Ve&&(de=Po(de)),qt(de,j.ADD_FORBID_CONTENTS,ln)),Xe&&(fe["#text"]=!0),pe&&qt(fe,["html","head","body"]),fe.table&&(qt(fe,["tbody"]),delete st.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ld('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ld('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');O=j.TRUSTED_TYPES_POLICY,k=O.createHTML("")}else O===void 0&&(O=gce(d,i)),O!==null&&typeof k=="string"&&(k=O.createHTML(""));yi&&yi(j),ni=j}},Gi=qt({},[...o5,...a5,...sce]),Ki=qt({},[...l5,...oce]),Ml=function(j){let Le=S(j);(!Le||!Le.tagName)&&(Le={namespaceURI:$t,tagName:"template"});const ot=Hg(j.tagName),pn=Hg(Le.tagName);return B[j.namespaceURI]?j.namespaceURI===Yn?Le.namespaceURI===Ht?ot==="svg":Le.namespaceURI===an?ot==="svg"&&(pn==="annotation-xml"||Fe[pn]):!!Gi[ot]:j.namespaceURI===an?Le.namespaceURI===Ht?ot==="math":Le.namespaceURI===Yn?ot==="math"&&kt[pn]:!!Ki[ot]:j.namespaceURI===Ht?Le.namespaceURI===Yn&&!kt[pn]||Le.namespaceURI===an&&!Fe[pn]?!1:!Ki[ot]&&(dn[ot]||!Gi[ot]):!!(Cn==="application/xhtml+xml"&&B[j.namespaceURI]):!1},Hr=function(j){Nd(e.removed,{element:j});try{S(j).removeChild(j)}catch{g(j)}},xs=function(j,Le){try{Nd(e.removed,{attribute:Le.getAttributeNode(j),from:Le})}catch{Nd(e.removed,{attribute:null,from:Le})}if(Le.removeAttribute(j),j==="is")if(De||Te)try{Hr(Le)}catch{}else try{Le.setAttribute(j,"")}catch{}},Lc=function(j){let Le=null,ot=null;if(ve)j="<remove></remove>"+j;else{const Nn=s5(j,/^[\r\n\t ]+/);ot=Nn&&Nn[0]}Cn==="application/xhtml+xml"&&$t===Ht&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const pn=O?O.createHTML(j):j;if($t===Ht)try{Le=new f().parseFromString(pn,Cn)}catch{}if(!Le||!Le.documentElement){Le=C.createDocument($t,"template",null);try{Le.documentElement.innerHTML=xe?k:pn}catch{}}const zn=Le.body||Le.documentElement;return j&&ot&&zn.insertBefore(n.createTextNode(ot),zn.childNodes[0]||null),$t===Ht?L.call(Le,pe?"html":"body")[0]:pe?Le.documentElement:zn},$c=function(j){return T.call(j.ownerDocument||j,j,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Tl=function(j){return j instanceof h&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof u)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},Bc=function(j){return typeof a=="function"&&j instanceof a};function xi(ht,j,Le){A1(ht,ot=>{ot.call(e,j,Le,ni)})}const zc=function(j){let Le=null;if(xi(F.beforeSanitizeElements,j,null),Tl(j))return Hr(j),!0;const ot=ln(j.nodeName);if(xi(F.uponSanitizeElement,j,{tagName:ot,allowedTags:fe}),ie&&j.hasChildNodes()&&!Bc(j.firstElementChild)&&ri(/<[/\w!]/g,j.innerHTML)&&ri(/<[/\w!]/g,j.textContent)||j.nodeType===Bd.progressingInstruction||ie&&j.nodeType===Bd.comment&&ri(/<[/\w]/g,j.data))return Hr(j),!0;if(!(bt.tagCheck instanceof Function&&bt.tagCheck(ot))&&(!fe[ot]||st[ot])){if(!st[ot]&&Hc(ot)&&(je.tagNameCheck instanceof RegExp&&ri(je.tagNameCheck,ot)||je.tagNameCheck instanceof Function&&je.tagNameCheck(ot)))return!1;if(Xe&&!de[ot]){const pn=S(j)||j.parentNode,zn=b(j)||j.childNodes;if(zn&&pn){const Nn=zn.length;for(let Qn=Nn-1;Qn>=0;--Qn){const ki=m(zn[Qn],!0);ki.__removalCount=(j.__removalCount||0)+1,pn.insertBefore(ki,v(j))}}}return Hr(j),!0}return j instanceof l&&!Ml(j)||(ot==="noscript"||ot==="noembed"||ot==="noframes")&&ri(/<\/no(script|embed|frames)/i,j.innerHTML)?(Hr(j),!0):(V&&j.nodeType===Bd.text&&(Le=j.textContent,A1([E,ee,G],pn=>{Le=Rd(Le,pn," ")}),j.textContent!==Le&&(Nd(e.removed,{element:j.cloneNode()}),j.textContent=Le)),xi(F.afterSanitizeElements,j,null),!1)},Fc=function(j,Le,ot){if(we&&(Le==="id"||Le==="name")&&(ot in n||ot in ir))return!1;if(!(Ot&&!dt[Le]&&ri(W,Le))){if(!(Nt&&ri(X,Le))){if(!(bt.attributeCheck instanceof Function&&bt.attributeCheck(Le,j))){if(!P[Le]||dt[Le]){if(!(Hc(j)&&(je.tagNameCheck instanceof RegExp&&ri(je.tagNameCheck,j)||je.tagNameCheck instanceof Function&&je.tagNameCheck(j))&&(je.attributeNameCheck instanceof RegExp&&ri(je.attributeNameCheck,Le)||je.attributeNameCheck instanceof Function&&je.attributeNameCheck(Le,j))||Le==="is"&&je.allowCustomizedBuiltInElements&&(je.tagNameCheck instanceof RegExp&&ri(je.tagNameCheck,ot)||je.tagNameCheck instanceof Function&&je.tagNameCheck(ot))))return!1}else if(!Xt[Le]){if(!ri(A,Rd(ot,ne,""))){if(!((Le==="src"||Le==="xlink:href"||Le==="href")&&j!=="script"&&tce(ot,"data:")===0&&lt[j])){if(!(Kt&&!ri(te,Rd(ot,ne,"")))){if(ot)return!1}}}}}}}return!0},Hc=function(j){return j!=="annotation-xml"&&s5(j,ye)},Vc=function(j){xi(F.beforeSanitizeAttributes,j,null);const{attributes:Le}=j;if(!Le||Tl(j))return;const ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P,forceKeepAttr:void 0};let pn=Le.length;for(;pn--;){const zn=Le[pn],{name:Nn,namespaceURI:Qn,value:ki}=zn,Si=ln(Nn),Mo=ki;let er=Nn==="value"?Mo:nce(Mo);if(ot.attrName=Si,ot.attrValue=er,ot.keepAttr=!0,ot.forceKeepAttr=void 0,xi(F.uponSanitizeAttribute,j,ot),er=ot.attrValue,tt&&(Si==="id"||Si==="name")&&(xs(Nn,j),er=qe+er),ie&&ri(/((--!?|])>)|<\/(style|title|textarea)/i,er)){xs(Nn,j);continue}if(Si==="attributename"&&s5(er,"href")){xs(Nn,j);continue}if(ot.forceKeepAttr)continue;if(!ot.keepAttr){xs(Nn,j);continue}if(!$&&ri(/\/>/i,er)){xs(Nn,j);continue}V&&A1([E,ee,G],wa=>{er=Rd(er,wa," ")});const qc=ln(j.nodeName);if(!Fc(qc,Si,er)){xs(Nn,j);continue}if(O&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!Qn)switch(d.getAttributeType(qc,Si)){case"TrustedHTML":{er=O.createHTML(er);break}case"TrustedScriptURL":{er=O.createScriptURL(er);break}}if(er!==Mo)try{Qn?j.setAttributeNS(Qn,Nn,er):j.setAttribute(Nn,er),Tl(j)?Hr(j):NM(e.removed)}catch{xs(Nn,j)}}xi(F.afterSanitizeAttributes,j,null)},wh=function ht(j){let Le=null;const ot=$c(j);for(xi(F.beforeSanitizeShadowDOM,j,null);Le=ot.nextNode();)xi(F.uponSanitizeShadowNode,Le,null),zc(Le),Vc(Le),Le.content instanceof s&&ht(Le.content);xi(F.afterSanitizeShadowDOM,j,null)};return e.sanitize=function(ht){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=null,ot=null,pn=null,zn=null;if(xe=!ht,xe&&(ht="<!-->"),typeof ht!="string"&&!Bc(ht))if(typeof ht.toString=="function"){if(ht=ht.toString(),typeof ht!="string")throw Ld("dirty is not a string, aborting")}else throw Ld("toString is not a function");if(!e.isSupported)return ht;if(ge||Ui(j),e.removed=[],typeof ht=="string"&&(it=!1),it){if(ht.nodeName){const ki=ln(ht.nodeName);if(!fe[ki]||st[ki])throw Ld("root node is forbidden and cannot be sanitized in-place")}}else if(ht instanceof a)Le=Lc("<!---->"),ot=Le.ownerDocument.importNode(ht,!0),ot.nodeType===Bd.element&&ot.nodeName==="BODY"||ot.nodeName==="HTML"?Le=ot:Le.appendChild(ot);else{if(!De&&!V&&!pe&&ht.indexOf("<")===-1)return O&&Me?O.createHTML(ht):ht;if(Le=Lc(ht),!Le)return De?null:Me?k:""}Le&&ve&&Hr(Le.firstChild);const Nn=$c(it?ht:Le);for(;pn=Nn.nextNode();)zc(pn),Vc(pn),pn.content instanceof s&&wh(pn.content);if(it)return ht;if(De){if(Te)for(zn=R.call(Le.ownerDocument);Le.firstChild;)zn.appendChild(Le.firstChild);else zn=Le;return(P.shadowroot||P.shadowrootmode)&&(zn=I.call(r,zn,!0)),zn}let Qn=pe?Le.outerHTML:Le.innerHTML;return pe&&fe["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&ri(w$,Le.ownerDocument.doctype.name)&&(Qn="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+Qn),V&&A1([E,ee,G],ki=>{Qn=Rd(Qn,ki," ")}),O&&Me?O.createHTML(Qn):Qn},e.setConfig=function(){let ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ui(ht),ge=!0},e.clearConfig=function(){ni=null,ge=!1},e.isValidAttribute=function(ht,j,Le){ni||Ui({});const ot=ln(ht),pn=ln(j);return Fc(ot,pn,Le)},e.addHook=function(ht,j){typeof j=="function"&&Nd(F[ht],j)},e.removeHook=function(ht,j){if(j!==void 0){const Le=Jle(F[ht],j);return Le===-1?void 0:ece(F[ht],Le,1)[0]}return NM(F[ht])},e.removeHooks=function(ht){F[ht]=[]},e.removeAllHooks=function(){F=FM()},e}var Us=x$();function Nf({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}Nf.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let vce=t=>crypto.getRandomValues(new Uint8Array(t)),yce=(t,e,n)=>{let r=(2<<Math.log2(t.length-1))-1,i=-~(1.6*r*e/t.length);return(s=e)=>{let o="";for(;;){let a=n(i),l=i|0;for(;l--;)if(o+=t[a[l]&r]||"",o.length>=s)return o}}},k$=(t,e=21)=>yce(t,e|0,vce);var bce=Object.defineProperty,HM=Object.getOwnPropertySymbols,wce=Object.prototype.hasOwnProperty,xce=Object.prototype.propertyIsEnumerable,VM=(t,e,n)=>e in t?bce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kce=(t,e)=>{for(var n in e||(e={}))wce.call(e,n)&&VM(t,n,e[n]);if(HM)for(var n of HM(e))xce.call(e,n)&&VM(t,n,e[n]);return t};function Im(t,e){return Object.assign(t,{meta:kce({package:"@milkdown/components"},e)}),t}const Sce={imageIcon:"",captionIcon:"",uploadButton:"Upload file",confirmButton:"Confirm ",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:t=>Promise.resolve(URL.createObjectURL(t))},G2=bn(Sce,"imageBlockConfigCtx");Im(G2,{displayName:"Config<image-block>",group:"ImageBlock"});function Cce(t){return Ac(t,"paragraph",(e,n,r)=>{var i,s;if(((i=e.children)==null?void 0:i.length)!==1)return;const o=(s=e.children)==null?void 0:s[0];if(!o||o.type!=="image")return;const{url:a,alt:l,title:c}=o,u={type:"image-block",url:a,alt:l,title:c};r.children.splice(n,1,u)})}const S6=ha("remark-image-block",()=>()=>Cce);Im(S6.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"});Im(S6.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var Oce=Object.defineProperty,qM=Object.getOwnPropertySymbols,Mce=Object.prototype.hasOwnProperty,Tce=Object.prototype.propertyIsEnumerable,WM=(t,e,n)=>e in t?Oce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ace=(t,e)=>{for(var n in e||(e={}))Mce.call(e,n)&&WM(t,n,e[n]);if(qM)for(var n of qM(e))Tce.call(e,n)&&WM(t,n,e[n]);return t};const K3="image-block",K2=cr("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${K3}"]`,getAttrs:t=>{var e;if(!(t instanceof HTMLElement))throw yo(t);return{src:t.getAttribute("src")||"",caption:t.getAttribute("caption")||"",ratio:Number((e=t.getAttribute("ratio"))!=null?e:1)}}}],toDOM:t=>["img",Ace({"data-type":K3},t.attrs)],parseMarkdown:{match:({type:t})=>t==="image-block",runner:(t,e,n)=>{const r=e.url,i=e.title;let s=Number(e.alt||1);(Number.isNaN(s)||s===0)&&(s=1),t.addNode(n,{src:r,caption:i,ratio:s})}},toMarkdown:{match:t=>t.type.name==="image-block",runner:(t,e)=>{t.openNode("paragraph"),t.addNode("image",void 0,void 0,{title:e.attrs.caption,url:e.attrs.src,alt:`${Number.parseFloat(e.attrs.ratio).toFixed(2)}`}),t.closeNode()}}}));Im(K2.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"});function lp({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}lp.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const _ce=k$("abcdefg",8),Dce=xt({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:t,src:e,setLink:n,onUpload:r,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var c,u;const h=ae(!1),f=ae(),d=ae((c=e.value)!=null?c:""),p=ae(_ce()),m=ae(((u=e.value)==null?void 0:u.length)!==0),g=O=>{const C=O.target.value;m.value=C.length!==0,d.value=C},v=O=>{var k,C;O.key==="Enter"&&n((C=(k=f.value)==null?void 0:k.value)!=null?C:"")},b=()=>{var O,k;n((k=(O=f.value)==null?void 0:O.value)!=null?k:"")},S=O=>{var k;const C=(k=O.target.files)==null?void 0:k[0];C&&r(C).then(T=>{T&&(n(T),m.value=!0)}).catch(T=>{console.error("An error occurred while uploading image"),console.error(T)})};return()=>le("div",{class:Kr("image-edit",l)},le(lp,{icon:i,class:"image-icon"}),le("div",{class:Kr("link-importer",h.value&&"focus")},le("input",{ref:f,draggable:"true",onDragstart:O=>{O.preventDefault(),O.stopPropagation()},disabled:t.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:v,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!m.value&&le("div",{class:"placeholder"},le("input",{disabled:t.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:S}),le("label",{class:"uploader",for:p.value},le(lp,{icon:s})),le("span",{class:"text",onClick:()=>{var O;return(O=f.value)==null?void 0:O.focus()}},a))),d.value&&le("div",{class:"confirm",onClick:()=>b()},le(lp,{icon:o})))}}),Ece=xt({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:t,caption:e,ratio:n,readonly:r,setAttr:i,config:s}){var o;const a=ae(),l=ae(),c=ae(!!((o=e.value)!=null&&o.length)),u=ae(0),h=()=>{var b;const S=a.value;if(!S)return;const O=S.closest(".milkdown-image-block");if(!O)return;const k=O.getBoundingClientRect().width;if(!k)return;const C=S.height,T=S.width,R=T<k?C:k*(C/T),L=(R*((b=n.value)!=null?b:1)).toFixed(2);S.dataset.origin=R.toFixed(2),S.dataset.height=L,S.style.height=`${L}px`},f=b=>{b.preventDefault(),b.stopPropagation(),!r.value&&(c.value=!c.value)},d=b=>{const O=b.target.value;u.value&&window.clearTimeout(u.value),u.value=window.setTimeout(()=>{i("caption",O)},1e3)},p=b=>{const O=b.target.value;u.value&&(window.clearTimeout(u.value),u.value=0),i("caption",O)},m=b=>{b.preventDefault();const S=a.value;if(!S)return;const O=S.getBoundingClientRect().top,k=b.clientY-O,C=Number(k<100?100:k).toFixed(2);S.dataset.height=C,S.style.height=`${C}px`},g=()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g);const b=a.value;if(!b)return;const S=Number(b.dataset.origin),O=Number(b.dataset.height),k=Number.parseFloat(Number(O/S).toFixed(2));Number.isNaN(k)||i("ratio",k)},v=b=>{r.value||(b.preventDefault(),b.stopPropagation(),window.addEventListener("pointermove",m),window.addEventListener("pointerup",g))};return()=>le(wt,null,le("div",{class:"image-wrapper"},le("div",{class:"operation"},le("div",{class:"operation-item",onPointerdown:f},le(lp,{icon:s.captionIcon}))),le("img",{ref:a,"data-type":K3,onLoad:h,src:t.value,alt:e.value}),le("div",{ref:l,class:"image-resize-handle",onPointerdown:v})),c.value&&le("input",{draggable:"true",onDragstart:b=>{b.preventDefault(),b.stopPropagation()},class:"caption-input",placeholder:s?.captionPlaceholderText,onInput:d,onBlur:p,value:e.value}))}});var Ice=Object.defineProperty,jM=Object.getOwnPropertySymbols,Pce=Object.prototype.hasOwnProperty,Nce=Object.prototype.propertyIsEnumerable,YM=(t,e,n)=>e in t?Ice(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rce=(t,e)=>{for(var n in e||(e={}))Pce.call(e,n)&&YM(t,n,e[n]);if(jM)for(var n of jM(e))Nce.call(e,n)&&YM(t,n,e[n]);return t};const Lce=xt({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const{src:e}=t;return()=>{var n;return(n=e.value)!=null&&n.length?le(Ece,Rce({},t)):le(Dce,{src:t.src,selected:t.selected,readonly:t.readonly,setLink:r=>t.setAttr("src",r),imageIcon:t.config.imageIcon,uploadButton:t.config.uploadButton,confirmButton:t.config.confirmButton,uploadPlaceholderText:t.config.uploadPlaceholderText,onUpload:t.config.onUpload})}}}),S$=Am(K2.node,t=>(e,n,r)=>{const i=ae(e.attrs.src),s=ae(e.attrs.caption),o=ae(e.attrs.ratio),a=ae(!1),l=ae(!n.editable),c=(g,v)=>{if(!n.editable)return;const b=r();b!=null&&n.dispatch(n.state.tr.setNodeAttribute(b,g,g==="src"?Us.sanitize(v):v))},u=t.get(G2.key),h=Qs(Lce,{src:i,caption:s,ratio:o,selected:a,readonly:l,setAttr:c,config:u}),f=document.createElement("div");f.className="milkdown-image-block";const d=Cc(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=u.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const v=p(g.attrs.src);typeof v=="string"?i.value=v:v.then(b=>{i.value=b}).catch(console.error)}o.value=g.attrs.ratio,s.value=g.attrs.caption,l.value=!n.editable};return m(e),h.mount(f),{dom:f,update:g=>g.type!==e.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),h.unmount(),f.remove()}}});Im(S$,{displayName:"NodeView<image-block>",group:"ImageBlock"});const $ce=[S6,K2,S$,G2].flat();let X3,Z3;if(typeof WeakMap<"u"){let t=new WeakMap;X3=e=>t.get(e),Z3=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;X3=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},Z3=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var gn=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return X3(t)||Z3(t,Bce(t))}};function Bce(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=zce(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const h=t.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==h.childCount)break;const m=h.child(p),{colspan:g,rowspan:v,colwidth:b}=m.attrs;for(let S=0;S<v;S++){if(S+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:v-S});break}const O=i+S*e;for(let k=0;k<g;k++){r[O+k]==0?r[O+k]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:g-k});const C=b&&b[k];if(C){const T=(O+k)%e*2,R=o[T];R==null||R!=C&&o[T+1]==1?(o[T]=C,o[T+1]=1):R==C&&o[T+1]++}}}i+=g,u+=m.nodeSize}const f=(c+1)*e;let d=0;for(;i<f;)r[i++]==0&&d++;d&&(s||(s=[])).push({type:"missing",row:c,n:d}),u++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new gn(e,n,r,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&Fce(a,o,t),a}function zce(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Fce(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=e[(i+c)%t.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=Hce(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function Hce(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function QM(t,e){if(typeof t=="string")return{};const n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(o=>Number(o)):null,i=Number(t.getAttribute("colspan")||1),s={colspan:i,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const o in e){const a=e[o].getFromDOM,l=a&&a(t);l!=null&&(s[o]=l)}return s}function UM(t,e){const n={};t.attrs.colspan!=1&&(n.colspan=t.attrs.colspan),t.attrs.rowspan!=1&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(t.attrs[r],n)}return n}function Vce(t){if(t!==null){if(!Array.isArray(t))throw new TypeError("colwidth must be null or an array");for(const e of t)if(typeof e!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function qce(t){const e=t.cellAttributes||{},n={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:Vce}};for(const r in e)n[r]={default:e[r].default,validate:e[r].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>QM(r,e)}],toDOM(r){return["td",UM(r,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>QM(r,e)}],toDOM(r){return["th",UM(r,e),0]}}}}function Vs(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}const Kl=new jn("selectingCells");function Rf(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Gs(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function X2(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Rf(e.$head)||Wce(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Wce(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function J3(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function jce(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function C6(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function C$(t,e,n){const r=t.node(-1),i=gn.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function th(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Yce(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Qce(t,e,n){const r=Vs(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var En=class Da extends Dt{constructor(e,n=e){const r=e.node(-1),i=gn.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const h=r.nodeAt(u);if(!h)throw new RangeError(`No cell with offset ${u} found`);const f=s+u+1;return new zN(a.resolve(f),a.resolve(f+h.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(J3(r)&&J3(i)&&C6(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Da.rowSelection(r,i):s&&this.isColSelection()?Da.colSelection(r,i):new Da(r,i)}return ct.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=gn.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,h=i.left;h<i.right;h++,u++){const f=n.map[u];if(s[f])continue;s[f]=!0;const d=n.findCell(f);let p=e.nodeAt(f);if(!p)throw new RangeError(`No cell with offset ${f} found`);const m=i.left-d.left,g=d.right-i.right;if(m>0||g>0){let v=p.attrs;if(m>0&&(v=th(v,0,m)),g>0&&(v=th(v,v.colspan-g,g)),d.left<i.left){if(p=p.type.createAndFill(v),!p)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else p=p.type.create(v,p.content)}if(d.top<i.top||d.bottom>i.bottom){const v={...p.attrs,rowspan:Math.min(d.bottom,i.bottom)-Math.max(d.top,i.top)};d.top<i.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}c.push(p)}o.push(e.child(l).copy(Ae.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new Ke(Ae.from(a),1,1)}replace(e,n=Ke.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?Ke.empty:n)}const s=Dt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new Ke(Ae.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=gn.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=gn.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Da(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=gn.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof Da&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=gn.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new Da(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Da(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Da(e.resolve(n),e.resolve(r))}getBookmark(){return new Uce(this.$anchorCell.pos,this.$headCell.pos)}};En.prototype.visible=!1;Dt.jsonID("cell",En);var Uce=class O${constructor(e,n){this.anchor=e,this.head=n}map(e){return new O$(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&C6(n,r)?new En(n,r):Dt.near(r,1)}};function Gce(t){if(!(t.selection instanceof En))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(pr.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Mn.create(t.doc,e)}function Kce({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function Xce({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Zce(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof yt&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=En.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=En.rowSelection(a,a)}else if(!n){const a=gn.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=En.create(i,l+1,c)}}else r instanceof ct&&Kce(r)?s=ct.create(i,r.from):r instanceof ct&&Xce(r)&&(s=ct.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}const Jce=new jn("fix-tables");function M$(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?M$(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function eue(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=tue(t,i,s,n))};return e?e.doc!=t.doc&&M$(e.doc,t.doc,0,r):t.doc.descendants(r),n}function tue(t,e,n,r){const i=gn.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const h=u.attrs;for(let f=0;f<h.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,th(h,h.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=e.child(l),h=c+u.nodeSize,f=s[l];if(f>0){let d="cell";u.firstChild&&(d=u.firstChild.type.spec.tableRole);const p=[];for(let g=0;g<f;g++){const v=Vs(t.schema)[d].createAndFill();v&&p.push(v)}const m=(l==0||o==l-1)&&a==l?c+1:h-1;r.insert(r.mapping.map(m),p)}c=h}return r.setMeta(Jce,{fixTables:!0})}function T$(t){const e=gn.get(t),n=[],r=e.height,i=e.width;for(let s=0;s<r;s++){const o=[];for(let a=0;a<i;a++){const l=s*i+a,c=e.map[l];if(s>0){const u=l-i;if(c===e.map[u]){o.push(null);continue}}if(a>0){const u=l-1;if(c===e.map[u]){o.push(null);continue}}o.push(t.nodeAt(c))}n.push(o)}return n}function A$(t,e){const n=[],r=gn.get(t),i=r.height,s=r.width;for(let o=0;o<i;o++){const a=t.child(o),l=[];for(let u=0;u<s;u++){const h=e[o][u];if(!h)continue;const f=r.map[o*r.width+u],d=t.nodeAt(f);if(!d)continue;const p=d.type.createChecked(h.attrs,h.content,h.marks);l.push(p)}const c=a.type.createChecked(a.attrs,l,a.marks);n.push(c)}return t.type.createChecked(t.attrs,n,t.marks)}function _$(t,e,n,r){const i=e[0]>n[0]?-1:1,s=t.splice(e[0],e.length),o=s.length%2===0?1:0;let a;return a=i===-1?n[0]:n[n.length-1]-o,t.splice(a,0,...s),t}function od(t){return nue(e=>e.type.spec.tableRole==="table",t)}function nue(t,e){for(let n=e.depth;n>=0;n-=1){const r=e.node(n);if(t(r))return{node:r,pos:n===0?0:e.before(n),start:e.start(n),depth:n}}return null}function Nh(t,e){const n=od(e.$from);if(!n)return;const r=gn.get(n.node);if(!(t<0||t>r.width-1))return r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height}).map(i=>{const s=n.node.nodeAt(i),o=i+n.start;return{pos:o,start:o+1,node:s,depth:n.depth+2}})}function Rh(t,e){const n=od(e.$from);if(!n)return;const r=gn.get(n.node);if(!(t<0||t>r.height-1))return r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1}).map(i=>{const s=n.node.nodeAt(i),o=i+n.start;return{pos:o,start:o+1,node:s,depth:n.depth+2}})}function GM(t,e,n=e){let r=e,i=n;for(let u=e;u>=0;u--){const h=Nh(u,t.selection);h&&h.forEach(f=>{const d=f.node.attrs.colspan+u-1;d>=r&&(r=u),d>i&&(i=d)})}for(let u=e;u<=i;u++){const h=Nh(u,t.selection);h&&h.forEach(f=>{const d=f.node.attrs.colspan+u-1;f.node.attrs.colspan>1&&d>i&&(i=d)})}const s=[];for(let u=r;u<=i;u++){const h=Nh(u,t.selection);h&&h.length>0&&s.push(u)}r=s[0],i=s[s.length-1];const o=Nh(r,t.selection),a=Rh(0,t.selection);if(!o||!a)return;const l=t.doc.resolve(o[o.length-1].pos);let c;for(let u=i;u>=r;u--){const h=Nh(u,t.selection);if(h&&h.length>0){for(let f=a.length-1;f>=0;f--)if(a[f].pos===h[0].pos){c=h[0];break}if(c)break}}if(c)return{$anchor:l,$head:t.doc.resolve(c.pos),indexes:s}}function KM(t,e,n=e){let r=e,i=n;for(let u=e;u>=0;u--){const h=Rh(u,t.selection);h&&h.forEach(f=>{const d=f.node.attrs.rowspan+u-1;d>=r&&(r=u),d>i&&(i=d)})}for(let u=e;u<=i;u++){const h=Rh(u,t.selection);h&&h.forEach(f=>{const d=f.node.attrs.rowspan+u-1;f.node.attrs.rowspan>1&&d>i&&(i=d)})}const s=[];for(let u=r;u<=i;u++){const h=Rh(u,t.selection);h&&h.length>0&&s.push(u)}r=s[0],i=s[s.length-1];const o=Rh(r,t.selection),a=Nh(0,t.selection);if(!o||!a)return;const l=t.doc.resolve(o[o.length-1].pos);let c;for(let u=i;u>=r;u--){const h=Rh(u,t.selection);if(h&&h.length>0){for(let f=a.length-1;f>=0;f--)if(a[f].pos===h[0].pos){c=h[0];break}if(c)break}}if(c)return{$anchor:l,$head:t.doc.resolve(c.pos),indexes:s}}function XM(t){return t[0].map((e,n)=>t.map(r=>r[n]))}function rue(t){var e,n;const{tr:r,originIndex:i,targetIndex:s,select:o,pos:a}=t,l=od(r.doc.resolve(a));if(!l)return!1;const c=(e=GM(r,i))===null||e===void 0?void 0:e.indexes,u=(n=GM(r,s))===null||n===void 0?void 0:n.indexes;if(!c||!u||c.includes(s))return!1;const h=iue(l.node,c,u);if(r.replaceWith(l.pos,l.pos+l.node.nodeSize,h),!o)return!0;const f=gn.get(h),d=l.start,p=s,m=f.positionAt(f.height-1,p,h),g=r.doc.resolve(d+m),v=f.positionAt(0,p,h),b=r.doc.resolve(d+v);return r.setSelection(En.colSelection(g,b)),!0}function iue(t,e,n,r){let i=XM(T$(t));return i=_$(i,e,n),i=XM(i),A$(t,i)}function sue(t){var e,n;const{tr:r,originIndex:i,targetIndex:s,select:o,pos:a}=t,l=od(r.doc.resolve(a));if(!l)return!1;const c=(e=KM(r,i))===null||e===void 0?void 0:e.indexes,u=(n=KM(r,s))===null||n===void 0?void 0:n.indexes;if(!c||!u||c.includes(s))return!1;const h=oue(l.node,c,u);if(r.replaceWith(l.pos,l.pos+l.node.nodeSize,h),!o)return!0;const f=gn.get(h),d=l.start,p=s,m=f.positionAt(p,f.width-1,h),g=r.doc.resolve(d+m),v=f.positionAt(p,0,h),b=r.doc.resolve(d+v);return r.setSelection(En.rowSelection(g,b)),!0}function oue(t,e,n,r){let i=T$(t);return i=_$(i,e,n),A$(t,i)}function Dc(t){const e=t.selection,n=X2(t),r=n.node(-1),i=n.start(-1),s=gn.get(r);return{...e instanceof En?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function D$(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;Qce(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,Yce(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?Vs(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function aue(t,e){if(!Gs(t))return!1;if(e){const n=Dc(t);e(D$(t.tr,n,n.left))}return!0}function lue(t,e){if(!Gs(t))return!1;if(e){const n=Dc(t);e(D$(t.tr,n,n.right))}return!0}function cue(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,th(u,i-e.colCount(l)));else{const h=t.mapping.slice(s).map(r+l);t.delete(h,h+c.nodeSize)}o+=u.rowspan}}function uue(t,e){if(!Gs(t))return!1;if(e){const n=Dc(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;cue(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=gn.get(s)}e(r)}return!0}function hue(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+r,o+r);const l=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const h=e.map[u];if(!l.has(h)){if(l.add(h),i>0&&h==e.map[u-e.width]){const f=n.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<e.height&&h==e.map[u+e.width]){const f=n.nodeAt(h),d=f.attrs,p=f.type.create({...d,rowspan:f.attrs.rowspan-1},f.content),m=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+m),p),c+=d.colspan-1}}}}function fue(t,e){if(!Gs(t))return!1;if(e){const n=Dc(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;hue(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=gn.get(n.table)}e(r)}return!0}function due(t,e){return function(n,r){if(!Gs(n))return!1;const i=X2(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof En?n.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function pue(t){return function(e,n){if(!Gs(e))return!1;if(n){const r=Vs(e.schema),i=Dc(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length===0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function ZM(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function O6(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?pue(t):function(n,r){if(!Gs(n))return!1;if(r){const i=Vs(n.schema),s=Dc(n),o=n.tr,a=ZM("row",s,i),l=ZM("column",s,i),c=(t==="column"?a:t==="row"&&l)?1:0,u=t=="column"?{left:0,top:c,right:1,bottom:s.map.height}:t=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(u).forEach(f=>{const d=f+s.tableStart,p=o.doc.nodeAt(d);p&&o.setNodeMarkup(d,h,p.attrs)}),r(o)}return!0}}O6("row",{useDeprecatedLogic:!0});O6("column",{useDeprecatedLogic:!0});O6("cell",{useDeprecatedLogic:!0});function mue(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function E$(t){return function(e,n){if(!Gs(e))return!1;const r=mue(X2(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(ct.between(i,jce(i))).scrollIntoView())}return!0}}function gue(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function D1(t,e){const n=t.selection;if(!(n instanceof En))return!1;if(e){const r=t.tr,i=Vs(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new Ke(i,0,0))}),r.docChanged&&e(r)}return!0}function vue(t){return(e,n)=>{const{from:r,to:i,select:s=!0,pos:o=e.selection.from}=t,a=e.tr;return sue({tr:a,originIndex:r,targetIndex:i,select:s,pos:o})?(n?.(a),!0):!1}}function yue(t){return(e,n)=>{const{from:r,to:i,select:s=!0,pos:o=e.selection.from}=t,a=e.tr;return rue({tr:a,originIndex:r,targetIndex:i,select:s,pos:o})?(n?.(a),!0):!1}}function bue(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),h=l<e.childCount-1?0:Math.max(0,r-1);(u||h)&&(c=e7(Vs(o).row,new Ke(c,u,h)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?e7(Vs(o).row,new Ke(e,n,r)).content:e);else return null;return wue(o,a)}function wue(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ae.empty),n[i]<r){const s=Vs(t).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);e[i]=e[i].append(Ae.from(o))}return{height:e.length,width:r,rows:e}}function e7(t,e){const n=t.createAndFill();return new BN(n).replace(0,n.content.size,e).doc}function xue({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,h=0;u<r;h++){let f=l.child(h%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(th(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let d=1;d<f.attrs.rowspan;d++)s[a+d]=(s[a+d]||0)+f.attrs.colspan}o.push(Ae.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let h=c.child(u);o+h.attrs.rowspan>i&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,i-h.attrs.rowspan)},h.content)),l.push(h)}s.push(Ae.from(l))}n=s,e=i}return{width:t,height:e,rows:n}}function kue(t,e,n,r,i,s,o){const a=t.doc.type.schema,l=Vs(a);let c,u;if(i>e.width)for(let h=0,f=0;h<e.height;h++){const d=n.child(h);f+=d.nodeSize;const p=[];let m;d.lastChild==null||d.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=u||(u=l.header_cell.createAndFill());for(let g=e.width;g<i;g++)p.push(m);t.insert(t.mapping.slice(o).map(f-1+r),p)}if(s>e.height){const h=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const g=p>=e.width?!1:n.nodeAt(e.map[m+p]).type==l.header_cell;h.push(g?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,Ae.from(h)),d=[];for(let p=e.height;p<s;p++)d.push(f);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),d)}return!!(c||u)}function JM(t,e,n,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const u=o*e.width+c,h=e.map[u];if(e.map[u-e.width]==h){l=!0;const f=n.nodeAt(h),{top:d,left:p}=e.findCell(h);t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,{...f.attrs,rowspan:o-d}),t.insert(t.mapping.slice(a).map(e.positionAt(o,p,n)),f.type.createAndFill({...f.attrs,rowspan:d+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return l}function eT(t,e,n,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const u=c*e.width+o,h=e.map[u];if(e.map[u-1]==h){l=!0;const f=n.nodeAt(h),d=e.colCount(h),p=t.mapping.slice(a).map(h+r);t.setNodeMarkup(p,null,th(f.attrs,o-d,f.attrs.colspan-(o-d))),t.insert(p+f.nodeSize,f.type.createAndFill(th(f.attrs,0,o-d))),c+=f.attrs.rowspan-1}}return l}function tT(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=gn.get(s);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,h=t.tr;let f=0;function d(){if(s=n?h.doc.nodeAt(n-1):h.doc,!s)throw new Error("No table found");o=gn.get(s),f=h.mapping.maps.length}kue(h,o,s,n,c,u,f)&&d(),JM(h,o,s,n,l,c,a,f)&&d(),JM(h,o,s,n,l,c,u,f)&&d(),eT(h,o,s,n,a,u,l,f)&&d(),eT(h,o,s,n,a,u,c,f)&&d();for(let p=a;p<u;p++){const m=o.positionAt(p,l,s),g=o.positionAt(p,c,s);h.replace(h.mapping.slice(f).map(m+n),h.mapping.slice(f).map(g+n),new Ke(i.rows[p-a],0,0))}d(),h.setSelection(new En(h.doc.resolve(n+o.positionAt(a,l,s)),h.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(h)}const Sue=mk({ArrowLeft:E1("horiz",-1),ArrowRight:E1("horiz",1),ArrowUp:E1("vert",-1),ArrowDown:E1("vert",1),"Shift-ArrowLeft":I1("horiz",-1),"Shift-ArrowRight":I1("horiz",1),"Shift-ArrowUp":I1("vert",-1),"Shift-ArrowDown":I1("vert",1),Backspace:D1,"Mod-Backspace":D1,Delete:D1,"Mod-Delete":D1});function Vg(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function E1(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof En)return Vg(n,r,Dt.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=I$(i,t,e);if(o==null)return!1;if(t=="horiz")return Vg(n,r,Dt.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(o),l=C$(a,t,e);let c;return l?c=Dt.near(l,1):e<0?c=Dt.near(n.doc.resolve(a.before(-1)),-1):c=Dt.near(n.doc.resolve(a.after(-1)),1),Vg(n,r,c)}}}function I1(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof En)o=s;else{const l=I$(i,t,e);if(l==null)return!1;o=new En(n.doc.resolve(l))}const a=C$(o.$headCell,t,e);return a?Vg(n,r,new En(o.$anchorCell,a)):!1}}function Cue(t,e){const n=t.state.doc,r=Rf(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new En(r))),!0):!1}function Oue(t,e,n){if(!Gs(t.state))return!1;let r=bue(n);const i=t.state.selection;if(i instanceof En){r||(r={width:1,height:1,rows:[Ae.from(e7(Vs(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=gn.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=xue(r,a.right-a.left,a.bottom-a.top),tT(t.state,t.dispatch,o,a,r),!0}else if(r){const s=X2(t.state),o=s.start(-1);return tT(t.state,t.dispatch,o,gn.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function Mue(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=nT(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof En)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Rf(t.state.selection.$anchor))!=null&&((n=u5(t,e))===null||n===void 0?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,c){let u=u5(t,c);const h=Kl.getState(t.state)==null;if(!u||!C6(l,u))if(h)u=l;else return;const f=new En(l,u);if(h||!t.state.selection.eq(f)){const d=t.state.tr.setSelection(f);h&&d.setMeta(Kl,l.pos),t.dispatch(d)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Kl.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Kl,-1))}function a(l){const c=l,u=Kl.getState(t.state);let h;if(u!=null)h=t.state.doc.resolve(u);else if(nT(t,c.target)!=r&&(h=u5(t,e),!h))return o();h&&s(h,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function I$(t,e,n){if(!(t.state.selection instanceof ct))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?o:null}}return null}function nT(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function u5(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:i}=n;return r>=0&&Rf(t.state.doc.resolve(r))||Rf(t.state.doc.resolve(i))}var Tue=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),t7(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,t7(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function t7(t,e,n,r,i,s){let o=0,a=!0,l=e.firstChild;const c=t.firstChild;if(c){for(let h=0,f=0;h<c.childCount;h++){const{colspan:d,colwidth:p}=c.child(h).attrs;for(let m=0;m<d;m++,f++){const g=i==f?s:p&&p[m],v=g?g+"px":"";if(o+=g||r,g||(a=!1),l)l.style.width!=v&&(l.style.width=v),l=l.nextSibling;else{const b=document.createElement("col");b.style.width=v,e.appendChild(b)}}}for(;l;){var u;const h=l.nextSibling;(u=l.parentNode)===null||u===void 0||u.removeChild(l),l=h}a?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}const ls=new jn("tableColumnResizing");function Aue({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=Tue,lastColumnResizable:i=!0}={}){const s=new Wn({key:ls,state:{init(o,a){var l;const c=(l=s.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,u=Vs(a.schema).table.name;return r&&c&&(c[u]=(h,f)=>new r(h,n,f)),new _ue(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=ls.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{Due(o,a,t,i)},mouseleave:o=>{Eue(o)},mousedown:(o,a)=>{Iue(o,a,e,n)}},decorations:o=>{const a=ls.getState(o);if(a&&a.activeHandle>-1)return $ue(o,a.activeHandle)},nodeViews:{}}});return s}var _ue=class qg{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(ls);if(r&&r.setHandle!=null)return new qg(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new qg(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return J3(e.doc.resolve(i))||(i=-1),new qg(i,n.dragging)}return n}};function Due(t,e,n,r){if(!t.editable)return;const i=ls.getState(t.state);if(i&&!i.dragging){const s=Nue(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?o=rT(t,e,"left",n):l-e.clientX<=n&&(o=rT(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=gn.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}P$(t,o)}}}function Eue(t){if(!t.editable)return;const e=ls.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&P$(t,-1)}function Iue(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!==null&&i!==void 0?i:window,o=ls.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=Pue(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(ls,{setDragging:{startX:e.clientX,startWidth:l}}));function c(h){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const f=ls.getState(t.state);f?.dragging&&(Rue(t,f.activeHandle,iT(f.dragging,h,n)),t.dispatch(t.state.tr.setMeta(ls,{setDragging:null})))}function u(h){if(!h.which)return c(h);const f=ls.getState(t.state);if(f&&f.dragging){const d=iT(f.dragging,h,n);sT(t,f.activeHandle,d,r)}}return sT(t,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function Pue(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let o=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(o-=r[l],a--);return o/a}function Nue(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function rT(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=Rf(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=gn.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function iT(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function P$(t,e){t.dispatch(t.state.tr.setMeta(ls,{setHandle:e}))}function Rue(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=gn.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const h=s.map[u],f=i.nodeAt(h).attrs,d=f.colspan==1?0:a-s.colCount(h);if(f.colwidth&&f.colwidth[d]==n)continue;const p=f.colwidth?f.colwidth.slice():Lue(f.colspan);p[d]=n,l.setNodeMarkup(o+h,null,{...f,colwidth:p})}l.docChanged&&t.dispatch(l)}function sT(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=gn.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&t7(s,l.firstChild,l,r,a,n)}function Lue(t){return Array(t).fill(0)}function $ue(t,e){const n=[],r=t.doc.resolve(e),i=r.node(-1);if(!i)return Mn.empty;const s=gn.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=a+c*s.width;if((a==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){var l;const h=s.map[u],f=o+h+i.nodeAt(h).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",!((l=ls.getState(t))===null||l===void 0)&&l.dragging&&n.push(pr.node(o+h,o+h+i.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),n.push(pr.widget(f,d))}}return Mn.create(t.doc,n)}function Bue({allowTableNodeSelection:t=!1}={}){return new Wn({key:Kl,state:{init(){return null},apply(e,n){const r=e.getMeta(Kl);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:Gce,handleDOMEvents:{mousedown:Mue},createSelectionBetween(e){return Kl.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Cue,handleKeyDown:Sue,handlePaste:Oue},appendTransaction(e,n,r){return Zce(r,eue(r,n),t)}})}var fy=typeof navigator<"u"?navigator:null,M6=fy&&fy.userAgent||"",zue=/Edge\/(\d+)/.exec(M6),Fue=/MSIE \d/.exec(M6),Hue=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(M6),Vue=!!(Fue||Hue||zue),que=!Vue&&!!fy&&/Apple Computer/.test(fy.vendor),N$=new jn("safari-ime-span"),n7=!1,Wue={key:N$,props:{decorations:jue,handleDOMEvents:{compositionstart:()=>{n7=!0},compositionend:()=>{n7=!1}}}};function jue(t){const{$from:e,$to:n,to:r}=t.selection;if(n7&&e.sameParent(n)){const i=pr.widget(r,Yue,{ignoreSelection:!0,key:"safari-ime-span"});return Mn.create(t.doc,[i])}}function Yue(t){const e=t.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var Que=new Wn(que?Wue:{key:N$});function oT(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function Uue(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Gue(t,e,n){const i=A2((n||{}).ignore||[]),s=Kue(e);let o=-1;for(;++o<s.length;)ok(t,"text",a);function a(c,u){let h=-1,f;for(;++h<u.length;){const d=u[h],p=f?f.children:void 0;if(i(d,p?p.indexOf(d):void 0,f))return;f=d}if(f)return l(c,u)}function l(c,u){const h=u[u.length-1],f=s[o][0],d=s[o][1];let p=0;const g=h.children.indexOf(c);let v=!1,b=[];f.lastIndex=0;let S=f.exec(c.value);for(;S;){const O=S.index,k={index:S.index,input:S.input,stack:[...u,c]};let C=d(...S,k);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?f.lastIndex=O+1:(p!==O&&b.push({type:"text",value:c.value.slice(p,O)}),Array.isArray(C)?b.push(...C):C&&b.push(C),p=O+S[0].length,v=!0),!f.global)break;S=f.exec(c.value)}return v?(p<c.value.length&&b.push({type:"text",value:c.value.slice(p)}),h.children.splice(g,1,...b)):b=[c],g+b.length}}function Kue(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([Xue(i[0]),Zue(i[1])])}return e}function Xue(t){return typeof t=="string"?new RegExp(Uue(t),"g"):t}function Zue(t){return typeof t=="function"?t:function(){return t}}const h5="phrasing",f5=["autolink","link","image","label"];function Jue(){return{transforms:[ohe],enter:{literalAutolink:the,literalAutolinkEmail:d5,literalAutolinkHttp:d5,literalAutolinkWww:d5},exit:{literalAutolink:she,literalAutolinkEmail:ihe,literalAutolinkHttp:nhe,literalAutolinkWww:rhe}}}function ehe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:h5,notInConstruct:f5},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:h5,notInConstruct:f5},{character:":",before:"[ps]",after:"\\/",inConstruct:h5,notInConstruct:f5}]}}function the(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function d5(t){this.config.enter.autolinkProtocol.call(this,t)}function nhe(t){this.config.exit.autolinkProtocol.call(this,t)}function rhe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function ihe(t){this.config.exit.autolinkEmail.call(this,t)}function she(t){this.exit(t)}function ohe(t){Gue(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ahe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),lhe]],{ignore:["link","linkReference"]})}function ahe(t,e,n,r,i){let s="";if(!R$(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!che(n)))return!1;const o=uhe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function lhe(t,e,n,r){return!R$(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function che(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function uhe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=oT(t,"(");let s=oT(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function R$(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Gu(n)||M2(n))&&(!e||n!==47)}L$.peek=bhe;function hhe(){this.buffer()}function fhe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function dhe(){this.buffer()}function phe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function mhe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ao(this.sliceSerialize(t)).toLowerCase(),n.label=e}function ghe(t){this.exit(t)}function vhe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ao(this.sliceSerialize(t)).toLowerCase(),n.label=e}function yhe(t){this.exit(t)}function bhe(){return"["}function L$(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function whe(){return{enter:{gfmFootnoteCallString:hhe,gfmFootnoteCall:fhe,gfmFootnoteDefinitionLabelString:dhe,gfmFootnoteDefinition:phe},exit:{gfmFootnoteCallString:mhe,gfmFootnoteCall:ghe,gfmFootnoteDefinitionLabelString:vhe,gfmFootnoteDefinition:yhe}}}function xhe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:L$},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?$$:khe))),c(),l}}function khe(t,e,n){return e===0?t:$$(t,e,n)}function $$(t,e,n){return(n?"":"    ")+t}const She=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];B$.peek=Ahe;function Che(){return{canContainEols:["delete"],enter:{strikethrough:Mhe},exit:{strikethrough:The}}}function Ohe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:She}],handlers:{delete:B$}}}function Mhe(t){this.enter({type:"delete",children:[]},t)}function The(t){this.exit(t)}function B$(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Ahe(){return"~"}function _he(t){return t.length}function Dhe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||_he,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const m=[],g=[];let v=-1;for(t[u].length>c&&(c=t[u].length);++v<t[u].length;){const b=Ehe(t[u][v]);if(n.alignDelimiters!==!1){const S=i(b);g[v]=S,(l[v]===void 0||S>l[v])&&(l[v]=S)}m.push(b)}o[u]=m,a[u]=g}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=aT(r[h]);else{const m=aT(r);for(;++h<c;)s[h]=m}h=-1;const f=[],d=[];for(;++h<c;){const m=s[h];let g="",v="";m===99?(g=":",v=":"):m===108?g=":":m===114&&(v=":");let b=n.alignDelimiters===!1?1:Math.max(1,l[h]-g.length-v.length);const S=g+"-".repeat(b)+v;n.alignDelimiters!==!1&&(b=g.length+b+v.length,b>l[h]&&(l[h]=b),d[h]=b),f[h]=S}o.splice(1,0,f),a.splice(1,0,d),u=-1;const p=[];for(;++u<o.length;){const m=o[u],g=a[u];h=-1;const v=[];for(;++h<c;){const b=m[h]||"";let S="",O="";if(n.alignDelimiters!==!1){const k=l[h]-(g[h]||0),C=s[h];C===114?S=" ".repeat(k):C===99?k%2?(S=" ".repeat(k/2+.5),O=" ".repeat(k/2-.5)):(S=" ".repeat(k/2),O=S):O=" ".repeat(k)}n.delimiterStart!==!1&&!h&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||h)&&v.push(" "),n.alignDelimiters!==!1&&v.push(S),v.push(b),n.alignDelimiters!==!1&&v.push(O),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&v.push("|")}p.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return p.join(`
`)}function Ehe(t){return t==null?"":String(t)}function aT(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Ihe(){return{enter:{table:Phe,tableData:lT,tableHeader:lT,tableRow:Rhe},exit:{codeText:Lhe,table:Nhe,tableData:p5,tableHeader:p5,tableRow:p5}}}function Phe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Nhe(t){this.exit(t),this.data.inTable=void 0}function Rhe(t){this.enter({type:"tableRow",children:[]},t)}function p5(t){this.exit(t)}function lT(t){this.enter({type:"tableCell",children:[]},t)}function Lhe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,$he));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function $he(t,e){return e==="|"?e:t}function Bhe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(d,p,m,g){return c(u(d,m,g),d.align)}function a(d,p,m,g){const v=h(d,m,g),b=c([v]);return b.slice(0,b.indexOf(`
`))}function l(d,p,m,g){const v=m.enter("tableCell"),b=m.enter("phrasing"),S=m.containerPhrasing(d,{...g,before:s,after:s});return b(),v(),S}function c(d,p){return Dhe(d,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function u(d,p,m){const g=d.children;let v=-1;const b=[],S=p.enter("table");for(;++v<g.length;)b[v]=h(g[v],p,m);return S(),b}function h(d,p,m){const g=d.children;let v=-1;const b=[],S=p.enter("tableRow");for(;++v<g.length;)b[v]=l(g[v],d,p,m);return S(),b}function f(d,p,m){let g=lk.inlineCode(d,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function zhe(){return{exit:{taskListCheckValueChecked:cT,taskListCheckValueUnchecked:cT,paragraph:Hhe}}}function Fhe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Vhe}}}function cT(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Hhe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Vhe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=lk.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function qhe(){return[Jue(),whe(),Che(),Ihe(),zhe()]}function Whe(t){return{extensions:[ehe(),xhe(t),Ohe(),Bhe(t),Fhe()]}}const jhe={tokenize:Xhe,partial:!0},z$={tokenize:Zhe,partial:!0},F$={tokenize:Jhe,partial:!0},H$={tokenize:efe,partial:!0},Yhe={tokenize:tfe,partial:!0},V$={name:"wwwAutolink",tokenize:Ghe,previous:W$},q$={name:"protocolAutolink",tokenize:Khe,previous:j$},kl={name:"emailAutolink",tokenize:Uhe,previous:Y$},da={};function Qhe(){return{text:da}}let Kc=48;for(;Kc<123;)da[Kc]=kl,Kc++,Kc===58?Kc=65:Kc===91&&(Kc=97);da[43]=kl;da[45]=kl;da[46]=kl;da[95]=kl;da[72]=[kl,q$];da[104]=[kl,q$];da[87]=[kl,V$];da[119]=[kl,V$];function Uhe(t,e,n){const r=this;let i,s;return o;function o(h){return!r7(h)||!Y$.call(r,r.previous)||T6(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return r7(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(Yhe,u,c)(h):h===45||h===95||Ri(h)?(s=!0,t.consume(h),l):u(h)}function c(h){return t.consume(h),i=!0,l}function u(h){return s&&i&&ui(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function Ghe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!W$.call(r,r.previous)||T6(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(jhe,t.attempt(z$,t.attempt(F$,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Khe(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&j$.call(r,r.previous)&&!T6(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(ui(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||Zv(h)||Dn(h)||Gu(h)||M2(h)?n(h):t.attempt(z$,t.attempt(F$,u),n)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function Xhe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Zhe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(H$,l,a)(c):c===null||Dn(c)||Gu(c)||c!==45&&M2(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function Jhe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(H$,e,s)(o):o===null||Dn(o)||Gu(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function efe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||Dn(a)||Gu(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||Dn(a)||Gu(a)?e(a):r(a)}function s(a){return ui(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):ui(a)?(t.consume(a),o):n(a)}}function tfe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Ri(s)?n(s):e(s)}}function W$(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Dn(t)}function j$(t){return!ui(t)}function Y$(t){return!(t===47||r7(t))}function r7(t){return t===43||t===45||t===46||t===95||Ri(t)}function T6(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const nfe={tokenize:ufe,partial:!0};function rfe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:afe,continuation:{tokenize:lfe},exit:cfe}},text:{91:{name:"gfmFootnoteCall",tokenize:ofe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:ife,resolveTo:sfe}}}}function ife(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=ao(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function sfe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function ofe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||Dn(h))return n(h);if(h===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return i.includes(ao(r.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return Dn(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function afe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(p)}function u(p){if(o>999||p===93&&!a||p===null||p===91||Dn(p))return n(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteDefinitionLabelString");return s=ao(r.sliceSerialize(m)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return Dn(p)||(a=!0),o++,t.consume(p),p===92?h:u}function h(p){return p===91||p===92||p===93?(t.consume(p),o++,u):u(p)}function f(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),i.includes(s)||i.push(s),jt(t,d,"gfmFootnoteDefinitionWhitespace")):n(p)}function d(p){return e(p)}}function lfe(t,e,n){return t.check(Sm,e,t.attempt(nfe,e,n))}function cfe(t){t.exit("gfmFootnoteDefinition")}function ufe(t,e,n){const r=this;return jt(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function hfe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],d=a.parser.constructs.insideSpan.null;d&&ds(f,f.length,0,T2(d,o.slice(c+1,l),a)),ds(f,f.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),ds(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let h=0;return f;function f(p){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const m=_f(c);if(p===126)return h>1?l(p):(o.consume(p),h++,d);if(h<2&&!n)return l(p);const g=o.exit("strikethroughSequenceTemporary"),v=_f(p);return g._open=!v||v===2&&!!m,g._close=!m||m===2&&!!v,a(p)}}}class ffe{constructor(){this.map=[]}add(e,n,r){dfe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function dfe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function pfe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function mfe(){return{flow:{null:{name:"table",tokenize:gfe,resolveAll:vfe}}}}function gfe(t,e,n){const r=this;let i=0,s=0,o;return a;function a(I){let F=r.events.length-1;for(;F>-1;){const G=r.events[F][1].type;if(G==="lineEnding"||G==="linePrefix")F--;else break}const E=F>-1?r.events[F][1].type:null,ee=E==="tableHead"||E==="tableRow"?C:l;return ee===C&&r.parser.lazy[r.now().line]?n(I):ee(I)}function l(I){return t.enter("tableHead"),t.enter("tableRow"),c(I)}function c(I){return I===124||(o=!0,s+=1),u(I)}function u(I){return I===null?n(I):ft(I)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),d):n(I):Gt(I)?jt(t,u,"whitespace")(I):(s+=1,o&&(o=!1,i+=1),I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h(I)))}function h(I){return I===null||I===124||Dn(I)?(t.exit("data"),u(I)):(t.consume(I),I===92?f:h)}function f(I){return I===92||I===124?(t.consume(I),h):h(I)}function d(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(t.enter("tableDelimiterRow"),o=!1,Gt(I)?jt(t,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):p(I))}function p(I){return I===45||I===58?g(I):I===124?(o=!0,t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),m):k(I)}function m(I){return Gt(I)?jt(t,g,"whitespace")(I):g(I)}function g(I){return I===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),v):I===45?(s+=1,v(I)):I===null||ft(I)?O(I):k(I)}function v(I){return I===45?(t.enter("tableDelimiterFiller"),b(I)):k(I)}function b(I){return I===45?(t.consume(I),b):I===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),S):(t.exit("tableDelimiterFiller"),S(I))}function S(I){return Gt(I)?jt(t,O,"whitespace")(I):O(I)}function O(I){return I===124?p(I):I===null||ft(I)?!o||i!==s?k(I):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(I)):k(I)}function k(I){return n(I)}function C(I){return t.enter("tableRow"),T(I)}function T(I){return I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),T):I===null||ft(I)?(t.exit("tableRow"),e(I)):Gt(I)?jt(t,T,"whitespace")(I):(t.enter("data"),R(I))}function R(I){return I===null||I===124||Dn(I)?(t.exit("data"),T(I)):(t.consume(I),I===92?L:R)}function L(I){return I===92||I===124?(t.consume(I),R):R(I)}}function vfe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,h;const f=new ffe;for(;++n<t.length;){const d=t[n],p=d[1];d[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(uT(f,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",u,e]])),i=p.type==="tableDelimiterRow"?2:u?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=P1(f,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=P1(f,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(a=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=P1(f,e,s,i,n,h)):o[1]!==0&&(h=P1(f,e,o,i,n,h)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&uT(f,e,l,c,u),f.consume(e.events),n=-1;++n<e.events.length;){const d=e.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=pfe(e.events,n))}return t}function P1(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Lh(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Lh(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Lh(e.events,n[2]),u=Lh(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const f=e.events[n[2]],d=e.events[n[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,m=n[3]-n[2]-1;t.add(p,m,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Lh(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function uT(t,e,n,r,i){const s=[],o=Lh(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Lh(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const yfe={name:"tasklistCheck",tokenize:wfe};function bfe(){return{text:{91:yfe}}}function wfe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return Dn(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return ft(l)?e(l):Gt(l)?t.check({tokenize:xfe},e,n)(l):n(l)}}function xfe(t,e,n){return jt(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function kfe(t){return JN([Qhe(),rfe(),hfe(t),mfe(),bfe()])}const Sfe={};function Cfe(t){const e=this,n=t||Sfe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(kfe(n)),s.push(qhe()),o.push(Whe(n))}function Tt(t,e){return Object.assign(t,{meta:{package:"@milkdown/preset-gfm",...e}}),t}const A6=_m("strike_through");Tt(A6,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const ad=td("strike_through",t=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",t.get(A6.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,n,r)=>{e.openMark(r),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,n)=>{e.withMark(n,"delete")}}}));Tt(ad.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});Tt(ad.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const Z2=_t("ToggleStrikeThrough",t=>()=>D2(ad.type(t)));Tt(Z2,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const Q$=Zr(t=>km(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),ad.type(t)));Tt(Q$,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const _6=ji("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:t=>{const e=t.get(at);return()=>e.call(Z2.key)}}});Tt(_6.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});Tt(_6.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const Pm=qce({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:t=>t.style.textAlign||"left",setDOMAttr:(t,e)=>{e.style=`text-align: ${t||"left"}`}}}}),Ec=cr("table",()=>({...Pm.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="table",runner:(t,e,n)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r,isHeader:o===0}));t.openNode(n),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table",runner:(t,e)=>{const n=e.content.firstChild?.content;if(!n)return;const r=[];n.forEach(i=>{r.push(i.attrs.alignment)}),t.openNode("table",void 0,{align:r}),t.next(e.content),t.closeNode()}}}));Tt(Ec.node,{displayName:"NodeSchema<table>",group:"Table"});Tt(Ec.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const J2=cr("table_header_row",()=>({...Pm.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"},{tag:"tr",getAttrs:t=>t instanceof HTMLElement&&t.querySelector("th")?{}:!1}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:t=>!!(t.type==="tableRow"&&t.isHeader),runner:(t,e,n)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r[o],isHeader:e.isHeader}));t.openNode(n),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header_row",runner:(t,e)=>{t.openNode("tableRow",void 0,{isHeader:!0}),t.next(e.content),t.closeNode()}}}));Tt(J2.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});Tt(J2.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const Nm=cr("table_row",()=>({...Pm.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:t=>t.type==="tableRow",runner:(t,e,n)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r[o]}));t.openNode(n),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_row",runner:(t,e)=>{e.content.size!==0&&(t.openNode("tableRow"),t.next(e.content),t.closeNode())}}}));Tt(Nm.node,{displayName:"NodeSchema<tableRow>",group:"Table"});Tt(Nm.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const Rm=cr("table_cell",()=>({...Pm.table_cell,disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="tableCell"&&!t.isHeader,runner:(t,e,n)=>{const r=e.align;t.openNode(n,{alignment:r}).openNode(t.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:t=>t.type.name==="table_cell",runner:(t,e)=>{t.openNode("tableCell").next(e.content).closeNode()}}}));Tt(Rm.node,{displayName:"NodeSchema<tableCell>",group:"Table"});Tt(Rm.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const Lm=cr("table_header",()=>({...Pm.table_header,disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="tableCell"&&!!t.isHeader,runner:(t,e,n)=>{const r=e.align;t.openNode(n,{alignment:r}),t.openNode(t.schema.nodes.paragraph),t.next(e.children),t.closeNode(),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header",runner:(t,e)=>{t.openNode("tableCell"),t.next(e.content),t.closeNode()}}}));Tt(Lm.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});Tt(Lm.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function D6(t,e=3,n=3){const r=Array(n).fill(0).map(()=>Rm.type(t).createAndFill()),i=Array(n).fill(0).map(()=>Lm.type(t).createAndFill()),s=Array(e).fill(0).map((o,a)=>a===0?J2.type(t).create(null,i):Nm.type(t).create(null,r));return Ec.type(t).create(null,s)}function U$(t){return(e,n)=>r=>{n=n??r.selection.from;const i=r.doc.resolve(n),s=GN(l=>l.type.name==="table")(i),o=s?{node:s.node,from:s.start}:void 0,a=t==="row";if(o){const l=gn.get(o.node);if(e>=0&&e<(a?l.height:l.width)){const c=l.positionAt(a?e:l.height-1,a?l.width-1:e,o.node),u=r.doc.resolve(o.from+c),h=a?En.rowSelection:En.colSelection,f=l.positionAt(a?e:0,a?0:e,o.node),d=r.doc.resolve(o.from+f);return UN(r.setSelection(h(u,d)))}}return r}}const Ofe=U$("row"),Mfe=U$("col");function G$(t,e,{map:n,tableStart:r,table:i},s){const o=Array(s).fill(0).reduce((l,c,u)=>l+i.child(u).nodeSize,r),a=Array(n.width).fill(0).map((l,c)=>{const u=i.nodeAt(n.map[c]);return Rm.type(t).createAndFill({alignment:u?.attrs.alignment})});return e.insert(o,Nm.type(t).create(null,a)),e}function Tfe(t){const e=od(t.$from);if(!e)return;const n=gn.get(e.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(i=>{const s=e.node.nodeAt(i),o=i+e.start;return{pos:o,start:o+1,node:s}})}function Afe(t){const e=Tfe(t.selection);if(e&&e[0]){const n=t.doc.resolve(e[0].pos),r=e[e.length-1];if(r){const i=t.doc.resolve(r.pos);return UN(t.setSelection(new En(i,n)))}}return t}const E6=_t("GoToPrevTableCell",()=>()=>E$(-1));Tt(E6,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const I6=_t("GoToNextTableCell",()=>()=>E$(1));Tt(I6,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const P6=_t("ExitTable",t=>()=>(e,n)=>{if(!Gs(e))return!1;const{$head:r}=e.selection,i=_te(r,Ec.type(t));if(!i)return!1;const{to:s}=i,o=e.tr.replaceWith(s,s,wo.type(t).createAndFill());return o.setSelection(Dt.near(o.doc.resolve(s),1)).scrollIntoView(),n?.(o),!0});Tt(P6,{displayName:"Command<breakTableCommand>",group:"Table"});const K$=_t("InsertTable",t=>({row:e,col:n}={})=>(r,i)=>{const{selection:s,tr:o}=r,{from:a}=s,l=D6(t,e,n),c=o.replaceSelectionWith(l),u=Dt.findFrom(c.doc.resolve(a),1,!0);return u&&c.setSelection(u),i?.(c),!0});Tt(K$,{displayName:"Command<insertTableCommand>",group:"Table"});const N6=_t("MoveRow",()=>({from:t,to:e,pos:n}={})=>vue({from:t??0,to:e??0,pos:n}));Tt(N6,{displayName:"Command<moveRowCommand>",group:"Table"});const R6=_t("MoveCol",()=>({from:t,to:e,pos:n}={})=>yue({from:t??0,to:e??0,pos:n}));Tt(R6,{displayName:"Command<moveColCommand>",group:"Table"});const bu=_t("SelectRow",()=>(t={index:0})=>(e,n)=>{const{tr:r}=e;return!!n?.(Ofe(t.index,t.pos)(r))});Tt(bu,{displayName:"Command<selectRowCommand>",group:"Table"});const wu=_t("SelectCol",()=>(t={index:0})=>(e,n)=>{const{tr:r}=e;return!!n?.(Mfe(t.index,t.pos)(r))});Tt(wu,{displayName:"Command<selectColCommand>",group:"Table"});const X$=_t("SelectTable",()=>()=>(t,e)=>{const{tr:n}=t;return!!e?.(Afe(n))});Tt(X$,{displayName:"Command<selectTableCommand>",group:"Table"});const L6=_t("DeleteSelectedCells",()=>()=>(t,e)=>{const{selection:n}=t;if(!(n instanceof En))return!1;const r=n.isRowSelection(),i=n.isColSelection();return r&&i?gue(t,e):i?uue(t,e):fue(t,e)});Tt(L6,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const $6=_t("AddColBefore",()=>()=>aue);Tt($6,{displayName:"Command<addColBeforeCommand>",group:"Table"});const B6=_t("AddColAfter",()=>()=>lue);Tt(B6,{displayName:"Command<addColAfterCommand>",group:"Table"});const z6=_t("AddRowBefore",t=>()=>(e,n)=>{if(!Gs(e))return!1;if(n){const r=Dc(e);n(G$(t,e.tr,r,r.top))}return!0});Tt(z6,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const F6=_t("AddRowAfter",t=>()=>(e,n)=>{if(!Gs(e))return!1;if(n){const r=Dc(e);n(G$(t,e.tr,r,r.bottom))}return!0});Tt(F6,{displayName:"Command<addRowAfterCommand>",group:"Table"});const H6=_t("SetAlign",()=>(t="left")=>due("alignment",t));Tt(H6,{displayName:"Command<setAlignCommand>",group:"Table"});const Z$=Zr(t=>new Vi(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,n,r,i)=>{const s=e.doc.resolve(r);if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),Ec.type(t)))return null;const o=Math.max(Number(n.groups?.row??0),2),a=D6(t,o,Number(n.groups?.col)),l=e.tr.replaceRangeWith(r,i,a);return l.setSelection(ct.create(l.doc,r+3)).scrollIntoView()}));Tt(Z$,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const J$=Mae(t=>({run:(e,n,r)=>{if(r)return e;let i=e.content;return e.content.forEach((s,o,a)=>{if(s?.type!==Ec.type(t))return;const l=s.childCount,c=s.lastChild?.childCount??0;if(l===0||c===0){i=i.replaceChild(a,wo.type(t).create());return}const u=s.firstChild;if(!(c>0&&u&&u.childCount===0))return;const f=Array(c).fill(0).map(()=>Lm.type(t).createAndFill()),d=new Ke(Ae.from(f),0,0),p=u.replace(0,0,d),m=s.replace(0,u.nodeSize,new Ke(Ae.from(p),0,0));i=i.replaceChild(a,m)}),new Ke(Ae.from(i),e.openStart,e.openEnd)}}));Tt(J$,{displayName:"PasteRule<table>",group:"Table"});const V6=ji("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:t=>{const e=t.get(at);return()=>e.call(I6.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:t=>{const e=t.get(at);return()=>e.call(E6.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:t=>{const e=t.get(at);return()=>e.call(P6.key)}}});Tt(V6.ctx,{displayName:"KeymapCtx<table>",group:"Table"});Tt(V6.shortcuts,{displayName:"Keymap<table>",group:"Table"});const m5="footnote_definition",hT="footnoteDefinition",q6=cr("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${m5}"]`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw yo(t);return{label:t.dataset.label}},contentElement:"dd"}],toDOM:t=>{const e=t.attrs.label;return["dl",{"data-label":e,"data-type":m5},["dt",e],["dd",0]]},parseMarkdown:{match:({type:t})=>t===hT,runner:(t,e,n)=>{t.openNode(n,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:t=>t.type.name===m5,runner:(t,e)=>{t.openNode(hT,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));Tt(q6.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});Tt(q6.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const g5="footnote_reference",W6=cr("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${g5}"]`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw yo(t);return{label:t.dataset.label}}}],toDOM:t=>{const e=t.attrs.label;return["sup",{"data-label":e,"data-type":g5},e]},parseMarkdown:{match:({type:t})=>t==="footnoteReference",runner:(t,e,n)=>{t.addNode(n,{label:e.label})}},toMarkdown:{match:t=>t.type.name===g5,runner:(t,e)=>{t.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));Tt(W6.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});Tt(W6.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const j6=xo.extendSchema(t=>e=>{const n=t(e);return{...n,attrs:{...n.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw yo(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...n?.parseDOM||[]],toDOM:r=>n.toDOM&&r.attrs.checked==null?n.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,i,s)=>{if(i.checked==null){n.parseMarkdown.runner(r,i,s);return}const o=i.label!=null?`${i.label}.`:"",a=i.checked!=null?!!i.checked:null,l=i.label!=null?"ordered":"bullet",c=i.spread!=null?`${i.spread}`:"true";r.openNode(s,{label:o,listType:l,spread:c,checked:a}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,i)=>{if(i.attrs.checked==null){n.toMarkdown.runner(r,i);return}const s=i.attrs.label,o=i.attrs.listType,a=i.attrs.spread==="true",l=i.attrs.checked;r.openNode("listItem",void 0,{label:s,listType:o,spread:a,checked:l}),r.next(i.content),r.closeNode()}}}});Tt(j6.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});Tt(j6.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const eB=Zr(()=>new Vi(/^\[(?<checked>\s|x)\]\s$/,(t,e,n,r)=>{const i=t.doc.resolve(n);let s=0,o=i.node(s);for(;o&&o.type.name!=="list_item";)s--,o=i.node(s);if(!o||o.attrs.checked!=null)return null;const a=e.groups?.checked==="x",l=i.before(s),c=t.tr;return c.deleteRange(n,r).setNodeMarkup(l,void 0,{...o.attrs,checked:a}),c}));Tt(eB,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const _fe=[_6,V6].flat(),Dfe=[Z$,eB],Efe=[Q$],Ife=[J$],tB=vr(()=>Que);Tt(tB,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const Pfe=vr(()=>Aue({}));Tt(Pfe,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const nB=vr(()=>Bue({allowTableNodeSelection:!0}));Tt(nB,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const Y6=ha("remarkGFM",()=>Cfe);Tt(Y6.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});Tt(Y6.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const Nfe=new jn("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function Rfe(t,e){let n=0;return e.forEach((r,i,s)=>{r===t&&(n=s)}),n}const rB=vr(()=>new Wn({key:Nfe,appendTransaction:(t,e,n)=>{let r;const i=(s,o)=>{if(r||(r=n.tr),s.type.name!=="table_cell")return;const a=n.doc.resolve(o),l=a.node(a.depth),u=a.node(a.depth-1).firstChild;if(!u)return;const h=Rfe(s,l),f=u.maybeChild(h);if(!f)return;const d=f.attrs.alignment,p=s.attrs.alignment;d!==p&&r.setNodeMarkup(o,void 0,{...s.attrs,alignment:d})};return e.doc!==n.doc&&n.doc.descendants(i),r}}));Tt(rB,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const Lfe=[rB,tB,Y6,nB].flat(),$fe=[j6,Ec,J2,Nm,Lm,Rm,q6,W6,A6,ad].flat(),Bfe=[I6,E6,P6,K$,N6,R6,bu,wu,X$,L6,z6,F6,$6,B6,H6,Z2],zfe=[$fe,Dfe,Ife,Efe,_fe,Bfe,Lfe].flat(),Ffe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=U6(t.state,n.from);return r.line?Hfe(t):r.block?qfe(t):!1};function Q6(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Hfe=Q6(Yfe,0),Vfe=Q6(iB,0),qfe=Q6((t,e)=>iB(t,e,jfe(e)),0);function U6(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const zd=50;function Wfe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-zd,r),o=t.sliceDoc(i,i+zd),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-r<=2*zd?u=h=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+zd),h=t.sliceDoc(i-zd,i));let f=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(h)[0].length,p=h.length-d-n.length;return u.slice(f,f+e.length)==e&&h.slice(p,p+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function jfe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function iB(t,e,n=e.selection.ranges){let r=n.map(s=>U6(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>Wfe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function Yfe(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=U6(e,s).line;if(c){for(let u=s;u<=o;){let h=e.doc.lineAt(u);if(h.from>i&&(s==o||o>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,p=h.text.slice(f,f+c.length)==c?f:-1;f<h.text.length&&f<l&&(l=f),r.push({line:h,comment:p,token:c,indent:f,empty:d,single:!1})}u=h.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const i7=wl.define(),Qfe=wl.define(),Ufe=et.define(),sB=et.define({combine(t){return ca(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),oB=Er.define({create(){return cp.empty},update(t,e){let n=e.state.facet(sB),r=e.annotation(i7);if(r){let l=Li.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=dy(u,u.length,n.minDepth,l):u=cB(u,e.startState.selection),new cp(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(Qfe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(di.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Li.fromTransaction(e),o=e.annotation(di.time),a=e.annotation(di.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new cp(t.done.map(Li.fromJSON),t.undone.map(Li.fromJSON))}});function Gfe(t={}){return[oB,sB.of(t),Ze.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?aB:e.inputType=="historyRedo"?s7:null;return r?(e.preventDefault(),r(n)):!1}})]}function eb(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(oB,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const aB=eb(0,!1),s7=eb(1,!1),Kfe=eb(0,!0),Xfe=eb(1,!0);class Li{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Li(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Li(e.changes&&wr.fromJSON(e.changes),[],e.mapped&&Zo.fromJSON(e.mapped),e.startSelection&&Se.fromJSON(e.startSelection),e.selectionsAfter.map(Se.fromJSON))}static fromTransaction(e,n){let r=Es;for(let i of e.startState.facet(Ufe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Li(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Es)}static selection(e){return new Li(void 0,Es,void 0,void 0,e)}}function dy(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function Zfe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function Jfe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function lB(t,e){return t.length?e.length?t.concat(e):t:e}const Es=[],ede=200;function cB(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-ede));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),dy(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Li.selection([e])]}function tde(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function v5(t,e){if(!t.length)return t;let n=t.length,r=Es;for(;n;){let i=nde(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Li.selection(r)]:Es}function nde(t,e,n){let r=lB(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Es,n);if(!t.changes)return Li.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Li(i,It.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const rde=/^(input\.type|delete)($|\.)/;let cp=class f0{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new f0(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||rde.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Zfe(a.changes,e.changes))||r=="input.type.compose")?o=dy(o,o.length-1,i.minDepth,new Li(e.changes.compose(a.changes),lB(It.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Es)):o=dy(o,o.length,i.minDepth,e),new f0(o,Es,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Es;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Jfe(s[s.length-1],e)?this:new f0(cB(this.done,e),this.undone,n,r)}addMapping(e){return new f0(v5(this.done,e),v5(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:i7.of({side:e,rest:tde(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Es:i.slice(0,i.length-1);return s.mapped&&(a=v5(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:i7.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};cp.empty=new cp(Es,Es);const ide=[{key:"Mod-z",run:aB,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:s7,preventDefault:!0},{linux:"Ctrl-Shift-z",run:s7,preventDefault:!0},{key:"Mod-u",run:Kfe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Xfe,preventDefault:!0}];function ld(t,e){return Se.create(t.ranges.map(e),t.mainIndex)}function ko(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function So({state:t,dispatch:e},n){let r=ld(t.selection,n);return r.eq(t.selection,!0)?!1:(e(ko(t,r)),!0)}function tb(t,e){return Se.cursor(e?t.to:t.from)}function uB(t,e){return So(t,n=>n.empty?t.moveByChar(n,e):tb(n,e))}function Jr(t){return t.textDirectionAt(t.state.selection.main.head)==An.LTR}const hB=t=>uB(t,!Jr(t)),fB=t=>uB(t,Jr(t));function dB(t,e){return So(t,n=>n.empty?t.moveByGroup(n,e):tb(n,e))}const sde=t=>dB(t,!Jr(t)),ode=t=>dB(t,Jr(t));function ade(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function nb(t,e,n){let r=_r(t).resolveInner(e.head),i=n?Bt.closedBy:Bt.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;ade(t,c,i)?r=c:l=n?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=n?jo(t,r.from,1):jo(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,Se.cursor(a,n?-1:1)}const lde=t=>So(t,e=>nb(t.state,e,!Jr(t))),cde=t=>So(t,e=>nb(t.state,e,Jr(t)));function pB(t,e){return So(t,n=>{if(!n.empty)return tb(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const mB=t=>pB(t,!1),gB=t=>pB(t,!0);function vB(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Ze.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function yB(t,e){let n=vB(t),{state:r}=t,i=ld(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):tb(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Ze.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(ko(r,i),{effects:s}),!0}const fT=t=>yB(t,!1),o7=t=>yB(t,!0);function Ic(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Se.cursor(r.from+s))}return i}const ude=t=>So(t,e=>Ic(t,e,!0)),hde=t=>So(t,e=>Ic(t,e,!1)),fde=t=>So(t,e=>Ic(t,e,!Jr(t))),dde=t=>So(t,e=>Ic(t,e,Jr(t))),pde=t=>So(t,e=>Se.cursor(t.lineBlockAt(e.head).from,1)),mde=t=>So(t,e=>Se.cursor(t.lineBlockAt(e.head).to,-1));function gde(t,e,n){let r=!1,i=ld(t.selection,s=>{let o=jo(t,s.head,-1)||jo(t,s.head,1)||s.head>0&&jo(t,s.head-1,1)||s.head<t.doc.length&&jo(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return Se.cursor(a)});return r?(e(ko(t,i)),!0):!1}const vde=({state:t,dispatch:e})=>gde(t,e);function Ks(t,e){let n=ld(t.state.selection,r=>{let i=e(r);return Se.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(ko(t.state,n)),!0)}function bB(t,e){return Ks(t,n=>t.moveByChar(n,e))}const wB=t=>bB(t,!Jr(t)),xB=t=>bB(t,Jr(t));function kB(t,e){return Ks(t,n=>t.moveByGroup(n,e))}const yde=t=>kB(t,!Jr(t)),bde=t=>kB(t,Jr(t)),wde=t=>Ks(t,e=>nb(t.state,e,!Jr(t))),xde=t=>Ks(t,e=>nb(t.state,e,Jr(t)));function SB(t,e){return Ks(t,n=>t.moveVertically(n,e))}const CB=t=>SB(t,!1),OB=t=>SB(t,!0);function MB(t,e){return Ks(t,n=>t.moveVertically(n,e,vB(t).height))}const dT=t=>MB(t,!1),pT=t=>MB(t,!0),kde=t=>Ks(t,e=>Ic(t,e,!0)),Sde=t=>Ks(t,e=>Ic(t,e,!1)),Cde=t=>Ks(t,e=>Ic(t,e,!Jr(t))),Ode=t=>Ks(t,e=>Ic(t,e,Jr(t))),Mde=t=>Ks(t,e=>Se.cursor(t.lineBlockAt(e.head).from)),Tde=t=>Ks(t,e=>Se.cursor(t.lineBlockAt(e.head).to)),mT=({state:t,dispatch:e})=>(e(ko(t,{anchor:0})),!0),gT=({state:t,dispatch:e})=>(e(ko(t,{anchor:t.doc.length})),!0),vT=({state:t,dispatch:e})=>(e(ko(t,{anchor:t.selection.main.anchor,head:0})),!0),yT=({state:t,dispatch:e})=>(e(ko(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Ade=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),_de=({state:t,dispatch:e})=>{let n=rb(t).map(({from:r,to:i})=>Se.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Se.create(n),userEvent:"select"})),!0},Dde=({state:t,dispatch:e})=>{let n=ld(t.selection,r=>{let i=_r(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return Se.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(ko(t,n)),!0)};function TB(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let o=n.doc.lineAt(s.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=s;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){i.some(c=>c.head==l.head)||i.push(l);break}else{if(l.head==a.head)break;a=l}}}return i.length==r.ranges.length?!1:(t.dispatch(ko(n,Se.create(i,i.length-1))),!0)}const Ede=t=>TB(t,!1),Ide=t=>TB(t,!0),Pde=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Se.create([n.main]):n.main.empty||(r=Se.create([Se.cursor(n.main.head)])),r?(e(ko(t,r)),!0):!1};function $m(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=N1(t,l,!1)):l>o&&(n="delete.forward",l=N1(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=N1(t,o,!1),a=N1(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:Se.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Ze.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function N1(t,e,n){if(t instanceof Ze)for(let r of t.state.facet(Ze.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const AB=(t,e,n)=>$m(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=Zf(a,s.tabSize),u=c%Wu(s)||Wu(s);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)i--;l=i}else l=xr(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=xr(o.text,l-o.from,!1,!1)+o.from);return l}),a7=t=>AB(t,!1,!0),_B=t=>AB(t,!0,!1),DB=(t,e)=>$m(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=xr(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),EB=t=>DB(t,!1),Nde=t=>DB(t,!0),Rde=t=>$m(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Lde=t=>$m(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),$de=t=>$m(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Bde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:nn.of(["",""])},range:Se.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},zde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:xr(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:xr(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:Se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function rb(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function IB(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of rb(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(Se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(Se.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Se.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Fde=({state:t,dispatch:e})=>IB(t,e,!1),Hde=({state:t,dispatch:e})=>IB(t,e,!0);function PB(t,e,n){if(t.readOnly)return!1;let r=[];for(let s of rb(t))n?r.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):r.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});let i=t.changes(r);return e(t.update({changes:i,selection:t.selection.map(i,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Vde=({state:t,dispatch:e})=>PB(t,e,!1),qde=({state:t,dispatch:e})=>PB(t,e,!0),Wde=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(rb(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ld(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function jde(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=_r(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Bt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const bT=NB(!1),Yde=NB(!0);function NB(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&jde(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new m2(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Vx(c,s);for(u==null&&(u=Zf(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",Rp(e,u)];return l&&h.push(Rp(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:nn.of(h)},range:Se.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function G6(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:Se.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Qde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new m2(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=G6(t,(s,o,a)=>{let l=Vx(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Rp(t,l);(c!=u||a.from<s.from+c.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},RB=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(G6(t,(n,r)=>{r.push({from:n.from,insert:t.facet(wm)})}),{userEvent:"input.indent"})),!0),LB=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(G6(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Zf(i,t.tabSize),o=0,a=Rp(t,Math.max(0,s-Wu(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),Ude=t=>(t.setTabFocusMode(),!0),Gde=[{key:"Ctrl-b",run:hB,shift:wB,preventDefault:!0},{key:"Ctrl-f",run:fB,shift:xB},{key:"Ctrl-p",run:mB,shift:CB},{key:"Ctrl-n",run:gB,shift:OB},{key:"Ctrl-a",run:pde,shift:Mde},{key:"Ctrl-e",run:mde,shift:Tde},{key:"Ctrl-d",run:_B},{key:"Ctrl-h",run:a7},{key:"Ctrl-k",run:Rde},{key:"Ctrl-Alt-h",run:EB},{key:"Ctrl-o",run:Bde},{key:"Ctrl-t",run:zde},{key:"Ctrl-v",run:o7}],Kde=[{key:"ArrowLeft",run:hB,shift:wB,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:sde,shift:yde,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:fde,shift:Cde,preventDefault:!0},{key:"ArrowRight",run:fB,shift:xB,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ode,shift:bde,preventDefault:!0},{mac:"Cmd-ArrowRight",run:dde,shift:Ode,preventDefault:!0},{key:"ArrowUp",run:mB,shift:CB,preventDefault:!0},{mac:"Cmd-ArrowUp",run:mT,shift:vT},{mac:"Ctrl-ArrowUp",run:fT,shift:dT},{key:"ArrowDown",run:gB,shift:OB,preventDefault:!0},{mac:"Cmd-ArrowDown",run:gT,shift:yT},{mac:"Ctrl-ArrowDown",run:o7,shift:pT},{key:"PageUp",run:fT,shift:dT},{key:"PageDown",run:o7,shift:pT},{key:"Home",run:hde,shift:Sde,preventDefault:!0},{key:"Mod-Home",run:mT,shift:vT},{key:"End",run:ude,shift:kde,preventDefault:!0},{key:"Mod-End",run:gT,shift:yT},{key:"Enter",run:bT,shift:bT},{key:"Mod-a",run:Ade},{key:"Backspace",run:a7,shift:a7,preventDefault:!0},{key:"Delete",run:_B,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:EB,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Nde,preventDefault:!0},{mac:"Mod-Backspace",run:Lde,preventDefault:!0},{mac:"Mod-Delete",run:$de,preventDefault:!0}].concat(Gde.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),$B=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:lde,shift:wde},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cde,shift:xde},{key:"Alt-ArrowUp",run:Fde},{key:"Shift-Alt-ArrowUp",run:Vde},{key:"Alt-ArrowDown",run:Hde},{key:"Shift-Alt-ArrowDown",run:qde},{key:"Mod-Alt-ArrowUp",run:Ede},{key:"Mod-Alt-ArrowDown",run:Ide},{key:"Escape",run:Pde},{key:"Mod-Enter",run:Yde},{key:"Alt-l",mac:"Ctrl-l",run:_de},{key:"Mod-i",run:Dde,preventDefault:!0},{key:"Mod-[",run:LB},{key:"Mod-]",run:RB},{key:"Mod-Alt-\\",run:Qde},{key:"Shift-Mod-k",run:Wde},{key:"Shift-Mod-\\",run:vde},{key:"Mod-/",run:Ffe},{key:"Alt-A",run:Vfe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Ude}].concat(Kde),BB={key:"Tab",run:RB,shift:LB};var py=200,Ar=function(){};Ar.prototype.append=function(e){return e.length?(e=Ar.from(e),!this.length&&e||e.length<py&&this.leafAppend(e)||this.length<py&&e.leafPrepend(this)||this.appendInner(e)):this};Ar.prototype.prepend=function(e){return e.length?Ar.from(e).append(this):this};Ar.prototype.appendInner=function(e){return new Xde(this,e)};Ar.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ar.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ar.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ar.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ar.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Ar.from=function(e){return e instanceof Ar?e:e&&e.length?new zB(e):Ar.empty};var zB=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=py)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=py)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Ar);Ar.empty=new zB([]);var Xde=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Ar);const Zde=500;class io{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new $o(h.map));let d=h.step.map(i.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new $o(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new io(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),f=new $o(e.mapping.maps[u],h,n),d;(d=l&&l.merge(f))&&(f=d,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(o++,n=void 0),i||(l=f)}let c=o-r.depth;return c>e0e&&(a=Jde(a,c),o-=c),new io(a.append(s),o)}remapping(e,n){let r=new zp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new io(this.items.append(e.map(n=>new $o(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(f.step){let m=e.steps[d].invert(e.docs[d]),g=f.selection&&f.selection.map(s.slice(l+1,d));g&&a++,r.push(new $o(p,m,g))}else r.push(new $o(p))},i);let c=[];for(let f=n;f<o;f++)c.push(new $o(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),h=new io(u,a);return h.emptyItemCount()>Zde&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new $o(c.invert(),l,u),f,d=i.length-1;(f=i.length&&i[d].merge(h))?i[d]=f:i.push(h)}}else o.map&&r--},this.items.length,0),new io(Ar.from(i.reverse()),s)}}io.empty=new io(Ar.empty,0);function Jde(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class $o{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new $o(n.getMap().invert(),n,this.selection)}}}class Ql{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const e0e=20;function t0e(t,e,n,r){let i=n.getMeta(Nu),s;if(i)return i.historyState;n.getMeta(i0e)&&(t=new Ql(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Nu))return o.getMeta(Nu).redo?new Ql(t.done.addTransform(n,void 0,r,Wg(e)),t.undone,wT(n.mapping.maps),t.prevTime,t.prevComposition):new Ql(t.done,t.undone.addTransform(n,void 0,r,Wg(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!n0e(n,t.prevRanges)),c=o?y5(t.prevRanges,n.mapping):wT(n.mapping.maps);return new Ql(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Wg(e)),io.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ql(t.done.rebased(n,s),t.undone.rebased(n,s),y5(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ql(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),y5(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function n0e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function wT(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function y5(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function r0e(t,e,n){let r=Wg(e),i=Nu.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Ql(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Nu,{redo:n,historyState:l})}let b5=!1,xT=null;function Wg(t){let e=t.plugins;if(xT!=e){b5=!1,xT=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){b5=!0;break}}return b5}const Nu=new jn("history"),i0e=new jn("closeHistory");function s0e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Wn({key:Nu,state:{init(){return new Ql(io.empty,io.empty,null,0,-1)},apply(e,n,r){return t0e(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?ib:r=="historyRedo"?Lf:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function FB(t,e){return(n,r)=>{let i=Nu.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=r0e(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const ib=FB(!1,!0),Lf=FB(!0,!0);var o0e=Object.defineProperty,kT=Object.getOwnPropertySymbols,a0e=Object.prototype.hasOwnProperty,l0e=Object.prototype.propertyIsEnumerable,ST=(t,e,n)=>e in t?o0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c0e=(t,e)=>{for(var n in e||(e={}))a0e.call(e,n)&&ST(t,n,e[n]);if(kT)for(var n of kT(e))l0e.call(e,n)&&ST(t,n,e[n]);return t};function HB(t,e){return Object.assign(t,{meta:c0e({package:"@milkdown/components"},e)}),t}const u0e={extensions:[],languages:[],expandIcon:"",searchIcon:"",clearSearchIcon:"",searchPlaceholder:"Search language",noResultText:"No result",copyText:"Copy",copyIcon:"",onCopy:()=>{},renderLanguage:t=>t,renderPreview:()=>null,previewToggleButton:t=>t?"Edit":"Hide",previewLabel:"Preview",previewLoading:"Loading..."},Bm=bn(u0e,"codeBlockConfigCtx");HB(Bm,{displayName:"Config<code-block>",group:"CodeBlock"});class h0e{constructor(e){this.languages=e,this.map={},e.forEach(n=>{n.alias.forEach(r=>{this.map[r]=n})})}getAll(){return this.languages.map(e=>({name:e.name,alias:e.alias}))}load(e){const r=this.map[e.toLowerCase()];return r?r.support?Promise.resolve(r.support):r.load():Promise.resolve(void 0)}}function ff({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}ff.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var f0e=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});function d0e(t){return f0e(this,null,function*(){try{return navigator.clipboard.writeText(t)}catch{const n=document.createElement("textarea"),r=document.activeElement;n.value=t,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";const i=document.getSelection(),s=i?i.rangeCount>0&&i.getRangeAt(0):null;document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length,document.execCommand("copy"),document.body.removeChild(n),s&&(i.removeAllRanges(),i.addRange(s)),r&&r.focus()}})}const p0e=xt({props:{copyText:{type:String,required:!0},copyIcon:{type:String,required:!0},onCopy:{type:Function,required:!0},text:{type:String,required:!0}},setup(t){const e=()=>{d0e(t.text).then(()=>t.onCopy(t.text)).catch(console.error)};return()=>le(wt,null,le("button",{type:"button",class:"copy-button",onClick:e},le(ff,{icon:t.copyIcon}),t.copyText))}}),m0e=xt({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:t,config:e,setLanguage:n,getAllLanguages:r,getReadOnly:i}){const s=ae(),o=ae(!1),a=ae(),l=ae(),c=ae("");Vt([o,s,l],()=>{c.value="";const m=s.value,g=l.value;!m||!g||sa(m,g,{placement:"bottom-start"}).then(({x:v,y:b})=>{Object.assign(g.style,{left:`${v}px`,top:`${b}px`})}).catch(console.error)});const u=m=>{if(m.preventDefault(),m.stopPropagation(),i())return;const g=!o.value;o.value=g,g&&setTimeout(()=>{var v;return(v=a.value)==null?void 0:v.focus()},0)},h=m=>{const g=m.target;c.value=g.value},f=m=>{m.key==="Escape"&&(c.value="")},d=ue(()=>{var m;if(!o.value)return[];const g=(m=r())!=null?m:[],v=g.find(S=>S.name.toLowerCase()===t.value.toLowerCase()),b=g.filter(S=>{const O=c.value.toLowerCase();return(S.name.toLowerCase().includes(O)||S.alias.some(k=>k.toLowerCase().includes(O)))&&S!==v});return b.length===0?[]:v?[v,...b]:b}),p=m=>{const g=m.target;if(s.value&&s.value.contains(g))return;const v=l.value,b=s.value;!b||!v||b.dataset.expanded==="true"&&(v.contains(g)||(o.value=!1))};return Dr(()=>{window.addEventListener("click",p)}),la(()=>{window.removeEventListener("click",p)}),()=>le(wt,null,le("button",{type:"button",ref:s,class:"language-button",onClick:u,"data-expanded":String(o.value)},t.value||"Text",le("div",{class:"expand-icon"},le(ff,{icon:e.expandIcon}))),le("div",{ref:l,class:"language-picker"},o.value?le("div",{class:"list-wrapper"},le("div",{class:"search-box"},le("div",{class:"search-icon"},le(ff,{icon:e.searchIcon})),le("input",{ref:a,class:"search-input",placeholder:e.searchPlaceholder,value:c.value,onInput:h,onKeydown:f}),le("div",{class:Kr("clear-icon",c.value.length===0&&"hidden"),onMousedown:m=>{m.preventDefault(),c.value=""}},le(ff,{icon:e.clearSearchIcon}))),le("ul",{class:"language-list",role:"listbox",onKeydown:m=>{if(m.key==="Enter"){const g=document.activeElement;g instanceof HTMLElement&&g.dataset.language&&n(g.dataset.language)}}},d.value.length?d.value.map(m=>le("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":m.name.toLowerCase()===t.value.toLowerCase(),"data-language":m.name,onClick:()=>{n(m.name),o.value=!1}},e.renderLanguage(m.name,m.name.toLowerCase()===t.value.toLowerCase()))):le("li",{class:"language-list-item no-result"},e.noResultText))):null))}}),g0e=xt({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(t){const{previewOnlyMode:e,config:n,preview:r}=t,i=ae();return Cc(()=>{const s=i.value;if(!s)return;for(;s.firstChild;)s.removeChild(s.firstChild);const o=r.value;(typeof o=="string"||o instanceof Element)&&(s.innerHTML=Us.sanitize(o))}),()=>r.value?le("div",{class:"preview-panel"},!e.value&&le(wt,null,le("div",{class:"preview-divider"}),le("div",{class:"preview-label"},n.previewLabel)),le("div",{ref:i,class:"preview"})):null}}),v0e=xt({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){var e;const n=(e=t.config.previewOnlyByDefault)!=null?e:t.getReadOnly(),r=ae(n),i=ae(),s=ae(null);Dr(()=>{for(var a;(a=i.value)!=null&&a.firstChild;)i.value.removeChild(i.value.firstChild);i.value&&i.value.appendChild(t.codemirror.dom)}),Vt(()=>[t.text.value,t.language.value],()=>{const a=t.config.renderPreview(t.language.value,t.text.value,c=>s.value=c);a&&(s.value=a),a===void 0&&!s.value&&(s.value=Us.sanitize(t.config.previewLoading)),a===null&&(s.value=null)},{immediate:!0});const o=()=>{};return()=>{var a;return le(wt,null,le("div",{class:"tools"},le(m0e,{language:t.language,config:t.config,setLanguage:t.setLanguage,getAllLanguages:t.getAllLanguages,getReadOnly:t.getReadOnly}),le("div",{class:"tools-button-group"},le(p0e,{copyIcon:t.config.copyIcon,copyText:t.config.copyText,onCopy:(a=t.config.onCopy)!=null?a:o,text:t.text.value}),s.value?le("button",{class:"preview-toggle-button",onClick:()=>r.value=!r.value},le(ff,{icon:t.config.previewToggleButton(r.value)})):null)),le("div",{ref:i,class:Kr("codemirror-host",s.value&&r.value&&"hidden")}),le(g0e,{text:t.text,language:t.language,config:t.config,previewOnlyMode:r,preview:s}))}}});class y0e{constructor(e,n,r,i,s){this.node=e,this.view=n,this.getPos=r,this.loader=i,this.config=s,this.selected=ae(!1),this.language=ae(""),this.text=ae(""),this.updating=!1,this.languageName="",this.forwardUpdate=o=>{var a;if(this.updating||!this.cm.hasFocus)return;let l=((a=this.getPos())!=null?a:0)+1;const{main:c}=o.state.selection,u=l+c.from,h=l+c.to,f=this.view.state.selection;if(o.docChanged||f.from!==u||f.to!==h){const d=this.view.state.tr;o.changes.iterChanges((p,m,g,v,b)=>{b.length?d.replaceWith(l+p,l+m,this.view.state.schema.text(b.toString())):d.delete(l+p,l+m),l+=v-g-(m-p)}),d.setSelection(ct.create(d.doc,u,h)),this.view.dispatch(d)}},this.createApp=()=>Qs(v0e,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{const o=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>LR(o.state,o.dispatch)?(o.focus(),!0):!1},{key:"Mod-z",run:()=>ib(o.state,o.dispatch)},{key:"Shift-Mod-z",run:()=>Lf(o.state,o.dispatch)},{key:"Mod-y",run:()=>Lf(o.state,o.dispatch)},{key:"Backspace",run:()=>{var a;const l=this.cm.state.selection.ranges;if(l.length>1)return!1;const c=l[0];if(c&&(!c.empty||c.anchor>0)||this.cm.state.doc.lines>=2)return!1;const u=this.view.state,h=(a=this.getPos())!=null?a:0,f=u.tr.replaceWith(h,h+this.node.nodeSize,u.schema.nodes.paragraph.createChecked({},this.node.content));return f.setSelection(ct.near(f.doc.resolve(h))),this.view.dispatch(f),this.view.focus(),!0}}]},this.maybeEscape=(o,a)=>{var l;const{state:c}=this.cm;let u=c.selection.main;if(!u.empty||(o==="line"&&(u=c.doc.lineAt(u.head)),a<0?u.from>0:u.to<c.doc.length))return!1;const h=((l=this.getPos())!=null?l:0)+(a<0?0:this.node.nodeSize),f=ct.near(this.view.state.doc.resolve(h),a),d=this.view.state.tr.setSelection(f).scrollIntoView();return this.view.dispatch(d),this.view.focus(),!0},this.setLanguage=o=>{var a;this.view.dispatch(this.view.state.tr.setNodeAttribute((a=this.getPos())!=null?a:0,"language",o))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new Fu,this.readOnlyConf=new Fu,this.cm=new Ze({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(Sn.readOnly.of(!this.view.editable)),MP(),ch.of(this.codeMirrorKeymap()),this.languageConf.of([]),Sn.changeFilter.of(()=>this.view.editable),...s.extensions,Ze.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=Cc(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(e){const n=document.createElement("div");return n.className="milkdown-code-block",this.text.value=this.node.textContent,e.mount(n),n}updateLanguage(){const e=this.node.attrs.language;if(e===this.languageName)return;this.language.value=e,this.loader.load(e??"").then(r=>{r&&(this.cm.dispatch({effects:this.languageConf.reconfigure(r)}),this.languageName=e)}).catch(console.error)}setSelection(e,n){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:e,head:n}}),this.updating=!1)}update(e){if(e.type!==this.node.type)return!1;if(this.updating)return!0;this.node=e,this.text.value=e.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(Sn.readOnly.of(!this.view.editable))});const n=b0e(this.cm.state.doc.toString(),e.textContent);return n&&(this.updating=!0,this.cm.dispatch({changes:{from:n.from,to:n.to,insert:n.text},scrollIntoView:!0}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}function b0e(t,e){if(t===e)return null;let n=0,r=t.length,i=e.length;for(;n<r&&t.charCodeAt(n)===e.charCodeAt(n);)++n;for(;r>n&&i>n&&t.charCodeAt(r-1)===e.charCodeAt(i-1);)r--,i--;return{from:n,to:r,text:e.slice(n,i)}}const VB=Am(oa.node,t=>{const e=t.get(Bm.key),n=new h0e(e.languages);return(r,i,s)=>new y0e(r,i,s,n,e)});HB(VB,{displayName:"NodeView<code-block>",group:"CodeBlock"});const w0e=[VB,Bm],CT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class $f{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(CT(a)):CT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ei(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Sx(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ho(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&($f.prototype[Symbol.iterator]=function(){return this});const qB={from:-1,to:-1,match:/.*/.exec("")},K6="gm"+(/x/.unicode==null?"":"u");class WB{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=qB,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new jB(e,n,r,i,s);this.re=new RegExp(n,K6+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=my(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=my(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const w5=new WeakMap;class df{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=w5.get(e);if(!i||i.from>=r||i.to<=n){let a=new df(n,e.sliceString(n,r));return w5.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),w5.set(e,new df(o,s)),new df(n,s.slice(n-o,r-o))}}class jB{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=qB,this.matchPos=my(e,i),this.re=new RegExp(n,K6+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=df.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=my(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=df.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(WB.prototype[Symbol.iterator]=jB.prototype[Symbol.iterator]=function(){return this});function x0e(t){try{return new RegExp(t,K6),!0}catch{return!1}}function my(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}const k0e=t=>{let{state:e}=t,n=String(e.doc.lineAt(t.state.selection.main.head).number),{close:r,result:i}=MZ(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:n},focus:!0,submitLabel:e.phrase("go")});return i.then(s=>{let o=s&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.elements.line.value);if(!o){t.dispatch({effects:r});return}let a=e.doc.lineAt(e.selection.main.head),[,l,c,u,h]=o,f=u?+u.slice(1):0,d=c?+c:a.number;if(c&&h){let g=d/100;l&&(g=g*(l=="-"?-1:1)+a.number/e.doc.lines),d=Math.round(e.doc.lines*g)}else c&&l&&(d=d*(l=="-"?-1:1)+a.number);let p=e.doc.line(Math.max(1,Math.min(e.doc.lines,d))),m=Se.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[r,Ze.scrollIntoView(m.from,{y:"center"})],selection:m})}),!0},S0e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},C0e=et.define({combine(t){return ca(t,S0e,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function O0e(t){return[D0e,_0e]}const M0e=mt.mark({class:"cm-selectionMatch"}),T0e=mt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function OT(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=Un.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=Un.Word)}function A0e(t,e,n,r){return t(e.sliceDoc(n,n+1))==Un.Word&&t(e.sliceDoc(r-1,r))==Un.Word}const _0e=lr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(C0e),{state:n}=t,r=n.selection;if(r.ranges.length>1)return mt.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return mt.none;let l=n.wordAt(i.head);if(!l)return mt.none;o=n.charCategorizer(i.head),s=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return mt.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(OT(o,n,i.from,i.to)&&A0e(o,n,i.from,i.to)))return mt.none}else if(s=n.sliceDoc(i.from,i.to),!s)return mt.none}let a=[];for(let l of t.visibleRanges){let c=new $f(n.doc,s,l.from,l.to);for(;!c.next().done;){let{from:u,to:h}=c.value;if((!o||OT(o,n,u,h))&&(i.empty&&u<=i.from&&h>=i.to?a.push(T0e.range(u,h)):(u>=i.to||h<=i.from)&&a.push(M0e.range(u,h)),a.length>e.maxMatches))return mt.none}}return mt.set(a)}},{decorations:t=>t.decorations}),D0e=Ze.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),E0e=({state:t,dispatch:e})=>{let{selection:n}=t,r=Se.create(n.ranges.map(i=>t.wordAt(i.head)||Se.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function I0e(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new $f(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new $f(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const P0e=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return E0e({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=I0e(t,r);return i?(e(t.update({selection:t.selection.addRange(Se.range(i.from,i.to),!1),effects:Ze.scrollIntoView(i.to)})),!0):!1},cd=et.define({combine(t){return ca(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Q0e(e),scrollToMatch:e=>Ze.scrollIntoView(e)})}});class YB{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||x0e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new z0e(this):new L0e(this)}getCursor(e,n=0,r){let i=e.doc?e:Sn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Bh(this,i,n,r):$h(this,i,n,r)}}class QB{constructor(e){this.spec=e}}function N0e(t,e,n){return(r,i,s,o)=>{if(n&&!n(r,i,s,o))return!1;let a=r>=o&&i<=o+s.length?s.slice(r-o,i-o):e.doc.sliceString(r,i);return t(a,e,r,i)}}function $h(t,e,n,r){let i;return t.wholeWord&&(i=R0e(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(i=N0e(t.test,e,i)),new $f(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:s=>s.toLowerCase(),i)}function R0e(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(gy(i,n-s))!=Un.Word||e(vy(i,n-s))!=Un.Word)&&(e(vy(i,r-s))!=Un.Word||e(gy(i,r-s))!=Un.Word))}class L0e extends QB{constructor(e){super(e)}nextMatch(e,n,r){let i=$h(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=$h(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=$h(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=$h(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=$h(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function $0e(t,e,n){return(r,i,s)=>(!n||n(r,i,s))&&t(s[0],e,r,i)}function Bh(t,e,n,r){let i;return t.wholeWord&&(i=B0e(e.charCategorizer(e.selection.main.head))),t.test&&(i=$0e(t.test,e,i)),new WB(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:i},n,r)}function gy(t,e){return t.slice(xr(t,e,!1),e)}function vy(t,e){return t.slice(e,xr(t,e))}function B0e(t){return(e,n,r)=>!r[0].length||(t(gy(r.input,r.index))!=Un.Word||t(vy(r.input,r.index))!=Un.Word)&&(t(vy(r.input,r.index+r[0].length))!=Un.Word||t(gy(r.input,r.index+r[0].length))!=Un.Word)}class z0e extends QB{nextMatch(e,n,r){let i=Bh(this.spec,e,r,e.doc.length).next();return i.done&&(i=Bh(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=Bh(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Bh(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Bh(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Xp=It.define(),X6=It.define(),cc=Er.define({create(t){return new x5(l7(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Xp)?t=new x5(n.value.create(),t.panel):n.is(X6)&&(t=new x5(t.query,n.value?Z6:null));return t},provide:t=>Pp.from(t,e=>e.panel)});class x5{constructor(e,n){this.query=e,this.panel=n}}const F0e=mt.mark({class:"cm-searchMatch"}),H0e=mt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),V0e=lr.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(cc))}update(t){let e=t.state.field(cc);(e!=t.startState.field(cc)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return mt.none;let{view:n}=this,r=new il;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-500;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let h=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,h?H0e:F0e)})}return r.finish()}},{decorations:t=>t.decorations});function zm(t){return e=>{let n=e.state.field(cc,!1);return n&&n.query.spec.valid?t(e,n):KB(e)}}const yy=zm((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Se.single(r.from,r.to),s=t.state.facet(cd);return t.dispatch({selection:i,effects:[J6(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),GB(t),!0}),by=zm((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=Se.single(i.from,i.to),o=t.state.facet(cd);return t.dispatch({selection:s,effects:[J6(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),GB(t),!0}),q0e=zm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Se.create(n.map(r=>Se.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),W0e=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new $f(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(Se.range(a.value.from,a.value.to))}return e(t.update({selection:Se.create(s,o),userEvent:"select.search.matches"})),!0},MT=zm((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==r&&o.to==i&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Ze.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(a);return o&&(l=Se.single(o.from,o.to).map(h),u.push(J6(t,o)),u.push(n.facet(cd).scrollToMatch(l.main,t))),t.dispatch({changes:h,selection:l,effects:u,userEvent:"input.replace"}),!0}),j0e=zm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Ze.announce.of(r),userEvent:"input.replace.all"}),!0});function Z6(t){return t.state.facet(cd).createPanel(t)}function l7(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(cd);return new YB({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function UB(t){let e=Hx(t,Z6);return e&&e.dom.querySelector("[main-field]")}function GB(t){let e=UB(t);e&&e==t.root.activeElement&&e.select()}const KB=t=>{let e=t.state.field(cc,!1);if(e&&e.panel){let n=UB(t);if(n&&n!=t.root.activeElement){let r=l7(t.state,e.query.spec);r.valid&&t.dispatch({effects:Xp.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[X6.of(!0),e?Xp.of(l7(t.state,e.query.spec)):It.appendConfig.of(G0e)]});return!0},XB=t=>{let e=t.state.field(cc,!1);if(!e||!e.panel)return!1;let n=Hx(t,Z6);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:X6.of(!1)}),!0},Y0e=[{key:"Mod-f",run:KB,scope:"editor search-panel"},{key:"F3",run:yy,shift:by,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:yy,shift:by,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:XB,scope:"editor search-panel"},{key:"Mod-Shift-l",run:W0e},{key:"Mod-Alt-g",run:k0e},{key:"Mod-d",run:P0e,preventDefault:!0}];class Q0e{constructor(e){this.view=e;let n=this.query=e.state.field(cc).query.spec;this.commit=this.commit.bind(this),this.searchField=xn("input",{value:n.search,placeholder:Xi(e,"Find"),"aria-label":Xi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=xn("input",{value:n.replace,placeholder:Xi(e,"Replace"),"aria-label":Xi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=xn("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=xn("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=xn("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return xn("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=xn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>yy(e),[Xi(e,"next")]),r("prev",()=>by(e),[Xi(e,"previous")]),r("select",()=>q0e(e),[Xi(e,"all")]),xn("label",null,[this.caseField,Xi(e,"match case")]),xn("label",null,[this.reField,Xi(e,"regexp")]),xn("label",null,[this.wordField,Xi(e,"by word")]),...e.state.readOnly?[]:[xn("br"),this.replaceField,r("replace",()=>MT(e),[Xi(e,"replace")]),r("replaceAll",()=>j0e(e),[Xi(e,"replace all")])],xn("button",{name:"close",onclick:()=>XB(e),"aria-label":Xi(e,"close"),type:"button"},[""])])}commit(){let e=new YB({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Xp.of(e)}))}keydown(e){$X(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?by:yy)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),MT(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Xp)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(cd).top}}function Xi(t,e){return t.state.phrase(e)}const R1=30,L1=/[\s\.,:;?!]/;function J6(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-R1),o=Math.min(i,n+R1),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<R1;l++)if(!L1.test(a[l+1])&&L1.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-R1;l--)if(!L1.test(a[l-1])&&L1.test(a[l])){a=a.slice(0,l);break}}return Ze.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const U0e=Ze.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),G0e=[cc,Oc.low(V0e),U0e];class ZB{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=_r(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(JB(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function TT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function K0e(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=TT(e)+TT(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function X0e(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:K0e(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function GDe(t,e){return n=>{for(let r=_r(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class AT{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Ru(t){return t.selection.main.from}function JB(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const e8=wl.define();function Z0e(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:Se.cursor(a.from+s+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const _T=new WeakMap;function J0e(t){if(!Array.isArray(t))return t;let e=_T.get(t);return e||_T.set(t,e=X0e(t)),e}const wy=It.define(),Zp=It.define();class epe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Ei(e,n),i=Ho(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Ei(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let b=Ei(e,0),S=Ho(b),O=S==e.length?0:-100;if(b!=n[0])if(b==r[0])O+=-200;else return null;return this.ret(O,[0,S])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let b=0,S=Math.min(e.length,200);b<S&&c<l;){let O=Ei(e,b);(O==n[c]||O==r[c])&&(i[c++]=b),b+=Ho(O)}if(c<l)return null}let u=0,h=0,f=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(e),v=!0;for(let b=0,S=Math.min(e.length,200),O=0;b<S&&h<l;){let k=Ei(e,b);a<0&&(u<l&&k==n[u]&&(s[u++]=b),d<l&&(k==n[d]||k==r[d]?(d==0&&(p=b),m=b+1,d++):d=0));let C,T=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(C=Sx(k))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!b||T==1&&g||O==0&&T!=0)&&(n[h]==k||r[h]==k&&(f=!0)?o[h++]=b:o.length&&(v=!1)),O=T,b+=Ho(k)}return h==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[p,m]):h==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Ho(Ei(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class tpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Or=et.define({combine(t){return ca(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:npe,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>DT(e(r),n(r)),optionClass:(e,n)=>r=>DT(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function DT(t,e){return t?e?t+" "+e:t:e}function npe(t,e,n,r,i,s){let o=t.textDirection==An.RTL,a=o,l=!1,c="top",u,h,f=e.left-i.left,d=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&f<Math.min(p,d)?a=!1:!a&&d<Math.min(p,f)&&(a=!0),p<=(a?f:d))u=Math.max(i.top,Math.min(n.top,i.bottom-m))-e.top,h=Math.min(400,a?f:d);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let b=i.bottom-e.bottom;b>=m||b>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let g=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/g}px; max-width: ${h/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function rpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],h=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,h))),f.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function k5(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class ipe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Or);this.optionContent=rpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=k5(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Or).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Zp.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=k5(s.length,o,e.state.facet(Or).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=k5(n.options.length,n.selected,this.view.state.facet(Or).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Ni(this.view.state,a,"completion info")):(this.addInfoPane(o,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&ope(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Or).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&u.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function spe(t,e){return n=>new ipe(n,t,e)}function ope(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function ET(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ape(t,e){let n=[],r=null,i=null,s=u=>{n.push(u);let{section:h}=u.completion;if(h){r||(r=[]);let f=typeof h=="string"?h:h.name;r.some(d=>d.name==f)||r.push(typeof h=="string"?{name:f}:h)}},o=e.facet(Or);for(let u of t)if(u.hasResult()){let h=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)s(new AT(f,u.source,h?h(f):[],1e9-n.length));else{let f=e.sliceDoc(u.from,u.to),d,p=o.filterStrict?new tpe(f):new epe(f);for(let m of u.result.options)if(d=p.match(m.label)){let g=m.displayLabel?h?h(m,d.matched):[]:d.matched,v=d.score+(m.boost||0);if(s(new AT(m,u.source,g,v)),typeof m.section=="object"&&m.section.rank==="dynamic"){let{name:b}=m.section;i||(i=Object.create(null)),i[b]=Math.max(v,i[b]||-1e9)}}}}if(r){let u=Object.create(null),h=0,f=(d,p)=>(d.rank==="dynamic"&&p.rank==="dynamic"?i[p.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof p.rank=="number"?p.rank:1e9)||(d.name<p.name?-1:1);for(let d of r.sort(f))h-=1e5,u[d.name]=h;for(let d of n){let{section:p}=d.completion;p&&(d.score+=u[typeof p=="string"?p:p.name])}}let a=[],l=null,c=o.compareCompletions;for(let u of n.sort((h,f)=>f.score-h.score||c(h.completion,f.completion))){let h=u.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?a.push(u):ET(u.completion)>ET(l)&&(a[a.length-1]=u),l=u.completion}return a}class Yh{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Yh(this.options,IT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=ape(e,n);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=n.facet(Or).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Yh(a,IT(r,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:dpe,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Yh(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Yh(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class xy{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new xy(hpe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Or),s=(r.override||n.languageDataAt("autocomplete",Ru(n)).map(J0e)).map(l=>(this.active.find(u=>u.source==l)||new Is(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(t8));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!lpe(s,this.active)||a?o=Yh.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Is(l.source,0):l));for(let l of e.effects)l.is(tz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new xy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?cpe:upe}}function lpe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const cpe={"aria-autocomplete":"list"},upe={};function IT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const hpe=[];function ez(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(e8);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Is{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=ez(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new Is(i.source,0)),r&4&&i.state==0&&(i=new Is(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(wy))i=new Is(i.source,1,s.value);else if(s.is(Zp))i=new Is(i.source,0);else if(s.is(t8))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ru(e.state))}}class pf extends Is{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Ru(e.state);if(a>o||!i||n&2&&(Ru(e.startState)==this.from||a<this.limit))return new Is(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return fpe(i.validFor,e.state,s,o)?new pf(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new ZB(e.state,a,!1)))?new pf(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:Ru(e.state)):new Is(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new pf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Is(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function fpe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):JB(t,!0).test(i)}const t8=It.define({map(t,e){return t.map(n=>n.map(e))}}),tz=It.define(),Ii=Er.define({create(){return xy.start()},update(t,e){return t.update(e)},provide:t=>[Fx.from(t,e=>e.tooltip),Ze.contentAttributes.from(t,e=>e.attrs)]});function n8(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Ii).active.find(i=>i.source==e.source);return r instanceof pf?(typeof n=="string"?t.dispatch({...Z0e(t.state,n,r.from,r.to),annotations:e8.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const dpe=spe(Ii,n8);function $1(t,e="option"){return n=>{let r=n.state.field(Ii,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Or).interactionDelay)return!1;let i=1,s;e=="page"&&(s=DP(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:tz.of(a)}),!0}}const ppe=t=>{let e=t.state.field(Ii,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Or).interactionDelay?!1:n8(t,e.open.options[e.open.selected])},S5=t=>t.state.field(Ii,!1)?(t.dispatch({effects:wy.of(!0)}),!0):!1,mpe=t=>{let e=t.state.field(Ii,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Zp.of(null)}),!0)};class gpe{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const vpe=50,ype=1e3,bpe=lr.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Ii).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Ii),n=t.state.facet(Or);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Ii)==e)return;let r=t.transactions.some(s=>{let o=ez(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>vpe&&Date.now()-o.time>ype){for(let a of o.context.abortListeners)try{a()}catch(l){Ni(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(wy)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Ii);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Or).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=Ru(e),r=new ZB(e,n,t.explicit,this.view),i=new gpe(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Zp.of(null)}),Ni(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Or).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Or),r=this.view.state.field(Ii);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=Ru(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new pf(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let u of s.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new Is(s.active.source,0);for(let l of s.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:t8.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Ii,!1);if(e&&e.tooltip&&this.view.state.facet(Or).closeOnBlur){let n=e.open&&DP(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Zp.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:wy.of(!1)}),20),this.composing=0}}}),wpe=typeof navigator=="object"&&/Win/.test(navigator.platform),xpe=Oc.highest(Ze.domEventHandlers({keydown(t,e){let n=e.state.field(Ii,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(wpe&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&n8(e,r),!1}})),nz=Ze.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class kpe{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class r8{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,$r.TrackDel),r=e.mapPos(this.to,1,$r.TrackDel);return n==null||r==null?null:new r8(this.field,n,r)}}class i8{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(wm);i.push(n+c.length-u),l=c+l.slice(u)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new r8(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,u=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(a!=null?n[h].seq==a:u&&n[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<n.length&&(a==null||n[h].seq!=null&&n[h].seq<a);)h++;n.splice(h,0,{seq:a,name:u}),c=h;for(let f of i)f.field>=c&&f.field++}for(let h of i)if(h.line==r.length&&h.from>s.index){let f=s[2]?3+(s[1]||"").length:2;h.from-=f,h.to-=f}i.push(new kpe(c,r.length,s.index,s.index+u.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of i)u.line==r.length&&u.from>c&&(u.from--,u.to--);return l}),r.push(o)}return new i8(r,i)}}let Spe=mt.widget({widget:new class extends vo{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Cpe=mt.mark({class:"cm-snippetField"});class ud{constructor(e,n){this.ranges=e,this.active=n,this.deco=mt.set(e.map(r=>(r.from==r.to?Spe:Cpe).range(r.from,r.to)),!0)}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new ud(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const Fm=It.define({map(t,e){return t&&t.map(e)}}),Ope=It.define(),Jp=Er.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(Fm))return n.value;if(n.is(Ope)&&t)return new ud(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Ze.decorations.from(t,e=>e?e.deco:mt.none)});function s8(t,e){return Se.create(t.filter(n=>n.field==e).map(n=>Se.range(n.from,n.to)))}function Mpe(t){let e=i8.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),{main:l}=n.state.selection,c={changes:{from:i,to:s==l.from?l.to:s,insert:nn.of(o)},scrollIntoView:!0,annotations:r?[e8.of(r),di.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=s8(a,0)),a.some(u=>u.field>0)){let u=new ud(a,0),h=c.effects=[Fm.of(u)];n.state.field(Jp,!1)===void 0&&h.push(It.appendConfig.of([Jp,Epe,Ipe,nz]))}n.dispatch(n.state.update(c))}}function rz(t){return({state:e,dispatch:n})=>{let r=e.field(Jp,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:s8(r.ranges,i),effects:Fm.of(s?null:new ud(r.ranges,i)),scrollIntoView:!0})),!0}}const Tpe=({state:t,dispatch:e})=>t.field(Jp,!1)?(e(t.update({effects:Fm.of(null)})),!0):!1,Ape=rz(1),_pe=rz(-1),Dpe=[{key:"Tab",run:Ape,shift:_pe},{key:"Escape",run:Tpe}],PT=et.define({combine(t){return t.length?t[0]:Dpe}}),Epe=Oc.highest(ch.compute([PT],t=>t.facet(PT)));function KDe(t,e){return{...e,apply:Mpe(t)}}const Ipe=Ze.domEventHandlers({mousedown(t,e){let n=e.state.field(Jp,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:s8(n.ranges,i.field),effects:Fm.of(n.ranges.some(s=>s.field>i.field)?new ud(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),em={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},xu=It.define({map(t,e){let n=e.mapPos(t,-1,$r.TrackAfter);return n??void 0}}),o8=new class extends dc{};o8.startSide=1;o8.endSide=-1;const iz=Er.define({create(){return Ut.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(xu)&&(t=t.update({add:[o8.range(n.value,n.value+1)]}));return t}});function Ppe(){return[Rpe,iz]}const C5="()[]{}<>";function sz(t){for(let e=0;e<C5.length;e+=2)if(C5.charCodeAt(e)==t)return C5.charAt(e+1);return Sx(t<128?t:t+1)}function oz(t,e){return t.languageDataAt("closeBrackets",e)[0]||em}const Npe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Rpe=Ze.inputHandler.of((t,e,n,r)=>{if((Npe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Ho(Ei(r,0))==1||e!=i.from||n!=i.to)return!1;let s=Bpe(t.state,r);return s?(t.dispatch(s),!0):!1}),Lpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=oz(t,t.selection.main.head).brackets||em.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=zpe(t.doc,o.head);for(let l of r)if(l==a&&sb(t.doc,o.head)==sz(Ei(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:Se.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},$pe=[{key:"Backspace",run:Lpe}];function Bpe(t,e){let n=oz(t,t.selection.main.head),r=n.brackets||em.brackets;for(let i of r){let s=sz(Ei(i,0));if(e==i)return s==i?Vpe(t,i,r.indexOf(i+i+i)>-1,n):Fpe(t,i,s,n.before||em.before);if(e==s&&az(t,t.selection.main.from))return Hpe(t,i,s)}return null}function az(t,e){let n=!1;return t.field(iz).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function sb(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Ho(Ei(n,0)))}function zpe(t,e){let n=t.sliceString(e-2,e);return Ho(Ei(n,0))==n.length?n:n.slice(1)}function Fpe(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:xu.of(o.to+e.length),range:Se.range(o.anchor+e.length,o.head+e.length)};let a=sb(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:xu.of(o.head+e.length),range:Se.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Hpe(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&sb(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:Se.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Vpe(t,e,n,r){let i=r.stringPrefixes||em.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:xu.of(a.to+e.length),range:Se.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=sb(t.doc,l),u;if(c==e){if(NT(t,l))return{changes:{insert:e+e,from:l},effects:xu.of(l+e.length),range:Se.cursor(l+e.length)};if(az(t,l)){let f=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:Se.cursor(l+f.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=RT(t,l-2*e.length,i))>-1&&NT(t,u))return{changes:{insert:e+e+e+e,from:l},effects:xu.of(l+e.length),range:Se.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=Un.Word&&RT(t,l,i)>-1&&!qpe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:xu.of(l+e.length),range:Se.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function NT(t,e){let n=_r(t).resolveInner(e+1);return n.parent&&n.from==e}function qpe(t,e,n,r){let i=_r(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function RT(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Un.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=Un.Word)return s}return-1}function Wpe(t={}){return[xpe,Ii,Or.of(t),bpe,jpe,nz]}const lz=[{key:"Ctrl-Space",run:S5},{mac:"Alt-`",run:S5},{mac:"Alt-i",run:S5},{key:"Escape",run:mpe},{key:"ArrowDown",run:$1(!0)},{key:"ArrowUp",run:$1(!1)},{key:"PageDown",run:$1(!0,"page")},{key:"PageUp",run:$1(!1,"page")},{key:"Enter",run:ppe}],jpe=Oc.highest(ch.computeN([Or],t=>t.facet(Or).defaultKeymap?[lz]:[]));class LT{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class du{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(tm).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((d,p)=>d.from-p.from||d.to-p.to),o=new il,a=[],l=0,c=r.doc.iter(),u=0,h=r.doc.length;for(let d=0;;){let p=d==s.length?null:s[d];if(!p&&!a.length)break;let m,g;if(a.length)m=l,g=a.reduce((S,O)=>Math.min(S,O.to),p&&p.from>m?p.from:1e8);else{if(m=p.from,m>h)break;g=p.to,a.push(p),d++}for(;d<s.length;){let S=s[d];if(S.from==m&&(S.to>S.from||S.to==m))a.push(S),d++,g=Math.min(S.to,g);else{g=Math.min(S.from,g);break}}g=Math.min(g,h);let v=!1;if(a.some(S=>S.from==m&&(S.to==g||g==h))&&(v=m==g,!v&&g-m<10)){let S=m-(u+c.value.length);S>0&&(c.next(S),u=m);for(let O=m;;){if(O>=g){v=!0;break}if(!c.lineBreak&&u+c.value.length>O)break;O=u+c.value.length,u+=c.value.length,c.next()}}let b=ime(a);if(v)o.add(m,m,mt.widget({widget:new eme(b),diagnostics:a.slice()}));else{let S=a.reduce((O,k)=>k.markClass?O+" "+k.markClass:O,"");o.add(m,g,mt.mark({class:"cm-lintRange cm-lintRange-"+b+S,diagnostics:a.slice(),inclusiveEnd:a.some(O=>O.to>g)}))}if(l=g,l==h)break;for(let S=0;S<a.length;S++)a[S].to<=l&&a.splice(S--,1)}let f=o.finish();return new du(f,n,Bf(f))}}function Bf(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new LT(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new LT(r.from,s,r.diagnostic)}}),r}function Ype(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(tm).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(cz))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function Qpe(t,e){return t.field(hs,!1)?e:e.concat(It.appendConfig.of(sme))}const cz=It.define(),a8=It.define(),uz=It.define(),hs=Er.define({create(){return new du(mt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Bf(n,t.selected.diagnostic,s)||Bf(n,null,s)}!n.size&&i&&e.state.facet(tm).autoPanel&&(i=null),t=new du(n,i,r)}for(let n of e.effects)if(n.is(cz)){let r=e.state.facet(tm).autoPanel?n.value.length?nm.open:null:t.panel;t=du.init(n.value,r,e.state)}else n.is(a8)?t=new du(t.diagnostics,n.value?nm.open:null,t.selected):n.is(uz)&&(t=new du(t.diagnostics,t.panel,n.value));return t},provide:t=>[Pp.from(t,e=>e.panel),Ze.decorations.from(t,e=>e.diagnostics)]}),Upe=mt.mark({class:"cm-lintRange cm-lintRange-active"});function Gpe(t,e,n){let{diagnostics:r}=t.state.field(hs),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return i=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(tm).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Kpe(t,i)}}}:null}function Kpe(t,e){return xn("ul",{class:"cm-tooltip-lint"},e.map(n=>fz(t,n,!1)))}const Xpe=t=>{let e=t.state.field(hs,!1);(!e||!e.panel)&&t.dispatch({effects:Qpe(t.state,[a8.of(!0)])});let n=Hx(t,nm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},$T=t=>{let e=t.state.field(hs,!1);return!e||!e.panel?!1:(t.dispatch({effects:a8.of(!1)}),!0)},Zpe=t=>{let e=t.state.field(hs,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Jpe=[{key:"Mod-Shift-m",run:Xpe,preventDefault:!0},{key:"F8",run:Zpe}],tm=et.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...ca(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:BT,tooltipFilter:BT,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,s)=>e(r,i,s)||n(r,i,s):e:n,autoPanel:(e,n)=>e||n})}}});function BT(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function hz(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function fz(t,e,n){var r;let i=n?hz(e.actions):[];return xn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},xn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let p=Bf(t.state.field(hs).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,h=u<0?c:[c.slice(0,u),xn("u",c.slice(u,u+1)),c.slice(u+1)],f=s.markClass?" "+s.markClass:"";return xn("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},h)}),e.source&&xn("div",{class:"cm-diagnosticSource"},e.source))}class eme extends vo{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return xn("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class zT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=fz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class nm{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)$T(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=hz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Bf(this.view.state.field(hs).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=xn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=xn("div",{class:"cm-panel-lint"},this.list,xn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>$T(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(hs).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(hs),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let h=-1,f;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==u){h=d;break}h<0?(f=new zT(this.view,u),this.items.splice(r,0,f),i=!0):(f=this.items[h],h>r&&(this.items.splice(r,h-r),i=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new zT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(hs),r=Bf(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:uz.of(r)})}static open(e){return new nm(e)}}function tme(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function B1(t){return tme(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const nme=Ze.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:B1("#d11")},".cm-lintRange-warning":{backgroundImage:B1("orange")},".cm-lintRange-info":{backgroundImage:B1("#999")},".cm-lintRange-hint":{backgroundImage:B1("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function rme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function ime(t){let e="hint",n=1;for(let r of t){let i=rme(r.severity);i>n&&(n=i,e=r.severity)}return e}const sme=[hs,Ze.decorations.compute([hs],t=>{let{selected:e,panel:n}=t.field(hs);return!e||!n||e.from==e.to?mt.none:mt.set([Upe.range(e.from,e.to)])}),CZ(Gpe,{hideOn:Ype}),nme],dz=[$Z(),FZ(),JX(),Gfe(),xJ(),MP(),QX(),Sn.allowMultipleSelections.of(!0),aJ(),jx(OJ,{fallback:!0}),IJ(),Ppe(),Wpe(),dZ(),gZ(),sZ(),O0e(),ch.of([...$pe,...$B,...Y0e,...ide,...vJ,...lz,...Jpe])];function ome(t){return t.nodeType===1}function ame(t){return ome(t)&&t.namespaceURI==="http://www.w3.org/1999/xhtml"}function lme(t){let e=[[-1,t.state.doc]],n=[];for(;e.length>0;){const[r,i]=e.pop();if(r>=0){let s=t.nodeDOM(r);if(s&&ame(s)){let{top:o,bottom:a,left:l,right:c}=s.getBoundingClientRect();n.push([r,[l,o,c,o]],[r+i.nodeSize,[l,a,c,a]])}}if(i.isBlock&&!i.isTextblock){let s=r+1;for(let o of i.children)e.push([s,o]),s+=o.nodeSize}}return n}function cme(t,e){let n=[],r,i;const s=()=>{const u=t.dom.getBoundingClientRect(),h=t.state.doc;return n&&r&&i&&u.width===i.width&&u.height===i.height&&u.x===i.x&&u.y===i.y&&r.eq(h)||(i=u,r=h,n=lme(t)),n},o=(u,h)=>{if(!t.editable||t.isDestroyed)return;const f=(m,g)=>{const[v,b]=m,[S,O]=g;return HT(u,b)-HT(u,O)||v-S};let d=s();d.sort(f),d=d.slice(0,8);const p=d.find(m=>e?.({view:t,pos:m[0],event:h})!==!1);if(!(p&&hme(t,p[0])))return p};let a,l;return(u,h)=>(a&&ume(a,u)||(a=u,l=o(u,h)),l)}function ume(t,e){return t[0]===e[0]&&t[1]===e[1]}function FT(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])}function HT(t,e){return Math.min(FT(t,[e[0],e[1]]),FT(t,[e[2],e[3]]))}function hme(t,e){const n=t.dragging;if(!n)return;const{move:r}=n;if(!r)return;const i=t.state.selection;if(!(i instanceof yt))return;const{from:s,to:o}=i;return s<=e&&e<=o}function fme(t){let e;return new Wn({key:new jn("prosekit-drop-indicator"),view:n=>(e=cme(n,t.onDrag),pme(n,e,t)),props:{handleDrop(n,r,i,s){if(!e)return!1;const o=e([r.clientX,r.clientY],r);if(!o)return!1;r.preventDefault();let a=o[0],l=n.state.tr;if(s){let{node:d}=n.dragging||{};d?d.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(h))return!0;let f=l.doc.resolve(c);if(u&&yt.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new yt(f));else{let d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,v)=>d=v),l.setSelection(dme(n,f,l.doc.resolve(d)))}return n.focus(),n.dispatch(l.setMeta("uiEvent","drop")),!0}}})}function dme(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ct.between(e,n,r)}function pme(t,e,n){let r=t.dom,i,s,o,a=!1;const l=()=>{i&&clearTimeout(i),a=!1,i=setTimeout(()=>{a||n.onHide?.()},30)},c=h=>{a=!0;const{clientX:f,clientY:d}=h;if(s===f&&o===d)return;s=f,o=d;let p=e([f,d],h);if(p){const[m,[g,v,b,S]]=p,O={p1:{x:g,y:v},p2:{x:b,y:S}};n.onShow?.({view:t,pos:m,line:O})}else{l();return}};return r.addEventListener("dragover",c),r.addEventListener("dragend",l),r.addEventListener("drop",l),r.addEventListener("dragleave",l),{destroy:()=>{r.removeEventListener("dragover",c),r.removeEventListener("dragend",l),r.removeEventListener("drop",l),r.removeEventListener("dragleave",l)}}}class rr extends Dt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return rr.valid(r)?new rr(r):Dt.near(r)}content(){return Ke.empty}eq(e){return e instanceof rr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rr(e.resolve(n.pos))}getBookmark(){return new l8(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!mme(e)||!gme(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&rr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(rr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!yt.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(rr.valid(a))return a}return null}}}rr.prototype.visible=!1;rr.findFrom=rr.findGapCursorFrom;Dt.jsonID("gapcursor",rr);class l8{constructor(e){this.pos=e}map(e){return new l8(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return rr.valid(n)?new rr(n):Dt.near(n)}}function pz(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function mme(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||pz(i.type))return!0;if(i.inlineContent)return!1}}return!0}function gme(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||pz(i.type))return!0;if(i.inlineContent)return!1}}return!0}function vme(){return new Wn({props:{decorations:xme,createSelectionBetween(t,e,n){return e.pos==n.pos&&rr.valid(n)?new rr(n):null},handleClick:bme,handleKeyDown:yme,handleDOMEvents:{beforeinput:wme}}})}const yme=mk({ArrowLeft:z1("horiz",-1),ArrowRight:z1("horiz",1),ArrowUp:z1("vert",-1),ArrowDown:z1("vert",1)});function z1(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof ct){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=rr.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new rr(c))),!0):!1}}function bme(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!rr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&yt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new rr(r))),!0)}function wme(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof rr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ae.empty;for(let o=r.length-1;o>=0;o--)i=Ae.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Ke(i,0,0));return s.setSelection(ct.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function xme(t){if(!(t.selection instanceof rr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Mn.create(t.doc,[pr.widget(t.selection.head,e,{key:"gapcursor"})])}function Hm(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-cursor",...e}}),t}const rm=bn(null,"dropIndicatorState");Hm(rm,{displayName:"Ctx<dropIndicatorState>"});const ob=bn({width:2,color:!1,class:"milkdown-drop-indicator"},"dropIndicatorConfig");Hm(ob,{displayName:"Ctx<dropIndicatorConfig>"});const kme=new jn("MILKDOWN_DROP_INDICATOR_DOM"),mz=vr(t=>new Wn({key:kme,view:e=>{const n=t.get(ob.key),r=document.createElement("div");Object.assign(r.style,{position:"fixed",pointerEvents:"none",display:"none",backgroundColor:n.color,top:"0",left:"0"}),r.classList.add(n.class),r.classList.add("milkdown-drop-indicator"),e.dom.parentNode?.appendChild(r);const i=t.use(rm.key),s=o=>{Sme(r,o,n)};return i.on(s),{destroy:()=>{i.off(s),r.remove()}}}}));Hm(mz,{displayName:"Prose<dropIndicatorDOM>"});function Sme(t,e,n){if(!e){Object.assign(t.style,{display:"none"});return}const{line:r}=e,{width:i}=n,{p1:{x:s,y:o},p2:{x:a,y:l}}=r,c=o===l;let u,h,f=o,d=s;c?(u=a-s,h=i,f-=i/2):(u=i,h=l-o,d-=i/2),f=Math.round(f),d=Math.round(d),Object.assign(t.style,{display:"block",width:`${u}px`,height:`${h}px`,transform:`translate(${d}px, ${f}px)`})}const gz=vr(t=>fme({onShow:i=>{t.set(rm.key,i)},onHide:()=>{t.set(rm.key,null)},onDrag:()=>!0}));Hm(gz,{displayName:"Prose<dropIndicator>"});const vz=vr(()=>vme());Hm(vz,{displayName:"Prose<gapCursor>"});const Cme=[vz,ob,rm,mz,gz].flat();function Ome(t){var e;const n=(e=void 0)!=null?e:!1;let r=typeof document>"u"?null:document.createElement("div");return new Wn({key:Mme,view:i=>{n!==!0&&Dme(i.state.schema,n||[]);const s=i.dom.ownerDocument;r=r||document.createElement("div");const o=r,a=()=>{Ame(i,o)};let l;return window.ResizeObserver&&(l=new window.ResizeObserver(()=>a()),l.observe(i.dom)),s.addEventListener("selectionchange",a),{update:()=>{a()},destroy:()=>{s.removeEventListener("selectionchange",a),l&&l.unobserve(i.dom)}}},props:{handleKeyDown:(i,s)=>{var o;const{selection:a}=i.state;if(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey||s.isComposing||!["ArrowLeft","ArrowRight"].includes(s.key)||!c7(a)||!a.empty)return!1;const l=a.$head,[c,u]=yz(l),h=i.state.storedMarks||l.marks();if(c&&u&&!Ft.sameSet(c,u)){if(s.key==="ArrowLeft"&&!Ft.sameSet(c,h))return i.dispatch(i.state.tr.setStoredMarks(c)),!0;if(s.key==="ArrowRight"&&!Ft.sameSet(u,h))return i.dispatch(i.state.tr.setStoredMarks(u)),!0}return s.key==="ArrowLeft"&&l.textOffset===1?(i.dispatch(i.state.tr.setSelection(ct.create(i.state.doc,l.pos-1)).setStoredMarks(l.marks())),!0):s.key==="ArrowRight"&&l.textOffset+1===((o=l.parent.maybeChild(l.index()))==null?void 0:o.nodeSize)?(i.dispatch(i.state.tr.setSelection(ct.create(i.state.doc,l.pos+1)).setStoredMarks(l.marks())),!0):!1},decorations:i=>{if(!(!r||!c7(i.selection)||!i.selection.empty))return Mn.create(i.doc,[pr.widget(0,r,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}var Mme=new jn("prosemirror-virtual-cursor");function Tme(t,e){var n;const r=window.getSelection();if(!r||!r.rangeCount)return null;const i=(n=r?.getRangeAt(0))==null?void 0:n.cloneRange();if(!i)return null;i.collapse(e);const s=i.getClientRects(),o=s?.length?s[s.length-1]:null;return o?.height?o:t.coordsAtPos(t.state.selection.head)}function yz(t){const e=t.index(),n=t.parent.maybeChild(e);let r=t.textOffset?n:null;return!r&&e>0&&(r=t.parent.maybeChild(e-1)),[r?.marks,n?.marks]}function c7(t){return t&&typeof t=="object"&&"$cursor"in t}function Ame(t,e){if(!t||!t.dom||t.isDestroyed||!e)return;const{state:n,dom:r}=t,{selection:i}=n;if(!c7(i))return;const s=Tme(t,i.$head===i.$from);if(!s)return e;const o=r.getBoundingClientRect();let a="prosemirror-virtual-cursor";const l=n.selection.$head,[c,u]=yz(l),h=n.storedMarks||l.marks();i.$cursor&&c&&u&&h&&!Ft.sameSet(c,u)&&(Ft.sameSet(c,h)?a+=" prosemirror-virtual-cursor-left":Ft.sameSet(u,h)&&(a+=" prosemirror-virtual-cursor-right")),e.className=a,_me(e,"prosemirror-virtual-cursor-animation"),e.style.height=`${s.bottom-s.top}px`,e.style.left=`${s.left-o.left}px`,e.style.top=`${s.top-o.top}px`}function _me(t,e){t.classList.remove(e),t.offsetWidth,t.classList.add(e)}function Dme(t,e){for(const[n,r]of Object.entries(t.marks))r.spec.inclusive===!1&&!e.includes(n)&&console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${n}" mark or adding it to the "skipWarning" option.`)}var Eme=Object.defineProperty,VT=Object.getOwnPropertySymbols,Ime=Object.prototype.hasOwnProperty,Pme=Object.prototype.propertyIsEnumerable,qT=(t,e,n)=>e in t?Eme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nme=(t,e)=>{for(var n in e||(e={}))Ime.call(e,n)&&qT(t,n,e[n]);if(VT)for(var n of VT(e))Pme.call(e,n)&&qT(t,n,e[n]);return t};function bz(t,e){return Object.assign(t,{meta:Nme({package:"@milkdown/components"},e)}),t}const Rme={imageIcon:"",uploadButton:"Upload",confirmButton:"",uploadPlaceholderText:"/Paste",onUpload:t=>Promise.resolve(URL.createObjectURL(t))},ab=bn(Rme,"inlineImageConfigCtx");bz(ab,{displayName:"Config<image-inline>",group:"ImageInline"});function jg({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}jg.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Lme=k$("abcdefg",8),$me=xt({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:t,src:e,setLink:n,onUpload:r,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var c,u;const h=ae(!1),f=ae(),d=ae((c=e.value)!=null?c:""),p=ae(Lme()),m=ae(((u=e.value)==null?void 0:u.length)!==0),g=O=>{const C=O.target.value;m.value=C.length!==0,d.value=C},v=O=>{var k,C;O.key==="Enter"&&n((C=(k=f.value)==null?void 0:k.value)!=null?C:"")},b=()=>{var O,k;n((k=(O=f.value)==null?void 0:O.value)!=null?k:"")},S=O=>{var k;const C=(k=O.target.files)==null?void 0:k[0];C&&r(C).then(T=>{T&&(n(T),m.value=!0)}).catch(T=>{console.error("An error occurred while uploading image"),console.error(T)})};return()=>le("div",{class:Kr("image-edit",l)},le(jg,{icon:i,class:"image-icon"}),le("div",{class:Kr("link-importer",h.value&&"focus")},le("input",{ref:f,draggable:"true",onDragstart:O=>{O.preventDefault(),O.stopPropagation()},disabled:t.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:v,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!m.value&&le("div",{class:"placeholder"},le("input",{disabled:t.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:S}),le("label",{class:"uploader",for:p.value},le(jg,{icon:s})),le("span",{class:"text",onClick:()=>{var O;return(O=f.value)==null?void 0:O.focus()}},a))),d.value&&le("div",{class:"confirm",onClick:()=>b()},le(jg,{icon:o})))}}),Bme=xt({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const{src:e,alt:n,title:r}=t;return()=>{var i;return(i=e.value)!=null&&i.length?le("img",{class:"image-inline",src:e.value,alt:n.value,title:r.value}):le($me,{src:t.src,selected:t.selected,readonly:t.readonly,setLink:s=>t.setAttr("src",s),imageIcon:t.config.imageIcon,uploadButton:t.config.uploadButton,confirmButton:t.config.confirmButton,uploadPlaceholderText:t.config.uploadPlaceholderText,onUpload:t.config.onUpload,className:"empty-image-inline"})}}}),wz=Am(fh.node,t=>(e,n,r)=>{const i=ae(e.attrs.src),s=ae(e.attrs.alt),o=ae(e.attrs.title),a=ae(!1),l=ae(!n.editable),c=(g,v)=>{if(!n.editable)return;const b=r();b!=null&&n.dispatch(n.state.tr.setNodeAttribute(b,g,g==="src"?Us.sanitize(v):v))},u=t.get(ab.key),h=Qs(Bme,{src:i,alt:s,title:o,selected:a,readonly:l,setAttr:c,config:u}),f=document.createElement("span");f.className="milkdown-image-inline";const d=Cc(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=u.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const v=p(g.attrs.src);typeof v=="string"?i.value=v:v.then(b=>{i.value=b}).catch(console.error)}s.value=g.attrs.alt,o.value=g.attrs.title};return m(e),h.mount(f),{dom:f,update:g=>g.type!==e.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),h.unmount(),f.remove()}}});bz(wz,{displayName:"NodeView<image-inline>",group:"ImageInline"});const zme=[ab,wz];class _i{constructor(e,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=r}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new _i(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class ms{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new ms(n,_i.range(this,e))}}class ze{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,o=n&&n.loc;if(o&&o.start<=o.end){var a=o.lexer.input;i=o.start,s=o.end,i===a.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var l=a.slice(i,s).replace(/[^]/g,"$&"),c;i>15?c=""+a.slice(i-15,i):c=a.slice(0,i);var u;s+15<a.length?u=a.slice(s,s+15)+"":u=a.slice(s),r+=c+l+u}var h=new Error(r);return h.name="ParseError",h.__proto__=ze.prototype,h.position=i,i!=null&&s!=null&&(h.length=s-i),h.rawMessage=e,h}}ze.prototype.__proto__=Error.prototype;var Fme=function(e,n){return e===void 0?n:e},Hme=/([A-Z])/g,Vme=function(e){return e.replace(Hme,"-$1").toLowerCase()},qme={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Wme=/[&><"']/g;function jme(t){return String(t).replace(Wme,e=>qme[e])}var xz=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Yme=function(e){var n=xz(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},Qme=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Ume=function(e){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},on={deflt:Fme,escape:jme,hyphenate:Vme,getBaseElem:xz,isCharacterBox:Yme,protocolFromUrl:Ume},Yg={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Gme(t){if(t.default)return t.default;var e=t.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class c8{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in Yg)if(Yg.hasOwnProperty(n)){var r=Yg[n];this[n]=e[n]!==void 0?r.processor?r.processor(e[n]):e[n]:Gme(r)}}reportNonstrict(e,n,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,n,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new ze("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,r){var i=this.strict;if(typeof i=="function")try{i=i(e,n,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var n=on.protocolFromUrl(e.url);if(n==null)return!1;e.protocol=n}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class El{constructor(e,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=r}sup(){return Fo[Kme[this.id]]}sub(){return Fo[Xme[this.id]]}fracNum(){return Fo[Zme[this.id]]}fracDen(){return Fo[Jme[this.id]]}cramp(){return Fo[e1e[this.id]]}text(){return Fo[t1e[this.id]]}isTight(){return this.size>=2}}var u8=0,ky=1,mf=2,Za=3,im=4,Ps=5,zf=6,fi=7,Fo=[new El(u8,0,!1),new El(ky,0,!0),new El(mf,1,!1),new El(Za,1,!0),new El(im,2,!1),new El(Ps,2,!0),new El(zf,3,!1),new El(fi,3,!0)],Kme=[im,Ps,im,Ps,zf,fi,zf,fi],Xme=[Ps,Ps,Ps,Ps,fi,fi,fi,fi],Zme=[mf,Za,im,Ps,zf,fi,zf,fi],Jme=[Za,Za,Ps,Ps,fi,fi,fi,fi],e1e=[ky,ky,Za,Za,Ps,Ps,fi,fi],t1e=[u8,ky,mf,Za,mf,Za,mf,Za],Ct={DISPLAY:Fo[u8],TEXT:Fo[mf],SCRIPT:Fo[im],SCRIPTSCRIPT:Fo[zf]},u7=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function n1e(t){for(var e=0;e<u7.length;e++)for(var n=u7[e],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(t>=i[0]&&t<=i[1])return n.name}return null}var Qg=[];u7.forEach(t=>t.blocks.forEach(e=>Qg.push(...e)));function kz(t){for(var e=0;e<Qg.length;e+=2)if(t>=Qg[e]&&t<=Qg[e+1])return!0;return!1}var Oh=80,r1e=function(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},i1e=function(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},s1e=function(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},o1e=function(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},a1e=function(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},l1e=function(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},c1e=function(e,n,r){var i=r-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},u1e=function(e,n,r){n=1e3*n;var i="";switch(e){case"sqrtMain":i=r1e(n,Oh);break;case"sqrtSize1":i=i1e(n,Oh);break;case"sqrtSize2":i=s1e(n,Oh);break;case"sqrtSize3":i=o1e(n,Oh);break;case"sqrtSize4":i=a1e(n,Oh);break;case"sqrtTall":i=c1e(n,Oh,r)}return i},h1e=function(e,n){switch(e){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},WT={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},f1e=function(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Vm{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){for(var e="",n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e}toText(){var e=n=>n.toText();return this.children.map(e).join("")}}var Qo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},F1={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},jT={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function d1e(t,e){Qo[t]=e}function h8(t,e,n){if(!Qo[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),i=Qo[e][r];if(!i&&t[0]in jT&&(r=jT[t[0]].charCodeAt(0),i=Qo[e][r]),!i&&n==="text"&&kz(r)&&(i=Qo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var O5={};function p1e(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!O5[e]){var n=O5[e]={cssEmPerMu:F1.quad[e]/18};for(var r in F1)F1.hasOwnProperty(r)&&(n[r]=F1[r][e])}return O5[e]}var m1e=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],YT=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],QT=function(e,n){return n.size<2?e:m1e[e-1][n.size-1]};class La{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||La.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=YT[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new La(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:QT(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:YT[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=QT(La.BASESIZE,e);return this.size===n&&this.textSize===La.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==La.BASESIZE?["sizing","reset-size"+this.size,"size"+La.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=p1e(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}La.BASESIZE=6;var h7={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},g1e={ex:!0,em:!0,mu:!0},Sz=function(e){return typeof e!="string"&&(e=e.unit),e in h7||e in g1e||e==="ex"},Zn=function(e,n){var r;if(e.unit in h7)r=h7[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var i;if(n.style.isTight()?i=n.havingStyle(n.style.text()):i=n,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new ze("Invalid unit: '"+e.unit+"'");i!==n&&(r*=i.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*r,n.maxSize)},Qe=function(e){return+e.toFixed(4)+"em"},wc=function(e){return e.filter(n=>n).join(" ")},Cz=function(e,n,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var i=n.getColor();i&&(this.style.color=i)}},Oz=function(e){var n=document.createElement(e);n.className=wc(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&n.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n},v1e=/[\s"'>/=\x00-\x1f]/,Mz=function(e){var n="<"+e;this.classes.length&&(n+=' class="'+on.escape(wc(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=on.hyphenate(i)+":"+this.style[i]+";");r&&(n+=' style="'+on.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(v1e.test(s))throw new ze("Invalid attribute name '"+s+"'");n+=" "+s+'="'+on.escape(this.attributes[s])+'"'}n+=">";for(var o=0;o<this.children.length;o++)n+=this.children[o].toMarkup();return n+="</"+e+">",n};class qm{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Cz.call(this,e,r,i),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return this.classes.includes(e)}toNode(){return Oz.call(this,"span")}toMarkup(){return Mz.call(this,"span")}}class f8{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Cz.call(this,n,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return this.classes.includes(e)}toNode(){return Oz.call(this,"a")}toMarkup(){return Mz.call(this,"a")}}class y1e{constructor(e,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e='<img src="'+on.escape(this.src)+'"'+(' alt="'+on.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=on.hyphenate(r)+":"+this.style[r]+";");return n&&(e+=' style="'+on.escape(n)+'"'),e+="'/>",e}}var b1e={:"",:"",:"",:""};class qs{constructor(e,n,r,i,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=n1e(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=b1e[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=Qe(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=wc(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=on.escape(wc(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=on.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,n+=' style="'+on.escape(r)+'"');var s=on.escape(this.text);return e?(n+=">",n+=s,n+="</span>",n):s}}class cl{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)n.appendChild(this.children[i].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+on.escape(this.attributes[n])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class xc{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",WT[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+on.escape(this.alternate)+'"/>':'<path d="'+on.escape(WT[this.pathName])+'"/>'}}class f7{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+on.escape(this.attributes[n])+'"');return e+="/>",e}}function UT(t){if(t instanceof qs)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function w1e(t){if(t instanceof qm)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var x1e={bin:1,close:1,inner:1,open:1,punct:1,rel:1},k1e={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Bn={math:{},text:{}};function y(t,e,n,r,i,s){Bn[t][i]={font:e,group:n,replace:r},s&&r&&(Bn[t][r]=Bn[t][i])}var w="math",Ee="text",M="main",z="ams",Gn="accent-token",rt="bin",wi="close",hd="inner",St="mathord",yr="op-token",ws="open",lb="punct",H="rel",Sl="spacing",Y="textord";y(w,M,H,"","\\equiv",!0);y(w,M,H,"","\\prec",!0);y(w,M,H,"","\\succ",!0);y(w,M,H,"","\\sim",!0);y(w,M,H,"","\\perp");y(w,M,H,"","\\preceq",!0);y(w,M,H,"","\\succeq",!0);y(w,M,H,"","\\simeq",!0);y(w,M,H,"","\\mid",!0);y(w,M,H,"","\\ll",!0);y(w,M,H,"","\\gg",!0);y(w,M,H,"","\\asymp",!0);y(w,M,H,"","\\parallel");y(w,M,H,"","\\bowtie",!0);y(w,M,H,"","\\smile",!0);y(w,M,H,"","\\sqsubseteq",!0);y(w,M,H,"","\\sqsupseteq",!0);y(w,M,H,"","\\doteq",!0);y(w,M,H,"","\\frown",!0);y(w,M,H,"","\\ni",!0);y(w,M,H,"","\\propto",!0);y(w,M,H,"","\\vdash",!0);y(w,M,H,"","\\dashv",!0);y(w,M,H,"","\\owns");y(w,M,lb,".","\\ldotp");y(w,M,lb,"","\\cdotp");y(w,M,Y,"#","\\#");y(Ee,M,Y,"#","\\#");y(w,M,Y,"&","\\&");y(Ee,M,Y,"&","\\&");y(w,M,Y,"","\\aleph",!0);y(w,M,Y,"","\\forall",!0);y(w,M,Y,"","\\hbar",!0);y(w,M,Y,"","\\exists",!0);y(w,M,Y,"","\\nabla",!0);y(w,M,Y,"","\\flat",!0);y(w,M,Y,"","\\ell",!0);y(w,M,Y,"","\\natural",!0);y(w,M,Y,"","\\clubsuit",!0);y(w,M,Y,"","\\wp",!0);y(w,M,Y,"","\\sharp",!0);y(w,M,Y,"","\\diamondsuit",!0);y(w,M,Y,"","\\Re",!0);y(w,M,Y,"","\\heartsuit",!0);y(w,M,Y,"","\\Im",!0);y(w,M,Y,"","\\spadesuit",!0);y(w,M,Y,"","\\S",!0);y(Ee,M,Y,"","\\S");y(w,M,Y,"","\\P",!0);y(Ee,M,Y,"","\\P");y(w,M,Y,"","\\dag");y(Ee,M,Y,"","\\dag");y(Ee,M,Y,"","\\textdagger");y(w,M,Y,"","\\ddag");y(Ee,M,Y,"","\\ddag");y(Ee,M,Y,"","\\textdaggerdbl");y(w,M,wi,"","\\rmoustache",!0);y(w,M,ws,"","\\lmoustache",!0);y(w,M,wi,"","\\rgroup",!0);y(w,M,ws,"","\\lgroup",!0);y(w,M,rt,"","\\mp",!0);y(w,M,rt,"","\\ominus",!0);y(w,M,rt,"","\\uplus",!0);y(w,M,rt,"","\\sqcap",!0);y(w,M,rt,"","\\ast");y(w,M,rt,"","\\sqcup",!0);y(w,M,rt,"","\\bigcirc",!0);y(w,M,rt,"","\\bullet",!0);y(w,M,rt,"","\\ddagger");y(w,M,rt,"","\\wr",!0);y(w,M,rt,"","\\amalg");y(w,M,rt,"&","\\And");y(w,M,H,"","\\longleftarrow",!0);y(w,M,H,"","\\Leftarrow",!0);y(w,M,H,"","\\Longleftarrow",!0);y(w,M,H,"","\\longrightarrow",!0);y(w,M,H,"","\\Rightarrow",!0);y(w,M,H,"","\\Longrightarrow",!0);y(w,M,H,"","\\leftrightarrow",!0);y(w,M,H,"","\\longleftrightarrow",!0);y(w,M,H,"","\\Leftrightarrow",!0);y(w,M,H,"","\\Longleftrightarrow",!0);y(w,M,H,"","\\mapsto",!0);y(w,M,H,"","\\longmapsto",!0);y(w,M,H,"","\\nearrow",!0);y(w,M,H,"","\\hookleftarrow",!0);y(w,M,H,"","\\hookrightarrow",!0);y(w,M,H,"","\\searrow",!0);y(w,M,H,"","\\leftharpoonup",!0);y(w,M,H,"","\\rightharpoonup",!0);y(w,M,H,"","\\swarrow",!0);y(w,M,H,"","\\leftharpoondown",!0);y(w,M,H,"","\\rightharpoondown",!0);y(w,M,H,"","\\nwarrow",!0);y(w,M,H,"","\\rightleftharpoons",!0);y(w,z,H,"","\\nless",!0);y(w,z,H,"","\\@nleqslant");y(w,z,H,"","\\@nleqq");y(w,z,H,"","\\lneq",!0);y(w,z,H,"","\\lneqq",!0);y(w,z,H,"","\\@lvertneqq");y(w,z,H,"","\\lnsim",!0);y(w,z,H,"","\\lnapprox",!0);y(w,z,H,"","\\nprec",!0);y(w,z,H,"","\\npreceq",!0);y(w,z,H,"","\\precnsim",!0);y(w,z,H,"","\\precnapprox",!0);y(w,z,H,"","\\nsim",!0);y(w,z,H,"","\\@nshortmid");y(w,z,H,"","\\nmid",!0);y(w,z,H,"","\\nvdash",!0);y(w,z,H,"","\\nvDash",!0);y(w,z,H,"","\\ntriangleleft");y(w,z,H,"","\\ntrianglelefteq",!0);y(w,z,H,"","\\subsetneq",!0);y(w,z,H,"","\\@varsubsetneq");y(w,z,H,"","\\subsetneqq",!0);y(w,z,H,"","\\@varsubsetneqq");y(w,z,H,"","\\ngtr",!0);y(w,z,H,"","\\@ngeqslant");y(w,z,H,"","\\@ngeqq");y(w,z,H,"","\\gneq",!0);y(w,z,H,"","\\gneqq",!0);y(w,z,H,"","\\@gvertneqq");y(w,z,H,"","\\gnsim",!0);y(w,z,H,"","\\gnapprox",!0);y(w,z,H,"","\\nsucc",!0);y(w,z,H,"","\\nsucceq",!0);y(w,z,H,"","\\succnsim",!0);y(w,z,H,"","\\succnapprox",!0);y(w,z,H,"","\\ncong",!0);y(w,z,H,"","\\@nshortparallel");y(w,z,H,"","\\nparallel",!0);y(w,z,H,"","\\nVDash",!0);y(w,z,H,"","\\ntriangleright");y(w,z,H,"","\\ntrianglerighteq",!0);y(w,z,H,"","\\@nsupseteqq");y(w,z,H,"","\\supsetneq",!0);y(w,z,H,"","\\@varsupsetneq");y(w,z,H,"","\\supsetneqq",!0);y(w,z,H,"","\\@varsupsetneqq");y(w,z,H,"","\\nVdash",!0);y(w,z,H,"","\\precneqq",!0);y(w,z,H,"","\\succneqq",!0);y(w,z,H,"","\\@nsubseteqq");y(w,z,rt,"","\\unlhd");y(w,z,rt,"","\\unrhd");y(w,z,H,"","\\nleftarrow",!0);y(w,z,H,"","\\nrightarrow",!0);y(w,z,H,"","\\nLeftarrow",!0);y(w,z,H,"","\\nRightarrow",!0);y(w,z,H,"","\\nleftrightarrow",!0);y(w,z,H,"","\\nLeftrightarrow",!0);y(w,z,H,"","\\vartriangle");y(w,z,Y,"","\\hslash");y(w,z,Y,"","\\triangledown");y(w,z,Y,"","\\lozenge");y(w,z,Y,"","\\circledS");y(w,z,Y,"","\\circledR");y(Ee,z,Y,"","\\circledR");y(w,z,Y,"","\\measuredangle",!0);y(w,z,Y,"","\\nexists");y(w,z,Y,"","\\mho");y(w,z,Y,"","\\Finv",!0);y(w,z,Y,"","\\Game",!0);y(w,z,Y,"","\\backprime");y(w,z,Y,"","\\blacktriangle");y(w,z,Y,"","\\blacktriangledown");y(w,z,Y,"","\\blacksquare");y(w,z,Y,"","\\blacklozenge");y(w,z,Y,"","\\bigstar");y(w,z,Y,"","\\sphericalangle",!0);y(w,z,Y,"","\\complement",!0);y(w,z,Y,"","\\eth",!0);y(Ee,M,Y,"","");y(w,z,Y,"","\\diagup");y(w,z,Y,"","\\diagdown");y(w,z,Y,"","\\square");y(w,z,Y,"","\\Box");y(w,z,Y,"","\\Diamond");y(w,z,Y,"","\\yen",!0);y(Ee,z,Y,"","\\yen",!0);y(w,z,Y,"","\\checkmark",!0);y(Ee,z,Y,"","\\checkmark");y(w,z,Y,"","\\beth",!0);y(w,z,Y,"","\\daleth",!0);y(w,z,Y,"","\\gimel",!0);y(w,z,Y,"","\\digamma",!0);y(w,z,Y,"","\\varkappa");y(w,z,ws,"","\\@ulcorner",!0);y(w,z,wi,"","\\@urcorner",!0);y(w,z,ws,"","\\@llcorner",!0);y(w,z,wi,"","\\@lrcorner",!0);y(w,z,H,"","\\leqq",!0);y(w,z,H,"","\\leqslant",!0);y(w,z,H,"","\\eqslantless",!0);y(w,z,H,"","\\lesssim",!0);y(w,z,H,"","\\lessapprox",!0);y(w,z,H,"","\\approxeq",!0);y(w,z,rt,"","\\lessdot");y(w,z,H,"","\\lll",!0);y(w,z,H,"","\\lessgtr",!0);y(w,z,H,"","\\lesseqgtr",!0);y(w,z,H,"","\\lesseqqgtr",!0);y(w,z,H,"","\\doteqdot");y(w,z,H,"","\\risingdotseq",!0);y(w,z,H,"","\\fallingdotseq",!0);y(w,z,H,"","\\backsim",!0);y(w,z,H,"","\\backsimeq",!0);y(w,z,H,"","\\subseteqq",!0);y(w,z,H,"","\\Subset",!0);y(w,z,H,"","\\sqsubset",!0);y(w,z,H,"","\\preccurlyeq",!0);y(w,z,H,"","\\curlyeqprec",!0);y(w,z,H,"","\\precsim",!0);y(w,z,H,"","\\precapprox",!0);y(w,z,H,"","\\vartriangleleft");y(w,z,H,"","\\trianglelefteq");y(w,z,H,"","\\vDash",!0);y(w,z,H,"","\\Vvdash",!0);y(w,z,H,"","\\smallsmile");y(w,z,H,"","\\smallfrown");y(w,z,H,"","\\bumpeq",!0);y(w,z,H,"","\\Bumpeq",!0);y(w,z,H,"","\\geqq",!0);y(w,z,H,"","\\geqslant",!0);y(w,z,H,"","\\eqslantgtr",!0);y(w,z,H,"","\\gtrsim",!0);y(w,z,H,"","\\gtrapprox",!0);y(w,z,rt,"","\\gtrdot");y(w,z,H,"","\\ggg",!0);y(w,z,H,"","\\gtrless",!0);y(w,z,H,"","\\gtreqless",!0);y(w,z,H,"","\\gtreqqless",!0);y(w,z,H,"","\\eqcirc",!0);y(w,z,H,"","\\circeq",!0);y(w,z,H,"","\\triangleq",!0);y(w,z,H,"","\\thicksim");y(w,z,H,"","\\thickapprox");y(w,z,H,"","\\supseteqq",!0);y(w,z,H,"","\\Supset",!0);y(w,z,H,"","\\sqsupset",!0);y(w,z,H,"","\\succcurlyeq",!0);y(w,z,H,"","\\curlyeqsucc",!0);y(w,z,H,"","\\succsim",!0);y(w,z,H,"","\\succapprox",!0);y(w,z,H,"","\\vartriangleright");y(w,z,H,"","\\trianglerighteq");y(w,z,H,"","\\Vdash",!0);y(w,z,H,"","\\shortmid");y(w,z,H,"","\\shortparallel");y(w,z,H,"","\\between",!0);y(w,z,H,"","\\pitchfork",!0);y(w,z,H,"","\\varpropto");y(w,z,H,"","\\blacktriangleleft");y(w,z,H,"","\\therefore",!0);y(w,z,H,"","\\backepsilon");y(w,z,H,"","\\blacktriangleright");y(w,z,H,"","\\because",!0);y(w,z,H,"","\\llless");y(w,z,H,"","\\gggtr");y(w,z,rt,"","\\lhd");y(w,z,rt,"","\\rhd");y(w,z,H,"","\\eqsim",!0);y(w,M,H,"","\\Join");y(w,z,H,"","\\Doteq",!0);y(w,z,rt,"","\\dotplus",!0);y(w,z,rt,"","\\smallsetminus");y(w,z,rt,"","\\Cap",!0);y(w,z,rt,"","\\Cup",!0);y(w,z,rt,"","\\doublebarwedge",!0);y(w,z,rt,"","\\boxminus",!0);y(w,z,rt,"","\\boxplus",!0);y(w,z,rt,"","\\divideontimes",!0);y(w,z,rt,"","\\ltimes",!0);y(w,z,rt,"","\\rtimes",!0);y(w,z,rt,"","\\leftthreetimes",!0);y(w,z,rt,"","\\rightthreetimes",!0);y(w,z,rt,"","\\curlywedge",!0);y(w,z,rt,"","\\curlyvee",!0);y(w,z,rt,"","\\circleddash",!0);y(w,z,rt,"","\\circledast",!0);y(w,z,rt,"","\\centerdot");y(w,z,rt,"","\\intercal",!0);y(w,z,rt,"","\\doublecap");y(w,z,rt,"","\\doublecup");y(w,z,rt,"","\\boxtimes",!0);y(w,z,H,"","\\dashrightarrow",!0);y(w,z,H,"","\\dashleftarrow",!0);y(w,z,H,"","\\leftleftarrows",!0);y(w,z,H,"","\\leftrightarrows",!0);y(w,z,H,"","\\Lleftarrow",!0);y(w,z,H,"","\\twoheadleftarrow",!0);y(w,z,H,"","\\leftarrowtail",!0);y(w,z,H,"","\\looparrowleft",!0);y(w,z,H,"","\\leftrightharpoons",!0);y(w,z,H,"","\\curvearrowleft",!0);y(w,z,H,"","\\circlearrowleft",!0);y(w,z,H,"","\\Lsh",!0);y(w,z,H,"","\\upuparrows",!0);y(w,z,H,"","\\upharpoonleft",!0);y(w,z,H,"","\\downharpoonleft",!0);y(w,M,H,"","\\origof",!0);y(w,M,H,"","\\imageof",!0);y(w,z,H,"","\\multimap",!0);y(w,z,H,"","\\leftrightsquigarrow",!0);y(w,z,H,"","\\rightrightarrows",!0);y(w,z,H,"","\\rightleftarrows",!0);y(w,z,H,"","\\twoheadrightarrow",!0);y(w,z,H,"","\\rightarrowtail",!0);y(w,z,H,"","\\looparrowright",!0);y(w,z,H,"","\\curvearrowright",!0);y(w,z,H,"","\\circlearrowright",!0);y(w,z,H,"","\\Rsh",!0);y(w,z,H,"","\\downdownarrows",!0);y(w,z,H,"","\\upharpoonright",!0);y(w,z,H,"","\\downharpoonright",!0);y(w,z,H,"","\\rightsquigarrow",!0);y(w,z,H,"","\\leadsto");y(w,z,H,"","\\Rrightarrow",!0);y(w,z,H,"","\\restriction");y(w,M,Y,"","`");y(w,M,Y,"$","\\$");y(Ee,M,Y,"$","\\$");y(Ee,M,Y,"$","\\textdollar");y(w,M,Y,"%","\\%");y(Ee,M,Y,"%","\\%");y(w,M,Y,"_","\\_");y(Ee,M,Y,"_","\\_");y(Ee,M,Y,"_","\\textunderscore");y(w,M,Y,"","\\angle",!0);y(w,M,Y,"","\\infty",!0);y(w,M,Y,"","\\prime");y(w,M,Y,"","\\triangle");y(w,M,Y,"","\\Gamma",!0);y(w,M,Y,"","\\Delta",!0);y(w,M,Y,"","\\Theta",!0);y(w,M,Y,"","\\Lambda",!0);y(w,M,Y,"","\\Xi",!0);y(w,M,Y,"","\\Pi",!0);y(w,M,Y,"","\\Sigma",!0);y(w,M,Y,"","\\Upsilon",!0);y(w,M,Y,"","\\Phi",!0);y(w,M,Y,"","\\Psi",!0);y(w,M,Y,"","\\Omega",!0);y(w,M,Y,"A","");y(w,M,Y,"B","");y(w,M,Y,"E","");y(w,M,Y,"Z","");y(w,M,Y,"H","");y(w,M,Y,"I","");y(w,M,Y,"K","");y(w,M,Y,"M","");y(w,M,Y,"N","");y(w,M,Y,"O","");y(w,M,Y,"P","");y(w,M,Y,"T","");y(w,M,Y,"X","");y(w,M,Y,"","\\neg",!0);y(w,M,Y,"","\\lnot");y(w,M,Y,"","\\top");y(w,M,Y,"","\\bot");y(w,M,Y,"","\\emptyset");y(w,z,Y,"","\\varnothing");y(w,M,St,"","\\alpha",!0);y(w,M,St,"","\\beta",!0);y(w,M,St,"","\\gamma",!0);y(w,M,St,"","\\delta",!0);y(w,M,St,"","\\epsilon",!0);y(w,M,St,"","\\zeta",!0);y(w,M,St,"","\\eta",!0);y(w,M,St,"","\\theta",!0);y(w,M,St,"","\\iota",!0);y(w,M,St,"","\\kappa",!0);y(w,M,St,"","\\lambda",!0);y(w,M,St,"","\\mu",!0);y(w,M,St,"","\\nu",!0);y(w,M,St,"","\\xi",!0);y(w,M,St,"","\\omicron",!0);y(w,M,St,"","\\pi",!0);y(w,M,St,"","\\rho",!0);y(w,M,St,"","\\sigma",!0);y(w,M,St,"","\\tau",!0);y(w,M,St,"","\\upsilon",!0);y(w,M,St,"","\\phi",!0);y(w,M,St,"","\\chi",!0);y(w,M,St,"","\\psi",!0);y(w,M,St,"","\\omega",!0);y(w,M,St,"","\\varepsilon",!0);y(w,M,St,"","\\vartheta",!0);y(w,M,St,"","\\varpi",!0);y(w,M,St,"","\\varrho",!0);y(w,M,St,"","\\varsigma",!0);y(w,M,St,"","\\varphi",!0);y(w,M,rt,"","*",!0);y(w,M,rt,"+","+");y(w,M,rt,"","-",!0);y(w,M,rt,"","\\cdot",!0);y(w,M,rt,"","\\circ",!0);y(w,M,rt,"","\\div",!0);y(w,M,rt,"","\\pm",!0);y(w,M,rt,"","\\times",!0);y(w,M,rt,"","\\cap",!0);y(w,M,rt,"","\\cup",!0);y(w,M,rt,"","\\setminus",!0);y(w,M,rt,"","\\land");y(w,M,rt,"","\\lor");y(w,M,rt,"","\\wedge",!0);y(w,M,rt,"","\\vee",!0);y(w,M,Y,"","\\surd");y(w,M,ws,"","\\langle",!0);y(w,M,ws,"","\\lvert");y(w,M,ws,"","\\lVert");y(w,M,wi,"?","?");y(w,M,wi,"!","!");y(w,M,wi,"","\\rangle",!0);y(w,M,wi,"","\\rvert");y(w,M,wi,"","\\rVert");y(w,M,H,"=","=");y(w,M,H,":",":");y(w,M,H,"","\\approx",!0);y(w,M,H,"","\\cong",!0);y(w,M,H,"","\\ge");y(w,M,H,"","\\geq",!0);y(w,M,H,"","\\gets");y(w,M,H,">","\\gt",!0);y(w,M,H,"","\\in",!0);y(w,M,H,"","\\@not");y(w,M,H,"","\\subset",!0);y(w,M,H,"","\\supset",!0);y(w,M,H,"","\\subseteq",!0);y(w,M,H,"","\\supseteq",!0);y(w,z,H,"","\\nsubseteq",!0);y(w,z,H,"","\\nsupseteq",!0);y(w,M,H,"","\\models");y(w,M,H,"","\\leftarrow",!0);y(w,M,H,"","\\le");y(w,M,H,"","\\leq",!0);y(w,M,H,"<","\\lt",!0);y(w,M,H,"","\\rightarrow",!0);y(w,M,H,"","\\to");y(w,z,H,"","\\ngeq",!0);y(w,z,H,"","\\nleq",!0);y(w,M,Sl,"","\\ ");y(w,M,Sl,"","\\space");y(w,M,Sl,"","\\nobreakspace");y(Ee,M,Sl,"","\\ ");y(Ee,M,Sl,""," ");y(Ee,M,Sl,"","\\space");y(Ee,M,Sl,"","\\nobreakspace");y(w,M,Sl,null,"\\nobreak");y(w,M,Sl,null,"\\allowbreak");y(w,M,lb,",",",");y(w,M,lb,";",";");y(w,z,rt,"","\\barwedge",!0);y(w,z,rt,"","\\veebar",!0);y(w,M,rt,"","\\odot",!0);y(w,M,rt,"","\\oplus",!0);y(w,M,rt,"","\\otimes",!0);y(w,M,Y,"","\\partial",!0);y(w,M,rt,"","\\oslash",!0);y(w,z,rt,"","\\circledcirc",!0);y(w,z,rt,"","\\boxdot",!0);y(w,M,rt,"","\\bigtriangleup");y(w,M,rt,"","\\bigtriangledown");y(w,M,rt,"","\\dagger");y(w,M,rt,"","\\diamond");y(w,M,rt,"","\\star");y(w,M,rt,"","\\triangleleft");y(w,M,rt,"","\\triangleright");y(w,M,ws,"{","\\{");y(Ee,M,Y,"{","\\{");y(Ee,M,Y,"{","\\textbraceleft");y(w,M,wi,"}","\\}");y(Ee,M,Y,"}","\\}");y(Ee,M,Y,"}","\\textbraceright");y(w,M,ws,"{","\\lbrace");y(w,M,wi,"}","\\rbrace");y(w,M,ws,"[","\\lbrack",!0);y(Ee,M,Y,"[","\\lbrack",!0);y(w,M,wi,"]","\\rbrack",!0);y(Ee,M,Y,"]","\\rbrack",!0);y(w,M,ws,"(","\\lparen",!0);y(w,M,wi,")","\\rparen",!0);y(Ee,M,Y,"<","\\textless",!0);y(Ee,M,Y,">","\\textgreater",!0);y(w,M,ws,"","\\lfloor",!0);y(w,M,wi,"","\\rfloor",!0);y(w,M,ws,"","\\lceil",!0);y(w,M,wi,"","\\rceil",!0);y(w,M,Y,"\\","\\backslash");y(w,M,Y,"","|");y(w,M,Y,"","\\vert");y(Ee,M,Y,"|","\\textbar",!0);y(w,M,Y,"","\\|");y(w,M,Y,"","\\Vert");y(Ee,M,Y,"","\\textbardbl");y(Ee,M,Y,"~","\\textasciitilde");y(Ee,M,Y,"\\","\\textbackslash");y(Ee,M,Y,"^","\\textasciicircum");y(w,M,H,"","\\uparrow",!0);y(w,M,H,"","\\Uparrow",!0);y(w,M,H,"","\\downarrow",!0);y(w,M,H,"","\\Downarrow",!0);y(w,M,H,"","\\updownarrow",!0);y(w,M,H,"","\\Updownarrow",!0);y(w,M,yr,"","\\coprod");y(w,M,yr,"","\\bigvee");y(w,M,yr,"","\\bigwedge");y(w,M,yr,"","\\biguplus");y(w,M,yr,"","\\bigcap");y(w,M,yr,"","\\bigcup");y(w,M,yr,"","\\int");y(w,M,yr,"","\\intop");y(w,M,yr,"","\\iint");y(w,M,yr,"","\\iiint");y(w,M,yr,"","\\prod");y(w,M,yr,"","\\sum");y(w,M,yr,"","\\bigotimes");y(w,M,yr,"","\\bigoplus");y(w,M,yr,"","\\bigodot");y(w,M,yr,"","\\oint");y(w,M,yr,"","\\oiint");y(w,M,yr,"","\\oiiint");y(w,M,yr,"","\\bigsqcup");y(w,M,yr,"","\\smallint");y(Ee,M,hd,"","\\textellipsis");y(w,M,hd,"","\\mathellipsis");y(Ee,M,hd,"","\\ldots",!0);y(w,M,hd,"","\\ldots",!0);y(w,M,hd,"","\\@cdots",!0);y(w,M,hd,"","\\ddots",!0);y(w,M,Y,"","\\varvdots");y(Ee,M,Y,"","\\varvdots");y(w,M,Gn,"","\\acute");y(w,M,Gn,"","\\grave");y(w,M,Gn,"","\\ddot");y(w,M,Gn,"~","\\tilde");y(w,M,Gn,"","\\bar");y(w,M,Gn,"","\\breve");y(w,M,Gn,"","\\check");y(w,M,Gn,"^","\\hat");y(w,M,Gn,"","\\vec");y(w,M,Gn,"","\\dot");y(w,M,Gn,"","\\mathring");y(w,M,St,"","\\@imath");y(w,M,St,"","\\@jmath");y(w,M,Y,"","");y(w,M,Y,"","");y(Ee,M,Y,"","\\i",!0);y(Ee,M,Y,"","\\j",!0);y(Ee,M,Y,"","\\ss",!0);y(Ee,M,Y,"","\\ae",!0);y(Ee,M,Y,"","\\oe",!0);y(Ee,M,Y,"","\\o",!0);y(Ee,M,Y,"","\\AE",!0);y(Ee,M,Y,"","\\OE",!0);y(Ee,M,Y,"","\\O",!0);y(Ee,M,Gn,"","\\'");y(Ee,M,Gn,"","\\`");y(Ee,M,Gn,"","\\^");y(Ee,M,Gn,"","\\~");y(Ee,M,Gn,"","\\=");y(Ee,M,Gn,"","\\u");y(Ee,M,Gn,"","\\.");y(Ee,M,Gn,"","\\c");y(Ee,M,Gn,"","\\r");y(Ee,M,Gn,"","\\v");y(Ee,M,Gn,"",'\\"');y(Ee,M,Gn,"","\\H");y(Ee,M,Gn,"","\\textcircled");var Tz={"--":!0,"---":!0,"``":!0,"''":!0};y(Ee,M,Y,"","--",!0);y(Ee,M,Y,"","\\textendash");y(Ee,M,Y,"","---",!0);y(Ee,M,Y,"","\\textemdash");y(Ee,M,Y,"","`",!0);y(Ee,M,Y,"","\\textquoteleft");y(Ee,M,Y,"","'",!0);y(Ee,M,Y,"","\\textquoteright");y(Ee,M,Y,"","``",!0);y(Ee,M,Y,"","\\textquotedblleft");y(Ee,M,Y,"","''",!0);y(Ee,M,Y,"","\\textquotedblright");y(w,M,Y,"","\\degree",!0);y(Ee,M,Y,"","\\degree");y(Ee,M,Y,"","\\textdegree",!0);y(w,M,Y,"","\\pounds");y(w,M,Y,"","\\mathsterling",!0);y(Ee,M,Y,"","\\pounds");y(Ee,M,Y,"","\\textsterling",!0);y(w,z,Y,"","\\maltese");y(Ee,z,Y,"","\\maltese");var GT='0123456789/@."';for(var M5=0;M5<GT.length;M5++){var KT=GT.charAt(M5);y(w,M,Y,KT,KT)}var XT='0123456789!@*()-=+";:?/.,';for(var T5=0;T5<XT.length;T5++){var ZT=XT.charAt(T5);y(Ee,M,Y,ZT,ZT)}var Sy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var A5=0;A5<Sy.length;A5++){var H1=Sy.charAt(A5);y(w,M,St,H1,H1),y(Ee,M,Y,H1,H1)}y(w,z,Y,"C","");y(Ee,z,Y,"C","");y(w,z,Y,"H","");y(Ee,z,Y,"H","");y(w,z,Y,"N","");y(Ee,z,Y,"N","");y(w,z,Y,"P","");y(Ee,z,Y,"P","");y(w,z,Y,"Q","");y(Ee,z,Y,"Q","");y(w,z,Y,"R","");y(Ee,z,Y,"R","");y(w,z,Y,"Z","");y(Ee,z,Y,"Z","");y(w,M,St,"h","");y(Ee,M,St,"h","");var At="";for(var ii=0;ii<Sy.length;ii++){var nr=Sy.charAt(ii);At=String.fromCharCode(55349,56320+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56372+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56424+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56580+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56684+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56736+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56788+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56840+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56944+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),ii<26&&(At=String.fromCharCode(55349,56632+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At),At=String.fromCharCode(55349,56476+ii),y(w,M,St,nr,At),y(Ee,M,Y,nr,At))}At="";y(w,M,St,"k",At);y(Ee,M,Y,"k",At);for(var Xc=0;Xc<10;Xc++){var Il=Xc.toString();At=String.fromCharCode(55349,57294+Xc),y(w,M,St,Il,At),y(Ee,M,Y,Il,At),At=String.fromCharCode(55349,57314+Xc),y(w,M,St,Il,At),y(Ee,M,Y,Il,At),At=String.fromCharCode(55349,57324+Xc),y(w,M,St,Il,At),y(Ee,M,Y,Il,At),At=String.fromCharCode(55349,57334+Xc),y(w,M,St,Il,At),y(Ee,M,Y,Il,At)}var d7="";for(var _5=0;_5<d7.length;_5++){var V1=d7.charAt(_5);y(w,M,St,V1,V1),y(Ee,M,Y,V1,V1)}var q1=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],JT=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],S1e=function(e,n){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,o=n==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[q1[a][2],q1[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[JT[l][2],JT[l][o]]}else{if(s===120485||s===120486)return[q1[0][2],q1[0][o]];if(120486<s&&s<120782)return["",""];throw new ze("Unsupported character: "+e)}},cb=function(e,n,r){return Bn[r][e]&&Bn[r][e].replace&&(e=Bn[r][e].replace),{value:e,metrics:h8(e,n,r)}},no=function(e,n,r,i,s){var o=cb(e,n,r),a=o.metrics;e=o.value;var l;if(a){var c=a.italic;(r==="text"||i&&i.font==="mathit")&&(c=0),l=new qs(e,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+r+"'")),l=new qs(e,0,0,0,0,0,s);if(i){l.maxFontSize=i.sizeMultiplier,i.style.isTight()&&l.classes.push("mtight");var u=i.getColor();u&&(l.style.color=u)}return l},C1e=function(e,n,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&cb(e,"Main-Bold",n).metrics?no(e,"Main-Bold",n,r,i.concat(["mathbf"])):e==="\\"||Bn[n][e].font==="main"?no(e,"Main-Regular",n,r,i):no(e,"AMS-Regular",n,r,i.concat(["amsrm"]))},O1e=function(e,n,r,i,s){return s!=="textord"&&cb(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},M1e=function(e,n,r){var i=e.mode,s=e.text,o=["mord"],a=i==="math"||i==="text"&&n.font,l=a?n.font:n.fontFamily,c="",u="";if(s.charCodeAt(0)===55349&&([c,u]=S1e(s,i)),c.length>0)return no(s,c,i,n,o.concat(u));if(l){var h,f;if(l==="boldsymbol"){var d=O1e(s,i,n,o,r);h=d.fontName,f=[d.fontClass]}else a?(h=Dz[l].fontName,f=[l]):(h=W1(l,n.fontWeight,n.fontShape),f=[l,n.fontWeight,n.fontShape]);if(cb(s,h,i).metrics)return no(s,h,i,n,o.concat(f));if(Tz.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var p=[],m=0;m<s.length;m++)p.push(no(s[m],h,i,n,o.concat(f)));return _z(p)}}if(r==="mathord")return no(s,"Math-Italic",i,n,o.concat(["mathnormal"]));if(r==="textord"){var g=Bn[i][s]&&Bn[i][s].font;if(g==="ams"){var v=W1("amsrm",n.fontWeight,n.fontShape);return no(s,v,i,n,o.concat("amsrm",n.fontWeight,n.fontShape))}else if(g==="main"||!g){var b=W1("textrm",n.fontWeight,n.fontShape);return no(s,b,i,n,o.concat(n.fontWeight,n.fontShape))}else{var S=W1(g,n.fontWeight,n.fontShape);return no(s,S,i,n,o.concat(S,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},T1e=(t,e)=>{if(wc(t.classes)!==wc(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var n=t.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},A1e=t=>{for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n instanceof qs&&r instanceof qs&&T1e(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,t.splice(e+1,1),e--)}return t},d8=function(e){for(var n=0,r=0,i=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>n&&(n=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}e.height=n,e.depth=r,e.maxFontSize=i},Ti=function(e,n,r,i){var s=new qm(e,n,r,i);return d8(s),s},Az=(t,e,n,r)=>new qm(t,e,n,r),_1e=function(e,n,r){var i=Ti([e],[],n);return i.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),i.style.borderBottomWidth=Qe(i.height),i.maxFontSize=1,i},D1e=function(e,n,r,i){var s=new f8(e,n,r,i);return d8(s),s},_z=function(e){var n=new Vm(e);return d8(n),n},E1e=function(e,n){return e instanceof Vm?Ti([],[e],n):e},I1e=function(e){if(e.positionType==="individualShift"){for(var n=e.children,r=[n[0]],i=-n[0].shift-n[0].elem.depth,s=i,o=1;o<n.length;o++){var a=-n[o].shift-s-n[o].elem.depth,l=a-(n[o-1].elem.height+n[o-1].elem.depth);s=s+a,r.push({type:"kern",size:l}),r.push(n[o])}return{children:r,depth:i}}var c;if(e.positionType==="top"){for(var u=e.positionData,h=0;h<e.children.length;h++){var f=e.children[h];u-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var d=e.children[0];if(d.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-d.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-d.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},P1e=function(e,n){for(var{children:r,depth:i}=I1e(e),s=0,o=0;o<r.length;o++){var a=r[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=Ti(["pstrut"],[]);c.style.height=Qe(s);for(var u=[],h=i,f=i,d=i,p=0;p<r.length;p++){var m=r[p];if(m.type==="kern")d+=m.size;else{var g=m.elem,v=m.wrapperClasses||[],b=m.wrapperStyle||{},S=Ti(v,[c,g],void 0,b);S.style.top=Qe(-s-d-g.depth),m.marginLeft&&(S.style.marginLeft=m.marginLeft),m.marginRight&&(S.style.marginRight=m.marginRight),u.push(S),d+=g.height+g.depth}h=Math.min(h,d),f=Math.max(f,d)}var O=Ti(["vlist"],u);O.style.height=Qe(f);var k;if(h<0){var C=Ti([],[]),T=Ti(["vlist"],[C]);T.style.height=Qe(-h);var R=Ti(["vlist-s"],[new qs("")]);k=[Ti(["vlist-r"],[O,R]),Ti(["vlist-r"],[T])]}else k=[Ti(["vlist-r"],[O])];var L=Ti(["vlist-t"],k);return k.length===2&&L.classes.push("vlist-t2"),L.height=f,L.depth=-h,L},N1e=(t,e)=>{var n=Ti(["mspace"],[],e),r=Zn(t,e);return n.style.marginRight=Qe(r),n},W1=function(e,n,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return n==="textbf"&&r==="textit"?s="BoldItalic":n==="textbf"?s="Bold":n==="textit"?s="Italic":s="Regular",i+"-"+s},Dz={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Ez={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},R1e=function(e,n){var[r,i,s]=Ez[e],o=new xc(r),a=new cl([o],{width:Qe(i),height:Qe(s),style:"width:"+Qe(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=Az(["overlay"],[a],n);return l.height=s,l.style.height=Qe(s),l.style.width=Qe(i),l},re={fontMap:Dz,makeSymbol:no,mathsym:C1e,makeSpan:Ti,makeSvgSpan:Az,makeLineSpan:_1e,makeAnchor:D1e,makeFragment:_z,wrapFragment:E1e,makeVList:P1e,makeOrd:M1e,makeGlue:N1e,staticSvg:R1e,svgData:Ez,tryCombineChars:A1e},Xn={number:3,unit:"mu"},Zc={number:4,unit:"mu"},Ca={number:5,unit:"mu"},L1e={mord:{mop:Xn,mbin:Zc,mrel:Ca,minner:Xn},mop:{mord:Xn,mop:Xn,mrel:Ca,minner:Xn},mbin:{mord:Zc,mop:Zc,mopen:Zc,minner:Zc},mrel:{mord:Ca,mop:Ca,mopen:Ca,minner:Ca},mopen:{},mclose:{mop:Xn,mbin:Zc,mrel:Ca,minner:Xn},mpunct:{mord:Xn,mop:Xn,mrel:Ca,mopen:Xn,mclose:Xn,mpunct:Xn,minner:Xn},minner:{mord:Xn,mop:Xn,mbin:Zc,mrel:Ca,mopen:Xn,mpunct:Xn,minner:Xn}},$1e={mord:{mop:Xn},mop:{mord:Xn,mop:Xn},mbin:{},mrel:{},mopen:{},mclose:{mop:Xn},mpunct:{},minner:{mop:Xn}},Iz={},Cy={},Oy={};function Je(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,a={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<n.length;++l)Iz[n[l]]=a;e&&(s&&(Cy[e]=s),o&&(Oy[e]=o))}function mh(t){var{type:e,htmlBuilder:n,mathmlBuilder:r}=t;Je({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var My=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ar=function(e){return e.type==="ordgroup"?e.body:[e]},ul=re.makeSpan,B1e=["leftmost","mbin","mopen","mrel","mop","mpunct"],z1e=["rightmost","mrel","mclose","mpunct"],F1e={display:Ct.DISPLAY,text:Ct.TEXT,script:Ct.SCRIPT,scriptscript:Ct.SCRIPTSCRIPT},H1e={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},kr=function(e,n,r,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=rn(e[o],n);if(a instanceof Vm){var l=a.children;s.push(...l)}else s.push(a)}if(re.tryCombineChars(s),!r)return s;var c=n;if(e.length===1){var u=e[0];u.type==="sizing"?c=n.havingSize(u.size):u.type==="styling"&&(c=n.havingStyle(F1e[u.style]))}var h=ul([i[0]||"leftmost"],[],n),f=ul([i[1]||"rightmost"],[],n),d=r==="root";return eA(s,(p,m)=>{var g=m.classes[0],v=p.classes[0];g==="mbin"&&z1e.includes(v)?m.classes[0]="mord":v==="mbin"&&B1e.includes(g)&&(p.classes[0]="mord")},{node:h},f,d),eA(s,(p,m)=>{var g=p7(m),v=p7(p),b=g&&v?p.hasClass("mtight")?$1e[g][v]:L1e[g][v]:null;if(b)return re.makeGlue(b,c)},{node:h},f,d),s},eA=function t(e,n,r,i,s){i&&e.push(i);for(var o=0;o<e.length;o++){var a=e[o],l=Pz(a);if(l){t(l.children,n,r,null,s);continue}var c=!a.hasClass("mspace");if(c){var u=n(a,r.node);u&&(r.insertAfter?r.insertAfter(u):(e.unshift(u),o++))}c?r.node=a:s&&a.hasClass("newline")&&(r.node=ul(["leftmost"])),r.insertAfter=(h=>f=>{e.splice(h+1,0,f),o++})(o)}i&&e.pop()},Pz=function(e){return e instanceof Vm||e instanceof f8||e instanceof qm&&e.hasClass("enclosing")?e:null},V1e=function t(e,n){var r=Pz(e);if(r){var i=r.children;if(i.length){if(n==="right")return t(i[i.length-1],"right");if(n==="left")return t(i[0],"left")}}return e},p7=function(e,n){return e?(n&&(e=V1e(e,n)),H1e[e.classes[0]]||null):null},sm=function(e,n){var r=["nulldelimiter"].concat(e.baseSizingClasses());return ul(n.concat(r))},rn=function(e,n,r){if(!e)return ul();if(Cy[e.type]){var i=Cy[e.type](e,n);if(r&&n.size!==r.size){i=ul(n.sizingClasses(r),[i],n);var s=n.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new ze("Got group of unknown type: '"+e.type+"'")};function j1(t,e){var n=ul(["base"],t,e),r=ul(["strut"]);return r.style.height=Qe(n.height+n.depth),n.depth&&(r.style.verticalAlign=Qe(-n.depth)),n.children.unshift(r),n}function m7(t,e){var n=null;t.length===1&&t[0].type==="tag"&&(n=t[0].tag,t=t[0].body);var r=kr(t,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],o=[],a=0;a<r.length;a++)if(o.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,o.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(s.push(j1(o,e)),o=[])}else r[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(j1(o,e)),o=[]),s.push(r[a]));o.length>0&&s.push(j1(o,e));var c;n?(c=j1(kr(n,e,!0)),c.classes=["tag"],s.push(c)):i&&s.push(i);var u=ul(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var h=c.children[0];h.style.height=Qe(u.height+u.depth),u.depth&&(h.style.verticalAlign=Qe(-u.depth))}return u}function Nz(t){return new Vm(t)}class cs{constructor(e,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=wc(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Uo&&this.children[r+1]instanceof Uo){for(var i=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Uo;)i+=this.children[++r].toText();e.appendChild(new Uo(i).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=on.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+on.escape(wc(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Uo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return on.escape(this.toText())}toText(){return this.text}}class q1e{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Qe(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Qe(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Re={MathNode:cs,TextNode:Uo,SpaceNode:q1e,newDocumentFragment:Nz},Ws=function(e,n,r){return Bn[n][e]&&Bn[n][e].replace&&e.charCodeAt(0)!==55349&&!(Tz.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=Bn[n][e].replace),new Re.TextNode(e)},p8=function(e){return e.length===1?e[0]:new Re.MathNode("mrow",e)},m8=function(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(["\\imath","\\jmath"].includes(s))return null;Bn[i][s]&&Bn[i][s].replace&&(s=Bn[i][s].replace);var o=re.fontMap[r].fontName;return h8(s,o,i)?re.fontMap[r].variant:null};function D5(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Uo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var n=t.children[0];return n instanceof Uo&&n.text===","}else return!1}var Yi=function(e,n,r){if(e.length===1){var i=In(e[0],n);return r&&i instanceof cs&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,a=0;a<e.length;a++){var l=In(e[a],n);if(l instanceof cs&&o instanceof cs){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(D5(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&D5(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||D5(o))){var c=l.children[0];c instanceof cs&&c.type==="mn"&&(c.children=[...o.children,...c.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var u=o.children[0];if(u instanceof Uo&&u.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof Uo&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),s.pop())}}}s.push(l),o=l}return s},kc=function(e,n,r){return p8(Yi(e,n,r))},In=function(e,n){if(!e)return new Re.MathNode("mrow");if(Oy[e.type]){var r=Oy[e.type](e,n);return r}else throw new ze("Got group of unknown type: '"+e.type+"'")};function tA(t,e,n,r,i){var s=Yi(t,n),o;s.length===1&&s[0]instanceof cs&&["mrow","mtable"].includes(s[0].type)?o=s[0]:o=new Re.MathNode("mrow",s);var a=new Re.MathNode("annotation",[new Re.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new Re.MathNode("semantics",[o,a]),c=new Re.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return re.makeSpan([u],[c])}var Rz=function(e){return new La({style:e.displayMode?Ct.DISPLAY:Ct.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Lz=function(e,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),e=re.makeSpan(r,[e])}return e},W1e=function(e,n,r){var i=Rz(r),s;if(r.output==="mathml")return tA(e,n,i,r.displayMode,!0);if(r.output==="html"){var o=m7(e,i);s=re.makeSpan(["katex"],[o])}else{var a=tA(e,n,i,r.displayMode,!1),l=m7(e,i);s=re.makeSpan(["katex"],[a,l])}return Lz(s,r)},j1e=function(e,n,r){var i=Rz(r),s=m7(e,i),o=re.makeSpan(["katex"],[s]);return Lz(o,r)},Y1e={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Q1e=function(e){var n=new Re.MathNode("mo",[new Re.TextNode(Y1e[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},U1e={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},G1e=function(e){return e.type==="ordgroup"?e.body.length:1},K1e=function(e,n){function r(){var a=4e5,l=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var c=e,u=G1e(c.base),h,f,d;if(u>5)l==="widehat"||l==="widecheck"?(h=420,a=2364,d=.42,f=l+"4"):(h=312,a=2340,d=.34,f="tilde4");else{var p=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][p],h=[0,239,300,360,420][p],d=[0,.24,.3,.3,.36,.42][p],f=l+p):(a=[0,600,1033,2339,2340][p],h=[0,260,286,306,312][p],d=[0,.26,.286,.3,.306,.34][p],f="tilde"+p)}var m=new xc(f),g=new cl([m],{width:"100%",height:Qe(d),viewBox:"0 0 "+a+" "+h,preserveAspectRatio:"none"});return{span:re.makeSvgSpan([],[g],n),minWidth:0,height:d}}else{var v=[],b=U1e[l],[S,O,k]=b,C=k/1e3,T=S.length,R,L;if(T===1){var I=b[3];R=["hide-tail"],L=[I]}else if(T===2)R=["halfarrow-left","halfarrow-right"],L=["xMinYMin","xMaxYMin"];else if(T===3)R=["brace-left","brace-center","brace-right"],L=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+T+" children.");for(var F=0;F<T;F++){var E=new xc(S[F]),ee=new cl([E],{width:"400em",height:Qe(C),viewBox:"0 0 "+a+" "+k,preserveAspectRatio:L[F]+" slice"}),G=re.makeSvgSpan([R[F]],[ee],n);if(T===1)return{span:G,minWidth:O,height:C};G.style.height=Qe(C),v.push(G)}return{span:re.makeSpan(["stretchy"],v,n),minWidth:O,height:C}}}var{span:i,minWidth:s,height:o}=r();return i.height=o,i.style.height=Qe(o),s>0&&(i.style.minWidth=Qe(s)),i},X1e=function(e,n,r,i,s){var o,a=e.height+e.depth+r+i;if(/fbox|color|angl/.test(n)){if(o=re.makeSpan(["stretchy",n],[],s),n==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(n)&&c.push(new f7({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&c.push(new f7({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new cl(c,{width:"100%",height:Qe(a)});o=re.makeSvgSpan([],[u],s)}return o.height=a,o.style.height=Qe(a),o},hl={encloseSpan:X1e,mathMLnode:Q1e,svgSpan:K1e};function zt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function g8(t){var e=ub(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function ub(t){return t&&(t.type==="atom"||k1e.hasOwnProperty(t.type))?t:null}var v8=(t,e)=>{var n,r,i;t&&t.type==="supsub"?(r=zt(t.base,"accent"),n=r.base,t.base=n,i=w1e(rn(t,e)),t.base=r):(r=zt(t,"accent"),n=r.base);var s=rn(n,e.havingCrampedStyle()),o=r.isShifty&&on.isCharacterBox(n),a=0;if(o){var l=on.getBaseElem(n),c=rn(l,e.havingCrampedStyle());a=UT(c).skew}var u=r.label==="\\c",h=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),f;if(r.isStretchy)f=hl.svgSpan(r,e),f=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Qe(2*a)+")",marginLeft:Qe(2*a)}:void 0}]},e);else{var d,p;r.label==="\\vec"?(d=re.staticSvg("vec",e),p=re.svgData.vec[1]):(d=re.makeOrd({mode:r.mode,text:r.label},e,"textord"),d=UT(d),d.italic=0,p=d.width,u&&(h+=d.depth)),f=re.makeSpan(["accent-body"],[d]);var m=r.label==="\\textcircled";m&&(f.classes.push("accent-full"),h=s.height);var g=a;m||(g-=p/2),f.style.left=Qe(g),r.label==="\\textcircled"&&(f.style.top=".2em"),f=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:f}]},e)}var v=re.makeSpan(["mord","accent"],[f],e);return i?(i.children[0]=v,i.height=Math.max(v.height,i.height),i.classes[0]="mord",i):v},$z=(t,e)=>{var n=t.isStretchy?hl.mathMLnode(t.label):new Re.MathNode("mo",[Ws(t.label,t.mode)]),r=new Re.MathNode("mover",[In(t.base,e),n]);return r.setAttribute("accent","true"),r},Z1e=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Je({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var n=My(e[0]),r=!Z1e.test(t.funcName),i=!r||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:v8,mathmlBuilder:$z});Je({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var n=e[0],r=t.parser.mode;return r==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:t.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:v8,mathmlBuilder:$z});Je({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(t,e)=>{var n=rn(t.base,e),r=hl.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,s=re.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},e);return re.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var n=hl.mathMLnode(t.label),r=new Re.MathNode("munder",[In(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var Y1=t=>{var e=new Re.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Je({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r,funcName:i}=t;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:n[0]}},htmlBuilder(t,e){var n=e.style,r=e.havingStyle(n.sup()),i=re.wrapFragment(rn(t.body,r,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;t.below&&(r=e.havingStyle(n.sub()),o=re.wrapFragment(rn(t.below,r,e),e),o.classes.push(s+"-arrow-pad"));var a=hl.svgSpan(t,e),l=-e.fontMetrics().axisHeight+.5*a.height,c=-e.fontMetrics().axisHeight-.5*a.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(c-=i.depth);var u;if(o){var h=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;u=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:h}]},e)}else u=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:a,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),re.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(t,e){var n=hl.mathMLnode(t.label);n.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(t.body){var i=Y1(In(t.body,e));if(t.below){var s=Y1(In(t.below,e));r=new Re.MathNode("munderover",[n,s,i])}else r=new Re.MathNode("mover",[n,i])}else if(t.below){var o=Y1(In(t.below,e));r=new Re.MathNode("munder",[n,o])}else r=Y1(),r=new Re.MathNode("mover",[n,r]);return r}});var J1e=re.makeSpan;function Bz(t,e){var n=kr(t.body,e,!0);return J1e([t.mclass],n,e)}function zz(t,e){var n,r=Yi(t.body,e);return t.mclass==="minner"?n=new Re.MathNode("mpadded",r):t.mclass==="mord"?t.isCharacterBox?(n=r[0],n.type="mi"):n=new Re.MathNode("mi",r):(t.isCharacterBox?(n=r[0],n.type="mo"):n=new Re.MathNode("mo",r),t.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):t.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):t.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}Je({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:ar(i),isCharacterBox:on.isCharacterBox(i)}},htmlBuilder:Bz,mathmlBuilder:zz});var hb=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Je({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:n}=t;return{type:"mclass",mode:n.mode,mclass:hb(e[0]),body:ar(e[1]),isCharacterBox:on.isCharacterBox(e[1])}}});Je({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:n,funcName:r}=t,i=e[1],s=e[0],o;r!=="\\stackrel"?o=hb(i):o="mrel";var a={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:ar(i)},l={type:"supsub",mode:s.mode,base:a,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:n.mode,mclass:o,body:[l],isCharacterBox:on.isCharacterBox(l)}},htmlBuilder:Bz,mathmlBuilder:zz});Je({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"pmb",mode:n.mode,mclass:hb(e[0]),body:ar(e[0])}},htmlBuilder(t,e){var n=kr(t.body,e,!0),r=re.makeSpan([t.mclass],n,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(t,e){var n=Yi(t.body,e),r=new Re.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var ege={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},nA=()=>({type:"styling",body:[],mode:"math",style:"display"}),rA=t=>t.type==="textord"&&t.text==="@",tge=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function nge(t,e,n){var r=ege[t];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=n.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=n.callFunction("\\Big",[s],[]),a=n.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[i,o,a]};return n.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function rge(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var n=t.fetch().text;if(n==="&"||n==="\\\\")t.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ze("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var o=e[s],a=nA(),l=0;l<o.length;l++)if(!rA(o[l]))a.body.push(o[l]);else{r.push(a),l+=1;var c=g8(o[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var f=!0,d=l+1;d<o.length;d++){if(tge(o[d],c)){f=!1,l=d;break}if(rA(o[d]))throw new ze("Missing a "+c+" character to complete a CD arrow.",o[d]);u[h].body.push(o[d])}if(f)throw new ze("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new ze('Expected one of "<>AV=|." after @',o[l]);var p=nge(c,u,t),m={type:"styling",body:[p],mode:"math",style:"display"};r.push(m),a=nA()}s%2===0?r.push(a):r.shift(),r=[],i.push(r)}t.gullet.endGroup(),t.gullet.endGroup();var g=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}Je({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:e[0]}},htmlBuilder(t,e){var n=e.havingStyle(e.style.sup()),r=re.wrapFragment(rn(t.label,n,e),e);return r.classes.push("cd-label-"+t.side),r.style.bottom=Qe(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(t,e){var n=new Re.MathNode("mrow",[In(t.label,e)]);return n=new Re.MathNode("mpadded",[n]),n.setAttribute("width","0"),t.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new Re.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});Je({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:n}=t;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(t,e){var n=re.wrapFragment(rn(t.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(t,e){return new Re.MathNode("mrow",[In(t.fragment,e)])}});Je({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:n}=t,r=zt(e[0],"ordgroup"),i=r.body,s="",o=0;o<i.length;o++){var a=zt(i[o],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new ze("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new ze("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:n.mode,text:c}}});var Fz=(t,e)=>{var n=kr(t.body,e.withColor(t.color),!1);return re.makeFragment(n)},Hz=(t,e)=>{var n=Yi(t.body,e.withColor(t.color)),r=new Re.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};Je({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:n}=t,r=zt(e[0],"color-token").color,i=e[1];return{type:"color",mode:n.mode,color:r,body:ar(i)}},htmlBuilder:Fz,mathmlBuilder:Hz});Je({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:n,breakOnTokenText:r}=t,i=zt(e[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:s}},htmlBuilder:Fz,mathmlBuilder:Hz});Je({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,n){var{parser:r}=t,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&zt(i,"size").value}},htmlBuilder(t,e){var n=re.makeSpan(["mspace"],[],e);return t.newLine&&(n.classes.push("newline"),t.size&&(n.style.marginTop=Qe(Zn(t.size,e)))),n},mathmlBuilder(t,e){var n=new Re.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",Qe(Zn(t.size,e)))),n}});var g7={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Vz=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ze("Expected a control sequence",t);return e},ige=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},qz=(t,e,n,r)=>{var i=t.gullet.macros.get(n.text);i==null&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!t.gullet.isExpandable(n.text)}),t.gullet.macros.set(e,i,r)};Je({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:n}=t;e.consumeSpaces();var r=e.fetch();if(g7[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=g7[r.text]),zt(e.parseFunction(),"internal");throw new ze("Invalid token after macro prefix",r)}});Je({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new ze("Expected a control sequence",r);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new ze('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new ze('Argument number "'+r.text+'" out of order');s++,a.push([])}else{if(r.text==="EOF")throw new ze("Expected a macro definition");a[s].push(r.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(n==="\\edef"||n==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},n===g7[n]),{type:"internal",mode:e.mode}}});Je({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=Vz(e.gullet.popToken());e.gullet.consumeSpaces();var i=ige(e);return qz(e,r,i,n==="\\\\globallet"),{type:"internal",mode:e.mode}}});Je({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=Vz(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return qz(e,r,s,n==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var d0=function(e,n,r){var i=Bn.math[e]&&Bn.math[e].replace,s=h8(i||e,n,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return s},y8=function(e,n,r,i){var s=r.havingBaseStyle(n),o=re.makeSpan(i.concat(s.sizingClasses(r)),[e],r),a=s.sizeMultiplier/r.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},Wz=function(e,n,r){var i=n.havingBaseStyle(r),s=(1-n.sizeMultiplier/i.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Qe(s),e.height-=s,e.depth+=s},sge=function(e,n,r,i,s,o){var a=re.makeSymbol(e,"Main-Regular",s,i),l=y8(a,n,i,o);return r&&Wz(l,i,n),l},oge=function(e,n,r,i){return re.makeSymbol(e,"Size"+n+"-Regular",r,i)},jz=function(e,n,r,i,s,o){var a=oge(e,n,s,i),l=y8(re.makeSpan(["delimsizing","size"+n],[a],i),Ct.TEXT,i,o);return r&&Wz(l,i,Ct.TEXT),l},E5=function(e,n,r){var i;n==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=re.makeSpan(["delimsizinginner",i],[re.makeSpan([],[re.makeSymbol(e,n,r)])]);return{type:"elem",elem:s}},I5=function(e,n,r){var i=Qo["Size4-Regular"][e.charCodeAt(0)]?Qo["Size4-Regular"][e.charCodeAt(0)][4]:Qo["Size1-Regular"][e.charCodeAt(0)][4],s=new xc("inner",h1e(e,Math.round(1e3*n))),o=new cl([s],{width:Qe(i),height:Qe(n),style:"width:"+Qe(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),a=re.makeSvgSpan([],[o],r);return a.height=n,a.style.height=Qe(n),a.style.width=Qe(i),{type:"elem",elem:a}},v7=.008,Q1={type:"kern",size:-1*v7},age=["|","\\lvert","\\rvert","\\vert"],lge=["\\|","\\lVert","\\rVert","\\Vert"],Yz=function(e,n,r,i,s,o){var a,l,c,u,h="",f=0;a=c=u=e,l=null;var d="Size1-Regular";e==="\\uparrow"?c=u="":e==="\\Uparrow"?c=u="":e==="\\downarrow"?a=c="":e==="\\Downarrow"?a=c="":e==="\\updownarrow"?(a="\\uparrow",c="",u="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",c="",u="\\Downarrow"):age.includes(e)?(c="",h="vert",f=333):lge.includes(e)?(c="",h="doublevert",f=556):e==="["||e==="\\lbrack"?(a="",c="",u="",d="Size4-Regular",h="lbrack",f=667):e==="]"||e==="\\rbrack"?(a="",c="",u="",d="Size4-Regular",h="rbrack",f=667):e==="\\lfloor"||e===""?(c=a="",u="",d="Size4-Regular",h="lfloor",f=667):e==="\\lceil"||e===""?(a="",c=u="",d="Size4-Regular",h="lceil",f=667):e==="\\rfloor"||e===""?(c=a="",u="",d="Size4-Regular",h="rfloor",f=667):e==="\\rceil"||e===""?(a="",c=u="",d="Size4-Regular",h="rceil",f=667):e==="("||e==="\\lparen"?(a="",c="",u="",d="Size4-Regular",h="lparen",f=875):e===")"||e==="\\rparen"?(a="",c="",u="",d="Size4-Regular",h="rparen",f=875):e==="\\{"||e==="\\lbrace"?(a="",l="",u="",c="",d="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="",l="",u="",c="",d="Size4-Regular"):e==="\\lgroup"||e===""?(a="",u="",c="",d="Size4-Regular"):e==="\\rgroup"||e===""?(a="",u="",c="",d="Size4-Regular"):e==="\\lmoustache"||e===""?(a="",u="",c="",d="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(a="",u="",c="",d="Size4-Regular");var p=d0(a,d,s),m=p.height+p.depth,g=d0(c,d,s),v=g.height+g.depth,b=d0(u,d,s),S=b.height+b.depth,O=0,k=1;if(l!==null){var C=d0(l,d,s);O=C.height+C.depth,k=2}var T=m+S+O,R=Math.max(0,Math.ceil((n-T)/(k*v))),L=T+R*k*v,I=i.fontMetrics().axisHeight;r&&(I*=i.sizeMultiplier);var F=L/2-I,E=[];if(h.length>0){var ee=L-m-S,G=Math.round(L*1e3),W=f1e(h,Math.round(ee*1e3)),X=new xc(h,W),te=(f/1e3).toFixed(3)+"em",ne=(G/1e3).toFixed(3)+"em",ye=new cl([X],{width:te,height:ne,viewBox:"0 0 "+f+" "+G}),A=re.makeSvgSpan([],[ye],i);A.height=G/1e3,A.style.width=te,A.style.height=ne,E.push({type:"elem",elem:A})}else{if(E.push(E5(u,d,s)),E.push(Q1),l===null){var fe=L-m-S+2*v7;E.push(I5(c,fe,i))}else{var he=(L-m-S-O)/2+2*v7;E.push(I5(c,he,i)),E.push(Q1),E.push(E5(l,d,s)),E.push(Q1),E.push(I5(c,he,i))}E.push(Q1),E.push(E5(a,d,s))}var P=i.havingBaseStyle(Ct.TEXT),Ue=re.makeVList({positionType:"bottom",positionData:F,children:E},P);return y8(re.makeSpan(["delimsizing","mult"],[Ue],P),Ct.TEXT,i,o)},P5=80,N5=.08,R5=function(e,n,r,i,s){var o=u1e(e,i,r),a=new xc(e,o),l=new cl([a],{width:"400em",height:Qe(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return re.makeSvgSpan(["hide-tail"],[l],s)},cge=function(e,n){var r=n.havingBaseSizing(),i=Kz("\\surd",e*r.sizeMultiplier,Gz,r),s=r.sizeMultiplier,o=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,h;return i.type==="small"?(u=1e3+1e3*o+P5,e<1?s=1:e<1.4&&(s=.7),l=(1+o+N5)/s,c=(1+o)/s,a=R5("sqrtMain",l,u,o,n),a.style.minWidth="0.853em",h=.833/s):i.type==="large"?(u=(1e3+P5)*up[i.size],c=(up[i.size]+o)/s,l=(up[i.size]+o+N5)/s,a=R5("sqrtSize"+i.size,l,u,o,n),a.style.minWidth="1.02em",h=1/s):(l=e+o+N5,c=e+o,u=Math.floor(1e3*e+o)+P5,a=R5("sqrtTall",l,u,o,n),a.style.minWidth="0.742em",h=1.056),a.height=c,a.style.height=Qe(l),{span:a,advanceWidth:h,ruleWidth:(n.fontMetrics().sqrtRuleThickness+o)*s}},Qz=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],uge=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Uz=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],up=[0,1.2,1.8,2.4,3],hge=function(e,n,r,i,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Qz.includes(e)||Uz.includes(e))return jz(e,n,!1,r,i,s);if(uge.includes(e))return Yz(e,up[n],!1,r,i,s);throw new ze("Illegal delimiter: '"+e+"'")},fge=[{type:"small",style:Ct.SCRIPTSCRIPT},{type:"small",style:Ct.SCRIPT},{type:"small",style:Ct.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],dge=[{type:"small",style:Ct.SCRIPTSCRIPT},{type:"small",style:Ct.SCRIPT},{type:"small",style:Ct.TEXT},{type:"stack"}],Gz=[{type:"small",style:Ct.SCRIPTSCRIPT},{type:"small",style:Ct.SCRIPT},{type:"small",style:Ct.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],pge=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Kz=function(e,n,r,i){for(var s=Math.min(2,3-i.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var a=d0(e,pge(r[o]),"math"),l=a.height+a.depth;if(r[o].type==="small"){var c=i.havingBaseStyle(r[o].style);l*=c.sizeMultiplier}if(l>n)return r[o]}return r[r.length-1]},Xz=function(e,n,r,i,s,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var a;Uz.includes(e)?a=fge:Qz.includes(e)?a=Gz:a=dge;var l=Kz(e,n,a,i);return l.type==="small"?sge(e,l.style,r,i,s,o):l.type==="large"?jz(e,l.size,r,i,s,o):Yz(e,n,r,i,s,o)},mge=function(e,n,r,i,s,o){var a=i.fontMetrics().axisHeight*i.sizeMultiplier,l=901,c=5/i.fontMetrics().ptPerEm,u=Math.max(n-a,r+a),h=Math.max(u/500*l,2*u-c);return Xz(e,h,!0,i,s,o)},Ja={sqrtImage:cge,sizedDelim:hge,sizeToMaxHeight:up,customSizedDelim:Xz,leftRightDelim:mge},iA={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},gge=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function fb(t,e){var n=ub(t);if(n&&gge.includes(n.text))return n;throw n?new ze("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",t):new ze("Invalid delimiter type '"+t.type+"'",t)}Je({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var n=fb(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:iA[t.funcName].size,mclass:iA[t.funcName].mclass,delim:n.text}},htmlBuilder:(t,e)=>t.delim==="."?re.makeSpan([t.mclass]):Ja.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Ws(t.delim,t.mode));var n=new Re.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=Qe(Ja.sizeToMaxHeight[t.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function sA(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Je({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=t.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new ze("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:fb(e[0],t).text,color:n}}});Je({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=fb(e[0],t),r=t.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=zt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{sA(t);for(var n=kr(t.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,o=0;o<n.length;o++)n[o].isMiddle?s=!0:(r=Math.max(n[o].height,r),i=Math.max(n[o].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var a;if(t.left==="."?a=sm(e,["mopen"]):a=Ja.leftRightDelim(t.left,r,i,e,t.mode,["mopen"]),n.unshift(a),s)for(var l=1;l<n.length;l++){var c=n[l],u=c.isMiddle;u&&(n[l]=Ja.leftRightDelim(u.delim,r,i,u.options,t.mode,[]))}var h;if(t.right===".")h=sm(e,["mclose"]);else{var f=t.rightColor?e.withColor(t.rightColor):e;h=Ja.leftRightDelim(t.right,r,i,f,t.mode,["mclose"])}return n.push(h),re.makeSpan(["minner"],n,e)},mathmlBuilder:(t,e)=>{sA(t);var n=Yi(t.body,e);if(t.left!=="."){var r=new Re.MathNode("mo",[Ws(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(t.right!=="."){var i=new Re.MathNode("mo",[Ws(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),n.push(i)}return p8(n)}});Je({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=fb(e[0],t);if(!t.parser.leftrightDepth)throw new ze("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:(t,e)=>{var n;if(t.delim===".")n=sm(e,[]);else{n=Ja.sizedDelim(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};n.isMiddle=r}return n},mathmlBuilder:(t,e)=>{var n=t.delim==="\\vert"||t.delim==="|"?Ws("|","text"):Ws(t.delim,t.mode),r=new Re.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var b8=(t,e)=>{var n=re.wrapFragment(rn(t.body,e),e),r=t.label.slice(1),i=e.sizeMultiplier,s,o=0,a=on.isCharacterBox(t.body);if(r==="sout")s=re.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var l=Zn({number:.6,unit:"pt"},e),c=Zn({number:.35,unit:"ex"},e),u=e.havingBaseSizing();i=i/u.sizeMultiplier;var h=n.height+n.depth+l+c;n.style.paddingLeft=Qe(h/2+l);var f=Math.floor(1e3*h*i),d=l1e(f),p=new cl([new xc("phase",d)],{width:"400em",height:Qe(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=re.makeSvgSpan(["hide-tail"],[p],e),s.style.height=Qe(h),o=n.depth+l+c}else{/cancel/.test(r)?a||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var m=0,g=0,v=0;/box/.test(r)?(v=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),m=e.fontMetrics().fboxsep+(r==="colorbox"?0:v),g=m):r==="angl"?(v=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),m=4*v,g=Math.max(0,.25-n.depth)):(m=a?.2:0,g=m),s=hl.encloseSpan(n,r,m,g,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=Qe(v)):r==="angl"&&v!==.049&&(s.style.borderTopWidth=Qe(v),s.style.borderRightWidth=Qe(v)),o=n.depth+g,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var b;if(t.backgroundColor)b=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:n,shift:0}]},e);else{var S=/cancel|phase/.test(r)?["svg-align"]:[];b=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:S}]},e)}return/cancel/.test(r)&&(b.height=n.height,b.depth=n.depth),/cancel/.test(r)&&!a?re.makeSpan(["mord","cancel-lap"],[b],e):re.makeSpan(["mord"],[b],e)},w8=(t,e)=>{var n=0,r=new Re.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[In(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};Je({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=zt(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:b8,mathmlBuilder:w8});Je({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=zt(e[0],"color-token").color,o=zt(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:b8,mathmlBuilder:w8});Je({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}});Je({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:b8,mathmlBuilder:w8});Je({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var Zz={};function pa(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,a={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)Zz[n[l]]=a;s&&(Cy[e]=s),o&&(Oy[e]=o)}var Jz={};function _(t,e){Jz[t]=e}function oA(t){var e=[];t.consumeSpaces();var n=t.fetch().text;for(n==="\\relax"&&(t.consume(),t.consumeSpaces(),n=t.fetch().text);n==="\\hline"||n==="\\hdashline";)t.consume(),e.push(n==="\\hdashline"),t.consumeSpaces(),n=t.fetch().text;return e}var db=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ze("{"+t.envName+"} can be used only in display mode.")};function x8(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Pc(t,e,n){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:f}=e;if(t.gullet.beginGroup(),c||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var d=t.gullet.expandMacroAsText("\\arraystretch");if(d==null)o=1;else if(o=parseFloat(d),!o||o<0)throw new ze("Invalid \\arraystretch: "+d)}t.gullet.beginGroup();var p=[],m=[p],g=[],v=[],b=l!=null?[]:void 0;function S(){l&&t.gullet.macros.set("\\@eqnsw","1",!0)}function O(){b&&(t.gullet.macros.get("\\df@tag")?(b.push(t.subparse([new ms("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!l&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(S(),v.push(oA(t));;){var k=t.parseExpression(!1,c?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),k={type:"ordgroup",mode:t.mode,body:k},n&&(k={type:"styling",mode:t.mode,style:n,body:[k]}),p.push(k);var C=t.fetch().text;if(C==="&"){if(h&&p.length===h){if(c||a)throw new ze("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(C==="\\end"){O(),p.length===1&&k.type==="styling"&&k.body[0].body.length===0&&(m.length>1||!u)&&m.pop(),v.length<m.length+1&&v.push([]);break}else if(C==="\\\\"){t.consume();var T=void 0;t.gullet.future().text!==" "&&(T=t.parseSizeGroup(!0)),g.push(T?T.value:null),O(),v.push(oA(t)),p=[],m.push(p),S()}else throw new ze("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:o,body:m,cols:s,rowGaps:g,hskipBeforeAndAfter:r,hLinesBeforeRow:v,colSeparationType:a,tags:b,leqno:f}}function k8(t){return t.slice(0,1)==="d"?"display":"text"}var ma=function(e,n){var r,i,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),c=[],u=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),h=1/n.fontMetrics().ptPerEm,f=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var d=n.havingStyle(Ct.SCRIPT).sizeMultiplier;f=.2778*(d/n.sizeMultiplier)}var p=e.colSeparationType==="CD"?Zn({number:3,unit:"ex"},n):12*h,m=3*h,g=e.arraystretch*p,v=.7*g,b=.3*g,S=0;function O(De){for(var Te=0;Te<De.length;++Te)Te>0&&(S+=.25),c.push({pos:S,isDashed:De[Te]})}for(O(o[0]),r=0;r<e.body.length;++r){var k=e.body[r],C=v,T=b;a<k.length&&(a=k.length);var R=new Array(k.length);for(i=0;i<k.length;++i){var L=rn(k[i],n);T<L.depth&&(T=L.depth),C<L.height&&(C=L.height),R[i]=L}var I=e.rowGaps[r],F=0;I&&(F=Zn(I,n),F>0&&(F+=b,T<F&&(T=F),F=0)),e.addJot&&(T+=m),R.height=C,R.depth=T,S+=C,R.pos=S,S+=T+F,l[r]=R,O(o[r+1])}var E=S/2+n.fontMetrics().axisHeight,ee=e.cols||[],G=[],W,X,te=[];if(e.tags&&e.tags.some(De=>De))for(r=0;r<s;++r){var ne=l[r],ye=ne.pos-E,A=e.tags[r],fe=void 0;A===!0?fe=re.makeSpan(["eqn-num"],[],n):A===!1?fe=re.makeSpan([],[],n):fe=re.makeSpan([],kr(A,n,!0),n),fe.depth=ne.depth,fe.height=ne.height,te.push({type:"elem",elem:fe,shift:ye})}for(i=0,X=0;i<a||X<ee.length;++i,++X){for(var he=ee[X]||{},P=!0;he.type==="separator";){if(P||(W=re.makeSpan(["arraycolsep"],[]),W.style.width=Qe(n.fontMetrics().doubleRuleSep),G.push(W)),he.separator==="|"||he.separator===":"){var Ue=he.separator==="|"?"solid":"dashed",je=re.makeSpan(["vertical-separator"],[],n);je.style.height=Qe(S),je.style.borderRightWidth=Qe(u),je.style.borderRightStyle=Ue,je.style.margin="0 "+Qe(-u/2);var st=S-E;st&&(je.style.verticalAlign=Qe(-st)),G.push(je)}else throw new ze("Invalid separator type: "+he.separator);X++,he=ee[X]||{},P=!1}if(!(i>=a)){var dt=void 0;(i>0||e.hskipBeforeAndAfter)&&(dt=on.deflt(he.pregap,f),dt!==0&&(W=re.makeSpan(["arraycolsep"],[]),W.style.width=Qe(dt),G.push(W)));var bt=[];for(r=0;r<s;++r){var Nt=l[r],Ot=Nt[i];if(Ot){var Kt=Nt.pos-E;Ot.depth=Nt.depth,Ot.height=Nt.height,bt.push({type:"elem",elem:Ot,shift:Kt})}}bt=re.makeVList({positionType:"individualShift",children:bt},n),bt=re.makeSpan(["col-align-"+(he.align||"c")],[bt]),G.push(bt),(i<a-1||e.hskipBeforeAndAfter)&&(dt=on.deflt(he.postgap,f),dt!==0&&(W=re.makeSpan(["arraycolsep"],[]),W.style.width=Qe(dt),G.push(W)))}}if(l=re.makeSpan(["mtable"],G),c.length>0){for(var $=re.makeLineSpan("hline",n,u),V=re.makeLineSpan("hdashline",n,u),ie=[{type:"elem",elem:l,shift:0}];c.length>0;){var pe=c.pop(),ge=pe.pos-E;pe.isDashed?ie.push({type:"elem",elem:V,shift:ge}):ie.push({type:"elem",elem:$,shift:ge})}l=re.makeVList({positionType:"individualShift",children:ie},n)}if(te.length===0)return re.makeSpan(["mord"],[l],n);var ve=re.makeVList({positionType:"individualShift",children:te},n);return ve=re.makeSpan(["tag"],[ve],n),re.makeFragment([l,ve])},vge={c:"center ",l:"left ",r:"right "},ga=function(e,n){for(var r=[],i=new Re.MathNode("mtd",[],["mtr-glue"]),s=new Re.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],c=0;c<a.length;c++)l.push(new Re.MathNode("mtd",[In(a[c],n)]));e.tags&&e.tags[o]&&(l.unshift(i),l.push(i),e.leqno?l.unshift(s):l.push(s)),r.push(new Re.MathNode("mtr",l))}var u=new Re.MathNode("mtable",r),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Qe(h));var f="",d="";if(e.cols&&e.cols.length>0){var p=e.cols,m="",g=!1,v=0,b=p.length;p[0].type==="separator"&&(f+="top ",v=1),p[p.length-1].type==="separator"&&(f+="bottom ",b-=1);for(var S=v;S<b;S++)p[S].type==="align"?(d+=vge[p[S].align],g&&(m+="none "),g=!0):p[S].type==="separator"&&g&&(m+=p[S].separator==="|"?"solid ":"dashed ",g=!1);u.setAttribute("columnalign",d.trim()),/[sd]/.test(m)&&u.setAttribute("columnlines",m.trim())}if(e.colSeparationType==="align"){for(var O=e.cols||[],k="",C=1;C<O.length;C++)k+=C%2?"0em ":"1em ";u.setAttribute("columnspacing",k.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var T="",R=e.hLinesBeforeRow;f+=R[0].length>0?"left ":"",f+=R[R.length-1].length>0?"right ":"";for(var L=1;L<R.length-1;L++)T+=R[L].length===0?"none ":R[L][0]?"dashed ":"solid ";return/[sd]/.test(T)&&u.setAttribute("rowlines",T.trim()),f!==""&&(u=new Re.MathNode("menclose",[u]),u.setAttribute("notation",f.trim())),e.arraystretch&&e.arraystretch<1&&(u=new Re.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},eF=function(e,n){e.envName.indexOf("ed")===-1&&db(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=Pc(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:x8(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var u="",h=0;h<n[0].body.length;h++){var f=zt(n[0].body[h],"textord");u+=f.text}a=Number(u),l=a*2}var d=!l;o.body.forEach(function(v){for(var b=1;b<v.length;b+=2){var S=zt(v[b],"styling"),O=zt(S.body[0],"ordgroup");O.body.unshift(c)}if(d)l<v.length&&(l=v.length);else{var k=v.length/2;if(a<k)throw new ze("Too many math in a row: "+("expected "+a+", but got "+k),v[0])}});for(var p=0;p<l;++p){var m="r",g=0;p%2===1?m="l":p>0&&d&&(g=1),r[p]={type:"align",align:m,pregap:g,postgap:0}}return o.colSeparationType=d?"align":"alignat",o};pa({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var n=ub(e[0]),r=n?[e[0]]:zt(e[0],"ordgroup").body,i=r.map(function(o){var a=g8(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new ze("Unknown column alignment: "+l,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Pc(t.parser,s,k8(t.envName))},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,"lcr".indexOf(n)===-1)throw new ze("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var s=Pc(t.parser,r,k8(t.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:n}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},n=Pc(t.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var n=ub(e[0]),r=n?[e[0]]:zt(e[0],"ordgroup").body,i=r.map(function(o){var a=g8(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new ze("Unknown column alignment: "+l,o)});if(i.length>1)throw new ze("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Pc(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new ze("{subarray} can contain only one column");return s},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=Pc(t.parser,e,k8(t.envName));return{type:"leftright",mode:t.mode,body:[n],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:eF,htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&db(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:x8(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Pc(t.parser,e,"display")},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:eF,htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){db(t);var e={autoTag:x8(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Pc(t.parser,e,"display")},htmlBuilder:ma,mathmlBuilder:ga});pa({type:"array",names:["CD"],props:{numArgs:0},handler(t){return db(t),rge(t.parser)},htmlBuilder:ma,mathmlBuilder:ga});_("\\nonumber","\\gdef\\@eqnsw{0}");_("\\notag","\\nonumber");Je({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ze(t.funcName+" valid only within array environment")}});var aA=Zz;Je({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];if(i.type!=="ordgroup")throw new ze("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=zt(i.body[o],"textord").text;if(r==="\\begin"){if(!aA.hasOwnProperty(s))throw new ze("No such environment: "+s,i);var a=aA[s],{args:l,optArgs:c}=n.parseArguments("\\begin{"+s+"}",a),u={mode:n.mode,envName:s,parser:n},h=a.handler(u,l,c);n.expect("\\end",!1);var f=n.nextToken,d=zt(n.parseFunction(),"environment");if(d.name!==s)throw new ze("Mismatch: \\begin{"+s+"} matched by \\end{"+d.name+"}",f);return h}return{type:"environment",mode:n.mode,name:s,nameGroup:i}}});var tF=(t,e)=>{var n=t.font,r=e.withFont(n);return rn(t.body,r)},nF=(t,e)=>{var n=t.font,r=e.withFont(n);return In(t.body,r)},lA={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Je({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=My(e[0]),s=r;return s in lA&&(s=lA[s]),{type:"font",mode:n.mode,font:s.slice(1),body:i}},htmlBuilder:tF,mathmlBuilder:nF});Je({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:n}=t,r=e[0],i=on.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:hb(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});Je({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,breakOnTokenText:i}=t,{mode:s}=n,o=n.parseExpression(!0,i),a="math"+r.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:n.mode,body:o}}},htmlBuilder:tF,mathmlBuilder:nF});var rF=(t,e)=>{var n=e;return t==="display"?n=n.id>=Ct.SCRIPT.id?n.text():Ct.DISPLAY:t==="text"&&n.size===Ct.DISPLAY.size?n=Ct.TEXT:t==="script"?n=Ct.SCRIPT:t==="scriptscript"&&(n=Ct.SCRIPTSCRIPT),n},S8=(t,e)=>{var n=rF(t.size,e.style),r=n.fracNum(),i=n.fracDen(),s;s=e.havingStyle(r);var o=rn(t.numer,s,e);if(t.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(i);var c=rn(t.denom,s,e),u,h,f;t.hasBarLine?(t.barSize?(h=Zn(t.barSize,e),u=re.makeLineSpan("frac-line",e,h)):u=re.makeLineSpan("frac-line",e),h=u.height,f=u.height):(u=null,h=0,f=e.fontMetrics().defaultRuleThickness);var d,p,m;n.size===Ct.DISPLAY.size||t.size==="display"?(d=e.fontMetrics().num1,h>0?p=3*f:p=7*f,m=e.fontMetrics().denom1):(h>0?(d=e.fontMetrics().num2,p=f):(d=e.fontMetrics().num3,p=3*f),m=e.fontMetrics().denom2);var g;if(u){var b=e.fontMetrics().axisHeight;d-o.depth-(b+.5*h)<p&&(d+=p-(d-o.depth-(b+.5*h))),b-.5*h-(c.height-m)<p&&(m+=p-(b-.5*h-(c.height-m)));var S=-(b-.5*h);g=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:u,shift:S},{type:"elem",elem:o,shift:-d}]},e)}else{var v=d-o.depth-(c.height-m);v<p&&(d+=.5*(p-v),m+=.5*(p-v)),g=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:o,shift:-d}]},e)}s=e.havingStyle(n),g.height*=s.sizeMultiplier/e.sizeMultiplier,g.depth*=s.sizeMultiplier/e.sizeMultiplier;var O;n.size===Ct.DISPLAY.size?O=e.fontMetrics().delim1:n.size===Ct.SCRIPTSCRIPT.size?O=e.havingStyle(Ct.SCRIPT).fontMetrics().delim2:O=e.fontMetrics().delim2;var k,C;return t.leftDelim==null?k=sm(e,["mopen"]):k=Ja.customSizedDelim(t.leftDelim,O,!0,e.havingStyle(n),t.mode,["mopen"]),t.continued?C=re.makeSpan([]):t.rightDelim==null?C=sm(e,["mclose"]):C=Ja.customSizedDelim(t.rightDelim,O,!0,e.havingStyle(n),t.mode,["mclose"]),re.makeSpan(["mord"].concat(s.sizingClasses(e)),[k,re.makeSpan(["mfrac"],[g]),C],e)},C8=(t,e)=>{var n=new Re.MathNode("mfrac",[In(t.numer,e),In(t.denom,e)]);if(!t.hasBarLine)n.setAttribute("linethickness","0px");else if(t.barSize){var r=Zn(t.barSize,e);n.setAttribute("linethickness",Qe(r))}var i=rF(t.size,e.style);if(i.size!==e.style.size){n=new Re.MathNode("mstyle",[n]);var s=i.size===Ct.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",s),n.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var a=new Re.MathNode("mo",[new Re.TextNode(t.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(n),t.rightDelim!=null){var l=new Re.MathNode("mo",[new Re.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return p8(o)}return n};Je({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1],o,a=null,l=null,c="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:S8,mathmlBuilder:C8});Je({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Je({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:n,token:r}=t,i;switch(n){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var cA=["display","text","script","scriptscript"],uA=function(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};Je({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:n}=t,r=e[4],i=e[5],s=My(e[0]),o=s.type==="atom"&&s.family==="open"?uA(s.text):null,a=My(e[1]),l=a.type==="atom"&&a.family==="close"?uA(a.text):null,c=zt(e[2],"size"),u,h=null;c.isBlank?u=!0:(h=c.value,u=h.number>0);var f="auto",d=e[3];if(d.type==="ordgroup"){if(d.body.length>0){var p=zt(d.body[0],"textord");f=cA[Number(p.text)]}}else d=zt(d,"textord"),f=cA[Number(d.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:i,continued:!1,hasBarLine:u,barSize:h,leftDelim:o,rightDelim:l,size:f}},htmlBuilder:S8,mathmlBuilder:C8});Je({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:n,funcName:r,token:i}=t;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:zt(e[0],"size").value,token:i}}});Je({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=Qme(zt(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:S8,mathmlBuilder:C8});var iF=(t,e)=>{var n=e.style,r,i;t.type==="supsub"?(r=t.sup?rn(t.sup,e.havingStyle(n.sup()),e):rn(t.sub,e.havingStyle(n.sub()),e),i=zt(t.base,"horizBrace")):i=zt(t,"horizBrace");var s=rn(i.base,e.havingBaseStyle(Ct.DISPLAY)),o=hl.svgSpan(i,e),a;if(i.isOver?(a=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=re.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=re.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e);i.isOver?a=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):a=re.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return re.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e)},yge=(t,e)=>{var n=hl.mathMLnode(t.label);return new Re.MathNode(t.isOver?"mover":"munder",[In(t.base,e),n])};Je({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:iF,mathmlBuilder:yge});Je({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[1],i=zt(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:ar(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var n=kr(t.body,e,!1);return re.makeAnchor(t.href,[],n,e)},mathmlBuilder:(t,e)=>{var n=kc(t.body,e);return n instanceof cs||(n=new cs("mrow",[n])),n.setAttribute("href",t.href),n}});Je({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=zt(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:ar(a)}}});Je({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:n}=t;return{type:"hbox",mode:n.mode,body:ar(e[0])}},htmlBuilder(t,e){var n=kr(t.body,e,!1);return re.makeFragment(n)},mathmlBuilder(t,e){return new Re.MathNode("mrow",Yi(t.body,e))}});Je({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,token:i}=t,s=zt(e[0],"raw").string,o=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var h=c[u],f=h.indexOf("=");if(f<0)throw new ze("\\htmlData key/value '"+h+"' missing equals sign");var d=h.slice(0,f),p=h.slice(f+1);l["data-"+d.trim()]=p}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(a)?{type:"html",mode:n.mode,attributes:l,body:ar(o)}:n.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var n=kr(t.body,e,!1),r=["enclosing"];t.attributes.class&&r.push(...t.attributes.class.trim().split(/\s+/));var i=re.makeSpan(r,n,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&i.setAttribute(s,t.attributes[s]);return i},mathmlBuilder:(t,e)=>kc(t.body,e)});Je({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"htmlmathml",mode:n.mode,html:ar(e[0]),mathml:ar(e[1])}},htmlBuilder:(t,e)=>{var n=kr(t.html,e,!1);return re.makeFragment(n)},mathmlBuilder:(t,e)=>kc(t.mathml,e)});var L5=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new ze("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!Sz(r))throw new ze("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Je({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,n)=>{var{parser:r}=t,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(n[0])for(var l=zt(n[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length===2){var f=h[1].trim();switch(h[0].trim()){case"alt":a=f;break;case"width":i=L5(f);break;case"height":s=L5(f);break;case"totalheight":o=L5(f);break;default:throw new ze("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var d=zt(e[0],"url").url;return a===""&&(a=d,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:r.mode,alt:a,width:i,height:s,totalheight:o,src:d}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var n=Zn(t.height,e),r=0;t.totalheight.number>0&&(r=Zn(t.totalheight,e)-n);var i=0;t.width.number>0&&(i=Zn(t.width,e));var s={height:Qe(n+r)};i>0&&(s.width=Qe(i)),r>0&&(s.verticalAlign=Qe(-r));var o=new y1e(t.src,t.alt,s);return o.height=n,o.depth=r,o},mathmlBuilder:(t,e)=>{var n=new Re.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=Zn(t.height,e),i=0;if(t.totalheight.number>0&&(i=Zn(t.totalheight,e)-r,n.setAttribute("valign",Qe(-i))),n.setAttribute("height",Qe(r+i)),t.width.number>0){var s=Zn(t.width,e);n.setAttribute("width",Qe(s))}return n.setAttribute("src",t.src),n}});Je({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=zt(e[0],"size");if(n.settings.strict){var s=r[1]==="m",o=i.value.unit==="mu";s?(o||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder(t,e){return re.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var n=Zn(t.dimension,e);return new Re.SpaceNode(n)}});Je({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(t,e)=>{var n;t.alignment==="clap"?(n=re.makeSpan([],[rn(t.body,e)]),n=re.makeSpan(["inner"],[n],e)):n=re.makeSpan(["inner"],[rn(t.body,e)]);var r=re.makeSpan(["fix"],[]),i=re.makeSpan([t.alignment],[n,r],e),s=re.makeSpan(["strut"]);return s.style.height=Qe(i.height+i.depth),i.depth&&(s.style.verticalAlign=Qe(-i.depth)),i.children.unshift(s),i=re.makeSpan(["thinbox"],[i],e),re.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var n=new Re.MathNode("mpadded",[In(t.body,e)]);if(t.alignment!=="rlap"){var r=t.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});Je({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:n,parser:r}=t,i=r.mode;r.switchMode("math");var s=n==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}});Je({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ze("Mismatched "+t.funcName)}});var hA=(t,e)=>{switch(e.style.size){case Ct.DISPLAY.size:return t.display;case Ct.TEXT.size:return t.text;case Ct.SCRIPT.size:return t.script;case Ct.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Je({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"mathchoice",mode:n.mode,display:ar(e[0]),text:ar(e[1]),script:ar(e[2]),scriptscript:ar(e[3])}},htmlBuilder:(t,e)=>{var n=hA(t,e),r=kr(n,e,!1);return re.makeFragment(r)},mathmlBuilder:(t,e)=>{var n=hA(t,e);return kc(n,e)}});var sF=(t,e,n,r,i,s,o)=>{t=re.makeSpan([],[t]);var a=n&&on.isCharacterBox(n),l,c;if(e){var u=rn(e,r.havingStyle(i.sup()),r);c={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(n){var h=rn(n,r.havingStyle(i.sub()),r);l={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-h.height)}}var f;if(c&&l){var d=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+t.depth+o;f=re.makeVList({positionType:"bottom",positionData:d,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Qe(-s)},{type:"kern",size:l.kern},{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Qe(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var p=t.height-o;f=re.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Qe(-s)},{type:"kern",size:l.kern},{type:"elem",elem:t}]},r)}else if(c){var m=t.depth+o;f=re.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Qe(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return t;var g=[f];if(l&&s!==0&&!a){var v=re.makeSpan(["mspace"],[],r);v.style.marginRight=Qe(s),g.unshift(v)}return re.makeSpan(["mop","op-limits"],g,r)},oF=["\\smallint"],fd=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=zt(t.base,"op"),i=!0):s=zt(t,"op");var o=e.style,a=!1;o.size===Ct.DISPLAY.size&&s.symbol&&!oF.includes(s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),l=re.makeSymbol(s.name,c,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var h=l.italic,f=re.staticSvg(u+"Size"+(a?"2":"1"),e);l=re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:f,shift:a?.08:0}]},e),s.name="\\"+u,l.classes.unshift("mop"),l.italic=h}}else if(s.body){var d=kr(s.body,e,!0);d.length===1&&d[0]instanceof qs?(l=d[0],l.classes[0]="mop"):l=re.makeSpan(["mop"],d,e)}else{for(var p=[],m=1;m<s.name.length;m++)p.push(re.mathsym(s.name[m],s.mode,e));l=re.makeSpan(["mop"],p,e)}var g=0,v=0;return(l instanceof qs||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(g=(l.height-l.depth)/2-e.fontMetrics().axisHeight,v=l.italic),i?sF(l,n,r,e,o,v,g):(g&&(l.style.position="relative",l.style.top=Qe(g)),l)},Wm=(t,e)=>{var n;if(t.symbol)n=new cs("mo",[Ws(t.name,t.mode)]),oF.includes(t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new cs("mo",Yi(t.body,e));else{n=new cs("mi",[new Uo(t.name.slice(1))]);var r=new cs("mo",[Ws("","text")]);t.parentIsSupSub?n=new cs("mrow",[n,r]):n=Nz([n,r])}return n},bge={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Je({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=r;return i.length===1&&(i=bge[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:fd,mathmlBuilder:Wm});Je({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ar(r)}},htmlBuilder:fd,mathmlBuilder:Wm});var wge={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Je({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:fd,mathmlBuilder:Wm});Je({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:fd,mathmlBuilder:Wm});Je({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:n}=t,r=n;return r.length===1&&(r=wge[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:fd,mathmlBuilder:Wm});var aF=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=zt(t.base,"operatorname"),i=!0):s=zt(t,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(h=>{var f=h.text;return typeof f=="string"?{type:"textord",mode:h.mode,text:f}:h}),l=kr(a,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof qs&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=re.makeSpan(["mop"],l,e)}else o=re.makeSpan(["mop"],[],e);return i?sF(o,n,r,e,e.style,0,0):o},xge=(t,e)=>{for(var n=Yi(t.body,e.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var s=n[i];if(!(s instanceof Re.SpaceNode))if(s instanceof Re.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof Re.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=n.map(u=>u.toText()).join("");n=[new Re.TextNode(a)]}var l=new Re.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Re.MathNode("mo",[Ws("","text")]);return t.parentIsSupSub?new Re.MathNode("mrow",[l,c]):Re.newDocumentFragment([l,c])};Je({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"operatorname",mode:n.mode,body:ar(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:aF,mathmlBuilder:xge});_("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");mh({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?re.makeFragment(kr(t.body,e,!1)):re.makeSpan(["mord"],kr(t.body,e,!0),e)},mathmlBuilder(t,e){return kc(t.body,e,!0)}});Je({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:n}=t,r=e[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(t,e){var n=rn(t.body,e.havingCrampedStyle()),r=re.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return re.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var n=new Re.MathNode("mo",[new Re.TextNode("")]);n.setAttribute("stretchy","true");var r=new Re.MathNode("mover",[In(t.body,e),n]);return r.setAttribute("accent","true"),r}});Je({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"phantom",mode:n.mode,body:ar(r)}},htmlBuilder:(t,e)=>{var n=kr(t.body,e.withPhantom(),!1);return re.makeFragment(n)},mathmlBuilder:(t,e)=>{var n=Yi(t.body,e);return new Re.MathNode("mphantom",n)}});Je({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=re.makeSpan([],[rn(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),re.makeSpan(["mord"],[n],e)},mathmlBuilder:(t,e)=>{var n=Yi(ar(t.body),e),r=new Re.MathNode("mphantom",n),i=new Re.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});Je({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=re.makeSpan(["inner"],[rn(t.body,e.withPhantom())]),r=re.makeSpan(["fix"],[]);return re.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:(t,e)=>{var n=Yi(ar(t.body),e),r=new Re.MathNode("mphantom",n),i=new Re.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});Je({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t,r=zt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(t,e){var n=rn(t.body,e),r=Zn(t.dy,e);return re.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){var n=new Re.MathNode("mpadded",[In(t.body,e)]),r=t.dy.number+t.dy.unit;return n.setAttribute("voffset",r),n}});Je({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Je({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,n){var{parser:r}=t,i=n[0],s=zt(e[0],"size"),o=zt(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&zt(i,"size").value,width:s.value,height:o.value}},htmlBuilder(t,e){var n=re.makeSpan(["mord","rule"],[],e),r=Zn(t.width,e),i=Zn(t.height,e),s=t.shift?Zn(t.shift,e):0;return n.style.borderRightWidth=Qe(r),n.style.borderTopWidth=Qe(i),n.style.bottom=Qe(s),n.width=r,n.height=i+s,n.depth=-s,n.maxFontSize=i*1.125*e.sizeMultiplier,n},mathmlBuilder(t,e){var n=Zn(t.width,e),r=Zn(t.height,e),i=t.shift?Zn(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new Re.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",Qe(n)),o.setAttribute("height",Qe(r));var a=new Re.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height",Qe(i)):(a.setAttribute("height",Qe(i)),a.setAttribute("depth",Qe(-i))),a.setAttribute("voffset",Qe(i)),a}});function lF(t,e,n){for(var r=kr(t,e,!1),i=e.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(n)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+n.size),r[s].height*=i,r[s].depth*=i}return re.makeFragment(r)}var fA=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],kge=(t,e)=>{var n=e.havingSize(t.size);return lF(t.body,n,e)};Je({type:"sizing",names:fA,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:fA.indexOf(r)+1,body:s}},htmlBuilder:kge,mathmlBuilder:(t,e)=>{var n=e.havingSize(t.size),r=Yi(t.body,n),i=new Re.MathNode("mstyle",r);return i.setAttribute("mathsize",Qe(n.sizeMultiplier)),i}});Je({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,n)=>{var{parser:r}=t,i=!1,s=!1,o=n[0]&&zt(n[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")i=!0;else if(a==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var u=e[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:s}},htmlBuilder:(t,e)=>{var n=re.makeSpan([],[rn(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var s=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return re.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var n=new Re.MathNode("mpadded",[In(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}});Je({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r}=t,i=n[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(t,e){var n=rn(t.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=re.wrapFragment(n,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<Ct.TEXT.id&&(s=e.fontMetrics().xHeight);var o=i+s/4,a=n.height+n.depth+o+i,{span:l,ruleWidth:c,advanceWidth:u}=Ja.sqrtImage(a,e),h=l.height-c;h>n.height+n.depth+o&&(o=(o+h-n.height-n.depth)/2);var f=l.height-n.height-o-c;n.style.paddingLeft=Qe(u);var d=re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+f)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(t.index){var p=e.havingStyle(Ct.SCRIPTSCRIPT),m=rn(t.index,p,e),g=.6*(d.height-d.depth),v=re.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:m}]},e),b=re.makeSpan(["root"],[v]);return re.makeSpan(["mord","sqrt"],[b,d],e)}else return re.makeSpan(["mord","sqrt"],[d],e)},mathmlBuilder(t,e){var{body:n,index:r}=t;return r?new Re.MathNode("mroot",[In(n,e),In(r,e)]):new Re.MathNode("msqrt",[In(n,e)])}});var dA={display:Ct.DISPLAY,text:Ct.TEXT,script:Ct.SCRIPT,scriptscript:Ct.SCRIPTSCRIPT};Je({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!0,n),o=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(t,e){var n=dA[t.style],r=e.havingStyle(n).withFont("");return lF(t.body,r,e)},mathmlBuilder(t,e){var n=dA[t.style],r=e.havingStyle(n),i=Yi(t.body,r),s=new Re.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[t.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var Sge=function(e,n){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(n.style.size===Ct.DISPLAY.size||r.alwaysHandleSupSub);return i?fd:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(n.style.size===Ct.DISPLAY.size||r.limits);return s?aF:null}else{if(r.type==="accent")return on.isCharacterBox(r.base)?v8:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?iF:null}else return null}else return null};mh({type:"supsub",htmlBuilder(t,e){var n=Sge(t,e);if(n)return n(t,e);var{base:r,sup:i,sub:s}=t,o=rn(r,e),a,l,c=e.fontMetrics(),u=0,h=0,f=r&&on.isCharacterBox(r);if(i){var d=e.havingStyle(e.style.sup());a=rn(i,d,e),f||(u=o.height-d.fontMetrics().supDrop*d.sizeMultiplier/e.sizeMultiplier)}if(s){var p=e.havingStyle(e.style.sub());l=rn(s,p,e),f||(h=o.depth+p.fontMetrics().subDrop*p.sizeMultiplier/e.sizeMultiplier)}var m;e.style===Ct.DISPLAY?m=c.sup1:e.style.cramped?m=c.sup3:m=c.sup2;var g=e.sizeMultiplier,v=Qe(.5/c.ptPerEm/g),b=null;if(l){var S=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof qs||S)&&(b=Qe(-o.italic))}var O;if(a&&l){u=Math.max(u,m,a.depth+.25*c.xHeight),h=Math.max(h,c.sub2);var k=c.defaultRuleThickness,C=4*k;if(u-a.depth-(l.height-h)<C){h=C-(u-a.depth)+l.height;var T=.8*c.xHeight-(u-a.depth);T>0&&(u+=T,h-=T)}var R=[{type:"elem",elem:l,shift:h,marginRight:v,marginLeft:b},{type:"elem",elem:a,shift:-u,marginRight:v}];O=re.makeVList({positionType:"individualShift",children:R},e)}else if(l){h=Math.max(h,c.sub1,l.height-.8*c.xHeight);var L=[{type:"elem",elem:l,marginLeft:b,marginRight:v}];O=re.makeVList({positionType:"shift",positionData:h,children:L},e)}else if(a)u=Math.max(u,m,a.depth+.25*c.xHeight),O=re.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:v}]},e);else throw new Error("supsub must have either sup or sub.");var I=p7(o,"right")||"mord";return re.makeSpan([I],[o,re.makeSpan(["msupsub"],[O])],e)},mathmlBuilder(t,e){var n=!1,r,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(n=!0,r=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[In(t.base,e)];t.sub&&s.push(In(t.sub,e)),t.sup&&s.push(In(t.sup,e));var o;if(n)o=r?"mover":"munder";else if(t.sub)if(t.sup){var c=t.base;c&&c.type==="op"&&c.limits&&e.style===Ct.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===Ct.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===Ct.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Ct.DISPLAY)?o="munder":o="msub"}else{var a=t.base;a&&a.type==="op"&&a.limits&&(e.style===Ct.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===Ct.DISPLAY)?o="mover":o="msup"}return new Re.MathNode(o,s)}});mh({type:"atom",htmlBuilder(t,e){return re.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var n=new Re.MathNode("mo",[Ws(t.text,t.mode)]);if(t.family==="bin"){var r=m8(t,e);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else t.family==="punct"?n.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&n.setAttribute("stretchy","false");return n}});var cF={mi:"italic",mn:"normal",mtext:"normal"};mh({type:"mathord",htmlBuilder(t,e){return re.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var n=new Re.MathNode("mi",[Ws(t.text,t.mode,e)]),r=m8(t,e)||"italic";return r!==cF[n.type]&&n.setAttribute("mathvariant",r),n}});mh({type:"textord",htmlBuilder(t,e){return re.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var n=Ws(t.text,t.mode,e),r=m8(t,e)||"normal",i;return t.mode==="text"?i=new Re.MathNode("mtext",[n]):/[0-9]/.test(t.text)?i=new Re.MathNode("mn",[n]):t.text==="\\prime"?i=new Re.MathNode("mo",[n]):i=new Re.MathNode("mi",[n]),r!==cF[i.type]&&i.setAttribute("mathvariant",r),i}});var $5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},B5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};mh({type:"spacing",htmlBuilder(t,e){if(B5.hasOwnProperty(t.text)){var n=B5[t.text].className||"";if(t.mode==="text"){var r=re.makeOrd(t,e,"textord");return r.classes.push(n),r}else return re.makeSpan(["mspace",n],[re.mathsym(t.text,t.mode,e)],e)}else{if($5.hasOwnProperty(t.text))return re.makeSpan(["mspace",$5[t.text]],[],e);throw new ze('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var n;if(B5.hasOwnProperty(t.text))n=new Re.MathNode("mtext",[new Re.TextNode("")]);else{if($5.hasOwnProperty(t.text))return new Re.MathNode("mspace");throw new ze('Unknown type of space "'+t.text+'"')}return n}});var pA=()=>{var t=new Re.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};mh({type:"tag",mathmlBuilder(t,e){var n=new Re.MathNode("mtable",[new Re.MathNode("mtr",[pA(),new Re.MathNode("mtd",[kc(t.body,e)]),pA(),new Re.MathNode("mtd",[kc(t.tag,e)])])]);return n.setAttribute("width","100%"),n}});var mA={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},gA={"\\textbf":"textbf","\\textmd":"textmd"},Cge={"\\textit":"textit","\\textup":"textup"},vA=(t,e)=>{var n=t.font;if(n){if(mA[n])return e.withTextFontFamily(mA[n]);if(gA[n])return e.withTextFontWeight(gA[n]);if(n==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Cge[n])};Je({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"text",mode:n.mode,body:ar(i),font:r}},htmlBuilder(t,e){var n=vA(t,e),r=kr(t.body,n,!0);return re.makeSpan(["mord","text"],r,n)},mathmlBuilder(t,e){var n=vA(t,e);return kc(t.body,n)}});Je({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=rn(t.body,e),r=re.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=re.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},e);return re.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var n=new Re.MathNode("mo",[new Re.TextNode("")]);n.setAttribute("stretchy","true");var r=new Re.MathNode("munder",[In(t.body,e),n]);return r.setAttribute("accentunder","true"),r}});Je({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=rn(t.body,e),r=e.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return re.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){return new Re.MathNode("mpadded",[In(t.body,e)],["vcenter"])}});Je({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,n){throw new ze("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var n=yA(t),r=[],i=e.havingStyle(e.style.text()),s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),r.push(re.makeSymbol(o,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return re.makeSpan(["mord","text"].concat(i.sizingClasses(e)),re.tryCombineChars(r),i)},mathmlBuilder(t,e){var n=new Re.TextNode(yA(t)),r=new Re.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var yA=t=>t.body.replace(/ /g,t.star?"":""),ic=Iz,uF=`[ \r
	]`,Oge="\\\\[a-zA-Z@]+",Mge="\\\\[^\uD800-\uDFFF]",Tge="("+Oge+")"+uF+"*",Age=`\\\\(
|[ \r	]+
?)[ \r	]*`,y7="[-]",_ge=new RegExp(y7+"+$"),Dge="("+uF+"+)|"+(Age+"|")+"([!-\\[\\]---]"+(y7+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(y7+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Tge)+("|"+Mge+")");class bA{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(Dge,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new ms("EOF",new _i(this,n,n));var r=this.tokenRegex.exec(e);if(r===null||r.index!==n)throw new ze("Unexpected character: '"+e[n]+"'",new ms(e[n],new _i(this,n,n+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new ms(i,new _i(this,n,this.tokenRegex.lastIndex))}}class Ege{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ze("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var Ige=Jz;_("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});_("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});_("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});_("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});_("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var n=t.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});_("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");_("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var wA={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};_("\\char",function(t){var e=t.popToken(),n,r="";if(e.text==="'")n=8,e=t.popToken();else if(e.text==='"')n=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ze("\\char` missing argument");r=e.text.charCodeAt(0)}else n=10;if(n){if(r=wA[e.text],r==null||r>=n)throw new ze("Invalid base-"+n+" digit "+e.text);for(var i;(i=wA[t.future().text])!=null&&i<n;)r*=n,r+=i,t.popToken()}return"\\@char{"+r+"}"});var O8=(t,e,n,r)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new ze("\\newcommand's first argument must be a macro name");var s=i[0].text,o=t.isDefined(s);if(o&&!e)throw new ze("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!n)throw new ze("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var l="",c=t.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new ze("Invalid number of arguments: "+l);a=parseInt(l),i=t.consumeArg().tokens}return o&&r||t.macros.set(s,{tokens:i,numArgs:a}),""};_("\\newcommand",t=>O8(t,!1,!0,!1));_("\\renewcommand",t=>O8(t,!0,!1,!1));_("\\providecommand",t=>O8(t,!0,!0,!0));_("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""});_("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""});_("\\show",t=>{var e=t.popToken(),n=e.text;return console.log(e,t.macros.get(n),ic[n],Bn.math[n],Bn.text[n]),""});_("\\bgroup","{");_("\\egroup","}");_("~","\\nobreakspace");_("\\lq","`");_("\\rq","'");_("\\aa","\\r a");_("\\AA","\\r A");_("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");_("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");_("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");_("","\\mathscr{B}");_("","\\mathscr{E}");_("","\\mathscr{F}");_("","\\mathscr{H}");_("","\\mathscr{I}");_("","\\mathscr{L}");_("","\\mathscr{M}");_("","\\mathscr{R}");_("","\\mathfrak{C}");_("","\\mathfrak{H}");_("","\\mathfrak{Z}");_("\\Bbbk","\\Bbb{k}");_("","\\cdotp");_("\\llap","\\mathllap{\\textrm{#1}}");_("\\rlap","\\mathrlap{\\textrm{#1}}");_("\\clap","\\mathclap{\\textrm{#1}}");_("\\mathstrut","\\vphantom{(}");_("\\underbar","\\underline{\\text{#1}}");_("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');_("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");_("\\ne","\\neq");_("","\\neq");_("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");_("","\\notin");_("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");_("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");_("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");_("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");_("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");_("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");_("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");_("","\\perp");_("","\\mathclose{!\\mkern-0.8mu!}");_("","\\notni");_("","\\ulcorner");_("","\\urcorner");_("","\\llcorner");_("","\\lrcorner");_("","\\copyright");_("","\\textregistered");_("","\\textregistered");_("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');_("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');_("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');_("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');_("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");_("","\\vdots");_("\\varGamma","\\mathit{\\Gamma}");_("\\varDelta","\\mathit{\\Delta}");_("\\varTheta","\\mathit{\\Theta}");_("\\varLambda","\\mathit{\\Lambda}");_("\\varXi","\\mathit{\\Xi}");_("\\varPi","\\mathit{\\Pi}");_("\\varSigma","\\mathit{\\Sigma}");_("\\varUpsilon","\\mathit{\\Upsilon}");_("\\varPhi","\\mathit{\\Phi}");_("\\varPsi","\\mathit{\\Psi}");_("\\varOmega","\\mathit{\\Omega}");_("\\substack","\\begin{subarray}{c}#1\\end{subarray}");_("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");_("\\boxed","\\fbox{$\\displaystyle{#1}$}");_("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");_("\\implies","\\DOTSB\\;\\Longrightarrow\\;");_("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");_("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");_("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var xA={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};_("\\dots",function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in xA?e=xA[n]:(n.slice(0,4)==="\\not"||n in Bn.math&&["bin","rel"].includes(Bn.math[n].group))&&(e="\\dotsb"),e});var M8={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};_("\\dotso",function(t){var e=t.future().text;return e in M8?"\\ldots\\,":"\\ldots"});_("\\dotsc",function(t){var e=t.future().text;return e in M8&&e!==","?"\\ldots\\,":"\\ldots"});_("\\cdots",function(t){var e=t.future().text;return e in M8?"\\@cdots\\,":"\\@cdots"});_("\\dotsb","\\cdots");_("\\dotsm","\\cdots");_("\\dotsi","\\!\\cdots");_("\\dotsx","\\ldots\\,");_("\\DOTSI","\\relax");_("\\DOTSB","\\relax");_("\\DOTSX","\\relax");_("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");_("\\,","\\tmspace+{3mu}{.1667em}");_("\\thinspace","\\,");_("\\>","\\mskip{4mu}");_("\\:","\\tmspace+{4mu}{.2222em}");_("\\medspace","\\:");_("\\;","\\tmspace+{5mu}{.2777em}");_("\\thickspace","\\;");_("\\!","\\tmspace-{3mu}{.1667em}");_("\\negthinspace","\\!");_("\\negmedspace","\\tmspace-{4mu}{.2222em}");_("\\negthickspace","\\tmspace-{5mu}{.277em}");_("\\enspace","\\kern.5em ");_("\\enskip","\\hskip.5em\\relax");_("\\quad","\\hskip1em\\relax");_("\\qquad","\\hskip2em\\relax");_("\\tag","\\@ifstar\\tag@literal\\tag@paren");_("\\tag@paren","\\tag@literal{({#1})}");_("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ze("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});_("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");_("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");_("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");_("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");_("\\newline","\\\\\\relax");_("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var hF=Qe(Qo["Main-Regular"][84][1]-.7*Qo["Main-Regular"][65][1]);_("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+hF+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");_("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+hF+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");_("\\hspace","\\@ifstar\\@hspacer\\@hspace");_("\\@hspace","\\hskip #1\\relax");_("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");_("\\ordinarycolon",":");_("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");_("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');_("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');_("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');_("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');_("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');_("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');_("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');_("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');_("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');_("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');_("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');_("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');_("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');_("","\\dblcolon");_("","\\eqcolon");_("","\\coloneqq");_("","\\eqqcolon");_("","\\Coloneqq");_("\\ratio","\\vcentcolon");_("\\coloncolon","\\dblcolon");_("\\colonequals","\\coloneqq");_("\\coloncolonequals","\\Coloneqq");_("\\equalscolon","\\eqqcolon");_("\\equalscoloncolon","\\Eqqcolon");_("\\colonminus","\\coloneq");_("\\coloncolonminus","\\Coloneq");_("\\minuscolon","\\eqcolon");_("\\minuscoloncolon","\\Eqcolon");_("\\coloncolonapprox","\\Colonapprox");_("\\coloncolonsim","\\Colonsim");_("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");_("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");_("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");_("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");_("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");_("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");_("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");_("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");_("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");_("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");_("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");_("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");_("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");_("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");_("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");_("\\ngeqq","\\html@mathml{\\@ngeqq}{}");_("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");_("\\nleqq","\\html@mathml{\\@nleqq}{}");_("\\nleqslant","\\html@mathml{\\@nleqslant}{}");_("\\nshortmid","\\html@mathml{\\@nshortmid}{}");_("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");_("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");_("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");_("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");_("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");_("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");_("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");_("\\imath","\\html@mathml{\\@imath}{}");_("\\jmath","\\html@mathml{\\@jmath}{}");_("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");_("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");_("","\\llbracket");_("","\\rrbracket");_("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");_("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");_("","\\lBrace");_("","\\rBrace");_("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");_("","\\minuso");_("\\darr","\\downarrow");_("\\dArr","\\Downarrow");_("\\Darr","\\Downarrow");_("\\lang","\\langle");_("\\rang","\\rangle");_("\\uarr","\\uparrow");_("\\uArr","\\Uparrow");_("\\Uarr","\\Uparrow");_("\\N","\\mathbb{N}");_("\\R","\\mathbb{R}");_("\\Z","\\mathbb{Z}");_("\\alef","\\aleph");_("\\alefsym","\\aleph");_("\\Alpha","\\mathrm{A}");_("\\Beta","\\mathrm{B}");_("\\bull","\\bullet");_("\\Chi","\\mathrm{X}");_("\\clubs","\\clubsuit");_("\\cnums","\\mathbb{C}");_("\\Complex","\\mathbb{C}");_("\\Dagger","\\ddagger");_("\\diamonds","\\diamondsuit");_("\\empty","\\emptyset");_("\\Epsilon","\\mathrm{E}");_("\\Eta","\\mathrm{H}");_("\\exist","\\exists");_("\\harr","\\leftrightarrow");_("\\hArr","\\Leftrightarrow");_("\\Harr","\\Leftrightarrow");_("\\hearts","\\heartsuit");_("\\image","\\Im");_("\\infin","\\infty");_("\\Iota","\\mathrm{I}");_("\\isin","\\in");_("\\Kappa","\\mathrm{K}");_("\\larr","\\leftarrow");_("\\lArr","\\Leftarrow");_("\\Larr","\\Leftarrow");_("\\lrarr","\\leftrightarrow");_("\\lrArr","\\Leftrightarrow");_("\\Lrarr","\\Leftrightarrow");_("\\Mu","\\mathrm{M}");_("\\natnums","\\mathbb{N}");_("\\Nu","\\mathrm{N}");_("\\Omicron","\\mathrm{O}");_("\\plusmn","\\pm");_("\\rarr","\\rightarrow");_("\\rArr","\\Rightarrow");_("\\Rarr","\\Rightarrow");_("\\real","\\Re");_("\\reals","\\mathbb{R}");_("\\Reals","\\mathbb{R}");_("\\Rho","\\mathrm{P}");_("\\sdot","\\cdot");_("\\sect","\\S");_("\\spades","\\spadesuit");_("\\sub","\\subset");_("\\sube","\\subseteq");_("\\supe","\\supseteq");_("\\Tau","\\mathrm{T}");_("\\thetasym","\\vartheta");_("\\weierp","\\wp");_("\\Zeta","\\mathrm{Z}");_("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");_("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");_("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");_("\\bra","\\mathinner{\\langle{#1}|}");_("\\ket","\\mathinner{|{#1}\\rangle}");_("\\braket","\\mathinner{\\langle{#1}\\rangle}");_("\\Bra","\\left\\langle#1\\right|");_("\\Ket","\\left|#1\\right\\rangle");var fF=t=>e=>{var n=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=h=>f=>{t&&(f.macros.set("|",o),i.length&&f.macros.set("\\|",a));var d=h;if(!h&&i.length){var p=f.future();p.text==="|"&&(f.popToken(),d=!0)}return{tokens:d?i:r,numArgs:0}};e.macros.set("|",l(!1)),i.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...s,...c,...n]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};_("\\bra@ket",fF(!1));_("\\bra@set",fF(!0));_("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");_("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");_("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");_("\\angln","{\\angl n}");_("\\blue","\\textcolor{##6495ed}{#1}");_("\\orange","\\textcolor{##ffa500}{#1}");_("\\pink","\\textcolor{##ff00af}{#1}");_("\\red","\\textcolor{##df0030}{#1}");_("\\green","\\textcolor{##28ae7b}{#1}");_("\\gray","\\textcolor{gray}{#1}");_("\\purple","\\textcolor{##9d38bd}{#1}");_("\\blueA","\\textcolor{##ccfaff}{#1}");_("\\blueB","\\textcolor{##80f6ff}{#1}");_("\\blueC","\\textcolor{##63d9ea}{#1}");_("\\blueD","\\textcolor{##11accd}{#1}");_("\\blueE","\\textcolor{##0c7f99}{#1}");_("\\tealA","\\textcolor{##94fff5}{#1}");_("\\tealB","\\textcolor{##26edd5}{#1}");_("\\tealC","\\textcolor{##01d1c1}{#1}");_("\\tealD","\\textcolor{##01a995}{#1}");_("\\tealE","\\textcolor{##208170}{#1}");_("\\greenA","\\textcolor{##b6ffb0}{#1}");_("\\greenB","\\textcolor{##8af281}{#1}");_("\\greenC","\\textcolor{##74cf70}{#1}");_("\\greenD","\\textcolor{##1fab54}{#1}");_("\\greenE","\\textcolor{##0d923f}{#1}");_("\\goldA","\\textcolor{##ffd0a9}{#1}");_("\\goldB","\\textcolor{##ffbb71}{#1}");_("\\goldC","\\textcolor{##ff9c39}{#1}");_("\\goldD","\\textcolor{##e07d10}{#1}");_("\\goldE","\\textcolor{##a75a05}{#1}");_("\\redA","\\textcolor{##fca9a9}{#1}");_("\\redB","\\textcolor{##ff8482}{#1}");_("\\redC","\\textcolor{##f9685d}{#1}");_("\\redD","\\textcolor{##e84d39}{#1}");_("\\redE","\\textcolor{##bc2612}{#1}");_("\\maroonA","\\textcolor{##ffbde0}{#1}");_("\\maroonB","\\textcolor{##ff92c6}{#1}");_("\\maroonC","\\textcolor{##ed5fa6}{#1}");_("\\maroonD","\\textcolor{##ca337c}{#1}");_("\\maroonE","\\textcolor{##9e034e}{#1}");_("\\purpleA","\\textcolor{##ddd7ff}{#1}");_("\\purpleB","\\textcolor{##c6b9fc}{#1}");_("\\purpleC","\\textcolor{##aa87ff}{#1}");_("\\purpleD","\\textcolor{##7854ab}{#1}");_("\\purpleE","\\textcolor{##543b78}{#1}");_("\\mintA","\\textcolor{##f5f9e8}{#1}");_("\\mintB","\\textcolor{##edf2df}{#1}");_("\\mintC","\\textcolor{##e0e5cc}{#1}");_("\\grayA","\\textcolor{##f6f7f7}{#1}");_("\\grayB","\\textcolor{##f0f1f2}{#1}");_("\\grayC","\\textcolor{##e3e5e6}{#1}");_("\\grayD","\\textcolor{##d6d8da}{#1}");_("\\grayE","\\textcolor{##babec2}{#1}");_("\\grayF","\\textcolor{##888d93}{#1}");_("\\grayG","\\textcolor{##626569}{#1}");_("\\grayH","\\textcolor{##3b3e40}{#1}");_("\\grayI","\\textcolor{##21242c}{#1}");_("\\kaBlue","\\textcolor{##314453}{#1}");_("\\kaGreen","\\textcolor{##71B307}{#1}");var dF={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Pge{constructor(e,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new Ege(Ige,n.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new bA(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:n,end:r}=this.consumeArg());return this.pushToken(new ms("EOF",r.loc)),this.pushTokens(i),new ms("",_i.range(n,r))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,o=0,a=0;do{if(s=this.popToken(),n.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new ze("Extra }",s)}else if(s.text==="EOF")throw new ze("Unexpected end of input in a macro argument, expected '"+(e&&r?e[a]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){n.splice(-a,a);break}}else a=0}while(o!==0||r);return i.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:i,end:s}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new ze("The length of delimiters doesn't match the number of args!");for(var r=n[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new ze("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(n&&n[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ze("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var n=this.popToken(),r=n.text,i=n.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new ze("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new ze("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new ze("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new ms(e)]):void 0}expandTokens(e){var n=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),n.push(i)}return this.countExpansion(n.length),n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(r=>r.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof n=="function"?n(this):n;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new bA(i,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:s};return u}return i}isDefined(e){return this.macros.has(e)||ic.hasOwnProperty(e)||Bn.math.hasOwnProperty(e)||Bn.text.hasOwnProperty(e)||dF.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:ic.hasOwnProperty(e)&&!ic[e].primitive}}var kA=/^[]/,U1=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),z5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},SA={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class pb{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Pge(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new ze("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new ms("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(e,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(pb.endOfExpression.indexOf(i.text)!==-1||n&&i.text===n||e&&ic[i.text]&&ic[i.text].infix)break;var s=this.parseAtom(n);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var n=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(n!==-1)throw new ze("only one infix operator per group",e[i].token);n=i,r=e[i].replaceWith}if(n!==-1&&r){var s,o,a=e.slice(0,n),l=e.slice(n+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return r==="\\\\abovefrac"?c=this.callFunction(r,[s,e[n],o],[]):c=this.callFunction(r,[s,o],[]),[c]}else return e}handleSupSubscript(e){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(e)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new ze("Expected group after '"+r+"'",n);return i}formatUnsupportedCmd(e){for(var n=[],r=0;r<e.length;r++)n.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:n},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var n=this.parseGroup("atom",e);if(n?.type==="internal"||this.mode==="text")return n;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(n&&n.type==="op"){var o=s.text==="\\limits";n.limits=o,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=s.text==="\\limits");else throw new ze("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new ze("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new ze("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new ze("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(U1[s.text]){var c=kA.test(s.text),u=[];for(u.push(new ms(U1[s.text])),this.consume();;){var h=this.fetch().text;if(!U1[h]||kA.test(h)!==c)break;u.unshift(new ms(U1[h])),this.consume()}var f=this.subparse(u);c?i={type:"ordgroup",mode:"math",body:f}:r={type:"ordgroup",mode:"math",body:f}}else break}return r||i?{type:"supsub",mode:this.mode,base:n,sup:r,sub:i}:n}parseFunction(e,n){var r=this.fetch(),i=r.text,s=ic[i];if(!s)return null;if(this.consume(),n&&n!=="atom"&&!s.allowedInArgument)throw new ze("Got function '"+i+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!s.allowedInText)throw new ze("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new ze("Can't use function '"+i+"' in math mode",r);var{args:o,optArgs:a}=this.parseArguments(i,s);return this.callFunction(i,o,a,r,e)}callFunction(e,n,r,i,s){var o={funcName:e,parser:this,token:i,breakOnTokenText:s},a=ic[e];if(a&&a.handler)return a.handler(o,n,r);throw new ze("No function handler for "+e)}parseArguments(e,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<r;o++){var a=n.argTypes&&n.argTypes[o],l=o<n.numOptionalArgs;(n.primitive&&a==null||n.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(c);else if(c!=null)i.push(c);else throw new ze("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new ze("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ze("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new ze("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,n){for(var r=this.fetch(),i=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new ze("Invalid "+n+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new ze("Invalid color: '"+n.text+"'",n);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var n,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!i)throw new ze("Invalid size: '"+n.text+"'",n);var s={number:+(i[1]+i[2]),unit:i[3]};if(!Sz(s))throw new ze("Invalid unit: '"+s.unit+"'",n);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,n){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return n&&this.switchMode(i),o}parseGroup(e,n){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:_i.range(r,l),body:a,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(n,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!dF.hasOwnProperty(i)){if(this.settings.throwOnError)throw new ze("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var n=e.length-1,r=0;r<n;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<n&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:_i.range(i,e[r+2]),text:"---"}),n-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:_i.range(i,e[r+1]),text:"--"}),n-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:_i.range(i,e[r+1]),text:s+s}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new ze(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}SA.hasOwnProperty(n[0])&&!Bn[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=SA[n[0]]+n.slice(1));var s=_ge.exec(n);s&&(n=n.substring(0,s.index),n==="i"?n="":n==="j"&&(n=""));var o;if(Bn[this.mode][n]){this.settings.strict&&this.mode==="math"&&d7.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var a=Bn[this.mode][n].group,l=_i.range(e),c;if(x1e.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:n}}else c={type:a,mode:this.mode,loc:l,text:n};o=c}else if(n.charCodeAt(0)>=128)this.settings.strict&&(kz(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:_i.range(e),text:n};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var f=s[0][h];if(!z5[f])throw new ze("Unknown accent ' "+f+"'",e);var d=z5[f][this.mode]||z5[f].text;if(!d)throw new ze("Accent "+f+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:_i.range(e),label:d,isStretchy:!1,isShifty:!0,base:o}}return o}}pb.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var T8=function(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new pb(e,n);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new ze("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new ms("\\df@tag")])}]}return i},pF=function(e,n,r){n.textContent="";var i=A8(e,r).toNode();n.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),pF=function(){throw new ze("KaTeX doesn't work in quirks mode.")});var Nge=function(e,n){var r=A8(e,n).toMarkup();return r},Rge=function(e,n){var r=new c8(n);return T8(e,r)},mF=function(e,n,r){if(r.throwOnError||!(e instanceof ze))throw e;var i=re.makeSpan(["katex-error"],[new qs(n)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},A8=function(e,n){var r=new c8(n);try{var i=T8(e,r);return W1e(i,e,r)}catch(s){return mF(s,e,r)}},Lge=function(e,n){var r=new c8(n);try{var i=T8(e,r);return j1e(i,e,r)}catch(s){return mF(s,e,r)}},$ge="0.16.28",Bge={Span:qm,Anchor:f8,SymbolNode:qs,SvgNode:cl,PathNode:xc,LineNode:f7},gF={version:$ge,render:pF,renderToString:Nge,ParseError:ze,SETTINGS_SCHEMA:Yg,__parse:Rge,__renderToDomTree:A8,__renderToHTMLTree:Lge,__setFontMetrics:d1e,__defineSymbol:y,__defineFunction:Je,__defineMacro:_,__domTree:Bge};class mb{constructor(e){this.#i=!1,this.onShow=()=>{},this.onHide=()=>{},this.#c=n=>{sa(n,this.element,{placement:this.#n.placement??"top",middleware:[Ek(),eh(this.#o),yle(this.#l),...this.#r],...this.#n}).then(({x:r,y:i})=>{Object.assign(this.element.style,{left:`${r}px`,top:`${i}px`})}).catch(console.error)},this.#h=n=>this.#a!==n.dom.parentElement,this.#d=(n,r)=>{const{state:i,composing:s}=n,{selection:o,doc:a}=i,{ranges:l}=o,c=Math.min(...l.map(d=>d.$from.pos)),u=Math.max(...l.map(d=>d.$to.pos)),h=r&&r.doc.eq(a)&&r.selection.eq(o);if(this.#i||((this.#a??n.dom.parentElement??document.body).appendChild(this.element),this.#i=!0),s||h)return;if(this.#s?.(),this.#s=void 0,!this.#e(n,r)){this.hide();return}const f={getBoundingClientRect:()=>O2(n,c,u),contextElement:n.dom};this.#h(n)?this.#s=_M(f,this.element,()=>this.#c(f)):this.#c(f),this.show()},this.update=(n,r)=>{this.#u(n,r)},this.destroy=()=>{this.#s?.(),this.#u.cancel()},this.show=(n,r)=>{if(this.element.dataset.show="true",n){this.#s?.(),this.#s=void 0;const i={...n,contextElement:r?.dom};r&&this.#h(r)?this.#s=_M(i,this.element,()=>this.#c(i)):this.#c(i)}this.onShow()},this.hide=()=>{this.element.dataset.show!=="false"&&(this.element.dataset.show="false",this.onHide())},this.element=e.content,this.#t=e.debounce??200,this.#e=e.shouldShow??this.#f,this.#o=e.offset,this.#l=e.shift,this.#r=e.middleware??[],this.#n=e.floatingUIOptions??{},this.#a=e.root,this.element.dataset.show="false",this.#u=a2(this.#d,this.#t)}#t;#e;#r;#n;#a;#i;#s;#o;#l;#u;#c;#h;#d;#f(e){const{doc:n,selection:r}=e.state,{empty:i,from:s,to:o}=r,a=!n.textBetween(s,o).length&&e.state.selection instanceof ct,l=this.element.contains(document.activeElement),c=!e.hasFocus()&&!l,u=!e.editable;return!(c||i||a||u)}}function gb(t){const e=bn({},`${t}_TOOLTIP_SPEC`),n=vr(i=>{const s=i.get(e.key);return new Wn({key:new jn(`${t}_TOOLTIP`),...s})}),r=[e,n];return r.key=e.key,r.pluginKey=n.key,e.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${t}`},n.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${t}`},r}function zge(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:s},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:a,mathText:o,mathTextData:a}};function t(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function e(){this.buffer()}function n(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c;const h=u.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function s(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function o(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c,u.data.hChildren.push({type:"text",value:c})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function Fge(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(s,o,a,l){const c=s.value||"",u=a.createTracker(l),h="$".repeat(Math.max(mR(c,"$")+1,2)),f=a.enter("mathFlow");let d=u.move(h);if(s.meta){const p=a.enter("mathFlowMeta");d+=u.move(a.safe(s.meta,{after:`
`,before:d,encode:["$"],...u.current()})),p()}return d+=u.move(`
`),c&&(d+=u.move(c+`
`)),d+=u.move(h),f(),d}function r(s,o,a){let l=s.value||"",c=1;for(e||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const u="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let h=-1;for(;++h<a.unsafe.length;){const f=a.unsafe[h];if(!f.atBreak)continue;const d=a.compilePattern(f);let p;for(;p=d.exec(l);){let m=p.index;l.codePointAt(m)===10&&l.codePointAt(m-1)===13&&m--,l=l.slice(0,m)+" "+l.slice(p.index+1)}}return u+l+u}function i(){return"$"}}const Hge={tokenize:Vge,concrete:!0,name:"mathFlow"},CA={tokenize:qge,partial:!0};function Vge(t,e,n){const r=this,i=r.events[r.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let o=0;return a;function a(b){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),l(b)}function l(b){return b===36?(t.consume(b),o++,l):o<2?n(b):(t.exit("mathFlowFenceSequence"),jt(t,c,"whitespace")(b))}function c(b){return b===null||ft(b)?h(b):(t.enter("mathFlowFenceMeta"),t.enter("chunkString",{contentType:"string"}),u(b))}function u(b){return b===null||ft(b)?(t.exit("chunkString"),t.exit("mathFlowFenceMeta"),h(b)):b===36?n(b):(t.consume(b),u)}function h(b){return t.exit("mathFlowFence"),r.interrupt?e(b):t.attempt(CA,f,g)(b)}function f(b){return t.attempt({tokenize:v,partial:!0},g,d)(b)}function d(b){return(s?jt(t,p,"linePrefix",s+1):p)(b)}function p(b){return b===null?g(b):ft(b)?t.attempt(CA,f,g)(b):(t.enter("mathFlowValue"),m(b))}function m(b){return b===null||ft(b)?(t.exit("mathFlowValue"),p(b)):(t.consume(b),m)}function g(b){return t.exit("mathFlow"),e(b)}function v(b,S,O){let k=0;return jt(b,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C(L){return b.enter("mathFlowFence"),b.enter("mathFlowFenceSequence"),T(L)}function T(L){return L===36?(k++,b.consume(L),T):k<o?O(L):(b.exit("mathFlowFenceSequence"),jt(b,R,"whitespace")(L))}function R(L){return L===null||ft(L)?(b.exit("mathFlowFence"),S(L)):O(L)}}}function qge(t,e,n){const r=this;return i;function i(o){return o===null?e(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function Wge(t){let n=(t||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:jge,previous:Yge,name:"mathText"};function r(i,s,o){let a=0,l,c;return u;function u(m){return i.enter("mathText"),i.enter("mathTextSequence"),h(m)}function h(m){return m===36?(i.consume(m),a++,h):a<2&&!n?o(m):(i.exit("mathTextSequence"),f(m))}function f(m){return m===null?o(m):m===36?(c=i.enter("mathTextSequence"),l=0,p(m)):m===32?(i.enter("space"),i.consume(m),i.exit("space"),f):ft(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),f):(i.enter("mathTextData"),d(m))}function d(m){return m===null||m===32||m===36||ft(m)?(i.exit("mathTextData"),f(m)):(i.consume(m),d)}function p(m){return m===36?(i.consume(m),l++,p):l===a?(i.exit("mathTextSequence"),i.exit("mathText"),s(m)):(c.type="mathTextData",d(m))}}}function jge(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[n][1].type="mathTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="mathTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Yge(t){return t!==36||this.events[this.events.length-1][1].type==="characterEscape"}function Qge(t){return{flow:{36:Hge},text:{36:Wge(t)}}}const Uge={};function Gge(t){const e=this,n=t||Uge,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Qge(n)),s.push(zge()),o.push(Fge(n))}var Kge=Object.defineProperty,OA=Object.getOwnPropertySymbols,Xge=Object.prototype.hasOwnProperty,Zge=Object.prototype.propertyIsEnumerable,MA=(t,e,n)=>e in t?Kge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jge=(t,e)=>{for(var n in e||(e={}))Xge.call(e,n)&&MA(t,n,e[n]);if(OA)for(var n of OA(e))Zge.call(e,n)&&MA(t,n,e[n]);return t};function gh(t,e){return Object.assign(t,{meta:Jge({package:"@milkdown/components"},e)}),t}var eve=Object.defineProperty,TA=Object.getOwnPropertySymbols,tve=Object.prototype.hasOwnProperty,nve=Object.prototype.propertyIsEnumerable,AA=(t,e,n)=>e in t?eve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_8=(t,e)=>{for(var n in e||(e={}))tve.call(e,n)&&AA(t,n,e[n]);if(TA)for(var n of TA(e))nve.call(e,n)&&AA(t,n,e[n]);return t};const rve={mode:"preview"},fl=bn(_8({},rve),"linkTooltipStateCtx");gh(fl,{displayName:"State<link-tooltip>",group:"LinkTooltip"});const ive={addLink:()=>{},editLink:()=>{},removeLink:()=>{}},Ff=bn(_8({},ive),"linkTooltipAPICtx");gh(fl,{displayName:"API<link-tooltip>",group:"LinkTooltip"});const sve={linkIcon:"",editButton:"",removeButton:"",confirmButton:"Confirm ",onCopyLink:()=>{},inputPlaceholder:"Paste link..."},Hf=bn(_8({},sve),"linkTooltipConfigCtx");gh(fl,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});const vF=_t("ToggleLink",t=>()=>e=>{const{doc:n,selection:r}=e,i=co.type(t);return n.rangeHasMark(r.from,r.to,i)?(t.get(Ff.key).removeLink(r.from,r.to),!0):(t.get(Ff.key).addLink(r.from,r.to),!0)}),jm=gb("LINK_PREVIEW");gh(jm[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"});gh(jm[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});const vb=gb("LINK_EDIT");gh(vb[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"});gh(vb[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"});function hp({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}hp.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const ove=xt({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:t,src:e,onConfirm:n,onCancel:r}){const i=ae(e);Vt(e,a=>{i.value=a});const s=()=>{n(i.value)},o=a=>{a.stopPropagation(),a.key==="Enter"&&(a.preventDefault(),s()),a.key==="Escape"&&(a.preventDefault(),r())};return()=>le("div",{class:"link-edit"},le("input",{class:"input-area",placeholder:t.value.inputPlaceholder,onKeydown:o,onInput:a=>{i.value=a.target.value},value:i.value}),i.value?le(hp,{class:"button confirm",icon:t.value.confirmButton,onClick:s}):null)}});var ave=Object.defineProperty,lve=Object.defineProperties,cve=Object.getOwnPropertyDescriptors,_A=Object.getOwnPropertySymbols,uve=Object.prototype.hasOwnProperty,hve=Object.prototype.propertyIsEnumerable,yF=t=>{throw TypeError(t)},DA=(t,e,n)=>e in t?ave(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G1=(t,e)=>{for(var n in e||(e={}))uve.call(e,n)&&DA(t,n,e[n]);if(_A)for(var n of _A(e))hve.call(e,n)&&DA(t,n,e[n]);return t},EA=(t,e)=>lve(t,cve(e)),bF=(t,e,n)=>e.has(t)||yF("Cannot "+n),Kn=(t,e,n)=>(bF(t,e,"read from private field"),n?n.call(t):e.get(t)),Oa=(t,e,n)=>e.has(t)?yF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Jc=(t,e,n,r)=>(bF(t,e,"write to private field"),e.set(t,n),n),p0,$l,Bl,Ug,m0,Gg,su,b7,Kg;const IA={from:-1,to:-1,mark:null};class fve{constructor(e,n){this.ctx=e,Oa(this,p0),Oa(this,$l),Oa(this,Bl,G1({},IA)),Oa(this,Ug),Oa(this,m0),Oa(this,Gg,ae("")),Oa(this,su,()=>{Kn(this,$l).hide(),this.ctx.update(fl.key,s=>EA(G1({},s),{mode:"preview"})),Jc(this,Bl,G1({},IA))}),Oa(this,b7,s=>{const o=this.ctx.get(Tn),{from:a,to:l,mark:c}=Kn(this,Bl),u=co.type(this.ctx),h=Us.sanitize(s);if(c&&c.attrs.href===h){Kn(this,su).call(this);return}const f=o.state.tr;c&&f.removeMark(a,l,c),f.addMark(a,l,u.create({href:h})),o.dispatch(f),Kn(this,su).call(this)}),Oa(this,Kg,(s,o,a)=>{const l=this.ctx.get(Hf.key);Kn(this,m0).value=l,Kn(this,Gg).value=s,this.ctx.update(fl.key,u=>EA(G1({},u),{mode:"edit"}));const c=this.ctx.get(Tn);c.dispatch(c.state.tr.setSelection(ct.create(c.state.doc,o,a))),Kn(this,$l).show({getBoundingClientRect:()=>O2(c,o,a)},c),requestAnimationFrame(()=>{var u;(u=Kn(this,p0).querySelector("input"))==null||u.focus()})}),this.update=s=>{const{state:o}=s,{selection:a}=o;if(!(a instanceof ct))return;const{from:l,to:c}=a;l===Kn(this,Bl).from&&c===Kn(this,Bl).to||Kn(this,su).call(this)},this.destroy=()=>{Kn(this,Ug).unmount(),Kn(this,$l).destroy(),Kn(this,p0).remove()},this.addLink=(s,o)=>{Jc(this,Bl,{from:s,to:o,mark:null}),Kn(this,Kg).call(this,"",s,o)},this.editLink=(s,o,a)=>{Jc(this,Bl,{from:o,to:a,mark:s}),Kn(this,Kg).call(this,s.attrs.href,o,a)},this.removeLink=(s,o)=>{const a=this.ctx.get(Tn),l=a.state.tr;l.removeMark(s,o,co.type(this.ctx)),a.dispatch(l),Kn(this,su).call(this)},Jc(this,m0,ae(this.ctx.get(Hf.key)));const r=document.createElement("div");r.className="milkdown-link-edit";const i=Qs(ove,{config:Kn(this,m0),src:Kn(this,Gg),onConfirm:Kn(this,b7),onCancel:Kn(this,su)});i.mount(r),Jc(this,Ug,i),Jc(this,p0,r),Jc(this,$l,new mb({content:r,debounce:0,shouldShow:()=>!1})),Kn(this,$l).onHide=()=>{requestAnimationFrame(()=>{n.dom.focus({preventScroll:!0})})},Kn(this,$l).update(n)}}p0=new WeakMap;$l=new WeakMap;Bl=new WeakMap;Ug=new WeakMap;m0=new WeakMap;Gg=new WeakMap;su=new WeakMap;b7=new WeakMap;Kg=new WeakMap;var dve=Object.defineProperty,pve=Object.defineProperties,mve=Object.getOwnPropertyDescriptors,PA=Object.getOwnPropertySymbols,gve=Object.prototype.hasOwnProperty,vve=Object.prototype.propertyIsEnumerable,NA=(t,e,n)=>e in t?dve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yve=(t,e)=>{for(var n in e||(e={}))gve.call(e,n)&&NA(t,n,e[n]);if(PA)for(var n of PA(e))vve.call(e,n)&&NA(t,n,e[n]);return t},bve=(t,e)=>pve(t,mve(e));function wve(t){let e;t.update(Ff.key,n=>bve(yve({},n),{addLink:(r,i)=>{e?.addLink(r,i)},editLink:(r,i,s)=>{e?.editLink(r,i,s)},removeLink:(r,i)=>{e?.removeLink(r,i)}})),t.set(vb.key,{view:n=>(e=new fve(t,n),e)})}function xve(t,e,n,r,i){let s={start:-1,end:-1};return n.nodesBetween(r,i,(o,a)=>{if(s.start>-1)return!1;s.start===-1&&t.isInSet(o.marks)&&e===o&&(s={start:a,end:a+Math.max(o.textContent.length,1)})}),s}function kve(t,e,n){const r=e.posAtCoords({left:n.clientX,top:n.clientY});if(!r)return;const{pos:i}=r,s=e.state.doc.nodeAt(i);if(!s)return;const o=s.marks.find(l=>l.type===co.mark.type(t));if(!(!o||!jm.pluginKey()))return{show:!0,pos:i,node:s,mark:o}}const Sve=xt({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:t,src:e,onEdit:n,onRemove:r}){const i=a=>{a.preventDefault(),a.stopPropagation(),n.value()},s=a=>{a.preventDefault(),a.stopPropagation(),r.value()},o=a=>{a.preventDefault();const l=e.value;navigator.clipboard&&l&&navigator.clipboard.writeText(l).then(()=>{t.value.onCopyLink(l)}).catch(c=>console.error(c))};return()=>le("div",{class:"link-preview"},le(hp,{class:"button link-icon",icon:t.value.linkIcon,onClick:o}),le("a",{href:e.value,target:"_blank",class:"link-display"},e.value),le(hp,{class:"button link-edit-button",icon:t.value.editButton,onClick:i}),le(hp,{class:"button link-remove-button",icon:t.value.removeButton,onClick:s}))}});var wF=t=>{throw TypeError(t)},xF=(t,e,n)=>e.has(t)||wF("Cannot "+n),Zt=(t,e,n)=>(xF(t,e,"read from private field"),n?n.call(t):e.get(t)),Ci=(t,e,n)=>e.has(t)?wF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pl=(t,e,n,r)=>(xF(t,e,"write to private field"),e.set(t,n),n),ou,eo,g0,v0,Xg,Zg,Jg,y0,ev,b0,tv,nv,rv,w0;class Cve{constructor(e,n){this.ctx=e,Ci(this,ou),Ci(this,eo),Ci(this,g0,this.ctx.use(fl.key)),Ci(this,v0),Ci(this,Xg,ae("")),Ci(this,Zg,ae(()=>{})),Ci(this,Jg,ae(()=>{})),Ci(this,y0),Ci(this,ev),Ci(this,b0,!1),Ci(this,tv,({mode:r})=>{r==="edit"&&Zt(this,w0).call(this)}),Ci(this,nv,()=>{Pl(this,b0,!0)}),Ci(this,rv,()=>{Pl(this,b0,!1)}),Ci(this,w0,()=>{Zt(this,eo).hide(),Zt(this,eo).element.removeEventListener("mouseenter",Zt(this,nv)),Zt(this,eo).element.removeEventListener("mouseleave",Zt(this,rv))}),this.show=(r,i,s,o)=>{Zt(this,v0).value=this.ctx.get(Hf.key),Zt(this,Xg).value=r.attrs.href,Zt(this,Zg).value=()=>{this.ctx.get(Ff.key).editLink(r,i,s)},Zt(this,Jg).value=()=>{this.ctx.get(Ff.key).removeLink(i,s),Zt(this,w0).call(this)},Zt(this,eo).show({getBoundingClientRect:()=>o},Zt(this,ev)),Zt(this,eo).element.addEventListener("mouseenter",Zt(this,nv)),Zt(this,eo).element.addEventListener("mouseleave",Zt(this,rv))},this.hide=()=>{Zt(this,b0)||Zt(this,w0).call(this)},this.update=()=>{},this.destroy=()=>{Zt(this,y0).unmount(),Zt(this,g0).off(Zt(this,tv)),Zt(this,eo).destroy(),Zt(this,ou).remove()},Pl(this,ev,n),Pl(this,v0,ae(this.ctx.get(Hf.key))),Pl(this,y0,Qs(Sve,{config:Zt(this,v0),src:Zt(this,Xg),onEdit:Zt(this,Zg),onRemove:Zt(this,Jg)})),Pl(this,ou,document.createElement("div")),Zt(this,ou).className="milkdown-link-preview",Zt(this,y0).mount(Zt(this,ou)),Pl(this,eo,new mb({debounce:0,content:Zt(this,ou),shouldShow:()=>!1})),Zt(this,eo).update(n),Pl(this,g0,e.use(fl.key)),Zt(this,g0).on(Zt(this,tv))}}ou=new WeakMap;eo=new WeakMap;g0=new WeakMap;v0=new WeakMap;Xg=new WeakMap;Zg=new WeakMap;Jg=new WeakMap;y0=new WeakMap;ev=new WeakMap;b0=new WeakMap;tv=new WeakMap;nv=new WeakMap;rv=new WeakMap;w0=new WeakMap;function Ove(t){let e;const r=o2((s,o)=>{if(!e||!s.hasFocus()||t.get(fl.key).mode==="edit")return;const l=kve(t,s,o);if(l){const c=s.state.doc.resolve(l.pos),u=xve(l.mark,l.node,s.state.doc,c.before(),c.after()),h=u.start,f=u.end;e.show(l.mark,h,f,O2(s,h,f));return}e.hide()},50),i=()=>{setTimeout(()=>{e?.hide()},50)};t.set(jm.key,{props:{handleDOMEvents:{mousemove:r,mouseleave:i}},view:s=>(e=new Cve(t,s),e)})}function Mve(t){Ove(t),wve(t)}const Tve=[fl,Ff,Hf,jm,vb,vF].flat();var Ave=Object.defineProperty,RA=Object.getOwnPropertySymbols,_ve=Object.prototype.hasOwnProperty,Dve=Object.prototype.propertyIsEnumerable,LA=(t,e,n)=>e in t?Ave(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eve=(t,e)=>{for(var n in e||(e={}))_ve.call(e,n)&&LA(t,n,e[n]);if(RA)for(var n of RA(e))Dve.call(e,n)&&LA(t,n,e[n]);return t};function kF(t,e){return Object.assign(t,{meta:Eve({package:"@milkdown/components"},e)}),t}const Ive={renderLabel:({label:t,listType:e,checked:n})=>n==null?e==="bullet"?"":t:n?"":""},yb=bn(Ive,"listItemBlockConfigCtx");kF(yb,{displayName:"Config<list-item-block>",group:"ListItemBlock"});function SF({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}SF.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Pve=xt({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:t,checked:e,listType:n,config:r,readonly:i,setAttr:s,onMount:o,selected:a}){const l=f=>{f!=null&&f instanceof Element&&o(f)},c=f=>{f.stopPropagation(),f.preventDefault(),e.value!=null&&s("checked",!e.value)},u=ue(()=>r.renderLabel({label:t.value,listType:n.value,checked:e.value,readonly:i.value})),h=ue(()=>e.value==null?n.value==="bullet"?"bullet":"ordered":e.value?"checked":"unchecked");return()=>le("li",{class:Kr("list-item",a.value&&"ProseMirror-selectednode")},le("div",{class:"label-wrapper",onPointerdown:c,contenteditable:!1},le(SF,{class:Kr("label",i.value&&"readonly",h.value),icon:u.value})),le("div",{class:"children",ref:l}))}}),CF=Am(xo.node,t=>(e,n,r)=>{const i=document.createElement("div");i.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const o=ae(e.attrs.label),a=ae(e.attrs.checked),l=ae(e.attrs.listType),c=ae(!n.editable),u=t.get(yb.key),h=ae(!1),f=(S,O)=>{if(!n.editable)return;const k=r();k!=null&&(n.hasFocus()||n.focus(),n.dispatch(n.state.tr.setNodeAttribute(k,S,O)))},d=Cc(()=>{h.value?i.classList.add("selected"):i.classList.remove("selected")});let p=0;const g=Qs(Pve,{label:o,checked:a,listType:l,readonly:c,config:u,selected:h,setAttr:f,onMount:S=>{const{anchor:O,head:k}=n.state.selection;S.appendChild(s);const C=n.state.doc.resolve(O),T=n.state.doc.resolve(k);p=requestAnimationFrame(()=>{if(cancelAnimationFrame(p),!C.doc.eq(n.state.doc))return;const R=new ct(C,T);n.dispatch(n.state.tr.setSelection(R))})}});g.mount(i);const v=S=>{l.value=S.attrs.listType,o.value=S.attrs.label,a.value=S.attrs.checked,c.value=!n.editable};v(e);let b=e;return{dom:i,contentDOM:s,update:S=>S.type!==e.type?!1:(S.sameMarkup(b)&&S.content.eq(b.content)||(b=S,v(S)),!0),ignoreMutation:S=>!i||!s?!0:S.type==="selection"?!1:s===S.target&&S.type==="attributes"?!0:!s.contains(S.target),selectNode:()=>{h.value=!0},deselectNode:()=>{h.value=!1},destroy:()=>{d(),g.unmount(),i.remove(),s.remove()}}});kF(CF,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const Nve=[yb,CF];var Rve=Object.defineProperty,$A=Object.getOwnPropertySymbols,Lve=Object.prototype.hasOwnProperty,$ve=Object.prototype.propertyIsEnumerable,BA=(t,e,n)=>e in t?Rve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bve=(t,e)=>{for(var n in e||(e={}))Lve.call(e,n)&&BA(t,n,e[n]);if($A)for(var n of $A(e))$ve.call(e,n)&&BA(t,n,e[n]);return t};function OF(t,e){return Object.assign(t,{meta:Bve({package:"@milkdown/components"},e)}),t}var zve=Object.defineProperty,zA=Object.getOwnPropertySymbols,Fve=Object.prototype.hasOwnProperty,Hve=Object.prototype.propertyIsEnumerable,FA=(t,e,n)=>e in t?zve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vve=(t,e)=>{for(var n in e||(e={}))Fve.call(e,n)&&FA(t,n,e[n]);if(zA)for(var n of zA(e))Hve.call(e,n)&&FA(t,n,e[n]);return t};const qve={renderButton:t=>{switch(t){case"add_row":return"+";case"add_col":return"+";case"delete_row":return"-";case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":return"=";case"row_drag_handle":return"="}}},bb=bn(Vve({},qve),"tableBlockConfigCtx");OF(bb,{displayName:"Config<table-block>",group:"TableBlock"});function No({icon:t,class:e,onClick:n}){return le("span",{class:Kr("milkdown-icon",e),onPointerdown:n,innerHTML:t?Us.sanitize(t.trim()):void 0})}No.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};function MF(t){const{dragPreviewRef:e,tableWrapperRef:n,contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a}=t,l=e.value;if(!l)return;const c=n.value;if(!c)return;const u=r.value;if(!u)return;const h=u.querySelector("tbody");if(!h)return;const f=l.querySelector("tbody");if(!f)return;const d=i.value;if(!d)return;const p=s.value;if(!p)return;const m=o.value;if(!m)return;const g=a.value;return g?{preview:l,wrapper:c,content:u,contentRoot:h,previewRoot:f,yHandle:d,xHandle:p,colHandle:m,rowHandle:g}:void 0}function TF(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function AF(t,e,n,r,i){const{width:s,height:o}=r.querySelector("tbody").getBoundingClientRect();if(t==="y"){const l=r.querySelectorAll("tr")[i];if(!l)return;n.appendChild(l.cloneNode(!0));const c=l.getBoundingClientRect().height;Object.assign(e.style,{width:`${s}px`,height:`${c}px`}),e.dataset.show="true";return}if(t==="x"){const a=r.querySelectorAll("tr");let l;Array.from(a).forEach(c=>{const u=c.children[i];if(!u)return;l===void 0&&(l=u.getBoundingClientRect().width);const h=u.parentElement.cloneNode(!1),f=u.cloneNode(!0);h.appendChild(f),n.appendChild(h)}),Object.assign(e.style,{width:`${l}px`,height:`${o}px`}),e.dataset.show="true";return}}function Wve(t,e){return n=>{DF(t,n,e,r=>{_F("y",n,r,t);const{preview:i,content:s,previewRoot:o}=r;TF(o);const{hoverIndex:a}=t,[l]=a.value;AF("y",i,o,s,l)})}}function jve(t,e){return n=>{DF(t,n,e,r=>{_F("x",n,r,t);const{preview:i,content:s,previewRoot:o}=r,{hoverIndex:a}=t,[l,c]=a.value;TF(o),AF("x",i,o,s,c)})}}function _F(t,e,n,r){const{xHandle:i,yHandle:s,colHandle:o,rowHandle:a,preview:l}=n;i.dataset.displayType=t==="y"?"indicator":"none",s.dataset.displayType=t==="x"?"indicator":"none",t==="y"?(o.dataset.show="false",HA(a)):(a.dataset.show="false",HA(o));const{hoverIndex:c,dragInfo:u}=r,[h,f]=c.value;u.value={startCoords:[e.clientX,e.clientY],startIndex:t==="y"?h:f,endIndex:t==="y"?h:f,type:t==="y"?"row":"col"},l.dataset.direction=t==="y"?"vertical":"horizontal"}function DF(t,e,n,r){const i=n?.get(Tn);if(!i?.editable)return;e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.effectAllowed="move");const s=MF(t);s&&requestAnimationFrame(()=>{r(s)})}function HA(t){var e;(e=t.querySelector(".button-group"))==null||e.setAttribute("data-show","false")}function w7(t,e){for(let n=0;n<t.childCount;n++)if(t.child(n)===e)return n;return-1}function Yve(t,e){var n,r,i;if(e)try{const s=e.posAtCoords({left:t.clientX,top:t.clientY});if(!s)return;const o=s?.inside;if(o==null||o<0)return;const a=e.state.doc.resolve(o),l=e.state.doc.nodeAt(o);if(!l)return;const c=["table_cell","table_header"],u=["table_row","table_header_row"],h=c.includes(l.type.name)?l:(n=Jo(g=>c.includes(g.type.name))(a))==null?void 0:n.node,f=(r=Jo(g=>u.includes(g.type.name))(a))==null?void 0:r.node,d=(i=Jo(g=>g.type.name==="table")(a))==null?void 0:i.node;if(!h||!f||!d)return;const p=w7(f,h);return[w7(d,f),p]}catch{return}}function wb(t,[e,n]){const r=t.value;if(!r)return;const i=r.querySelectorAll("tr"),s=i[e];if(!s)return;const o=i[0];if(!o)return;const a=o.children[n];if(!a)return;const l=s.children[n];if(l)return{row:s,col:l,headerCol:a}}function Qve(t,e,n){if(!n||!e)return;const{selection:r}=e.state;if(!(r instanceof En))return;const{$from:i}=r,s=od(i);if(!(!s||s.node!==n)){if(r.isColSelection()){const{$head:o}=r,a=o.index(o.depth-1);D8({refs:t,index:[0,a],before:l=>{var c;(c=l.querySelector(".button-group"))==null||c.setAttribute("data-show","true")}});return}if(r.isRowSelection()){const{$head:o}=r,a=Jo(c=>c.type.name==="table_row"||c.type.name==="table_header_row")(o);if(!a)return;const l=w7(s.node,a.node);E8({refs:t,index:[l,0],before:c=>{var u;l>0&&((u=c.querySelector(".button-group"))==null||u.setAttribute("data-show","true"))}})}}}function D8({refs:t,index:e,before:n,after:r}){const{contentWrapperRef:i,colHandleRef:s,hoverIndex:o}=t,a=s.value;if(!a)return;o.value=e;const l=wb(i,e);if(!l)return;const{headerCol:c}=l;a.dataset.show="true",n&&n(a),sa(c,a,{placement:"top"}).then(({x:u,y:h})=>{Object.assign(a.style,{left:`${u}px`,top:`${h}px`}),r&&r(a)}).catch(console.error)}function E8({refs:t,index:e,before:n,after:r}){const{contentWrapperRef:i,rowHandleRef:s,hoverIndex:o}=t,a=s.value;if(!a)return;o.value=e;const l=wb(i,e);if(!l)return;const{row:c}=l;a.dataset.show="true",n&&n(a),sa(c,a,{placement:"left"}).then(({x:u,y:h})=>{Object.assign(a.style,{left:`${u}px`,top:`${h}px`}),r&&r(a)}).catch(console.error)}function EF(t,e,n){const r=n==="x"?"left":"top",i=n==="x"?"right":"bottom",s=t.length-1,o=t.findIndex((l,c)=>{const u=l.getBoundingClientRect(),h=u[r],f=u[i];return h<=e&&e<=f||c===s&&e>f||c===0&&e<h}),a=t[o];return a?[a,o]:void 0}function Uve(t,e){const n=t.querySelector("tr");if(!n)return;const r=Array.from(n.children);return EF(r,e,"x")}function Gve(t,e){const n=Array.from(t.querySelectorAll("tr"));return EF(n,e,"y")}function Kve(t){return a2(e=>{const n=MF(t);if(!n)return;const{preview:r,content:i,contentRoot:s,xHandle:o,yHandle:a}=n,{dragInfo:l,hoverIndex:c}=t;if(r.dataset.show==="false")return;const u=wb(t.contentWrapperRef,c.value);if(!u||!s.querySelector("tr"))return;const f=l.value;if(!f||!s.offsetParent)return;const d=s.offsetParent.offsetTop,p=s.offsetParent.offsetLeft;if(f.type==="col"){const m=u.col.getBoundingClientRect().width,{left:g,width:v}=s.getBoundingClientRect(),b=p-g,S=e.clientX+b-m/2,[O]=f.startCoords,k=O<e.clientX?"right":"left";r.style.top=`${d}px`;const C=S<g+b-20?g+b-20:S>g+v+b-m+20?g+v+b-m+20:S;r.style.left=`${C}px`;const T=Uve(s,e.clientX);if(T){const[R,L]=T,I=a.getBoundingClientRect().width,F=i.getBoundingClientRect();f.endIndex=L,sa(R,a,{placement:k==="left"?"left":"right",middleware:[eh(k==="left"?-1*I:0)]}).then(({x:E})=>{a.dataset.show="true",Object.assign(a.style,{height:`${F.height}px`,left:`${E}px`,top:`${d}px`})}).catch(console.error)}}else if(f.type==="row"){const m=u.row.getBoundingClientRect().height,{top:g,height:v}=s.getBoundingClientRect(),b=d-g,S=e.clientY+b-m/2,[O,k]=f.startCoords,C=k<e.clientY?"down":"up",T=S<g+b-20?g+b-20:S>g+v+b-m+20?g+v+b-m+20:S;r.style.top=`${T}px`,r.style.left=`${p}px`;const R=Gve(s,e.clientY);if(R){const[L,I]=R,F=o.getBoundingClientRect().height,E=i.getBoundingClientRect();f.endIndex=I,sa(L,o,{placement:C==="up"?"top":"bottom",middleware:[eh(C==="up"?-1*F:0)]}).then(({y:ee})=>{o.dataset.show="true",Object.assign(o.style,{width:`${E.width}px`,top:`${ee}px`})}).catch(console.error)}}},20)}function Xve(t,e,n){const{dragPreviewRef:r,yLineHandleRef:i,xLineHandleRef:s,dragInfo:o}=t,a=Wve(t,e),l=jve(t,e),c=()=>{const f=r.value;if(!f||f.dataset.show==="false")return;const d=f?.querySelector("tbody");for(;d?.firstChild;)d?.removeChild(d.firstChild);f&&(f.dataset.show="false")},u=()=>{var f;const d=r.value;if(!d)return;const p=i.value;if(!p)return;const m=s.value;if(!m)return;const g=o.value;if(!g||!e||d.dataset.show==="false"||!t.colHandleRef.value||!t.rowHandleRef.value||(p.dataset.show="false",m.dataset.show="false",g.startIndex===g.endIndex))return;const S=e.get(at),O={from:g.startIndex,to:g.endIndex,pos:((f=n?.())!=null?f:0)+1};if(g.type==="col"){S.call(wu.key,{pos:O.pos,index:g.startIndex}),S.call(R6.key,O);const k=[0,g.endIndex];D8({refs:t,index:k})}else{S.call(bu.key,{pos:O.pos,index:g.startIndex}),S.call(N6.key,O);const k=[g.endIndex,0];E8({refs:t,index:k})}requestAnimationFrame(()=>{e.get(Tn).focus()})},h=Kve(t);return Dr(()=>{window.addEventListener("dragover",h),window.addEventListener("dragend",c),window.addEventListener("drop",u)}),la(()=>{window.removeEventListener("dragover",h),window.removeEventListener("dragend",c),window.removeEventListener("drop",u)}),{dragRow:a,dragCol:l}}function Zve(t,e,n){const{xLineHandleRef:r,contentWrapperRef:i,colHandleRef:s,rowHandleRef:o,hoverIndex:a,lineHoverIndex:l}=t;return{onAddRow:()=>{var m,g,v;if(!e)return;const b=r.value;if(!b)return;const[S]=l.value;if(S<0||!e.get(Tn).editable)return;const O=Array.from((g=(m=i.value)==null?void 0:m.querySelectorAll("tr"))!=null?g:[]),k=e.get(at),C=((v=n?.())!=null?v:0)+1;O.length===S?(k.call(bu.key,{pos:C,index:S-1}),k.call(F6.key)):(k.call(bu.key,{pos:C,index:S}),k.call(z6.key)),k.call(bu.key,{pos:C,index:S}),b.dataset.show="false"},onAddCol:()=>{var m,g,v,b;if(!e||!r.value)return;const[O,k]=l.value;if(k<0||!e.get(Tn).editable)return;const C=Array.from((v=(g=(m=i.value)==null?void 0:m.querySelector("tr"))==null?void 0:g.children)!=null?v:[]),T=e.get(at),R=((b=n?.())!=null?b:0)+1;C.length===k?(T.call(wu.key,{pos:R,index:k-1}),T.call(B6.key)):(T.call(wu.key,{pos:R,index:k}),T.call($6.key)),T.call(wu.key,{pos:R,index:k})},selectCol:()=>{var m,g;if(!e)return;const[v,b]=a.value,S=e.get(at),O=((m=n?.())!=null?m:0)+1;S.call(wu.key,{pos:O,index:b});const k=(g=s.value)==null?void 0:g.querySelector(".button-group");k&&(k.dataset.show=k.dataset.show==="true"?"false":"true")},selectRow:()=>{var m,g;if(!e)return;const[v,b]=a.value,S=e.get(at),O=((m=n?.())!=null?m:0)+1;S.call(bu.key,{pos:O,index:v});const k=(g=o.value)==null?void 0:g.querySelector(".button-group");k&&v>0&&(k.dataset.show=k.dataset.show==="true"?"false":"true")},deleteSelected:m=>{if(!e||!e.get(Tn).editable)return;m.preventDefault(),m.stopPropagation(),e.get(at).call(L6.key),requestAnimationFrame(()=>{e.get(Tn).focus()})},onAlign:m=>g=>{if(!e||!e.get(Tn).editable)return;g.preventDefault(),g.stopPropagation(),e.get(at).call(H6.key,m),requestAnimationFrame(()=>{e.get(Tn).focus()})}}}function Jve(t,e){return a2(n=>{if(!e?.editable)return;const{contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a,hoverIndex:l,lineHoverIndex:c}=t,u=i.value;if(!u)return;const h=s.value;if(!h)return;const f=r.value;if(!f)return;const d=a.value;if(!d)return;const p=o.value;if(!p)return;const m=Yve(n,e);if(!m)return;const g=wb(r,m);if(!g)return;const[v,b]=m,S=g.col.getBoundingClientRect(),O=Math.abs(n.clientX-S.left)<8,k=Math.abs(S.right-n.clientX)<8,C=Math.abs(n.clientY-S.top)<8,T=Math.abs(S.bottom-n.clientY)<8,R=O||k||C||T,L=d.querySelector(".button-group"),I=p.querySelector(".button-group");if(L&&(L.dataset.show="false"),I&&(I.dataset.show="false"),R){const F=f.getBoundingClientRect();d.dataset.show="false",p.dataset.show="false",h.dataset.displayType="tool",u.dataset.displayType="tool";const E=u.getBoundingClientRect().width,ee=h.getBoundingClientRect().height;O||k?(c.value[1]=O?b:b+1,sa(g.col,u,{placement:O?"left":"right",middleware:[eh(O?-1*E:0)]}).then(({x:G})=>{u.dataset.show="true",Object.assign(u.style,{height:`${F.height}px`,left:`${G}px`})}).catch(console.error)):u.dataset.show="false",m[0]!==0&&(C||T)?(c.value[0]=C?v:v+1,sa(g.row,h,{placement:C?"top":"bottom",middleware:[eh(C?-1*ee:0)]}).then(({y:G})=>{h.dataset.show="true",Object.assign(h.style,{width:`${F.width}px`,top:`${G}px`})}).catch(console.error)):h.dataset.show="false";return}c.value=[-1,-1],u.dataset.show="false",h.dataset.show="false",d.dataset.show="true",p.dataset.show="true",E8({refs:t,index:m}),D8({refs:t,index:m}),l.value=m},20)}function eye(t){return()=>{const{rowHandleRef:e,colHandleRef:n,yLineHandleRef:r,xLineHandleRef:i}=t;setTimeout(()=>{const s=e.value;if(!s)return;const o=n.value;if(!o)return;const a=r.value;if(!a)return;const l=i.value;l&&(s.dataset.show="false",o.dataset.show="false",a.dataset.show="false",l.dataset.show="false")},200)}}function tye(t,e){const n=Jve(t,e),r=eye(t);return{pointerMove:n,pointerLeave:r}}const nye=xt({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:t,node:e,ctx:n,getPos:r,config:i,onMount:s}){const o=ae(),a=E=>{E!=null&&(E instanceof HTMLElement?(o.value=E,s(E)):o.value=void 0)},l=ae(),c=ae(),u=ae(),h=ae(),f=ae(),d=ae(),v={dragPreviewRef:d,tableWrapperRef:f,contentWrapperRef:o,yLineHandleRef:h,xLineHandleRef:u,colHandleRef:l,rowHandleRef:c,hoverIndex:ae([0,0]),lineHoverIndex:ae([-1,-1]),dragInfo:ae()},{pointerLeave:b,pointerMove:S}=tye(v,t),{dragRow:O,dragCol:k}=Xve(v,n,r),{onAddRow:C,onAddCol:T,selectCol:R,selectRow:L,deleteSelected:I,onAlign:F}=Zve(v,n,r);return Dr(()=>{requestAnimationFrame(()=>{t.editable&&Qve(v,t,e.value)})}),()=>le("div",{onDragstart:E=>E.preventDefault(),onDragover:E=>E.preventDefault(),onDragleave:E=>E.preventDefault(),onPointermove:S,onPointerleave:b},le("div",{"data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:k,onClick:R,onPointerdown:E=>E.stopPropagation(),onPointermove:E=>E.stopPropagation(),ref:l},le(No,{icon:i.renderButton("col_drag_handle")}),le("div",{"data-show":"false",class:"button-group",onPointermove:E=>E.stopPropagation()},le("button",{type:"button",onPointerdown:F("left")},le(No,{icon:i.renderButton("align_col_left")})),le("button",{type:"button",onPointerdown:F("center")},le(No,{icon:i.renderButton("align_col_center")})),le("button",{type:"button",onPointerdown:F("right")},le(No,{icon:i.renderButton("align_col_right")})),le("button",{type:"button",onPointerdown:I},le(No,{icon:i.renderButton("delete_col")})))),le("div",{"data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:O,onClick:L,onPointerdown:E=>E.stopPropagation(),onPointermove:E=>E.stopPropagation(),ref:c},le(No,{icon:i.renderButton("row_drag_handle")}),le("div",{"data-show":"false",class:"button-group",onPointermove:E=>E.stopPropagation()},le("button",{type:"button",onPointerdown:I},le(No,{icon:i.renderButton("delete_row")})))),le("div",{class:"table-wrapper",ref:f},le("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:d},le("table",null,le("tbody",null))),le("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:E=>E.stopPropagation(),ref:u},le("button",{type:"button",onClick:C,class:"add-button"},le(No,{icon:i.renderButton("add_row")}))),le("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:E=>E.stopPropagation(),ref:h},le("button",{type:"button",onClick:T,class:"add-button"},le(No,{icon:i.renderButton("add_col")}))),le("table",{ref:a,class:"children"})))}});var IF=t=>{throw TypeError(t)},rye=(t,e,n)=>e.has(t)||IF("Cannot "+n),iye=(t,e,n)=>e.has(t)?IF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),sye=(t,e,n)=>(rye(t,e,"access private method"),n),x7,PF;class oye{constructor(e,n,r,i){this.ctx=e,this.node=n,this.view=r,this.getPos=i,iye(this,x7);const s=document.createElement("div");s.className="milkdown-table-block";const o=document.createElement("tbody");this.contentDOM=o,o.setAttribute("data-content-dom","true"),o.classList.add("content-dom"),this.nodeRef=Ou(n);const a=Qs(nye,{view:r,ctx:e,getPos:i,config:e.get(bb.key),onMount:l=>{l.appendChild(o)},node:this.nodeRef});a.mount(s),this.app=a,this.dom=s}update(e){return e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)?!1:(this.node=e,this.nodeRef.value=e,!0)}stopEvent(e){if(e.type==="drop"||e.type.startsWith("drag"))return!0;if(e.type==="mousedown"||e.type==="pointerdown"){if(e.target instanceof Element&&e.target.closest("button"))return!0;const n=e.target;if(n instanceof HTMLElement&&(n.closest("th")||n.closest("td"))){const r=e;return sye(this,x7,PF).call(this,r)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:e.type==="selection"?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}x7=new WeakSet;PF=function(t){const e=this.view;if(!e.editable)return!1;const{state:n,dispatch:r}=e,i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return!1;const s=n.doc.resolve(i.inside),o=Jo(c=>c.type.name==="table_cell"||c.type.name==="table_header")(s);if(!o)return!1;if(n.selection instanceof ct){const c=Jo(u=>u.type.name==="table_cell"||u.type.name==="table_header")(n.selection.$from);if(c?.node===o.node)return!1}const{from:a}=o,l=yt.create(n.doc,a+1);return n.selection.eq(l)?!1:(n.selection instanceof En?setTimeout(()=>{r(n.tr.setSelection(l).scrollIntoView())},20):requestAnimationFrame(()=>{r(n.tr.setSelection(l).scrollIntoView())}),!0)};const NF=Am(Ec.node,t=>(e,n,r)=>new oye(t,e,n,r));OF(NF,{displayName:"NodeView<table-block>",group:"TableBlock"});const aye=[bb,NF];function k7(t){if(!t)return!1;if(Array.isArray(t))return t.length>1?!1:k7(t[0]);const e=t.content;return e?k7(e):t.type==="text"}function lye(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-clipboard",...e}}),t}const RF=vr(t=>{const e=t.get(lo);t.update(ap,i=>({...i,editable:i.editable??(()=>!0)}));const n=new jn("MILKDOWN_CLIPBOARD");return new Wn({key:n,props:{handlePaste:(i,s)=>{const o=t.get(cf),a=i.props.editable?.(i.state),{clipboardData:l}=s;if(!a||!l||i.state.selection.$from.node().type.spec.code)return!1;const u=l.getData("text/plain"),h=l.getData("vscode-editor-data");if(h){const b=JSON.parse(h)?.mode;if(u&&b){const{tr:S}=i.state,O=Dte("code_block",e);return S.replaceSelectionWith(O.create({language:b})).setSelection(ct.near(S.doc.resolve(Math.max(0,S.selection.from-2)))).insertText(u.replace(/\r\n?/g,`
`)),i.dispatch(S),!0}}const f=l.getData("text/html");if(f.length===0&&u.length===0)return!1;const d=Qu.fromSchema(e);let p;if(f.length===0){const v=o(u);if(!v||typeof v=="string")return!1;p=uh.fromSchema(e).serializeFragment(v.content)}else{const v=document.createElement("template");v.innerHTML=f,p=v.content.cloneNode(!0),v.remove()}const m=d.parseSlice(p),g=Ate(m);if(g)return i.dispatch(i.state.tr.replaceSelectionWith(g,!0)),!0;try{return i.dispatch(i.state.tr.replaceSelection(m)),!0}catch{return!1}},clipboardTextSerializer:i=>{const s=t.get(uf);if(k7(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const a=e.topNodeType.createAndFill(void 0,i.content);return a?s(a):""}}})});lye(RF,{displayName:"Prose<clipboard>"});function dd(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-history",...e}}),t}const I8=_t("Undo",()=>()=>ib);dd(I8,{displayName:"Command<undo>"});const P8=_t("Redo",()=>()=>Lf);dd(P8,{displayName:"Command<redo>"});const N8=bn({},"historyProviderConfig");dd(N8,{displayName:"Ctx<historyProviderConfig>"});const LF=vr(t=>s0e(t.get(N8.key)));dd(LF,{displayName:"Ctx<historyProviderPlugin>"});const R8=ji("historyKeymap",{Undo:{shortcuts:"Mod-z",command:t=>{const e=t.get(at);return()=>e.call(I8.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:t=>{const e=t.get(at);return()=>e.call(P8.key)}}});dd(R8.ctx,{displayName:"KeymapCtx<history>"});dd(R8.shortcuts,{displayName:"Keymap<history>"});const cye=[N8,LF,R8,I8,P8].flat();function uye(t,e){const{doc:n,selection:r}=t;if(!n||!r||!(r instanceof ct||r instanceof $i))return t;const{to:i}=r,s=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return t.insertText(s,i)}const xb=bn({type:"space",size:2},"indentConfig");xb.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const $F=PL(t=>({Tab:(e,n)=>{const r=t.get(xb.key),{tr:i}=e,s=uye(i,r);return s.docChanged?(n?.(s),!0):!1}}));$F.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const hye=[xb,$F];class BF{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const Ty=Yt(new BF,"listener"),fye=new jn("MILKDOWN_LISTENER"),zF=t=>(t.inject(Ty,new BF),async()=>{await t.wait(Eu);const e=t.get(Ty),{listeners:n}=e;n.beforeMount.forEach(l=>l(t)),await t.wait(op);const r=t.get(uf);let i=null,s=null,o=null;const a=new Wn({key:fye,view:()=>({destroy:()=>{n.destroy.forEach(l=>l(t))}}),props:{handleDOMEvents:{focus:()=>(n.focus.forEach(l=>l(t)),!1),blur:()=>(n.blur.forEach(l=>l(t)),!1)}},state:{init:(l,c)=>{i=c.doc,s=r(c.doc)},apply:l=>{const c=l.selection;return(!o&&c||o&&!c.eq(o))&&(n.selectionUpdated.forEach(h=>{h(t,c,o)}),o=c),!(l.docChanged||l.storedMarksSet)||l.getMeta("addToHistory")===!1?void 0:o2(()=>{const{doc:h}=l;if(n.updated.length>0&&i&&!i.eq(h)&&n.updated.forEach(f=>{f(t,h,i)}),n.markdownUpdated.length>0&&i&&!i.eq(h)){const f=r(h);n.markdownUpdated.forEach(d=>{d(t,f,s)}),s=f}i=h},200)()}}});t.update(ll,l=>l.concat(a)),await t.wait(zg),n.mounted.forEach(l=>l(t))});zF.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const L8=bn({shouldAppend:t=>!(!t||["heading","paragraph"].includes(t.type.name)),getNode:t=>t.schema.nodes.paragraph.create()},"trailingConfig");L8.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const FF=vr(t=>{const e=new jn("MILKDOWN_TRAILING"),{shouldAppend:n,getNode:r}=t.get(L8.key),i=new Wn({key:e,state:{init:(s,o)=>{const a=o.tr.doc.lastChild;return n(a,o)},apply:(s,o,a,l)=>{if(!s.docChanged)return o;const c=s.doc.lastChild;return n(c,l)}},appendTransaction:(s,o,a)=>{const{doc:l,tr:c}=a,u=r?.(a),h=i.getState(a),f=l.content.size;if(!(!h||!u))return c.insert(f,u)}});return i});FF.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const dye=[L8,FF];var kn=(t=>(t.CodeMirror="code-mirror",t.ListItem="list-item",t.LinkTooltip="link-tooltip",t.Cursor="cursor",t.ImageBlock="image-block",t.BlockEdit="block-edit",t.Toolbar="toolbar",t.Placeholder="placeholder",t.Table="table",t.Latex="latex",t))(kn||{});const pye={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},mye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,gye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,vye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,yye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,bye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,wye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,xye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,kye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Sye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,HF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,VF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,qF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,$8=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,WF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,Cye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,VA=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,B8=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Oye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Mye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Tye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Aye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,_ye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Dye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,S7=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Eye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,Iye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,Pye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Nye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,C7=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Rye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,O7=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,jF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,Lye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,$ye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Bye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,zye=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,YF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,QF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,Fye={[kn.CodeMirror]:{theme:eee,languages:qJ,expandIcon:HF,searchIcon:jF,clearSearchIcon:VF,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:t=>t?B8:QF}},Hye=Yt([],"FeaturesCtx"),Vye=Yt({},"CrepeCtx");function qye(t){return t.get("CrepeCtx")}function kb(t){return t.use("FeaturesCtx")}function va(t){return e=>{kb(e).update(n=>n.includes(t)?n:[...n,t])}}function UF(t){return t.$from.parent.type.name==="code_block"}function GF(t){var e;const n=(e=t.$from.node(t.$from.depth-1))==null?void 0:e.type;return n?.name==="list_item"}var KF=t=>{throw TypeError(t)},XF=(t,e,n)=>e.has(t)||KF("Cannot "+n),Fd=(t,e,n)=>(XF(t,e,"read from private field"),n?n.call(t):e.get(t)),qA=(t,e,n)=>e.has(t)?KF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Wye=(t,e,n,r)=>(XF(t,e,"write to private field"),e.set(t,n),n),zh,iv;class ZF{constructor(){qA(this,zh,[]),this.clear=()=>(Wye(this,zh,[]),this),qA(this,iv,e=>{const n={group:e,addItem:(r,i)=>{const s={...i,key:r};return e.items.push(s),n},clear:()=>(e.items=[],n)};return n}),this.addGroup=(e,n)=>{const i={key:e,label:n,items:[]};return Fd(this,zh).push(i),Fd(this,iv).call(this,i)},this.getGroup=e=>{const n=Fd(this,zh).find(r=>r.key===e);if(!n)throw new Error(`Group with key ${e} not found`);return Fd(this,iv).call(this,n)},this.build=()=>Fd(this,zh)}}zh=new WeakMap;iv=new WeakMap;function jye(t,e,n){var r,i,s,o,a,l,c,u,h,f,d,p,m,g,v,b,S,O,k,C,T,R,L,I,F,E,ee,G,W,X,te,ne,ye,A,fe,he,P,Ue,je,st,dt,bt,Nt,Ot,Kt,$,V,ie,pe,ge,ve,De,Te,Me,we,tt,qe,Xe,it,J,de,Ve,lt,gt,Xt,sn,an,Yn,Ht,$t,xe,B,Ce,Fe,kt,dn,Cn,ur,Qi,ln,ni,ir,Xs,Ui,Gi,Ki,Ml,Hr,xs,Lc,$c,Tl,Bc,xi,zc,Fc,Hc,Vc,wh,ht,j,Le,ot,pn,zn,Nn,Qn,ki,Si,Mo,er,qc,wa,Gm,Km,D,q,N,K;const Z=n&&kb(n).get(),Q=Z?.includes(kn.Latex),ke=Z?.includes(kn.ImageBlock),Pe=Z?.includes(kn.Table),Ne=new ZF;if(e?.textGroup!==null){const He=Ne.addGroup("text",(i=(r=e?.textGroup)==null?void 0:r.label)!=null?i:"Text");((s=e?.textGroup)==null?void 0:s.text)!==null&&He.addItem("text",{label:(l=(a=(o=e?.textGroup)==null?void 0:o.text)==null?void 0:a.label)!=null?l:"Text",icon:(h=(u=(c=e?.textGroup)==null?void 0:c.text)==null?void 0:u.icon)!=null?h:Bye,onRun:Be=>{const Ye=Be.get(at),ut=wo.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut})}}),((f=e?.textGroup)==null?void 0:f.h1)!==null&&He.addItem("h1",{label:(m=(p=(d=e?.textGroup)==null?void 0:d.h1)==null?void 0:p.label)!=null?m:"Heading 1",icon:(b=(v=(g=e?.textGroup)==null?void 0:g.h1)==null?void 0:v.icon)!=null?b:Oye,onRun:Be=>{const Ye=Be.get(at),ut=is.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut,attrs:{level:1}})}}),((S=e?.textGroup)==null?void 0:S.h2)!==null&&He.addItem("h2",{label:(C=(k=(O=e?.textGroup)==null?void 0:O.h2)==null?void 0:k.label)!=null?C:"Heading 2",icon:(L=(R=(T=e?.textGroup)==null?void 0:T.h2)==null?void 0:R.icon)!=null?L:Mye,onRun:Be=>{const Ye=Be.get(at),ut=is.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut,attrs:{level:2}})}}),((I=e?.textGroup)==null?void 0:I.h3)!==null&&He.addItem("h3",{label:(ee=(E=(F=e?.textGroup)==null?void 0:F.h3)==null?void 0:E.label)!=null?ee:"Heading 3",icon:(X=(W=(G=e?.textGroup)==null?void 0:G.h3)==null?void 0:W.icon)!=null?X:Tye,onRun:Be=>{const Ye=Be.get(at),ut=is.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut,attrs:{level:3}})}}),((te=e?.textGroup)==null?void 0:te.h4)!==null&&He.addItem("h4",{label:(A=(ye=(ne=e?.textGroup)==null?void 0:ne.h4)==null?void 0:ye.label)!=null?A:"Heading 4",icon:(P=(he=(fe=e?.textGroup)==null?void 0:fe.h4)==null?void 0:he.icon)!=null?P:Aye,onRun:Be=>{const Ye=Be.get(at),ut=is.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut,attrs:{level:4}})}}),((Ue=e?.textGroup)==null?void 0:Ue.h5)!==null&&He.addItem("h5",{label:(dt=(st=(je=e?.textGroup)==null?void 0:je.h5)==null?void 0:st.label)!=null?dt:"Heading 5",icon:(Ot=(Nt=(bt=e?.textGroup)==null?void 0:bt.h5)==null?void 0:Nt.icon)!=null?Ot:_ye,onRun:Be=>{const Ye=Be.get(at),ut=is.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut,attrs:{level:5}})}}),((Kt=e?.textGroup)==null?void 0:Kt.h6)!==null&&He.addItem("h6",{label:(ie=(V=($=e?.textGroup)==null?void 0:$.h6)==null?void 0:V.label)!=null?ie:"Heading 6",icon:(ve=(ge=(pe=e?.textGroup)==null?void 0:pe.h6)==null?void 0:ge.icon)!=null?ve:Dye,onRun:Be=>{const Ye=Be.get(at),ut=is.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut,attrs:{level:6}})}}),((De=e?.textGroup)==null?void 0:De.quote)!==null&&He.addItem("quote",{label:(we=(Me=(Te=e?.textGroup)==null?void 0:Te.quote)==null?void 0:Me.label)!=null?we:"Quote",icon:(Xe=(qe=(tt=e?.textGroup)==null?void 0:tt.quote)==null?void 0:qe.icon)!=null?Xe:Rye,onRun:Be=>{const Ye=Be.get(at),ut=id.type(Be);Ye.call(Ir.key),Ye.call(u0.key,{nodeType:ut})}}),((it=e?.textGroup)==null?void 0:it.divider)!==null&&He.addItem("divider",{label:(Ve=(de=(J=e?.textGroup)==null?void 0:J.divider)==null?void 0:de.label)!=null?Ve:"Divider",icon:(Xt=(gt=(lt=e?.textGroup)==null?void 0:lt.divider)==null?void 0:gt.icon)!=null?Xt:Cye,onRun:Be=>{const Ye=Be.get(at),ut=sd.type(Be);Ye.call(Ir.key),Ye.call(h0.key,{nodeType:ut})}})}if(e?.listGroup!==null){const He=Ne.addGroup("list",(an=(sn=e?.listGroup)==null?void 0:sn.label)!=null?an:"List");((Yn=e?.listGroup)==null?void 0:Yn.bulletList)!==null&&He.addItem("bullet-list",{label:(xe=($t=(Ht=e?.listGroup)==null?void 0:Ht.bulletList)==null?void 0:$t.label)!=null?xe:"Bullet List",icon:(Fe=(Ce=(B=e?.listGroup)==null?void 0:B.bulletList)==null?void 0:Ce.icon)!=null?Fe:wye,onRun:Be=>{const Ye=Be.get(at),ut=dh.type(Be);Ye.call(Ir.key),Ye.call(u0.key,{nodeType:ut})}}),((kt=e?.listGroup)==null?void 0:kt.orderedList)!==null&&He.addItem("ordered-list",{label:(ur=(Cn=(dn=e?.listGroup)==null?void 0:dn.orderedList)==null?void 0:Cn.label)!=null?ur:"Ordered List",icon:(ni=(ln=(Qi=e?.listGroup)==null?void 0:Qi.orderedList)==null?void 0:ln.icon)!=null?ni:Nye,onRun:Be=>{const Ye=Be.get(at),ut=ph.type(Be);Ye.call(Ir.key),Ye.call(u0.key,{nodeType:ut})}}),((ir=e?.listGroup)==null?void 0:ir.taskList)!==null&&He.addItem("task-list",{label:(Gi=(Ui=(Xs=e?.listGroup)==null?void 0:Xs.taskList)==null?void 0:Ui.label)!=null?Gi:"Task List",icon:(Hr=(Ml=(Ki=e?.listGroup)==null?void 0:Ki.taskList)==null?void 0:Ml.icon)!=null?Hr:zye,onRun:Be=>{const Ye=Be.get(at),ut=xo.type(Be);Ye.call(Ir.key),Ye.call(u0.key,{nodeType:ut,attrs:{checked:!1}})}})}if(e?.advancedGroup!==null){const He=Ne.addGroup("advanced",(Lc=(xs=e?.advancedGroup)==null?void 0:xs.label)!=null?Lc:"Advanced");(($c=e?.advancedGroup)==null?void 0:$c.image)!==null&&ke&&He.addItem("image",{label:(xi=(Bc=(Tl=e?.advancedGroup)==null?void 0:Tl.image)==null?void 0:Bc.label)!=null?xi:"Image",icon:(Hc=(Fc=(zc=e?.advancedGroup)==null?void 0:zc.image)==null?void 0:Fc.icon)!=null?Hc:S7,onRun:Be=>{const Ye=Be.get(at),ut=K2.type(Be);Ye.call(Ir.key),Ye.call(h0.key,{nodeType:ut})}}),((Vc=e?.advancedGroup)==null?void 0:Vc.codeBlock)!==null&&He.addItem("code",{label:(j=(ht=(wh=e?.advancedGroup)==null?void 0:wh.codeBlock)==null?void 0:ht.label)!=null?j:"Code",icon:(pn=(ot=(Le=e?.advancedGroup)==null?void 0:Le.codeBlock)==null?void 0:ot.icon)!=null?pn:qF,onRun:Be=>{const Ye=Be.get(at),ut=oa.type(Be);Ye.call(Ir.key),Ye.call(_a.key,{nodeType:ut})}}),((zn=e?.advancedGroup)==null?void 0:zn.table)!==null&&Pe&&He.addItem("table",{label:(ki=(Qn=(Nn=e?.advancedGroup)==null?void 0:Nn.table)==null?void 0:Qn.label)!=null?ki:"Table",icon:(er=(Mo=(Si=e?.advancedGroup)==null?void 0:Si.table)==null?void 0:Mo.icon)!=null?er:$ye,onRun:Be=>{const Ye=Be.get(at),ut=Be.get(Tn);Ye.call(Ir.key);const{from:tr}=ut.state.selection;Ye.call(h0.key,{nodeType:D6(Be,3,3)}),Ye.call(h$.key,{pos:tr})}}),((qc=e?.advancedGroup)==null?void 0:qc.math)!==null&&Q&&He.addItem("math",{label:(Km=(Gm=(wa=e?.advancedGroup)==null?void 0:wa.math)==null?void 0:Gm.label)!=null?Km:"Math",icon:(N=(q=(D=e?.advancedGroup)==null?void 0:D.math)==null?void 0:q.icon)!=null?N:YF,onRun:Be=>{const Ye=Be.get(at),ut=oa.type(Be);Ye.call(Ir.key),Ye.call(h0.key,{nodeType:ut,attrs:{language:"LaTex"}})}})}(K=e?.buildMenu)==null||K.call(e,Ne);let $e=Ne.build();t&&($e=$e.map(He=>{const Be=He.items.filter(Ye=>Ye.label.toLowerCase().includes(t.toLowerCase()));return{...He,items:Be}}).filter(He=>He.items.length>0));const We=$e.flatMap(He=>He.items);return We.forEach((He,Be)=>{Object.assign(He,{index:Be})}),$e.reduce((He,Be)=>{const Ye=He+Be.items.length;return Object.assign(Be,{range:[He,Ye]}),Ye},0),{groups:$e,size:We.length}}const Yye=xt({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:t,show:e,filter:n,hide:r,config:i}){const s=ae(),o=ue(()=>jye(n.value,i,t)),a=ae(0),l=ae({x:-999,y:-999}),c=m=>{const{x:g,y:v}=m;l.value={x:g,y:v}};Vt([o,e],()=>{const{size:m}=o.value;m===0&&e.value?r():a.value>=m&&(a.value=0)});const u=(m,g)=>{const v=a.value,b=typeof m=="function"?m(v):m;g?.(b),a.value=b},h=m=>{var g,v;const b=(g=s.value)==null?void 0:g.querySelector(`[data-index="${m}"]`),S=(v=s.value)==null?void 0:v.querySelector(".menu-groups");!b||!S||(S.scrollTop=b.offsetTop-S.offsetTop)},f=m=>{const g=o.value.groups.flatMap(v=>v.items).at(m);g&&t&&g.onRun(t),r()},d=m=>{const{size:g,groups:v}=o.value;if(m.key==="Escape"){m.preventDefault(),r?.();return}if(m.key==="ArrowDown")return m.preventDefault(),u(b=>b<g-1?b+1:b,h);if(m.key==="ArrowUp")return m.preventDefault(),u(b=>b<=0?b:b-1,h);if(m.key==="ArrowLeft")return m.preventDefault(),u(b=>{const S=v.find(k=>k.range[0]<=b&&k.range[1]>b);if(!S)return b;const O=v[v.indexOf(S)-1];return O?O.range[1]-1:b},h);if(m.key==="ArrowRight")return m.preventDefault(),u(b=>{const S=v.find(k=>k.range[0]<=b&&k.range[1]>b);if(!S)return b;const O=v[v.indexOf(S)+1];return O?O.range[0]:b},h);m.key==="Enter"&&(m.preventDefault(),f(a.value))},p=m=>g=>{const v=l.value;if(!v)return;const{x:b,y:S}=g;b===v.x&&S===v.y||u(m)};return Cc(()=>{e.value?window.addEventListener("keydown",d,{capture:!0}):window.removeEventListener("keydown",d,{capture:!0})}),la(()=>{window.removeEventListener("keydown",d,{capture:!0})}),()=>le("div",{ref:s,onPointerdown:m=>m.preventDefault()},le("nav",{class:"tab-group"},le("ul",null,o.value.groups.map(m=>le("li",{key:m.key,onPointerdown:()=>u(m.range[0],h),class:a.value>=m.range[0]&&a.value<m.range[1]?"selected":""},m.label)))),le("div",{class:"menu-groups",onPointermove:c},o.value.groups.map(m=>le("div",{key:m.key,class:"menu-group"},le("h6",null,m.label),le("ul",null,m.items.map(g=>le("li",{key:g.key,"data-index":g.index,class:a.value===g.index?"hover":"",onPointerenter:p(g.index),onPointerdown:()=>{var v,b;(b=(v=s.value)==null?void 0:v.querySelector(`[data-index="${g.index}"]`))==null||b.classList.add("active")},onPointerup:()=>{var v,b;(b=(v=s.value)==null?void 0:v.querySelector(`[data-index="${g.index}"]`))==null||b.classList.remove("active"),f(g.index)}},le(Nf,{icon:g.icon}),le("span",null,g.label))))))))}});var JF=t=>{throw TypeError(t)},eH=(t,e,n)=>e.has(t)||JF("Cannot "+n),Zs=(t,e,n)=>(eH(t,e,"read from private field"),n?n.call(t):e.get(t)),Hd=(t,e,n)=>e.has(t)?JF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),eu=(t,e,n,r)=>(eH(t,e,"write to private field"),e.set(t,n),n),x0,sv,ov,Ea,Fh;const tH=Ule("CREPE_MENU"),z8=bn({show:()=>{},hide:()=>{}},"menuAPICtx");function Qye(t,e){t.set(tH.key,{view:n=>new Uye(t,n,e)})}class Uye{constructor(e,n,r){Hd(this,x0),Hd(this,sv),Hd(this,ov),Hd(this,Ea),Hd(this,Fh,null),this.update=u=>{Zs(this,Ea).update(u)},this.show=u=>{eu(this,Fh,u),Zs(this,ov).value="",Zs(this,Ea).show()},this.hide=()=>{eu(this,Fh,null),Zs(this,Ea).hide()},this.destroy=()=>{Zs(this,Ea).destroy(),Zs(this,sv).unmount(),Zs(this,x0).remove()};const i=document.createElement("div");i.classList.add("milkdown-slash-menu");const s=ae(!1),o=ae("");eu(this,ov,o);const a=this.hide,l=Qs(Yye,{ctx:e,config:r,show:s,filter:o,hide:a});eu(this,sv,l),l.mount(i),eu(this,x0,i);const c=this;eu(this,Ea,new Gle({content:Zs(this,x0),debounce:20,shouldShow(u){if(UF(u.state.selection)||GF(u.state.selection))return!1;const h=this.getContent(u,d=>["paragraph","heading"].includes(d.type.name));if(h==null||!Gye(u.state.selection))return!1;const f=Zs(c,Fh);if(o.value=h.startsWith("/")?h.slice(1):h,typeof f=="number"){const d=u.state.doc.nodeSize-2,p=Math.min(f,d);return u.state.doc.resolve(p).node()!==u.state.doc.resolve(u.state.selection.from).node()?(eu(c,Fh,null),!1):!0}return!!h.startsWith("/")},offset:10})),Zs(this,Ea).onShow=()=>{s.value=!0},Zs(this,Ea).onHide=()=>{s.value=!1},this.update(n),e.set(z8.key,{show:u=>this.show(u),hide:()=>this.hide()})}}x0=new WeakMap;sv=new WeakMap;ov=new WeakMap;Ea=new WeakMap;Fh=new WeakMap;function Gye(t){if(!(t instanceof ct))return!1;const{$head:e}=t,n=e.parent;return e.parentOffset===n.content.size}const Kye=xt({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(t){const e=ae();return()=>le(wt,null,le("div",{ref:e,class:"operation-item",onPointerdown:n=>{var r;n.preventDefault(),n.stopPropagation(),(r=e.value)==null||r.classList.add("active")},onPointerup:n=>{var r;n.preventDefault(),n.stopPropagation(),(r=e.value)==null||r.classList.remove("active"),t.onAdd()}},le(Nf,{icon:t.addIcon})),le("div",{class:"operation-item"},le(Nf,{icon:t.handleIcon})))}});var nH=t=>{throw TypeError(t)},rH=(t,e,n)=>e.has(t)||nH("Cannot "+n),tu=(t,e,n)=>(rH(t,e,"read from private field"),n?n.call(t):e.get(t)),K1=(t,e,n)=>e.has(t)?nH("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),X1=(t,e,n,r)=>(rH(t,e,"write to private field"),e.set(t,n),n),av,au,lv,cv;class Xye{constructor(e,n){K1(this,av),K1(this,au),K1(this,lv),K1(this,cv),this.update=()=>{tu(this,au).update()},this.destroy=()=>{tu(this,au).destroy(),tu(this,av).remove(),tu(this,lv).unmount()},this.onAdd=()=>{const c=tu(this,cv),u=c.get(Tn);u.hasFocus()||u.focus();const{state:h,dispatch:f}=u,d=tu(this,au).active;if(!d)return;const m=d.$pos.pos+d.node.nodeSize;let g=h.tr.insert(m,wo.type(c).create());g=g.setSelection(ct.near(g.doc.resolve(m))),f(g.scrollIntoView()),tu(this,au).hide(),c.get(z8.key).show(g.selection.from)};var r,i,s;X1(this,cv,e);const o=document.createElement("div");o.classList.add("milkdown-block-handle");const a=Qs(Kye,{onAdd:this.onAdd,addIcon:(r=n?.handleAddIcon)!=null?r:C7,handleIcon:(i=n?.handleDragIcon)!=null?i:Pye});a.mount(o),X1(this,lv,a),X1(this,av,o);const l=(s=n?.blockHandle)!=null?s:{};X1(this,au,new kle({ctx:e,content:o,getOffset:()=>16,getPlacement:({active:c,blockDom:u})=>{if(c.node.type.name==="heading")return"left";let h=0;c.node.descendants(O=>{h+=O.childCount});const f=c.el,d=f.getBoundingClientRect(),p=u.getBoundingClientRect(),m=window.getComputedStyle(f),g=Number.parseInt(m.paddingTop,10)||0,v=Number.parseInt(m.paddingBottom,10)||0,b=d.height-g-v,S=p.height;return h>2||S<b?"left-start":"left"},...l})),this.update()}}av=new WeakMap;au=new WeakMap;lv=new WeakMap;cv=new WeakMap;function Zye(t,e){t.set(F2.key,{filterNodes:n=>!Jo(i=>["table","blockquote","math_inline"].includes(i.type.name))(n)}),t.set(q2.key,{view:()=>new Xye(t,e)})}const Jye=(t,e)=>{t.config(va(kn.BlockEdit)).config(n=>Zye(n,e)).config(n=>Qye(n,e)).use(z8).use(q2).use(tH)},e2e=(t,e={})=>{t.config(va(kn.CodeMirror)).config(n=>{const{languages:r=[],theme:i}=e,s=[ch.of($B.concat(BB)),dz];i&&s.push(i),e.extensions&&s.push(...e.extensions),n.update(Bm.key,o=>{var a;return{extensions:s,languages:r,expandIcon:e.expandIcon||HF,searchIcon:e.searchIcon||jF,clearSearchIcon:e.clearSearchIcon||VF,searchPlaceholder:e.searchPlaceholder||"Search language",copyText:e.copyText||"Copy",copyIcon:e.copyIcon||WF,onCopy:e.onCopy||(()=>{}),noResultText:e.noResultText||"No result",renderLanguage:e.renderLanguage||o.renderLanguage,renderPreview:e.renderPreview||o.renderPreview,previewToggleButton:l=>{var c,u;const h=((c=e.previewToggleIcon)==null?void 0:c.call(e,l))||(l?B8:QF),f=((u=e.previewToggleText)==null?void 0:u.call(e,l))||(l?"Edit":"Hide");return[h,f].map(d=>d.trim()).join(" ")},previewLabel:e.previewLabel||o.previewLabel,previewLoading:e.previewLoading||o.previewLoading,previewOnlyByDefault:(a=e.previewOnlyByDefault)!=null?a:o.previewOnlyByDefault}})}).use(w0e)},t2e=(t,e)=>{if(t.config(va(kn.Cursor)).config(r=>{r.update(ob.key,()=>{var i,s;return{class:"crepe-drop-cursor",width:(i=e?.width)!=null?i:4,color:(s=e?.color)!=null?s:!1}})}).use(Cme),e?.virtual===!1)return;const n=Ome();t.use(vr(()=>n))},n2e=(t,e)=>{t.config(va(kn.ImageBlock)).config(n=>{n.update(ab.key,r=>{var i,s,o,a,l,c;return{uploadButton:(i=e?.inlineUploadButton)!=null?i:"Upload",imageIcon:(s=e?.inlineImageIcon)!=null?s:S7,confirmButton:(o=e?.inlineConfirmButton)!=null?o:$8,uploadPlaceholderText:(a=e?.inlineUploadPlaceholderText)!=null?a:"or paste link",onUpload:(c=(l=e?.inlineOnUpload)!=null?l:e?.onUpload)!=null?c:r.onUpload,proxyDomURL:e?.proxyDomURL}}),n.update(G2.key,r=>{var i,s,o,a,l,c,u,h;return{uploadButton:(i=e?.blockUploadButton)!=null?i:"Upload file",imageIcon:(s=e?.blockImageIcon)!=null?s:S7,captionIcon:(o=e?.blockCaptionIcon)!=null?o:xye,confirmButton:(a=e?.blockConfirmButton)!=null?a:"Confirm",captionPlaceholderText:(l=e?.blockCaptionPlaceholderText)!=null?l:"Write Image Caption",uploadPlaceholderText:(c=e?.blockUploadPlaceholderText)!=null?c:"or paste link",onUpload:(h=(u=e?.blockOnUpload)!=null?u:e?.onUpload)!=null?h:r.onUpload,proxyDomURL:e?.proxyDomURL}})}).use($ce).use(zme)},r2e=oa.extendSchema(t=>e=>{const n=t(e);return{...n,toMarkdown:{match:n.toMarkdown.match,runner:(r,i)=>{var s,o;if(((s=i.attrs.language)!=null?s:"").toLowerCase()==="latex")r.addNode("math",void 0,((o=i.content.firstChild)==null?void 0:o.text)||"");else return n.toMarkdown.runner(r,i)}}}}),k0="math_inline",om=cr(k0,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${k0}"]`,getAttrs:t=>{var e;return{value:(e=t.dataset.value)!=null?e:""}}}],toDOM:t=>{const e=t.attrs.value,n=document.createElement("span");return n.dataset.type=k0,n.dataset.value=e,gF.render(e,n,{throwOnError:!1}),n},parseMarkdown:{match:t=>t.type==="inlineMath",runner:(t,e,n)=>{t.addNode(n,{value:e.value})}},toMarkdown:{match:t=>t.type.name===k0,runner:(t,e)=>{t.addNode("inlineMath",void 0,e.attrs.value)}}})),iH=_t("ToggleLatex",t=>()=>(e,n)=>{const{hasNode:r,pos:i,target:s}=KN(e,om.type(t)),{selection:o,doc:a,tr:l}=e;if(!r){const d=a.textBetween(o.from,o.to);let p=l.replaceSelectionWith(om.type(t).create({value:d}));return n&&n(p.setSelection(yt.create(p.doc,o.from))),!0}const{from:c,to:u}=o;if(!s||i<0)return!1;let h=l.delete(i,i+1);const f=s.attrs.value;return h=h.insertText(f,i),n&&n(h.setSelection(ct.create(h.doc,c,u+f.length-1))),!0}),WA=gb("INLINE_LATEX"),i2e=xt({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(t){const e=r=>{if(!(!r||!(r instanceof HTMLElement))){for(;r.firstChild;)r.removeChild(r.firstChild);t.innerView.value&&r.appendChild(t.innerView.value.dom)}},n=r=>{r.preventDefault(),t.updateValue.value()};return()=>le("div",{class:"container"},t.innerView&&le("div",{ref:e}),le("button",{type:"button",onPointerdown:n},le(Nf,{icon:t.config.inlineEditConfirm})))}});var sH=t=>{throw TypeError(t)},oH=(t,e,n)=>e.has(t)||sH("Cannot "+n),Sr=(t,e,n)=>(oH(t,e,"read from private field"),n?n.call(t):e.get(t)),Nl=(t,e,n)=>e.has(t)?sH("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Z1=(t,e,n,r)=>(oH(t,e,"write to private field"),e.set(t,n),n),S0,Hh,uv,lu,C0,O0,M7,T7;class s2e{constructor(e,n,r){this.ctx=e,Nl(this,S0),Nl(this,Hh),Nl(this,uv),Nl(this,lu,Ou(null)),Nl(this,C0,Ou(()=>{})),Nl(this,O0),Nl(this,M7,()=>{Sr(this,lu).value&&(Sr(this,lu).value.destroy(),Sr(this,lu).value=null)}),Nl(this,T7,s=>{const a=(()=>{const{selection:l,schema:c}=s.state;if(l.empty||!(l instanceof yt))return!1;const u=l.node;if(u.type.name!==k0)return!1;const h=l.from,f=c.nodes.paragraph.create(null,c.text(u.attrs.value)),d=new Ok(Sr(this,uv),{state:tc.create({doc:f,schema:new CN({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},text:{group:"inline"}}}),plugins:[FR({"Mod-z":ib,"Mod-Z":Lf,"Mod-y":Lf,Enter:()=>(Sr(this,C0).value(),!0)})]})});return Sr(this,lu).value=d,Sr(this,C0).value=()=>{const{tr:p}=s.state;p.setNodeAttribute(h,"value",d.state.doc.textContent),s.dispatch(p),requestAnimationFrame(()=>{s.focus()})},!0})();return a||Sr(this,M7).call(this),a}),this.update=(s,o)=>{Sr(this,Hh).update(s,o)},this.destroy=()=>{Sr(this,O0).unmount(),Sr(this,Hh).destroy(),Sr(this,S0).remove()};const i=document.createElement("div");i.className="milkdown-latex-inline-edit",Z1(this,S0,i),Z1(this,O0,Qs(i2e,{config:r,innerView:Sr(this,lu),updateValue:Sr(this,C0)})),Sr(this,O0).mount(i),Z1(this,Hh,new mb({debounce:0,content:Sr(this,S0),shouldShow:Sr(this,T7),offset:10,floatingUIOptions:{placement:"bottom"}})),Sr(this,Hh).update(n),Z1(this,uv,document.createElement("div"))}}S0=new WeakMap;Hh=new WeakMap;uv=new WeakMap;lu=new WeakMap;C0=new WeakMap;O0=new WeakMap;M7=new WeakMap;T7=new WeakMap;const o2e=Zr(t=>bte(/(?:\$)([^$]+)(?:\$)$/,om.type(t),{getAttr:e=>{var n;return{value:(n=e[1])!=null?n:""}}})),a2e=Zr(t=>ek(/^\$\$[\s\n]$/,oa.type(t),()=>({language:"LaTeX"}))),l2e=ha("remarkMath",()=>Gge);function c2e(t){return Ac(t,"math",(e,n,r)=>{const{value:i}=e,s={type:"code",lang:"LaTeX",value:i};r.children.splice(n,1,s)})}const u2e=ha("remarkMathBlock",()=>()=>c2e),h2e=(t,e)=>{t.config(va(kn.Latex)).config(n=>{if(!kb(n).get().includes(kn.CodeMirror))throw new Error("You need to enable CodeMirror to use LaTeX feature");n.update(Bm.key,s=>({...s,renderPreview:(o,a,l)=>{if(o.toLowerCase()==="latex"&&a.length>0)return f2e(a,e?.katexOptions);const c=s.renderPreview;return c(o,a,l)}})),n.set(WA.key,{view:s=>{var o;return new s2e(n,s,{inlineEditConfirm:(o=e?.inlineEditConfirm)!=null?o:$8,...e})}})}).use(l2e).use(u2e).use(om).use(WA).use(o2e).use(a2e).use(r2e).use(iH)};function f2e(t,e){return gF.renderToString(t,{...e,throwOnError:!1,displayMode:!0})}const d2e=(t,e)=>{t.config(va(kn.LinkTooltip)).config(Mve).config(n=>{n.update(Hf.key,r=>{var i,s,o,a,l,c;return{...r,linkIcon:(i=e?.linkIcon)!=null?i:WF,editButton:(s=e?.editButton)!=null?s:B8,removeButton:(o=e?.removeButton)!=null?o:O7,confirmButton:(a=e?.confirmButton)!=null?a:$8,inputPlaceholder:(l=e?.inputPlaceholder)!=null?l:"Paste link...",onCopyLink:(c=e?.onCopyLink)!=null?c:(()=>{})}})}).use(Tve)};function p2e(t,e){t.set(yb.key,{renderLabel:({label:n,listType:r,checked:i})=>{var s,o,a;return i==null?r==="bullet"?(s=e?.bulletIcon)!=null?s:bye:n:i?(o=e?.checkBoxCheckedIcon)!=null?o:kye:(a=e?.checkBoxUncheckedIcon)!=null?a:Sye}})}const m2e=(t,e)=>{t.config(va(kn.ListItem)).config(n=>p2e(n,e)).use(Nve)};function g2e(t){var e;return t.childCount<=1&&!((e=t.firstChild)!=null&&e.content.size)}function v2e(t,e){const{selection:n}=t;if(!n.empty)return null;const r=n.$anchor,i=r.parent;if(i.content.size>0||Jo(a=>a.type.name==="table")(r))return null;const o=r.before();return pr.node(o,o+i.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const A7=bn({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),y2e=vr(t=>new Wn({key:new jn("CREPE_PLACEHOLDER"),props:{decorations:e=>{var n;if(qye(t).readonly)return null;const i=t.get(A7.key);if(i.mode==="doc"&&!g2e(e.doc)||UF(e.selection)||GF(e.selection))return null;const s=(n=i.text)!=null?n:"Please enter...",o=v2e(e,s);return o?Mn.create(e.doc,[o]):null}}})),b2e=(t,e)=>{t.config(va(kn.Placeholder)).config(n=>{e&&n.update(A7.key,r=>({...r,...e}))}).use(y2e).use(A7)},w2e=(t,e)=>{t.config(va(kn.Table)).config(n=>{n.update(bb.key,r=>({...r,renderButton:i=>{var s,o,a,l,c,u,h,f,d;switch(i){case"add_row":return(s=e?.addRowIcon)!=null?s:C7;case"add_col":return(o=e?.addColIcon)!=null?o:C7;case"delete_row":return(a=e?.deleteRowIcon)!=null?a:O7;case"delete_col":return(l=e?.deleteColIcon)!=null?l:O7;case"align_col_left":return(c=e?.alignLeftIcon)!=null?c:gye;case"align_col_center":return(u=e?.alignCenterIcon)!=null?u:mye;case"align_col_right":return(h=e?.alignRightIcon)!=null?h:vye;case"col_drag_handle":return(f=e?.colDragHandleIcon)!=null?f:VA;case"row_drag_handle":return(d=e?.rowDragHandleIcon)!=null?d:VA}}}))}).use(aye)};function x2e(t,e){var n,r,i,s,o,a,l;const c=new ZF;c.addGroup("formatting","Formatting").addItem("bold",{icon:(n=t?.boldIcon)!=null?n:yye,active:d=>d.get(at).call(Ph.key,rd.type(d)),onRun:d=>{d.get(at).call(j2.key)}}).addItem("italic",{icon:(r=t?.italicIcon)!=null?r:Eye,active:d=>d.get(at).call(Ph.key,hh.type(d)),onRun:d=>{d.get(at).call(W2.key)}}).addItem("strikethrough",{icon:(i=t?.strikethroughIcon)!=null?i:Lye,active:d=>d.get(at).call(Ph.key,ad.type(d)),onRun:d=>{d.get(at).call(Z2.key)}});const u=c.addGroup("function","Function");u.addItem("code",{icon:(s=t?.codeIcon)!=null?s:qF,active:d=>d.get(at).call(Ph.key,ja.type(d)),onRun:d=>{d.get(at).call(Y2.key)}});const h=e&&kb(e).get();return h?.includes(kn.Latex)&&u.addItem("latex",{icon:(o=t?.latexIcon)!=null?o:YF,active:d=>d.get(at).call(u$.key,om.type(d)),onRun:d=>{d.get(at).call(iH.key)}}),u.addItem("link",{icon:(a=t?.linkIcon)!=null?a:Iye,active:d=>d.get(at).call(Ph.key,co.type(d)),onRun:d=>{d.get(at).call(vF.key)}}),(l=t?.buildToolbar)==null||l.call(t,c),c.build()}const k2e=xt({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(t){const{ctx:e,config:n}=t,r=o=>a=>{a.preventDefault(),e&&o(e)};function i(o){return t.selection.value,e.get(V3).status!==oy.Created?!1:o(e)}const s=ue(()=>x2e(n,e));return()=>le(wt,null,s.value.map(o=>o.items.map(a=>le("button",{type:"button",class:Kr("toolbar-item",e&&i(a.active)&&"active"),onPointerdown:r(a.onRun)},le(Nf,{icon:a.icon})))).reduce((o,a,l)=>(l===0?o.push(...a):o.push(le("div",{class:"divider"}),...a),o),[]))}});var aH=t=>{throw TypeError(t)},lH=(t,e,n)=>e.has(t)||aH("Cannot "+n),Zi=(t,e,n)=>(lH(t,e,"read from private field"),n?n.call(t):e.get(t)),Vd=(t,e,n)=>e.has(t)?aH("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),J1=(t,e,n,r)=>(lH(t,e,"write to private field"),e.set(t,n),n),zl,M0,hv,T0,A0;const jA=gb("CREPE_TOOLBAR");class S2e{constructor(e,n,r){Vd(this,zl),Vd(this,M0),Vd(this,hv),Vd(this,T0),Vd(this,A0,ae(!1)),this.update=(o,a)=>{Zi(this,zl).update(o,a),Zi(this,T0).value=o.state.selection},this.destroy=()=>{Zi(this,zl).destroy(),Zi(this,hv).unmount(),Zi(this,M0).remove()},this.hide=()=>{Zi(this,zl).hide()};const i=document.createElement("div");i.className="milkdown-toolbar",J1(this,T0,Ou(n.state.selection));const s=Qs(k2e,{ctx:e,hide:this.hide,config:r,selection:Zi(this,T0),show:Zi(this,A0)});s.mount(i),J1(this,M0,i),J1(this,hv,s),J1(this,zl,new mb({content:Zi(this,M0),debounce:20,offset:10,shouldShow(o){const{doc:a,selection:l}=o.state,{empty:c,from:u,to:h}=l,f=!a.textBetween(u,h).length&&l instanceof ct,d=!(l instanceof ct),p=o.dom.getRootNode().activeElement,m=i.contains(p),g=!o.hasFocus()&&!m,v=!o.editable;return!(g||d||c||f||v)}})),Zi(this,zl).onShow=()=>{Zi(this,A0).value=!0},Zi(this,zl).onHide=()=>{Zi(this,A0).value=!1},this.update(n)}}zl=new WeakMap;M0=new WeakMap;hv=new WeakMap;T0=new WeakMap;A0=new WeakMap;const C2e=(t,e)=>{t.config(va(kn.Toolbar)).config(n=>{n.set(jA.key,{view:r=>new S2e(n,r,e)})}).use(jA)};function O2e(t,e,n){switch(t){case kn.CodeMirror:return e2e(e,n);case kn.ListItem:return m2e(e,n);case kn.LinkTooltip:return d2e(e,n);case kn.ImageBlock:return n2e(e,n);case kn.Cursor:return t2e(e,n);case kn.BlockEdit:return Jye(e,n);case kn.Placeholder:return b2e(e,n);case kn.Toolbar:return C2e(e,n);case kn.Table:return w2e(e,n);case kn.Latex:return h2e(e,n)}}var cH=t=>{throw TypeError(t)},uH=(t,e,n)=>e.has(t)||cH("Cannot "+n),Ji=(t,e,n)=>(uH(t,e,"read from private field"),n?n.call(t):e.get(t)),F5=(t,e,n)=>e.has(t)?cH("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),H5=(t,e,n,r)=>(uH(t,e,"write to private field"),e.set(t,n),n),ts,fv,_0;class M2e{constructor({root:e,defaultValue:n=""}={}){F5(this,ts),F5(this,fv),F5(this,_0,!0),this.addFeature=(i,s)=>(i(Ji(this,ts),s),this),this.create=()=>Ji(this,ts).create(),this.destroy=()=>Ji(this,ts).destroy(),this.setReadonly=i=>(H5(this,_0,!i),Ji(this,ts).action(s=>{Ji(this,ts).status===oy.Created&&s.get(Tn).setProps({editable:()=>!i})}),this),this.getMarkdown=()=>Ji(this,ts).action(Aae()),this.on=i=>Ji(this,ts).status!==oy.Created?(Ji(this,ts).config(s=>{const o=s.get(Ty);i(o)}),this):(Ji(this,ts).action(s=>{const o=s.get(Ty);i(o)}),this);var r;H5(this,fv,(r=typeof e=="string"?document.querySelector(e):e)!=null?r:document.body),H5(this,ts,Mk.make().config(i=>{i.inject(Vye,this),i.inject(Hye,[])}).config(i=>{i.set(Fg,Ji(this,fv)),i.set(Rg,n),i.set(ap,{editable:()=>Ji(this,_0)}),i.update(xb.key,s=>({...s,size:4}))}).use(Qle).use(zF).use(cye).use(hye).use(dye).use(RF).use(zfe))}get editor(){return Ji(this,ts)}get readonly(){return!Ji(this,_0)}}ts=new WeakMap;fv=new WeakMap;_0=new WeakMap;class F8 extends M2e{constructor({features:e={},featureConfigs:n={},...r}={}){super(r);const i=gG(n,Fye);Object.entries({...pye,...e}).filter(([,o])=>o).map(([o])=>o).forEach(o=>{const a=i[o];O2e(o,this.editor,a)})}}F8.Feature=kn;const ei=({variant:t,settings:e,styles:n})=>{const r=Ze.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:t==="dark"}),i=Jf.define(n);return[r,jx(i)]};ei({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:x.comment,color:"#404080"},{tag:[x.string,x.regexp],color:"#999999"},{tag:x.number,color:"#7090B0"},{tag:[x.bool,x.null],color:"#8080A0"},{tag:[x.punctuation,x.derefOperator],color:"#805080"},{tag:x.keyword,color:"#60B0FF"},{tag:x.definitionKeyword,color:"#B0FFF0"},{tag:x.moduleKeyword,color:"#60B0FF"},{tag:x.operator,color:"#A0A0FF"},{tag:[x.variableName,x.self],color:"#008080"},{tag:x.operatorKeyword,color:"#A0A0FF"},{tag:x.controlKeyword,color:"#80A0FF"},{tag:x.className,color:"#70E080"},{tag:[x.function(x.propertyName),x.propertyName],color:"#50A0A0"},{tag:x.tagName,color:"#009090"},{tag:x.modifier,color:"#B0FFF0"},{tag:[x.squareBracket,x.attributeName],color:"#D0D0FF"}]});ei({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:x.comment,color:"#787b8099"},{tag:x.string,color:"#86b300"},{tag:x.regexp,color:"#4cbf99"},{tag:[x.number,x.bool,x.null],color:"#ffaa33"},{tag:x.variableName,color:"#5c6166"},{tag:[x.definitionKeyword,x.modifier],color:"#fa8d3e"},{tag:[x.keyword,x.special(x.brace)],color:"#fa8d3e"},{tag:x.operator,color:"#ed9366"},{tag:x.separator,color:"#5c6166b3"},{tag:x.punctuation,color:"#5c6166"},{tag:[x.definition(x.propertyName),x.function(x.variableName)],color:"#f2ae49"},{tag:[x.className,x.definition(x.typeName)],color:"#22a4e6"},{tag:[x.tagName,x.typeName,x.self,x.labelName],color:"#55b4d4"},{tag:x.angleBracket,color:"#55b4d480"},{tag:x.attributeName,color:"#f2ae49"}]});ei({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:x.comment,color:"#6E6E6E"},{tag:[x.string,x.regexp,x.special(x.brace)],color:"#5C81B3"},{tag:x.number,color:"#C1E1B8"},{tag:x.bool,color:"#53667D"},{tag:[x.definitionKeyword,x.modifier,x.function(x.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[x.keyword,x.moduleKeyword,x.operatorKeyword,x.operator],color:"#697A8E",fontWeight:"bold"},{tag:[x.variableName,x.attributeName],color:"#708E67"},{tag:[x.function(x.variableName),x.definition(x.propertyName),x.derefOperator],color:"#fff"},{tag:x.tagName,color:"#A3D295"}]});ei({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:x.comment,color:"#666666"},{tag:[x.string,x.special(x.brace)],color:"#54BE0D"},{tag:x.regexp,color:"#E9C062"},{tag:x.number,color:"#CF6A4C"},{tag:[x.keyword,x.operator],color:"#5EA6EA"},{tag:x.variableName,color:"#7587A6"},{tag:[x.definitionKeyword,x.modifier],color:"#F9EE98"},{tag:[x.propertyName,x.function(x.variableName)],color:"#937121"},{tag:[x.typeName,x.angleBracket,x.tagName],color:"#9B859D"}]});ei({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:x.comment,color:"#6B4E32"},{tag:[x.keyword,x.operator,x.derefOperator],color:"#EF5D32"},{tag:x.className,color:"#EFAC32",fontWeight:"bold"},{tag:[x.typeName,x.propertyName,x.function(x.variableName),x.definition(x.variableName)],color:"#EFAC32"},{tag:x.definition(x.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:x.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[x.number,x.bool],color:"#6C99BB"},{tag:[x.variableName,x.self],color:"#7DAF9C"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#D9D762"},{tag:[x.angleBracket,x.tagName,x.attributeName],color:"#EFCB43"}]});ei({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:x.comment,color:"#404040"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#00D8FF"},{tag:x.number,color:"#E62286"},{tag:[x.variableName,x.attributeName,x.self],color:"#E62286",fontWeight:"bold"},{tag:x.function(x.variableName),color:"#fff",fontWeight:"bold"}]});const H8=ei({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:x.comment,color:"#BCC8BA"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#5D90CD"},{tag:[x.number,x.bool,x.null],color:"#46A609"},{tag:x.keyword,color:"#AF956F"},{tag:[x.definitionKeyword,x.modifier],color:"#C52727"},{tag:[x.angleBracket,x.tagName,x.attributeName],color:"#606060"},{tag:x.self,color:"#000"}]});ei({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:x.comment,color:"#0088FF"},{tag:x.string,color:"#3AD900"},{tag:x.regexp,color:"#80FFC2"},{tag:[x.number,x.bool,x.null],color:"#FF628C"},{tag:[x.definitionKeyword,x.modifier],color:"#FFEE80"},{tag:x.variableName,color:"#CCCCCC"},{tag:x.self,color:"#FF80E1"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.definition(x.typeName),x.labelName],color:"#FFDD00"},{tag:[x.keyword,x.operator],color:"#FF9D00"},{tag:[x.propertyName,x.typeName],color:"#80FFBB"},{tag:x.special(x.brace),color:"#EDEF7D"},{tag:x.attributeName,color:"#9EFFFF"},{tag:x.derefOperator,color:"#fff"}]});const V8=ei({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:x.comment,color:"#AEAEAE"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#8DFF8E"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.function(x.definition(x.variableName)),x.definition(x.typeName)],color:"#A3EBFF"},{tag:[x.number,x.bool,x.null],color:"#62E9BD"},{tag:[x.keyword,x.operator],color:"#2BF1DC"},{tag:[x.definitionKeyword,x.modifier],color:"#F8FBB1"},{tag:[x.variableName,x.self],color:"#B683CA"},{tag:[x.angleBracket,x.tagName,x.typeName,x.propertyName],color:"#60A4F1"},{tag:x.derefOperator,color:"#E0E0E0"},{tag:x.attributeName,color:"#7BACCA"}]});ei({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:x.comment,color:"#6272a4"},{tag:[x.string,x.special(x.brace)],color:"#f1fa8c"},{tag:[x.number,x.self,x.bool,x.null],color:"#bd93f9"},{tag:[x.keyword,x.operator],color:"#ff79c6"},{tag:[x.definitionKeyword,x.typeName],color:"#8be9fd"},{tag:x.definition(x.typeName),color:"#f8f8f2"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.attributeName],color:"#50fa7b"}]});ei({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:x.comment,color:"#AAAAAA"},{tag:[x.keyword,x.operator,x.typeName,x.tagName,x.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[x.attributeName,x.definition(x.propertyName)],color:"#4F9FD0"},{tag:[x.className,x.string,x.special(x.brace)],color:"#CF4F5F"},{tag:x.number,color:"#CF4F5F",fontWeight:"bold"},{tag:x.variableName,fontWeight:"bold"}]});ei({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:x.comment,color:"#9995b7"},{tag:x.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[x.definitionKeyword,x.modifier],color:"#ff5792"},{tag:[x.className,x.tagName,x.definition(x.typeName)],color:"#0094f0"},{tag:[x.number,x.bool,x.null,x.special(x.brace)],color:"#5842ff"},{tag:[x.definition(x.propertyName),x.function(x.variableName)],color:"#0095a8"},{tag:x.typeName,color:"#b3694d"},{tag:[x.propertyName,x.variableName],color:"#fa8900"},{tag:x.operator,color:"#ff5792"},{tag:x.self,color:"#e64100"},{tag:[x.string,x.regexp],color:"#00b368"},{tag:[x.paren,x.bracket],color:"#0431fa"},{tag:x.labelName,color:"#00bdd6"},{tag:x.attributeName,color:"#e64100"},{tag:x.angleBracket,color:"#9995b7"}]});ei({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:x.comment,color:"#9893a5"},{tag:[x.bool,x.null],color:"#286983"},{tag:x.number,color:"#d7827e"},{tag:x.className,color:"#d7827e"},{tag:[x.angleBracket,x.tagName,x.typeName],color:"#56949f"},{tag:x.attributeName,color:"#907aa9"},{tag:x.punctuation,color:"#797593"},{tag:[x.keyword,x.modifier],color:"#286983"},{tag:[x.string,x.regexp],color:"#ea9d34"},{tag:x.variableName,color:"#d7827e"}]});ei({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:x.comment,color:"#CFCFCF"},{tag:[x.number,x.bool,x.null],color:"#E66C29"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.labelName,x.definition(x.typeName)],color:"#2EB43B"},{tag:x.keyword,color:"#D8B229"},{tag:x.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[x.definitionKeyword,x.modifier],color:"#925A47"},{tag:x.string,color:"#704D3D"},{tag:x.typeName,color:"#2F8996"},{tag:[x.variableName,x.propertyName],color:"#77ACB0"},{tag:x.self,color:"#77ACB0",fontWeight:"bold"},{tag:x.regexp,color:"#E3965E"},{tag:[x.tagName,x.angleBracket],color:"#BAA827"},{tag:x.attributeName,color:"#B06520"},{tag:x.derefOperator,color:"#000"}]});ei({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:x.comment,color:"#93A1A1"},{tag:x.string,color:"#2AA198"},{tag:x.regexp,color:"#D30102"},{tag:x.number,color:"#D33682"},{tag:x.variableName,color:"#268BD2"},{tag:[x.keyword,x.operator,x.punctuation],color:"#859900"},{tag:[x.definitionKeyword,x.modifier],color:"#073642",fontWeight:"bold"},{tag:[x.className,x.self,x.definition(x.propertyName)],color:"#268BD2"},{tag:x.function(x.variableName),color:"#268BD2"},{tag:[x.bool,x.null],color:"#B58900"},{tag:x.tagName,color:"#268BD2",fontWeight:"bold"},{tag:x.angleBracket,color:"#93A1A1"},{tag:x.attributeName,color:"#93A1A1"},{tag:x.typeName,color:"#859900"}]});ei({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:x.comment,color:"#8E908C"},{tag:[x.variableName,x.self,x.propertyName,x.attributeName,x.regexp],color:"#C82829"},{tag:[x.number,x.bool,x.null],color:"#F5871F"},{tag:[x.className,x.typeName,x.definition(x.typeName)],color:"#C99E00"},{tag:[x.string,x.special(x.brace)],color:"#718C00"},{tag:x.operator,color:"#3E999F"},{tag:[x.definition(x.propertyName),x.function(x.variableName)],color:"#4271AE"},{tag:x.keyword,color:"#8959A8"},{tag:x.derefOperator,color:"#4D4D4C"}]});const T2e={class:"eM"},A2e={class:"b"},_2e={class:"q"},D2e={class:"a"},E2e={class:"i"},hH=xt({__name:"Editor",props:{id:{type:String,required:!0},type:{type:String,default:"note"},label:{type:String,default:""}},setup(t){function e(m){return function(g){g.ctrlKey&&g.key=="s"&&(g.preventDefault(),i(m)),g.key=="f11"&&(g.preventDefault(),BE())}}const n=t,r=n.id;async function i(m,g){const v=m.getMarkdown();if(n.type=="note")await Rt.updateNote(br.value,r,{content:v});else if(n.type=="diary"){if(v.trim()=="")return;await Rt.getDiary(Rt.getDiaryDate(r))||await Rt.createDiary(n.label),await Rt.updateDiary(r,{content:v,label:n.label}),Qt.emit("diary-updated",{id:r})}g=="auto"?Qt.emit("toast",pt("autosave")+" at "+hc().format("YYYY/MM/DD HH:mm:ss")):Qt.emit("toast",pt("saved")+" at "+hc().format("YYYY/MM/DD HH:mm:ss"))}$E(m=>{const g=new F8({root:m,defaultValue:"",featureConfigs:{"code-mirror":{theme:Ua.value=="dark"?V8:H8},"block-edit":{blockHandle:{getPlacement:()=>"left-start"},...fx[Ha.value].editor}}});return g.create().then(()=>{Rt.getContent(r).then(O=>{O=O||"",g.editor.action(_ae(O))});let v=e(g),b=O=>i(g,O),S=()=>{Qt.emit("toast",pt("charstat")+`${s(g.getMarkdown()).length}`)};o=async()=>{document.removeEventListener("keydown",v),Qt.off("save",b),Qt.off("stat",S),await i(g),Qt.emit("toast",pt("autosavelast")),g.destroy()},document.addEventListener("keydown",v),Qt.on("save",b),Qt.on("stat",S)}),d(g),g});function s(m){return m.replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[.*?\]\(.*?\)/g,"").replace(/`{1,3}.*?`{1,3}/gs,"").replace(/>\s?(.+)/g,"$1").replace(/#+\s?(.+)/g,"$1").replace(/[-*+]\s?(.+)/g,"$1").replace(/\d+\.\s?(.+)/g,"$1").replace(/<[^>]+>/g,"").replace(/\n+/g,`
`).trim()}let o=async()=>{};dm(()=>{o()});const a=ae(!1),l=ae(""),c=ae(""),u=ae("");let h;function f(){l.value=u.value,u.value="";let m=setInterval(()=>{let g=["AI...","...","...","AI..."];c.value=g[Math.floor(Math.random()*g.length)]||""},1e3);h&&h.abort(),h=p({url:"https://yunzhiapi.cn/API/doubao.php",data:{token:"pBzGDf712Gwc",question:l.value,system:`200
${d().getMarkdown()}`},cb(g){clearInterval(m),c.value=g},err(){c.value="AI~"}})}let d=m=>{d=function(){return m}};function p(m){const g=new URLSearchParams(m.data),v=new AbortController;return fetch(m.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g,signal:v.signal}).then(b=>{if(!b.ok)throw new Error(`HTTP : ${b.status}`);return b.text()}).then(b=>{m.cb(b)}).catch(()=>{m.err()}),{abort(){v.abort()}}}return Qt.on("ai-assist",()=>{a.value=!0}),(m,g)=>(me(),Ie(wt,null,[oe("div",T2e,[_e(U(LE))]),oe("div",{class:Lt(["ai-dialog",{aishow:a.value}])},[oe("div",{class:"close-btn",onClick:g[0]||(g[0]=v=>a.value=!1)},[_e(qn,{name:"close"})]),oe("div",A2e,[oe("div",_2e,Et(l.value),1),oe("div",D2e,Et(c.value),1),g[3]||(g[3]=oe("div",{class:"float-clear"},null,-1))]),oe("div",E2e,[rl(oe("input",{type:"text","onUpdate:modelValue":g[1]||(g[1]=v=>u.value=v)},null,512),[[Bu,u.value]]),oe("button",{onClick:g[2]||(g[2]=v=>f())},"")])],2)],64))}}),I2e={class:"select-down-wrapper"},P2e={class:"select-down-label"},N2e={key:0,class:"select-down-menu"},R2e=["onClick"],L2e=xt({__name:"SelectDown",props:nx({options:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,n=$u(t,"modelValue"),r=ue(()=>{const o=e.options.find(a=>a.value===n.value);return o?o.label:pt("selecting")}),i=ae(!1),s=o=>{n.value=o,i.value=!1};return(o,a)=>(me(),Ie("div",I2e,[oe("div",{class:"select-down-header",onClick:a[0]||(a[0]=l=>i.value=!i.value)},[oe("span",P2e,Et(r.value),1),oe("span",{class:Lt(["select-down-icon",{open:i.value}])},"",2)]),_e(ax,{name:"slide"},{default:en(()=>[i.value?(me(),Ie("div",N2e,[(me(!0),Ie(wt,null,Tr(t.options,l=>(me(),Ie("div",{key:l.value,class:Lt(["select-down-item",{active:n.value===l.value}]),onClick:c=>s(l.value)},Et(l.label),11,R2e))),128))])):hn("",!0)]),_:1})]))}}),V5=cx(L2e,[["__scopeId","data-v-173ab798"]]),$2e={class:"setting-item"},B2e={class:"setting-left"},z2e={class:"title"},F2e={class:"desc"},H2e={class:"setting-right"},Ma=xt({__name:"SettingItem",props:{title:{},desc:{}},setup(t){return(e,n)=>(me(),Ie("div",$2e,[oe("div",B2e,[oe("div",z2e,Et(t.title),1),oe("div",F2e,Et(t.desc),1)]),oe("div",H2e,[oh(e.$slots,"default")]),n[0]||(n[0]=oe("div",{class:"float-clear"},null,-1))]))}}),V2e={},q2e={class:"warn-text"};function W2e(t,e){return me(),Ie("div",q2e,[oh(t.$slots,"default")])}const j2e=cx(V2e,[["render",W2e]]),fH="miki-user-csslist";function dH(){return JSON.parse(localStorage.getItem(fH)||"[]")}function Y2e(t){localStorage.setItem(fH,JSON.stringify(t)),pH()}function pH(){let t=dH();document.querySelectorAll("style.user-css").forEach(e=>{let n=t.find(r=>r.id==e.getAttribute("data-id"));n&&n.enabled||e.remove()}),t.forEach(e=>{e.enabled&&(document.querySelector('style.user-css[data-id="'+e.id+'"]')||Q2e(e.id))})}pH();function Q2e(t){let e=document.createElement("style");Jt.getItem(t).then(n=>{e.innerHTML=n}),e.classList.add("user-css"),e.setAttribute("data-id",t),document.head.append(e)}async function _7(t,e){await Jt.setItem(t,e);let n=document.querySelector('style.user-css[data-id="'+t+'"]');n&&(n.innerHTML=e)}async function U2e(t){return await Jt.getItem(t)}var G2e=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[dz]}),K2e=Symbol("vue-codemirror-global-config"),li,X2e=function(t){var e=t.onUpdate,n=t.onChange,r=t.onFocus,i=t.onBlur,s=(function(o,a){var l={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&a.indexOf(c)<0&&(l[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var u=0;for(c=Object.getOwnPropertySymbols(o);u<c.length;u++)a.indexOf(c[u])<0&&Object.prototype.propertyIsEnumerable.call(o,c[u])&&(l[c[u]]=o[c[u]])}return l})(t,["onUpdate","onChange","onFocus","onBlur"]);return Sn.create({doc:s.doc,selection:s.selection,extensions:(Array.isArray(s.extensions)?s.extensions:[s.extensions]).concat([Ze.updateListener.of((function(o){e(o),o.docChanged&&n(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?r(o):i(o))}))])})},Vh=function(t){var e=new Fu;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:It.appendConfig.of(e.of(n))})}}},YA=function(t,e){var n=Vh(t),r=n.compartment,i=n.run;return function(s){var o=r.get(t.state);i(s??o!==e?e:[])}},eg={type:Boolean,default:void 0},Z2e={autofocus:eg,disabled:eg,indentWithTab:eg,tabSize:Number,placeholder:String,style:Object,autoDestroy:eg,phrases:Object,root:Object,extensions:Array,selection:Object},J2e={modelValue:{type:String,default:""}},ebe=Object.assign(Object.assign({},Z2e),J2e);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(li||(li={}));var pu={};pu[li.Change]=function(t,e){return!0},pu[li.Update]=function(t){return!0},pu[li.Focus]=function(t){return!0},pu[li.Blur]=function(t){return!0},pu[li.Ready]=function(t){return!0};var mH={};mH[li.ModelUpdate]=pu[li.Change];var tbe=Object.assign(Object.assign({},pu),mH),nbe=xt({name:"VueCodemirror",props:Object.assign({},ebe),emits:Object.assign({},tbe),setup:function(t,e){var n=Ou(),r=Ou(),i=Ou(),s=Object.assign(Object.assign({},G2e),Rs(K2e,{})),o=ue((function(){var a={};return Object.keys(tn(t)).forEach((function(l){var c;l!=="modelValue"&&(a[l]=(c=t[l])!==null&&c!==void 0?c:s[l])})),a}));return Dr((function(){var a;r.value=X2e({doc:t.modelValue,selection:o.value.selection,extensions:(a=s.extensions)!==null&&a!==void 0?a:[],onFocus:function(c){return e.emit(li.Focus,c)},onBlur:function(c){return e.emit(li.Blur,c)},onUpdate:function(c){return e.emit(li.Update,c)},onChange:function(c,u){c!==t.modelValue&&(e.emit(li.Change,c,u),e.emit(li.ModelUpdate,c,u))}}),i.value=(function(c){return new Ze(Object.assign({},c))})({state:r.value,parent:n.value,root:o.value.root});var l=(function(c){var u=function(){return c.state.doc.toString()},h=Vh(c).run,f=YA(c,[Ze.editable.of(!1),Sn.readOnly.of(!0)]),d=YA(c,ch.of([BB])),p=Vh(c).run,m=Vh(c).run,g=Vh(c).run,v=Vh(c).run;return{focus:function(){return c.focus()},getDoc:u,setDoc:function(b){b!==u()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:b}})},reExtensions:h,toggleDisabled:f,toggleIndentWithTab:d,setTabSize:function(b){p([Sn.tabSize.of(b),wm.of(" ".repeat(b))])},setPhrases:function(b){m([Sn.phrases.of(b)])},setPlaceholder:function(b){g(cZ(b))},setStyle:function(b){b===void 0&&(b={}),v(Ze.theme({"&":Object.assign({},b)}))}}})(i.value);Vt((function(){return t.modelValue}),(function(c){c!==l.getDoc()&&l.setDoc(c)})),Vt((function(){return t.extensions}),(function(c){return l.reExtensions(c||[])}),{immediate:!0}),Vt((function(){return o.value.disabled}),(function(c){return l.toggleDisabled(c)}),{immediate:!0}),Vt((function(){return o.value.indentWithTab}),(function(c){return l.toggleIndentWithTab(c)}),{immediate:!0}),Vt((function(){return o.value.tabSize}),(function(c){return l.setTabSize(c)}),{immediate:!0}),Vt((function(){return o.value.phrases}),(function(c){return l.setPhrases(c||{})}),{immediate:!0}),Vt((function(){return o.value.placeholder}),(function(c){return l.setPlaceholder(c)}),{immediate:!0}),Vt((function(){return o.value.style}),(function(c){return l.setStyle(c)}),{immediate:!0}),o.value.autofocus&&l.focus(),e.emit(li.Ready,{state:r.value,view:i.value,container:n.value})})),dm((function(){o.value.autoDestroy&&i.value&&(function(a){a.destroy()})(i.value)})),function(){return le("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),rbe=nbe,QA={};let ibe=class D7{constructor(e,n,r,i,s,o,a,l,c,u=0,h){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=h}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new D7(e,[],n,r,r,0,[],0,i?new UA(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let h=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-h;if(i<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,c,d,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let d=this.stack[l-3];this.state=s.getGoto(d,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,c)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;this.pos=i;let a=o.stateFlag(s,1);!a&&(i>r||n<=o.maxNode)&&(this.reducePos=i),this.pushState(s,a?r:Math.min(r,this.reducePos)),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new D7(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new sbe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,l)=>l&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,c=this.stack.length-a*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new UA(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};class UA{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class sbe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class Ay{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new Ay(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ay(this.stack,this.pos,this.index)}}function D0(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class dv{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const GA=new dv;class obe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=GA,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=GA,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class gf{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;vH(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}gf.prototype.contextual=gf.prototype.fallback=gf.prototype.extend=!1;class gH{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data=typeof e=="string"?D0(e):e}token(e,n){let r=e.pos,i=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(vH(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}}gH.prototype.contextual=gf.prototype.fallback=gf.prototype.extend=!1;class Sb{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function vH(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;(a&t[o])!=0;){let c=t[o+1];for(let d=o+3;d<c;d+=2)if((t[d+1]&a)>0){let p=t[d];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||abe(p,e.token.value,i,s))){e.acceptToken(p);break}}let u=e.next,h=0,f=t[o+2];if(e.next<0&&f>h&&t[c+f*3-3]==65535){o=t[c+f*3-1];continue e}for(;h<f;){let d=h+f>>1,p=c+d+(d<<1),m=t[p],g=t[p+1]||65536;if(u<m)f=d;else if(u>=g)h=d+1;else{o=t[p+2],e.advance();continue e}}break}}function KA(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function abe(t,e,n,r){let i=KA(n,r,e);return i<0||KA(n,r,t)<i}const es=typeof process<"u"&&QA&&/\bparse\b/.test(QA.LOG);let q5=null;function XA(t,e,n){let r=t.cursor(vn.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class lbe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?XA(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?XA(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof fn){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(Bt.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class cbe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new dv)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if((1<<c&o)==0)continue;let u=s[c],h=this.tokens[c];if(!(r&&!u.fallback)&&((u.contextual||h.start!=e.pos||h.mask!=o||h.context!=a)&&(this.updateCachedToken(h,u,e),h.mask=o,h.context=a),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let f=n;if(h.extended>-1&&(n=this.addActions(e,h.extended,h.end,n)),n=this.addActions(e,h.value,h.end,n),!u.extend&&(r=h,n>f))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new dv,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new dv,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(s,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=$a(a,c+2);else{i==0&&a[c+1]==2&&(i=this.putAction($a(a,c+2),n,r,i));break}a[c]==n&&(i=this.putAction($a(a,c+1),n,r,i))}return i}}class ube{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new obe(n,i),this.tokens=new cbe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[ibe.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new lbe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&fbe(i);if(o)return es&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw es&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return es&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let c=r[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&(r.sort((o,a)=>a.score-o.score),r.splice(12,r.length-12))}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=es?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let h=this.fragments.nodeAt(i);h;){let f=this.parser.nodeSet.types[h.type.id]==h.type?s.getGoto(e.state,h.type.id):-1;if(f>-1&&h.length&&(!c||(h.prop(Bt.contextHash)||0)==u))return e.useNode(h,f),es&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(h.type.id)})`),!0;if(!(h instanceof fn)||h.children.length==0||h.positions[0]>0)break;let d=h.children[0];if(d instanceof fn&&h.positions[0]==0)h=d;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),es&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],h=l[c++],f=l[c++],d=c==l.length||!r,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(u,h,m?m.start:p.pos,f),es&&console.log(o+this.stackID(p)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(h)} @ ${i}${p==e?"":", split"})`),d)return!0;p.pos>i?n.push(p):r.push(p)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return ZA(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=n[o<<1],c=n[(o<<1)+1],u=es?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),es&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let h=a.split(),f=u;for(let d=0;d<10&&h.forceReduce()&&(es&&console.log(f+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));d++)es&&(f=this.stackID(h)+" -> ");for(let d of a.recoverByInsert(l))es&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,r);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),es&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),ZA(a,r)):(!i||i.score<h.score)&&(i=h)}return i}stackToTree(e){return e.close(),fn.build({buffer:Ay.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(q5||(q5=new WeakMap)).get(e);return n||q5.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function ZA(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class hbe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const W5=t=>t;class XDe{constructor(e){this.start=e.start,this.shift=e.shift||W5,this.reduce=e.reduce||W5,this.reuse=e.reuse||W5,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class _y extends kx{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,l,c){i[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Bt[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)s(u,l,a[c++]);else{let h=a[c+-u];for(let f=-u;f>0;f--)s(a[c++],l,h);c++}}}this.nodeSet=new l2(n.map((a,l)=>Hi.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=sI;let o=D0(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(JA),this.states=D0(e.states,Uint32Array),this.data=D0(e.stateData),this.goto=D0(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new gf(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new ube(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let c=s+(o>>1);s<c;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=$a(r,s+2)];else{if(r[s+1]==2)return $a(r,s+2);break}if(o==n||o==0)return $a(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=$a(this.data,s+2);else break;i=n($a(this.data,s+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=$a(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(_y.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=JA(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new hbe(e,r,i)}static deserialize(e){return new _y(e)}}function $a(t,e){return t[e]|t[e+1]<<16}function fbe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function JA(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const dbe=122,e_=1,pbe=123,mbe=124,yH=2,gbe=125,vbe=3,ybe=4,bH=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],bbe=58,wbe=40,wH=95,xbe=91,pv=45,kbe=46,Sbe=35,Cbe=37,Obe=38,Mbe=92,Tbe=10,Abe=42;function am(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function q8(t){return t>=48&&t<=57}function t_(t){return q8(t)||t>=97&&t<=102||t>=65&&t<=70}const xH=(t,e,n)=>(r,i)=>{for(let s=!1,o=0,a=0;;a++){let{next:l}=r;if(am(l)||l==pv||l==wH||s&&q8(l))!s&&(l!=pv||a>0)&&(s=!0),o===a&&l==pv&&o++,r.advance();else if(l==Mbe&&r.peek(1)!=Tbe){if(r.advance(),t_(r.next)){do r.advance();while(t_(r.next));r.next==32&&r.advance()}else r.next>-1&&r.advance();s=!0}else{s&&r.acceptToken(o==2&&i.canShift(yH)?e:l==wbe?n:t);break}}},_be=new Sb(xH(pbe,yH,mbe)),Dbe=new Sb(xH(gbe,vbe,ybe)),Ebe=new Sb(t=>{if(bH.includes(t.peek(-1))){let{next:e}=t;(am(e)||e==wH||e==Sbe||e==kbe||e==Abe||e==xbe||e==bbe&&am(t.peek(1))||e==pv||e==Obe)&&t.acceptToken(dbe)}}),Ibe=new Sb(t=>{if(!bH.includes(t.peek(-1))){let{next:e}=t;if(e==Cbe&&(t.advance(),t.acceptToken(e_)),am(e)){do t.advance();while(am(t.next)||q8(t.next));t.acceptToken(e_)}}}),Pbe=LP({"AtKeyword import charset namespace keyframes media supports":x.definitionKeyword,"from to selector":x.keyword,NamespaceName:x.namespace,KeyframeName:x.labelName,KeyframeRangeName:x.operatorKeyword,TagName:x.tagName,ClassName:x.className,PseudoClassName:x.constant(x.className),IdName:x.labelName,"FeatureName PropertyName":x.propertyName,AttributeName:x.attributeName,NumberLiteral:x.number,KeywordQuery:x.keyword,UnaryQueryOp:x.operatorKeyword,"CallTag ValueName":x.atom,VariableName:x.variableName,Callee:x.operatorKeyword,Unit:x.unit,"UniversalSelector NestingSelector":x.definitionOperator,"MatchOp CompareOp":x.compareOperator,"ChildOp SiblingOp, LogicOp":x.logicOperator,BinOp:x.arithmeticOperator,Important:x.modifier,Comment:x.blockComment,ColorLiteral:x.color,"ParenthesizedContent StringLiteral":x.string,":":x.punctuation,"PseudoOp #":x.derefOperator,"; ,":x.separator,"( )":x.paren,"[ ]":x.squareBracket,"{ }":x.brace}),Nbe={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},Rbe={__proto__:null,or:98,and:98,not:106,only:106,layer:170},Lbe={__proto__:null,selector:112,layer:166},$be={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},Bbe={__proto__:null,to:207},zbe=_y.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[Pbe],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[Ebe,Ibe,_be,Dbe,1,2,3,4,new gH("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>Nbe[t]||-1},{term:125,get:t=>Rbe[t]||-1},{term:4,get:t=>Lbe[t]||-1},{term:25,get:t=>$be[t]||-1},{term:123,get:t=>Bbe[t]||-1}],tokenPrec:1963});let j5=null;function Y5(){if(!j5&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),n.has(r)||(e.push(r),n.add(r)));j5=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return j5||[]}const n_=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),r_=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),Fbe=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),Hbe=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),Ta=/^(\w[\w-]*|-\w[\w-]*|)$/,Vbe=/^-(-[\w-]*)?$/;function qbe(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return r?.name!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}const i_=new CG,Wbe=["Declaration"];function jbe(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function kH(t,e,n){if(e.to-e.from>4096){let r=i_.get(e);if(r)return r;let i=[],s=new Set,o=e.cursor(vn.IncludeAnonymous);if(o.firstChild())do for(let a of kH(t,o.node,n))s.has(a.label)||(s.add(a.label),i.push(a));while(o.nextSibling());return i_.set(e,i),i}else{let r=[],i=new Set;return e.cursor().iterate(s=>{var o;if(n(s)&&s.matchContext(Wbe)&&((o=s.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let a=t.sliceString(s.from,s.to);i.has(a)||(i.add(a),r.push({label:a,type:"variable"}))}}),r}}const SH=t=>e=>{let{state:n,pos:r}=e,i=_r(n).resolveInner(r,-1),s=i.type.isError&&i.from==i.to-1&&n.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(s||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:Y5(),validFor:Ta};if(i.name=="ValueName")return{from:i.from,options:r_,validFor:Ta};if(i.name=="PseudoClassName")return{from:i.from,options:n_,validFor:Ta};if(t(i)||(e.explicit||s)&&qbe(i,n.doc))return{from:t(i)||s?i.from:r,options:kH(n.doc,jbe(i),t),validFor:Vbe};if(i.name=="TagName"){for(let{parent:l}=i;l;l=l.parent)if(l.name=="Block")return{from:i.from,options:Y5(),validFor:Ta};return{from:i.from,options:Fbe,validFor:Ta}}if(i.name=="AtKeyword")return{from:i.from,options:Hbe,validFor:Ta};if(!e.explicit)return null;let o=i.resolve(r),a=o.childBefore(r);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:r,options:n_,validFor:Ta}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:r,options:r_,validFor:Ta}:o.name=="Block"||o.name=="Styles"?{from:r,options:Y5(),validFor:Ta}:null},CH=SH(t=>t.name=="VariableName"),E7=jv.define({name:"css",parser:zbe.configure({props:[qx.add({Declaration:sJ()}),WP.add({"Block KeyframeList":cJ})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function OH(){return new HP(E7,E7.data.of({autocomplete:CH}))}const Ybe=Object.freeze(Object.defineProperty({__proto__:null,css:OH,cssCompletionSource:CH,cssLanguage:E7,defineCSSCompletionSource:SH},Symbol.toStringTag,{value:"Module"})),Qbe={class:"a-content"},Ube={class:"btn-g"},Gbe=xt({__name:"CSSEditor",props:nx({edid:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(t){const e=$u(t,"show"),n=ae(""),r=ue(()=>[OH(),Ua.value=="dark"?V8:H8]),i=t;return Vt(()=>i.edid,()=>{i.edid&&U2e(i.edid).then(s=>{n.value=s})}),(s,o)=>(me(),Ie("div",{class:Lt(["app-dialog app-css-ed",{show:e.value}])},[oe("div",{class:"b-drop",onClick:o[0]||(o[0]=a=>e.value=!1)}),oe("div",Qbe,[_e(U(rbe),{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=a=>n.value=a),placeholder:"Write your code here...",extensions:r.value},null,8,["modelValue","extensions"]),oe("div",Ube,[oe("div",{class:"btn",onClick:o[2]||(o[2]=a=>U(_7)(t.edid,n.value))},Et(U(pt)("save")),1),oe("div",{class:"btn cls",onClick:o[3]||(o[3]=a=>e.value=!1)},[_e(qn,{name:"close"})])])])],2))}}),Kbe={class:"a-content"},Xbe={class:"css-list"},Zbe={class:"cs-name"},Jbe=["onUpdate:modelValue"],e4e={class:"controls"},t4e=["onClick"],n4e=["onClick"],r4e=["onClick"],i4e=xt({__name:"CSSManager",props:{show:{type:Boolean,default:!1},showModifiers:{}},emits:["update:show"],setup(t){const e=$u(t,"show"),n=ae(!1),r=ae(""),i=ih(dH());Vt(i,()=>{Y2e(i)});function s(){let a=Dv();i.push({id:a,name:"CSS",enabled:!0}),_7(a,"")}function o(){let a="CSS";hx("text/css").then(l=>(a=l.name.replace(".css",""),l.text())).then(l=>{let c=Dv();i.push({id:c,name:a,enabled:!0}),_7(c,l)})}return(a,l)=>(me(),Ie(wt,null,[oe("div",{class:Lt(["app-dialog app-css-ma",{show:e.value}])},[oe("div",{class:"b-drop",onClick:l[0]||(l[0]=c=>e.value=!1)}),oe("div",Kbe,[oe("div",{class:"close-btn",onClick:l[1]||(l[1]=c=>e.value=!1)},[_e(qn,{name:"close"})]),l[8]||(l[8]=oe("h2",{class:"title"},"CSS",-1)),oe("div",Xbe,[oe("div",{class:"cs-item newcss",onClick:l[2]||(l[2]=c=>s())},[...l[5]||(l[5]=[oe("span",null,"+ CSS",-1)])]),oe("div",{class:"cs-item newcss",onClick:l[3]||(l[3]=c=>o())},[...l[6]||(l[6]=[oe("span",null,[oe("u",null,""),Qa(" CSS")],-1)])]),(me(!0),Ie(wt,null,Tr(i,(c,u)=>(me(),Ie("div",{class:"cs-item",key:c.id},[oe("div",Zbe,[rl(oe("input",{type:"text","onUpdate:modelValue":h=>c.name=h},null,8,Jbe),[[Bu,c.name]])]),oe("div",e4e,[oe("div",{class:"ic-con",onClick:h=>{n.value=!0,r.value=c.id}},[_e(qn,{name:"pencil"})],8,t4e),oe("div",{class:"ic-con del",onClick:h=>i.splice(u,1)},[_e(qn,{name:"delete"})],8,n4e),oe("div",{class:Lt(["btn",{enabled:c.enabled}]),onClick:h=>c.enabled=!c.enabled},Et(c.enabled?"":""),11,r4e)])]))),128)),l[7]||(l[7]=oe("div",{class:"float-clear"},null,-1))])])],2),_e(Gbe,{show:n.value,"onUpdate:show":l[4]||(l[4]=c=>n.value=c),edid:r.value},null,8,["show","edid"])],64))}}),s4e={class:"se-con"},o4e={style:{"padding-bottom":"30px"}},a4e=xt({__name:"Setting",setup(t){function e(){mY((s,o)=>{s?Qt.emit("toast",""+o):Qt.emit("toast",""+o)},(s,o)=>{Qt.emit("toast","... "+s+"/"+o)})}function n(){gY((s,o)=>{s?Qt.emit("toast",""+o):Qt.emit("toast",""+o)})}function r(){vY(s=>{s?(Qt.emit("toast",""),setTimeout(()=>{window.location.reload()},1e3)):Qt.emit("toast","")})}const i=ae(!1);return(s,o)=>(me(),Ie(wt,null,[oe("div",s4e,[oe("h1",o4e,Et(U(pt)("setting")),1),_e(Ma,{title:U(pt)("settings.theme"),desc:U(pt)("settings.theme_desc")},{default:en(()=>[_e(V5,{options:[{label:U(pt)("settings.theme_light"),value:"light"},{label:U(pt)("settings.theme_dark"),value:"dark"},{label:U(pt)("settings.theme_eyes"),value:"eye"}],modelValue:U(Ua),"onUpdate:modelValue":o[0]||(o[0]=a=>yn(Ua)?Ua.value=a:null)},null,8,["options","modelValue"])]),_:1},8,["title","desc"]),_e(Ma,{title:U(pt)("settings.lang"),desc:U(pt)("settings.lang_desc")},{default:en(()=>[_e(V5,{options:[{label:"",value:"zh-cn"},{label:"English",value:"en"},{label:"",value:"zh-tw"},{label:"",value:"ja"}],modelValue:U(Ha),"onUpdate:modelValue":o[1]||(o[1]=a=>yn(Ha)?Ha.value=a:null)},null,8,["modelValue"])]),_:1},8,["title","desc"]),U(Ha)!="zh-cn"?(me(),$n(j2e,{key:0},{default:en(()=>[...o[10]||(o[10]=[Qa(" Gemini",-1),oe("a",{href:"https://github.com/siquan001/miki/"},"Github",-1),Qa("",-1),oe("br",null,null,-1),Qa("Currently, the translation is Gemini machine translation, we need better translations, if you have the ability, you can help us in the ",-1),oe("a",{href:"https://github.com/siquan001/miki/"},"Github repository",-1)])]),_:1})):hn("",!0),_e(Ma,{title:U(pt)("settings.theme_color"),desc:U(pt)("settings.theme_color_desc")},{default:en(()=>[_e(V5,{options:[{label:U(pt)("settings.theme_color_default"),value:"default"},{label:U(pt)("settings.theme_color_pink"),value:"pink"},{label:U(pt)("settings.theme_color_orange"),value:"orange"},{label:U(pt)("settings.theme_color_green"),value:"green"},{label:U(pt)("settings.theme_color_purple"),value:"purple"}],modelValue:U(ef),"onUpdate:modelValue":o[2]||(o[2]=a=>yn(ef)?ef.value=a:null)},null,8,["options","modelValue"])]),_:1},8,["title","desc"]),_e(Ma,{title:"",desc:"CSS"},{default:en(()=>[oe("div",{class:"btn",onClick:o[3]||(o[3]=a=>i.value=!0)},"CSS")]),_:1}),_e(Ma,{title:U(pt)("settings.backup"),desc:U(pt)("settings.backup_desc")},{default:en(()=>[oe("div",{class:"btn",onClick:o[4]||(o[4]=a=>n())},Et(U(pt)("settings.bkp")),1)]),_:1},8,["title","desc"]),_e(Ma,{title:U(pt)("settings.export"),desc:U(pt)("settings.export_desc")},{default:en(()=>[oe("div",{class:"btn",onClick:o[5]||(o[5]=a=>e())},Et(U(pt)("settings.exp")),1)]),_:1},8,["title","desc"]),_e(Ma,{title:U(pt)("settings.import"),desc:U(pt)("settings.import_desc")},{default:en(()=>[oe("div",{class:"btn",onClick:o[6]||(o[6]=a=>r())},Et(U(pt)("settings.imp")),1)]),_:1},8,["title","desc"]),_e(Ma,{title:U(pt)("help"),desc:""},{default:en(()=>[oe("div",{class:"btn",onClick:o[7]||(o[7]=a=>{Jh.value="help",cn.value=4})},Et(U(pt)("settings.see")),1)]),_:1},8,["title"]),_e(Ma,{title:"Miki",desc:"Miki"},{default:en(()=>[oe("div",{class:"btn",onClick:o[8]||(o[8]=a=>{Jh.value="about",cn.value=4})},Et(U(pt)("settings.see")),1)]),_:1})]),_e(i4e,{show:i.value,"onUpdate:show":o[9]||(o[9]=a=>i.value=a)},null,8,["show"])],64))}}),l4e={class:"a-content"},c4e={class:"ws-header"},u4e={class:"ws-list"},h4e={class:"name"},f4e={key:0,class:"ws-item editing"},d4e=["placeholder"],p4e=["onClick","onContextmenu"],m4e={class:"name"},g4e=xt({__name:"Workspaces",props:{show:{default:!1,type:Boolean},showModifiers:{},modelValue:{type:String},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(t){const e=$u(t,"show"),n=$u(t,"modelValue"),r=ae([]),i=ae(null),s=ae(!1),o=ae(""),a=ae(""),l=ae(!1),c=ae({x:0,y:0}),u=ae(null),h=async()=>{r.value=await Rt.getSpaces()},f=async()=>{s.value=!0,a.value="",await qo(),i.value?.focus()},d=async()=>{if(!s.value)return;const O=a.value.trim();O&&(await Rt.createSpace(O),await h()),s.value=!1},p=(O,k)=>{if(k.id==="def"){l.value=!1;return}u.value=k,c.value={x:O.clientX,y:O.clientY},l.value=!0},m=ue(()=>[{title:pt("rename"),icon:"pencil",click:()=>v()},{title:pt("deletespace"),icon:"delete",click:()=>S()}]),g=ue(()=>({left:`${c.value.x}px`,top:`${c.value.y}px`})),v=async()=>{u.value&&(o.value=u.value.id,a.value=u.value.name,await qo(),i.value?.focus(),i.value?.select())},b=async()=>{if(!o.value)return;const O=a.value.trim();O&&u.value&&O!==u.value.name&&(await Rt.updateSpace(o.value,O),br.value==o.value&&Qt.emit("renameNowSpace"),await h()),o.value=""},S=async()=>{u.value&&confirm(pt("confirmdeletespace").replace("$",u.value.name))&&(await Rt.deleteSpace(u.value.id),n.value===u.value.id&&(n.value="def"),await h())};return Dr(h),(O,k)=>(me(),Ie("div",{class:Lt(["app-workspaces app-dialog",{show:e.value}])},[oe("div",{class:"b-drop",onClick:k[0]||(k[0]=C=>e.value=!1)}),oe("div",l4e,[oe("div",c4e,[oe("span",null,Et(U(pt)("manageworkspace")),1),_e(qn,{name:"close",onClick:k[1]||(k[1]=C=>e.value=!1),class:"close-dialog-btn"}),_e(qn,{name:"add",onClick:f,class:"add-btn",title:""})]),oe("ul",u4e,[oe("li",{class:Lt({"ws-item":!0,active:n.value==="def"}),onClick:k[2]||(k[2]=C=>n.value="def"),onContextmenu:k[3]||(k[3]=kp(()=>{},["prevent"]))},[_e(qn,{name:"document"}),oe("span",h4e,Et(U(pt)("mytexts")),1)],34),s.value?(me(),Ie("li",f4e,[rl(oe("input",{ref:C=>{C&&(i.value=C)},"onUpdate:modelValue":k[4]||(k[4]=C=>a.value=C),onBlur:d,onKeyup:xf(d,["enter"]),placeholder:U(pt)("spacenaming")},null,40,d4e),[[Bu,a.value]])])):hn("",!0),(me(!0),Ie(wt,null,Tr(r.value,C=>(me(),Ie(wt,{key:C.id},[C.id!=="def"?(me(),Ie("li",{key:0,class:Lt({"ws-item":!0,active:n.value===C.id}),onClick:T=>n.value=C.id,onContextmenu:kp(T=>p(T,C),["prevent"])},[o.value===C.id?rl((me(),Ie("input",{key:0,ref_for:!0,ref:T=>{T&&(i.value=T)},"onUpdate:modelValue":k[5]||(k[5]=T=>a.value=T),onBlur:b,onKeyup:xf(b,["enter"]),class:"rename-input"},null,544)),[[Bu,a.value]]):(me(),Ie(wt,{key:1},[_e(qn,{name:"folder"}),oe("span",m4e,Et(C.name),1)],64))],42,p4e)):hn("",!0)],64))),128))])]),_e(dx,{show:l.value,"onUpdate:show":k[6]||(k[6]=C=>l.value=C),items:m.value,style:fr(g.value)},null,8,["show","items","style"])],2))}}),v4e={class:"a-content"},y4e={class:"picker-header"},b4e={class:"tabs"},w4e={class:"picker-body"},x4e={key:0,class:"list-container"},k4e=["onClick"],S4e={class:"item-date"},C4e={class:"item-label"},O4e={key:0,class:"empty"},M4e={key:1,class:"calendar-container"},T4e=xt({__name:"DiaryPicker",props:{show:{default:!1,type:Boolean},showModifiers:{}},emits:["update:show"],setup(t){const e=$u(t,"show"),n=ae("calendar"),r=ae([]);Dr(async()=>{const l=await Rt.getDiaries();r.value=await Promise.all(l.map(async c=>({...c,date:await Rt.getDiaryDate(c.id)})))});const i=ue(()=>r.value.map(l=>({key:l.id,highlight:ef.value.replace("default","blue"),dates:l.date.toDate(),popover:{label:l.label,visibility:"hover"},customData:l.date}))),s=l=>{Ai.value=l,e.value=!1},o=l=>{const c=l.attributes.find(u=>u.key);c&&s(c.customData)},a=()=>{s(hc())};return(l,c)=>{const u=Bo("VCalendar");return me(),Ie("div",{class:Lt(["diary-picker app-dialog",{show:e.value}])},[oe("div",{class:"b-drop",onClick:c[0]||(c[0]=h=>e.value=!1)}),oe("div",v4e,[oe("header",y4e,[oe("div",b4e,[oe("span",{class:Lt({active:n.value==="calendar"}),onClick:c[1]||(c[1]=h=>n.value="calendar")},Et(U(pt)("datepicker")),3),oe("span",{class:Lt({active:n.value==="list"}),onClick:c[2]||(c[2]=h=>n.value="list")},Et(U(pt)("listpicker")),3)]),_e(qn,{name:"close",onClick:c[3]||(c[3]=h=>e.value=!1),class:"close-dialog-btn"}),oe("button",{class:"write-today-btn",onClick:a},Et(U(pt)("writediary")),1)]),oe("main",w4e,[n.value==="list"?(me(),Ie("div",x4e,[(me(!0),Ie(wt,null,Tr(r.value,h=>(me(),Ie("div",{key:h.id,class:"diary-item",onClick:f=>s(h.date)},[oe("span",S4e,Et(h.date.format("YYYY-MM-DD")),1),oe("span",C4e,Et(h.label),1)],8,k4e))),128)),r.value.length===0?(me(),Ie("div",O4e,Et(U(pt)("nodiary")),1)):hn("",!0)])):(me(),Ie("div",M4e,[_e(u,{transparent:"",borderless:"","is-dark":U(Ua)=="dark",expanded:"",attributes:i.value,onDayclick:o,locale:U(Ha)},null,8,["is-dark","attributes","locale"])]))])])],2)}}}),A4e={class:"diary-ed"},_4e={class:"diary-header"},D4e={class:"date"},E4e={class:"label"},I4e=["placeholder"],P4e={class:"diary-edit"},N4e=xt({__name:"Diary",setup(t){const e=ae(""),n=ue(()=>Rt.getDiaryId(Ai.value));Vt(Ai,()=>{Rt.getDiary(Ai.value).then(a=>{a?e.value=a.label:e.value=""})},{immediate:!0});async function r(){const a=await Rt.getDiaries();for(let l=0;l<a.length;l++)if(a[l].id==Rt.getDiaryId(Ai.value)){l<a.length-1?Ai.value=Rt.getDiaryDate(a[l+1].id):Qt.emit("toast",pt("isfirstnow"));break}}async function i(){const a=await Rt.getDiaries();for(let l=0;l<a.length;l++)if(a[l].id==Rt.getDiaryId(Ai.value)){l>0?Ai.value=Rt.getDiaryDate(a[l-1].id):Ai.value=hc();break}}Qt.on("diary-last",r),Qt.on("diary-next",i);const s=ae(!1);Qt.on("showpicker",()=>{s.value=!0});const o=ae(0);return Qt.on("diary-updated",()=>{o.value++}),(a,l)=>(me(),Ie("div",A4e,[oe("div",_4e,[oe("div",D4e,Et(U(Ai).format(U(pt)("date_format"))),1),oe("div",E4e,[rl(oe("input",{type:"text",placeholder:U(pt)("howareyou"),"onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c)},null,8,I4e),[[Bu,e.value]])])]),oe("div",P4e,[_e(U(fw),null,{default:en(()=>[(me(),$n(hH,{key:n.value,type:"diary",id:n.value,label:e.value},null,8,["id","label"]))]),_:1})]),(me(),$n(T4e,{show:s.value,"onUpdate:show":l[1]||(l[1]=c=>s.value=c),key:o.value},null,8,["show"]))]))}}),R4e={class:"eM"},L4e=xt({__name:"ReadEditor",props:{content:{type:String,default:""}},setup(t){const e=t;$E(r=>{const i=new F8({root:r,defaultValue:e.content,featureConfigs:{"code-mirror":{theme:Ua.value=="dark"?V8:H8}}});return i.setReadonly(!0),n=async()=>{i.destroy()},i});let n=async()=>{};return dm(async()=>{await n()}),(r,i)=>(me(),Ie("div",R4e,[_e(U(LE))]))}}),$4e={class:"app-tabs"},B4e={class:"initlist"},z4e=xt({__name:"App",setup(t){let e=localStorage.getItem("kd");const n=ae(e?parseFloat(e):300),r=i=>{i.preventDefault();const s=i.clientX,o=n.value,a=c=>{const u=o+(c.clientX-s);u<50?n.value=0:u<200?n.value=200:u>window.innerWidth*.5?n.value=window.innerWidth*.5:n.value=u},l=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),localStorage.setItem("kd",n.value.toString())};document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)};return Dr(()=>{document.addEventListener("click",()=>{Qt.emit("doc-click")}),window.addEventListener("resize",()=>{n.value>window.innerWidth*.5&&(n.value=window.innerWidth*.5)})}),(i,s)=>(me(),Ie("div",{class:Lt(["app",[U(Ua),"co-"+U(ef)]])},[oe("div",{class:"app-left",style:fr({width:n.value+"px"})},[_e(rS,{onClick:s[0]||(s[0]=o=>{ss.value="",cn.value=0})}),_e(Ub,{icon:"diary",title:U(pt)("diary"),active:U(cn)==3,onClick:s[1]||(s[1]=o=>{ss.value="",cn.value=3})},null,8,["title","active"]),_e(_Y,{onOpen:s[2]||(s[2]=o=>cn.value=1)})],4),oe("div",{class:"app-fg",style:fr({left:n.value-2+"px"}),onMousedown:r},null,36),oe("div",{class:"app-right",style:fr({width:"calc(100% - "+n.value+"px)"})},[_e(fY,{onSetting:s[3]||(s[3]=o=>cn.value=2)}),oe("div",$4e,[oe("div",{class:"tab initial",style:fr({display:U(cn)==0?"flex":"none"})},[_e(rS),oe("ul",B4e,[_e(Ub,{icon:"help",title:U(pt)("help"),onClick:s[4]||(s[4]=o=>{Jh.value="help",cn.value=4})},null,8,["title"]),_e(Ub,{icon:"about",title:U(pt)("about"),onClick:s[5]||(s[5]=o=>{Jh.value="about",cn.value=4})},null,8,["title"])])],4),oe("div",{class:"tab ap-editor",style:fr({display:U(cn)==1?"block":"none"})},[_e(U(fw),null,{default:en(()=>[(me(),$n(hH,{key:U(ss),id:U(ss)},null,8,["id"]))]),_:1})],4),oe("div",{class:"tab setting",style:fr({display:U(cn)==2?"block":"none"})},[_e(a4e)],4),oe("div",{class:"tab ap-diary",style:fr({display:U(cn)==3?"block":"none"})},[U(cn)==3?(me(),$n(N4e,{key:0})):hn("",!0)],4),oe("div",{class:"tab ap-readeditor",style:fr({display:U(cn)==4?"block":"none"})},[_e(U(fw),null,{default:en(()=>[(me(),$n(L4e,{key:U(Jh),content:U(Xj)},null,8,["content"]))]),_:1})],4)])],4),_e(g4e,{show:U(hg),"onUpdate:show":s[6]||(s[6]=o=>yn(hg)?hg.value=o:null),"model-value":U(br),"onUpdate:modelValue":s[7]||(s[7]=o=>yn(br)?br.value=o:null)},null,8,["show","model-value"]),s[8]||(s[8]=oe("div",{class:"co"},null,-1))],2))}});var zi="top",js="bottom",Ys="right",Fi="left",W8="auto",Ym=[zi,js,Ys,Fi],Vf="start",lm="end",F4e="clippingParents",MH="viewport",qd="popper",H4e="reference",s_=Ym.reduce(function(t,e){return t.concat([e+"-"+Vf,e+"-"+lm])},[]),TH=[].concat(Ym,[W8]).reduce(function(t,e){return t.concat([e,e+"-"+Vf,e+"-"+lm])},[]),V4e="beforeRead",q4e="read",W4e="afterRead",j4e="beforeMain",Y4e="main",Q4e="afterMain",U4e="beforeWrite",G4e="write",K4e="afterWrite",X4e=[V4e,q4e,W4e,j4e,Y4e,Q4e,U4e,G4e,K4e];function aa(t){return t?(t.nodeName||"").toLowerCase():null}function ys(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function nh(t){var e=ys(t).Element;return t instanceof e||t instanceof Element}function Bs(t){var e=ys(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function j8(t){if(typeof ShadowRoot>"u")return!1;var e=ys(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Z4e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Bs(s)||!aa(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function J4e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Bs(i)||!aa(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const e5e={name:"applyStyles",enabled:!0,phase:"write",fn:Z4e,effect:J4e,requires:["computeStyles"]};function ta(t){return t.split("-")[0]}var Lu=Math.max,Dy=Math.min,qf=Math.round;function I7(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function AH(){return!/^((?!chrome|android).)*safari/i.test(I7())}function Wf(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Bs(t)&&(i=t.offsetWidth>0&&qf(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&qf(r.height)/t.offsetHeight||1);var o=nh(t)?ys(t):window,a=o.visualViewport,l=!AH()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/i,f=r.height/s;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function Y8(t){var e=Wf(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function _H(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&j8(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function dl(t){return ys(t).getComputedStyle(t)}function t5e(t){return["table","td","th"].indexOf(aa(t))>=0}function Nc(t){return((nh(t)?t.ownerDocument:t.document)||window.document).documentElement}function Cb(t){return aa(t)==="html"?t:t.assignedSlot||t.parentNode||(j8(t)?t.host:null)||Nc(t)}function o_(t){return!Bs(t)||dl(t).position==="fixed"?null:t.offsetParent}function n5e(t){var e=/firefox/i.test(I7()),n=/Trident/i.test(I7());if(n&&Bs(t)){var r=dl(t);if(r.position==="fixed")return null}var i=Cb(t);for(j8(i)&&(i=i.host);Bs(i)&&["html","body"].indexOf(aa(i))<0;){var s=dl(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Qm(t){for(var e=ys(t),n=o_(t);n&&t5e(n)&&dl(n).position==="static";)n=o_(n);return n&&(aa(n)==="html"||aa(n)==="body"&&dl(n).position==="static")?e:n||n5e(t)||e}function Q8(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fp(t,e,n){return Lu(t,Dy(e,n))}function r5e(t,e,n){var r=fp(t,e,n);return r>n?n:r}function DH(){return{top:0,right:0,bottom:0,left:0}}function EH(t){return Object.assign({},DH(),t)}function IH(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var i5e=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,EH(typeof e!="number"?e:IH(e,Ym))};function s5e(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ta(n.placement),l=Q8(a),c=[Fi,Ys].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var h=i5e(i.padding,n),f=Y8(s),d=l==="y"?zi:Fi,p=l==="y"?js:Ys,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],g=o[l]-n.rects.reference[l],v=Qm(s),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,S=m/2-g/2,O=h[d],k=b-f[u]-h[p],C=b/2-f[u]/2+S,T=fp(O,C,k),R=l;n.modifiersData[r]=(e={},e[R]=T,e.centerOffset=T-C,e)}}function o5e(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||_H(e.elements.popper,i)&&(e.elements.arrow=i))}const a5e={name:"arrow",enabled:!0,phase:"main",fn:s5e,effect:o5e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jf(t){return t.split("-")[1]}var l5e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function c5e(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:qf(n*i)/i||0,y:qf(r*i)/i||0}}function a_(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,f=o.x,d=f===void 0?0:f,p=o.y,m=p===void 0?0:p,g=typeof u=="function"?u({x:d,y:m}):{x:d,y:m};d=g.x,m=g.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),S=Fi,O=zi,k=window;if(c){var C=Qm(n),T="clientHeight",R="clientWidth";if(C===ys(n)&&(C=Nc(n),dl(C).position!=="static"&&a==="absolute"&&(T="scrollHeight",R="scrollWidth")),C=C,i===zi||(i===Fi||i===Ys)&&s===lm){O=js;var L=h&&C===k&&k.visualViewport?k.visualViewport.height:C[T];m-=L-r.height,m*=l?1:-1}if(i===Fi||(i===zi||i===js)&&s===lm){S=Ys;var I=h&&C===k&&k.visualViewport?k.visualViewport.width:C[R];d-=I-r.width,d*=l?1:-1}}var F=Object.assign({position:a},c&&l5e),E=u===!0?c5e({x:d,y:m},ys(n)):{x:d,y:m};if(d=E.x,m=E.y,l){var ee;return Object.assign({},F,(ee={},ee[O]=b?"0":"",ee[S]=v?"0":"",ee.transform=(k.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",ee))}return Object.assign({},F,(e={},e[O]=b?m+"px":"",e[S]=v?d+"px":"",e.transform="",e))}function u5e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ta(e.placement),variation:jf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,a_(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,a_(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const h5e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:u5e,data:{}};var tg={passive:!0};function f5e(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=ys(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,tg)}),a&&l.addEventListener("resize",n.update,tg),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,tg)}),a&&l.removeEventListener("resize",n.update,tg)}}const d5e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:f5e,data:{}};var p5e={left:"right",right:"left",bottom:"top",top:"bottom"};function mv(t){return t.replace(/left|right|bottom|top/g,function(e){return p5e[e]})}var m5e={start:"end",end:"start"};function l_(t){return t.replace(/start|end/g,function(e){return m5e[e]})}function U8(t){var e=ys(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function G8(t){return Wf(Nc(t)).left+U8(t).scrollLeft}function g5e(t,e){var n=ys(t),r=Nc(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=AH();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+G8(t),y:l}}function v5e(t){var e,n=Nc(t),r=U8(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Lu(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Lu(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+G8(t),l=-r.scrollTop;return dl(i||n).direction==="rtl"&&(a+=Lu(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function K8(t){var e=dl(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function PH(t){return["html","body","#document"].indexOf(aa(t))>=0?t.ownerDocument.body:Bs(t)&&K8(t)?t:PH(Cb(t))}function dp(t,e){var n;e===void 0&&(e=[]);var r=PH(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=ys(r),o=i?[s].concat(s.visualViewport||[],K8(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(dp(Cb(o)))}function P7(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function y5e(t,e){var n=Wf(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function c_(t,e,n){return e===MH?P7(g5e(t,n)):nh(e)?y5e(e,n):P7(v5e(Nc(t)))}function b5e(t){var e=dp(Cb(t)),n=["absolute","fixed"].indexOf(dl(t).position)>=0,r=n&&Bs(t)?Qm(t):t;return nh(r)?e.filter(function(i){return nh(i)&&_H(i,r)&&aa(i)!=="body"}):[]}function w5e(t,e,n,r){var i=e==="clippingParents"?b5e(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=c_(t,c,r);return l.top=Lu(u.top,l.top),l.right=Dy(u.right,l.right),l.bottom=Dy(u.bottom,l.bottom),l.left=Lu(u.left,l.left),l},c_(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function NH(t){var e=t.reference,n=t.element,r=t.placement,i=r?ta(r):null,s=r?jf(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case zi:l={x:o,y:e.y-n.height};break;case js:l={x:o,y:e.y+e.height};break;case Ys:l={x:e.x+e.width,y:a};break;case Fi:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?Q8(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Vf:l[c]=l[c]-(e[u]/2-n[u]/2);break;case lm:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function cm(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?F4e:a,c=n.rootBoundary,u=c===void 0?MH:c,h=n.elementContext,f=h===void 0?qd:h,d=n.altBoundary,p=d===void 0?!1:d,m=n.padding,g=m===void 0?0:m,v=EH(typeof g!="number"?g:IH(g,Ym)),b=f===qd?H4e:qd,S=t.rects.popper,O=t.elements[p?b:f],k=w5e(nh(O)?O:O.contextElement||Nc(t.elements.popper),l,u,o),C=Wf(t.elements.reference),T=NH({reference:C,element:S,placement:i}),R=P7(Object.assign({},S,T)),L=f===qd?R:C,I={top:k.top-L.top+v.top,bottom:L.bottom-k.bottom+v.bottom,left:k.left-L.left+v.left,right:L.right-k.right+v.right},F=t.modifiersData.offset;if(f===qd&&F){var E=F[i];Object.keys(I).forEach(function(ee){var G=[Ys,js].indexOf(ee)>=0?1:-1,W=[zi,js].indexOf(ee)>=0?"y":"x";I[ee]+=E[W]*G})}return I}function x5e(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?TH:l,u=jf(r),h=u?a?s_:s_.filter(function(p){return jf(p)===u}):Ym,f=h.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=h);var d=f.reduce(function(p,m){return p[m]=cm(t,{placement:m,boundary:i,rootBoundary:s,padding:o})[ta(m)],p},{});return Object.keys(d).sort(function(p,m){return d[p]-d[m]})}function k5e(t){if(ta(t)===W8)return[];var e=mv(t);return[l_(t),e,l_(e)]}function S5e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,m=n.allowedAutoPlacements,g=e.options.placement,v=ta(g),b=v===g,S=l||(b||!p?[mv(g)]:k5e(g)),O=[g].concat(S).reduce(function(Ue,je){return Ue.concat(ta(je)===W8?x5e(e,{placement:je,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:m}):je)},[]),k=e.rects.reference,C=e.rects.popper,T=new Map,R=!0,L=O[0],I=0;I<O.length;I++){var F=O[I],E=ta(F),ee=jf(F)===Vf,G=[zi,js].indexOf(E)>=0,W=G?"width":"height",X=cm(e,{placement:F,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),te=G?ee?Ys:Fi:ee?js:zi;k[W]>C[W]&&(te=mv(te));var ne=mv(te),ye=[];if(s&&ye.push(X[E]<=0),a&&ye.push(X[te]<=0,X[ne]<=0),ye.every(function(Ue){return Ue})){L=F,R=!1;break}T.set(F,ye)}if(R)for(var A=p?3:1,fe=function(je){var st=O.find(function(dt){var bt=T.get(dt);if(bt)return bt.slice(0,je).every(function(Nt){return Nt})});if(st)return L=st,"break"},he=A;he>0;he--){var P=fe(he);if(P==="break")break}e.placement!==L&&(e.modifiersData[r]._skip=!0,e.placement=L,e.reset=!0)}}const C5e={name:"flip",enabled:!0,phase:"main",fn:S5e,requiresIfExists:["offset"],data:{_skip:!1}};function u_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function h_(t){return[zi,Ys,js,Fi].some(function(e){return t[e]>=0})}function O5e(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=cm(e,{elementContext:"reference"}),a=cm(e,{altBoundary:!0}),l=u_(o,r),c=u_(a,i,s),u=h_(l),h=h_(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const M5e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:O5e};function T5e(t,e,n){var r=ta(t),i=[Fi,zi].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Fi,Ys].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function A5e(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=TH.reduce(function(u,h){return u[h]=T5e(h,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const _5e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:A5e};function D5e(t){var e=t.state,n=t.name;e.modifiersData[n]=NH({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const E5e={name:"popperOffsets",enabled:!0,phase:"read",fn:D5e,data:{}};function I5e(t){return t==="x"?"y":"x"}function P5e(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,d=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,g=cm(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=ta(e.placement),b=jf(e.placement),S=!b,O=Q8(v),k=I5e(O),C=e.modifiersData.popperOffsets,T=e.rects.reference,R=e.rects.popper,L=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,I=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,E={x:0,y:0};if(C){if(s){var ee,G=O==="y"?zi:Fi,W=O==="y"?js:Ys,X=O==="y"?"height":"width",te=C[O],ne=te+g[G],ye=te-g[W],A=d?-R[X]/2:0,fe=b===Vf?T[X]:R[X],he=b===Vf?-R[X]:-T[X],P=e.elements.arrow,Ue=d&&P?Y8(P):{width:0,height:0},je=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:DH(),st=je[G],dt=je[W],bt=fp(0,T[X],Ue[X]),Nt=S?T[X]/2-A-bt-st-I.mainAxis:fe-bt-st-I.mainAxis,Ot=S?-T[X]/2+A+bt+dt+I.mainAxis:he+bt+dt+I.mainAxis,Kt=e.elements.arrow&&Qm(e.elements.arrow),$=Kt?O==="y"?Kt.clientTop||0:Kt.clientLeft||0:0,V=(ee=F?.[O])!=null?ee:0,ie=te+Nt-V-$,pe=te+Ot-V,ge=fp(d?Dy(ne,ie):ne,te,d?Lu(ye,pe):ye);C[O]=ge,E[O]=ge-te}if(a){var ve,De=O==="x"?zi:Fi,Te=O==="x"?js:Ys,Me=C[k],we=k==="y"?"height":"width",tt=Me+g[De],qe=Me-g[Te],Xe=[zi,Fi].indexOf(v)!==-1,it=(ve=F?.[k])!=null?ve:0,J=Xe?tt:Me-T[we]-R[we]-it+I.altAxis,de=Xe?Me+T[we]+R[we]-it-I.altAxis:qe,Ve=d&&Xe?r5e(J,Me,de):fp(d?J:tt,Me,d?de:qe);C[k]=Ve,E[k]=Ve-Me}e.modifiersData[r]=E}}const N5e={name:"preventOverflow",enabled:!0,phase:"main",fn:P5e,requiresIfExists:["offset"]};function R5e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function L5e(t){return t===ys(t)||!Bs(t)?U8(t):R5e(t)}function $5e(t){var e=t.getBoundingClientRect(),n=qf(e.width)/t.offsetWidth||1,r=qf(e.height)/t.offsetHeight||1;return n!==1||r!==1}function B5e(t,e,n){n===void 0&&(n=!1);var r=Bs(e),i=Bs(e)&&$5e(e),s=Nc(e),o=Wf(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((aa(e)!=="body"||K8(s))&&(a=L5e(e)),Bs(e)?(l=Wf(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=G8(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function z5e(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function F5e(t){var e=z5e(t);return X4e.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function H5e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function V5e(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var f_={placement:"bottom",modifiers:[],strategy:"absolute"};function d_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function q5e(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?f_:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},f_,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,d={state:u,setOptions:function(v){var b=typeof v=="function"?v(u.options):v;m(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:nh(a)?dp(a):a.contextElement?dp(a.contextElement):[],popper:dp(l)};var S=F5e(V5e([].concat(r,u.options.modifiers)));return u.orderedModifiers=S.filter(function(O){return O.enabled}),p(),d.update()},forceUpdate:function(){if(!f){var v=u.elements,b=v.reference,S=v.popper;if(d_(b,S)){u.rects={reference:B5e(b,Qm(S),u.options.strategy==="fixed"),popper:Y8(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(I){return u.modifiersData[I.name]=Object.assign({},I.data)});for(var O=0;O<u.orderedModifiers.length;O++){if(u.reset===!0){u.reset=!1,O=-1;continue}var k=u.orderedModifiers[O],C=k.fn,T=k.options,R=T===void 0?{}:T,L=k.name;typeof C=="function"&&(u=C({state:u,options:R,name:L,instance:d})||u)}}}},update:H5e(function(){return new Promise(function(g){d.forceUpdate(),g(u)})}),destroy:function(){m(),f=!0}};if(!d_(a,l))return d;d.setOptions(c).then(function(g){!f&&c.onFirstUpdate&&c.onFirstUpdate(g)});function p(){u.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,S=b===void 0?{}:b,O=g.effect;if(typeof O=="function"){var k=O({state:u,name:v,instance:d,options:S}),C=function(){};h.push(k||C)}})}function m(){h.forEach(function(g){return g()}),h=[]}return d}}var W5e=[d5e,E5e,h5e,e5e,_5e,C5e,N5e,a5e,M5e],j5e=q5e({defaultModifiers:W5e}),Y5e=Object.defineProperty,Q5e=(t,e,n)=>e in t?Y5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vt=(t,e,n)=>(Q5e(t,typeof e!="symbol"?e+"":e,n),n),ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U5e=Object.prototype,G5e=U5e.hasOwnProperty;function K5e(t,e){return t!=null&&G5e.call(t,e)}var X5e=K5e,Z5e=Array.isArray,Co=Z5e,J5e=typeof ng=="object"&&ng&&ng.Object===Object&&ng,LH=J5e,ewe=LH,twe=typeof self=="object"&&self&&self.Object===Object&&self,nwe=ewe||twe||Function("return this")(),ya=nwe,rwe=ya,iwe=rwe.Symbol,Ob=iwe,p_=Ob,$H=Object.prototype,swe=$H.hasOwnProperty,owe=$H.toString,Wd=p_?p_.toStringTag:void 0;function awe(t){var e=swe.call(t,Wd),n=t[Wd];try{t[Wd]=void 0;var r=!0}catch{}var i=owe.call(t);return r&&(e?t[Wd]=n:delete t[Wd]),i}var lwe=awe,cwe=Object.prototype,uwe=cwe.toString;function hwe(t){return uwe.call(t)}var fwe=hwe,m_=Ob,dwe=lwe,pwe=fwe,mwe="[object Null]",gwe="[object Undefined]",g_=m_?m_.toStringTag:void 0;function vwe(t){return t==null?t===void 0?gwe:mwe:g_&&g_ in Object(t)?dwe(t):pwe(t)}var ba=vwe;function ywe(t){return t!=null&&typeof t=="object"}var Oo=ywe,bwe=ba,wwe=Oo,xwe="[object Symbol]";function kwe(t){return typeof t=="symbol"||wwe(t)&&bwe(t)==xwe}var X8=kwe,Swe=Co,Cwe=X8,Owe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mwe=/^\w*$/;function Twe(t,e){if(Swe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Cwe(t)?!0:Mwe.test(t)||!Owe.test(t)||e!=null&&t in Object(e)}var Z8=Twe;function Awe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Cl=Awe,_we=ba,Dwe=Cl,Ewe="[object AsyncFunction]",Iwe="[object Function]",Pwe="[object GeneratorFunction]",Nwe="[object Proxy]";function Rwe(t){if(!Dwe(t))return!1;var e=_we(t);return e==Iwe||e==Pwe||e==Ewe||e==Nwe}var vh=Rwe,Lwe=ya,$we=Lwe["__core-js_shared__"],Bwe=$we,Q5=Bwe,v_=(function(){var t=/[^.]+$/.exec(Q5&&Q5.keys&&Q5.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function zwe(t){return!!v_&&v_ in t}var Fwe=zwe,Hwe=Function.prototype,Vwe=Hwe.toString;function qwe(t){if(t!=null){try{return Vwe.call(t)}catch{}try{return t+""}catch{}}return""}var BH=qwe,Wwe=vh,jwe=Fwe,Ywe=Cl,Qwe=BH,Uwe=/[\\^$.*+?()[\]{}|]/g,Gwe=/^\[object .+?Constructor\]$/,Kwe=Function.prototype,Xwe=Object.prototype,Zwe=Kwe.toString,Jwe=Xwe.hasOwnProperty,e3e=RegExp("^"+Zwe.call(Jwe).replace(Uwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function t3e(t){if(!Ywe(t)||jwe(t))return!1;var e=Wwe(t)?e3e:Gwe;return e.test(Qwe(t))}var n3e=t3e;function r3e(t,e){return t?.[e]}var i3e=r3e,s3e=n3e,o3e=i3e;function a3e(t,e){var n=o3e(t,e);return s3e(n)?n:void 0}var yh=a3e,l3e=yh,c3e=l3e(Object,"create"),Mb=c3e,y_=Mb;function u3e(){this.__data__=y_?y_(null):{},this.size=0}var h3e=u3e;function f3e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var d3e=f3e,p3e=Mb,m3e="__lodash_hash_undefined__",g3e=Object.prototype,v3e=g3e.hasOwnProperty;function y3e(t){var e=this.__data__;if(p3e){var n=e[t];return n===m3e?void 0:n}return v3e.call(e,t)?e[t]:void 0}var b3e=y3e,w3e=Mb,x3e=Object.prototype,k3e=x3e.hasOwnProperty;function S3e(t){var e=this.__data__;return w3e?e[t]!==void 0:k3e.call(e,t)}var C3e=S3e,O3e=Mb,M3e="__lodash_hash_undefined__";function T3e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=O3e&&e===void 0?M3e:e,this}var A3e=T3e,_3e=h3e,D3e=d3e,E3e=b3e,I3e=C3e,P3e=A3e;function pd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pd.prototype.clear=_3e;pd.prototype.delete=D3e;pd.prototype.get=E3e;pd.prototype.has=I3e;pd.prototype.set=P3e;var N3e=pd;function R3e(){this.__data__=[],this.size=0}var L3e=R3e;function $3e(t,e){return t===e||t!==t&&e!==e}var md=$3e,B3e=md;function z3e(t,e){for(var n=t.length;n--;)if(B3e(t[n][0],e))return n;return-1}var Tb=z3e,F3e=Tb,H3e=Array.prototype,V3e=H3e.splice;function q3e(t){var e=this.__data__,n=F3e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():V3e.call(e,n,1),--this.size,!0}var W3e=q3e,j3e=Tb;function Y3e(t){var e=this.__data__,n=j3e(e,t);return n<0?void 0:e[n][1]}var Q3e=Y3e,U3e=Tb;function G3e(t){return U3e(this.__data__,t)>-1}var K3e=G3e,X3e=Tb;function Z3e(t,e){var n=this.__data__,r=X3e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var J3e=Z3e,e7e=L3e,t7e=W3e,n7e=Q3e,r7e=K3e,i7e=J3e;function gd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gd.prototype.clear=e7e;gd.prototype.delete=t7e;gd.prototype.get=n7e;gd.prototype.has=r7e;gd.prototype.set=i7e;var Ab=gd,s7e=yh,o7e=ya,a7e=s7e(o7e,"Map"),J8=a7e,b_=N3e,l7e=Ab,c7e=J8;function u7e(){this.size=0,this.__data__={hash:new b_,map:new(c7e||l7e),string:new b_}}var h7e=u7e;function f7e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var d7e=f7e,p7e=d7e;function m7e(t,e){var n=t.__data__;return p7e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var _b=m7e,g7e=_b;function v7e(t){var e=g7e(this,t).delete(t);return this.size-=e?1:0,e}var y7e=v7e,b7e=_b;function w7e(t){return b7e(this,t).get(t)}var x7e=w7e,k7e=_b;function S7e(t){return k7e(this,t).has(t)}var C7e=S7e,O7e=_b;function M7e(t,e){var n=O7e(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var T7e=M7e,A7e=h7e,_7e=y7e,D7e=x7e,E7e=C7e,I7e=T7e;function vd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}vd.prototype.clear=A7e;vd.prototype.delete=_7e;vd.prototype.get=D7e;vd.prototype.has=E7e;vd.prototype.set=I7e;var e9=vd,zH=e9,P7e="Expected a function";function t9(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(P7e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(t9.Cache||zH),n}t9.Cache=zH;var N7e=t9,R7e=N7e,L7e=500;function $7e(t){var e=R7e(t,function(r){return n.size===L7e&&n.clear(),r}),n=e.cache;return e}var B7e=$7e,z7e=B7e,F7e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H7e=/\\(\\)?/g,V7e=z7e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(F7e,function(n,r,i,s){e.push(i?s.replace(H7e,"$1"):r||n)}),e}),q7e=V7e;function W7e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var j7e=W7e,w_=Ob,Y7e=j7e,Q7e=Co,U7e=X8,x_=w_?w_.prototype:void 0,k_=x_?x_.toString:void 0;function FH(t){if(typeof t=="string")return t;if(Q7e(t))return Y7e(t,FH)+"";if(U7e(t))return k_?k_.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var G7e=FH,K7e=G7e;function X7e(t){return t==null?"":K7e(t)}var Z7e=X7e,J7e=Co,exe=Z8,txe=q7e,nxe=Z7e;function rxe(t,e){return J7e(t)?t:exe(t,e)?[t]:txe(nxe(t))}var HH=rxe,ixe=ba,sxe=Oo,oxe="[object Arguments]";function axe(t){return sxe(t)&&ixe(t)==oxe}var lxe=axe,S_=lxe,cxe=Oo,VH=Object.prototype,uxe=VH.hasOwnProperty,hxe=VH.propertyIsEnumerable,fxe=S_((function(){return arguments})())?S_:function(t){return cxe(t)&&uxe.call(t,"callee")&&!hxe.call(t,"callee")},n9=fxe,dxe=9007199254740991,pxe=/^(?:0|[1-9]\d*)$/;function mxe(t,e){var n=typeof t;return e=e??dxe,!!e&&(n=="number"||n!="symbol"&&pxe.test(t))&&t>-1&&t%1==0&&t<e}var r9=mxe,gxe=9007199254740991;function vxe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=gxe}var i9=vxe,yxe=X8;function bxe(t){if(typeof t=="string"||yxe(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Db=bxe,wxe=HH,xxe=n9,kxe=Co,Sxe=r9,Cxe=i9,Oxe=Db;function Mxe(t,e,n){e=wxe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Oxe(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Cxe(i)&&Sxe(o,i)&&(kxe(t)||xxe(t)))}var qH=Mxe,Txe=X5e,Axe=qH;function _xe(t,e){return t!=null&&Axe(t,e,Txe)}var WH=_xe,Dxe=ba,Exe=Oo,Ixe="[object Date]";function Pxe(t){return Exe(t)&&Dxe(t)==Ixe}var Nxe=Pxe;function Rxe(t){return function(e){return t(e)}}var jH=Rxe,um={},Lxe={get exports(){return um},set exports(t){um=t}};(function(t,e){var n=LH,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=(function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}})();t.exports=a})(Lxe,um);var $xe=Nxe,Bxe=jH,C_=um,O_=C_&&C_.isDate,zxe=O_?Bxe(O_):$xe,Fxe=zxe,Hxe=ba,Vxe=Co,qxe=Oo,Wxe="[object String]";function jxe(t){return typeof t=="string"||!Vxe(t)&&qxe(t)&&Hxe(t)==Wxe}var Go=jxe;function Yxe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var YH=Yxe,Qxe=Ab;function Uxe(){this.__data__=new Qxe,this.size=0}var Gxe=Uxe;function Kxe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Xxe=Kxe;function Zxe(t){return this.__data__.get(t)}var Jxe=Zxe;function eke(t){return this.__data__.has(t)}var tke=eke,nke=Ab,rke=J8,ike=e9,ske=200;function oke(t,e){var n=this.__data__;if(n instanceof nke){var r=n.__data__;if(!rke||r.length<ske-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ike(r)}return n.set(t,e),this.size=n.size,this}var ake=oke,lke=Ab,cke=Gxe,uke=Xxe,hke=Jxe,fke=tke,dke=ake;function yd(t){var e=this.__data__=new lke(t);this.size=e.size}yd.prototype.clear=cke;yd.prototype.delete=uke;yd.prototype.get=hke;yd.prototype.has=fke;yd.prototype.set=dke;var s9=yd,pke="__lodash_hash_undefined__";function mke(t){return this.__data__.set(t,pke),this}var gke=mke;function vke(t){return this.__data__.has(t)}var yke=vke,bke=e9,wke=gke,xke=yke;function Ey(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new bke;++e<n;)this.add(t[e])}Ey.prototype.add=Ey.prototype.push=wke;Ey.prototype.has=xke;var kke=Ey;function Ske(t,e){return t.has(e)}var Cke=Ske,Oke=kke,Mke=YH,Tke=Cke,Ake=1,_ke=2;function Dke(t,e,n,r,i,s){var o=n&Ake,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=n&_ke?new Oke:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var p=t[h],m=e[h];if(r)var g=o?r(m,p,h,e,t,s):r(p,m,h,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(d){if(!Mke(e,function(v,b){if(!Tke(d,b)&&(p===v||i(p,v,n,r,s)))return d.push(b)})){f=!1;break}}else if(!(p===m||i(p,m,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var QH=Dke,Eke=ya,Ike=Eke.Uint8Array,UH=Ike;function Pke(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Nke=Pke;function Rke(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Lke=Rke,M_=Ob,T_=UH,$ke=md,Bke=QH,zke=Nke,Fke=Lke,Hke=1,Vke=2,qke="[object Boolean]",Wke="[object Date]",jke="[object Error]",Yke="[object Map]",Qke="[object Number]",Uke="[object RegExp]",Gke="[object Set]",Kke="[object String]",Xke="[object Symbol]",Zke="[object ArrayBuffer]",Jke="[object DataView]",A_=M_?M_.prototype:void 0,U5=A_?A_.valueOf:void 0;function e6e(t,e,n,r,i,s,o){switch(n){case Jke:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zke:return!(t.byteLength!=e.byteLength||!s(new T_(t),new T_(e)));case qke:case Wke:case Qke:return $ke(+t,+e);case jke:return t.name==e.name&&t.message==e.message;case Uke:case Kke:return t==e+"";case Yke:var a=zke;case Gke:var l=r&Hke;if(a||(a=Fke),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=Vke,o.set(t,e);var u=Bke(a(t),a(e),r,i,s,o);return o.delete(t),u;case Xke:if(U5)return U5.call(t)==U5.call(e)}return!1}var t6e=e6e;function n6e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var r6e=n6e,i6e=r6e,s6e=Co;function o6e(t,e,n){var r=e(t);return s6e(t)?r:i6e(r,n(t))}var a6e=o6e;function l6e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var c6e=l6e;function u6e(){return[]}var h6e=u6e,f6e=c6e,d6e=h6e,p6e=Object.prototype,m6e=p6e.propertyIsEnumerable,__=Object.getOwnPropertySymbols,g6e=__?function(t){return t==null?[]:(t=Object(t),f6e(__(t),function(e){return m6e.call(t,e)}))}:d6e,v6e=g6e;function y6e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var b6e=y6e,Yf={},w6e={get exports(){return Yf},set exports(t){Yf=t}};function x6e(){return!1}var k6e=x6e;(function(t,e){var n=ya,r=k6e,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(w6e,Yf);var S6e=ba,C6e=i9,O6e=Oo,M6e="[object Arguments]",T6e="[object Array]",A6e="[object Boolean]",_6e="[object Date]",D6e="[object Error]",E6e="[object Function]",I6e="[object Map]",P6e="[object Number]",N6e="[object Object]",R6e="[object RegExp]",L6e="[object Set]",$6e="[object String]",B6e="[object WeakMap]",z6e="[object ArrayBuffer]",F6e="[object DataView]",H6e="[object Float32Array]",V6e="[object Float64Array]",q6e="[object Int8Array]",W6e="[object Int16Array]",j6e="[object Int32Array]",Y6e="[object Uint8Array]",Q6e="[object Uint8ClampedArray]",U6e="[object Uint16Array]",G6e="[object Uint32Array]",Vn={};Vn[H6e]=Vn[V6e]=Vn[q6e]=Vn[W6e]=Vn[j6e]=Vn[Y6e]=Vn[Q6e]=Vn[U6e]=Vn[G6e]=!0;Vn[M6e]=Vn[T6e]=Vn[z6e]=Vn[A6e]=Vn[F6e]=Vn[_6e]=Vn[D6e]=Vn[E6e]=Vn[I6e]=Vn[P6e]=Vn[N6e]=Vn[R6e]=Vn[L6e]=Vn[$6e]=Vn[B6e]=!1;function K6e(t){return O6e(t)&&C6e(t.length)&&!!Vn[S6e(t)]}var X6e=K6e,Z6e=X6e,J6e=jH,D_=um,E_=D_&&D_.isTypedArray,e8e=E_?J6e(E_):Z6e,o9=e8e,t8e=b6e,n8e=n9,r8e=Co,i8e=Yf,s8e=r9,o8e=o9,a8e=Object.prototype,l8e=a8e.hasOwnProperty;function c8e(t,e){var n=r8e(t),r=!n&&n8e(t),i=!n&&!r&&i8e(t),s=!n&&!r&&!i&&o8e(t),o=n||r||i||s,a=o?t8e(t.length,String):[],l=a.length;for(var c in t)(e||l8e.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||s8e(c,l)))&&a.push(c);return a}var GH=c8e,u8e=Object.prototype;function h8e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||u8e;return t===n}var a9=h8e;function f8e(t,e){return function(n){return t(e(n))}}var KH=f8e,d8e=KH,p8e=d8e(Object.keys,Object),m8e=p8e,g8e=a9,v8e=m8e,y8e=Object.prototype,b8e=y8e.hasOwnProperty;function w8e(t){if(!g8e(t))return v8e(t);var e=[];for(var n in Object(t))b8e.call(t,n)&&n!="constructor"&&e.push(n);return e}var x8e=w8e,k8e=vh,S8e=i9;function C8e(t){return t!=null&&S8e(t.length)&&!k8e(t)}var Um=C8e,O8e=GH,M8e=x8e,T8e=Um;function A8e(t){return T8e(t)?O8e(t):M8e(t)}var l9=A8e,_8e=a6e,D8e=v6e,E8e=l9;function I8e(t){return _8e(t,E8e,D8e)}var P8e=I8e,I_=P8e,N8e=1,R8e=Object.prototype,L8e=R8e.hasOwnProperty;function $8e(t,e,n,r,i,s){var o=n&N8e,a=I_(t),l=a.length,c=I_(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:L8e.call(e,f)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++h<l;){f=a[h];var v=t[f],b=e[f];if(r)var S=o?r(b,v,f,e,t,s):r(v,b,f,t,e,s);if(!(S===void 0?v===b||i(v,b,n,r,s):S)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var O=t.constructor,k=e.constructor;O!=k&&"constructor"in t&&"constructor"in e&&!(typeof O=="function"&&O instanceof O&&typeof k=="function"&&k instanceof k)&&(m=!1)}return s.delete(t),s.delete(e),m}var B8e=$8e,z8e=yh,F8e=ya,H8e=z8e(F8e,"DataView"),V8e=H8e,q8e=yh,W8e=ya,j8e=q8e(W8e,"Promise"),Y8e=j8e,Q8e=yh,U8e=ya,G8e=Q8e(U8e,"Set"),K8e=G8e,X8e=yh,Z8e=ya,J8e=X8e(Z8e,"WeakMap"),e9e=J8e,N7=V8e,R7=J8,L7=Y8e,$7=K8e,B7=e9e,XH=ba,bd=BH,P_="[object Map]",t9e="[object Object]",N_="[object Promise]",R_="[object Set]",L_="[object WeakMap]",$_="[object DataView]",n9e=bd(N7),r9e=bd(R7),i9e=bd(L7),s9e=bd($7),o9e=bd(B7),cu=XH;(N7&&cu(new N7(new ArrayBuffer(1)))!=$_||R7&&cu(new R7)!=P_||L7&&cu(L7.resolve())!=N_||$7&&cu(new $7)!=R_||B7&&cu(new B7)!=L_)&&(cu=function(t){var e=XH(t),n=e==t9e?t.constructor:void 0,r=n?bd(n):"";if(r)switch(r){case n9e:return $_;case r9e:return P_;case i9e:return N_;case s9e:return R_;case o9e:return L_}return e});var a9e=cu,G5=s9,l9e=QH,c9e=t6e,u9e=B8e,B_=a9e,z_=Co,F_=Yf,h9e=o9,f9e=1,H_="[object Arguments]",V_="[object Array]",rg="[object Object]",d9e=Object.prototype,q_=d9e.hasOwnProperty;function p9e(t,e,n,r,i,s){var o=z_(t),a=z_(e),l=o?V_:B_(t),c=a?V_:B_(e);l=l==H_?rg:l,c=c==H_?rg:c;var u=l==rg,h=c==rg,f=l==c;if(f&&F_(t)){if(!F_(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new G5),o||h9e(t)?l9e(t,e,n,r,i,s):c9e(t,e,l,n,r,i,s);if(!(n&f9e)){var d=u&&q_.call(t,"__wrapped__"),p=h&&q_.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,g=p?e.value():e;return s||(s=new G5),i(m,g,n,r,s)}}return f?(s||(s=new G5),u9e(t,e,n,r,i,s)):!1}var m9e=p9e,g9e=m9e,W_=Oo;function ZH(t,e,n,r,i){return t===e?!0:t==null||e==null||!W_(t)&&!W_(e)?t!==t&&e!==e:g9e(t,e,n,r,ZH,i)}var JH=ZH,v9e=s9,y9e=JH,b9e=1,w9e=2;function x9e(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var h=new v9e;if(r)var f=r(c,u,l,t,e,h);if(!(f===void 0?y9e(u,c,b9e|w9e,r,h):f))return!1}}return!0}var k9e=x9e,S9e=Cl;function C9e(t){return t===t&&!S9e(t)}var eV=C9e,O9e=eV,M9e=l9;function T9e(t){for(var e=M9e(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,O9e(i)]}return e}var A9e=T9e;function _9e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var tV=_9e,D9e=k9e,E9e=A9e,I9e=tV;function P9e(t){var e=E9e(t);return e.length==1&&e[0][2]?I9e(e[0][0],e[0][1]):function(n){return n===t||D9e(n,t,e)}}var N9e=P9e,R9e=HH,L9e=Db;function $9e(t,e){e=R9e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[L9e(e[n++])];return n&&n==r?t:void 0}var nV=$9e,B9e=nV;function z9e(t,e,n){var r=t==null?void 0:B9e(t,e);return r===void 0?n:r}var ku=z9e;function F9e(t,e){return t!=null&&e in Object(t)}var H9e=F9e,V9e=H9e,q9e=qH;function W9e(t,e){return t!=null&&q9e(t,e,V9e)}var j9e=W9e,Y9e=JH,Q9e=ku,U9e=j9e,G9e=Z8,K9e=eV,X9e=tV,Z9e=Db,J9e=1,eSe=2;function tSe(t,e){return G9e(t)&&K9e(e)?X9e(Z9e(t),e):function(n){var r=Q9e(n,t);return r===void 0&&r===e?U9e(n,t):Y9e(e,r,J9e|eSe)}}var nSe=tSe;function rSe(t){return t}var c9=rSe;function iSe(t){return function(e){return e?.[t]}}var sSe=iSe,oSe=nV;function aSe(t){return function(e){return oSe(e,t)}}var lSe=aSe,cSe=sSe,uSe=lSe,hSe=Z8,fSe=Db;function dSe(t){return hSe(t)?cSe(fSe(t)):uSe(t)}var pSe=dSe,mSe=N9e,gSe=nSe,vSe=c9,ySe=Co,bSe=pSe;function wSe(t){return typeof t=="function"?t:t==null?vSe:typeof t=="object"?ySe(t)?gSe(t[0],t[1]):mSe(t):bSe(t)}var rV=wSe;function xSe(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var kSe=xSe,SSe=kSe,CSe=SSe(),iV=CSe,OSe=iV,MSe=l9;function TSe(t,e){return t&&OSe(t,e,MSe)}var sV=TSe,ASe=Um;function _Se(t,e){return function(n,r){if(n==null)return n;if(!ASe(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var DSe=_Se,ESe=sV,ISe=DSe,PSe=ISe(ESe),NSe=PSe,RSe=NSe;function LSe(t,e){var n;return RSe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var $Se=LSe,BSe=md,zSe=Um,FSe=r9,HSe=Cl;function VSe(t,e,n){if(!HSe(n))return!1;var r=typeof e;return(r=="number"?zSe(n)&&FSe(e,n.length):r=="string"&&e in n)?BSe(n[e],t):!1}var u9=VSe,qSe=YH,WSe=rV,jSe=$Se,YSe=Co,QSe=u9;function USe(t,e,n){var r=YSe(t)?qSe:jSe;return n&&QSe(t,e,n)&&(e=void 0),r(t,WSe(e))}var GSe=USe,KSe=ba,XSe=Oo,ZSe="[object Boolean]";function JSe(t){return t===!0||t===!1||XSe(t)&&KSe(t)==ZSe}var eCe=JSe,tCe=ba,nCe=Oo,rCe="[object Number]";function iCe(t){return typeof t=="number"||nCe(t)&&tCe(t)==rCe}var go=iCe,sCe=yh,oCe=(function(){try{var t=sCe(Object,"defineProperty");return t({},"",{}),t}catch{}})(),oV=oCe,j_=oV;function aCe(t,e,n){e=="__proto__"&&j_?j_(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Eb=aCe,lCe=Eb,cCe=md,uCe=Object.prototype,hCe=uCe.hasOwnProperty;function fCe(t,e,n){var r=t[e];(!(hCe.call(t,e)&&cCe(r,n))||n===void 0&&!(e in t))&&lCe(t,e,n)}var dCe=fCe,pCe=Eb,mCe=sV,gCe=rV;function vCe(t,e){var n={};return e=gCe(e),mCe(t,function(r,i,s){pCe(n,i,e(r,i,s))}),n}var yCe=vCe;function bCe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var aV=bCe,wCe=aV,Y_=Math.max;function xCe(t,e,n){return e=Y_(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Y_(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),wCe(t,this,a)}}var kCe=xCe;function SCe(t){return function(){return t}}var CCe=SCe,OCe=CCe,Q_=oV,MCe=c9,TCe=Q_?function(t,e){return Q_(t,"toString",{configurable:!0,enumerable:!1,value:OCe(e),writable:!0})}:MCe,ACe=TCe,_Ce=800,DCe=16,ECe=Date.now;function ICe(t){var e=0,n=0;return function(){var r=ECe(),i=DCe-(r-n);if(n=r,i>0){if(++e>=_Ce)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var PCe=ICe,NCe=ACe,RCe=PCe,LCe=RCe(NCe),$Ce=LCe,BCe=c9,zCe=kCe,FCe=$Ce;function HCe(t,e){return FCe(zCe(t,e,BCe),t+"")}var h9=HCe;function VCe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var qCe=VCe,WCe=Cl,jCe=a9,YCe=qCe,QCe=Object.prototype,UCe=QCe.hasOwnProperty;function GCe(t){if(!WCe(t))return YCe(t);var e=jCe(t),n=[];for(var r in t)r=="constructor"&&(e||!UCe.call(t,r))||n.push(r);return n}var KCe=GCe,XCe=GH,ZCe=KCe,JCe=Um;function eOe(t){return JCe(t)?XCe(t,!0):ZCe(t)}var f9=eOe,tOe=h9,nOe=md,rOe=u9,iOe=f9,lV=Object.prototype,sOe=lV.hasOwnProperty,oOe=tOe(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&rOe(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=iOe(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||nOe(u,lV[c])&&!sOe.call(t,c))&&(t[c]=s[c])}return t}),U_=oOe,aOe=Eb,lOe=md;function cOe(t,e,n){(n!==void 0&&!lOe(t[e],n)||n===void 0&&!(e in t))&&aOe(t,e,n)}var cV=cOe,Iy={},uOe={get exports(){return Iy},set exports(t){Iy=t}};(function(t,e){var n=ya,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,f=a?a(h):new c.constructor(h);return c.copy(f),f}t.exports=l})(uOe,Iy);var G_=UH;function hOe(t){var e=new t.constructor(t.byteLength);return new G_(e).set(new G_(t)),e}var fOe=hOe,dOe=fOe;function pOe(t,e){var n=e?dOe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var mOe=pOe;function gOe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var vOe=gOe,yOe=Cl,K_=Object.create,bOe=(function(){function t(){}return function(e){if(!yOe(e))return{};if(K_)return K_(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})(),wOe=bOe,xOe=KH,kOe=xOe(Object.getPrototypeOf,Object),uV=kOe,SOe=wOe,COe=uV,OOe=a9;function MOe(t){return typeof t.constructor=="function"&&!OOe(t)?SOe(COe(t)):{}}var TOe=MOe,AOe=Um,_Oe=Oo;function DOe(t){return _Oe(t)&&AOe(t)}var EOe=DOe,IOe=ba,POe=uV,NOe=Oo,ROe="[object Object]",LOe=Function.prototype,$Oe=Object.prototype,hV=LOe.toString,BOe=$Oe.hasOwnProperty,zOe=hV.call(Object);function FOe(t){if(!NOe(t)||IOe(t)!=ROe)return!1;var e=POe(t);if(e===null)return!0;var n=BOe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&hV.call(n)==zOe}var HOe=FOe;function VOe(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var fV=VOe,qOe=dCe,WOe=Eb;function jOe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?WOe(n,a,l):qOe(n,a,l)}return n}var YOe=jOe,QOe=YOe,UOe=f9;function GOe(t){return QOe(t,UOe(t))}var KOe=GOe,X_=cV,XOe=Iy,ZOe=mOe,JOe=vOe,eMe=TOe,Z_=n9,J_=Co,tMe=EOe,nMe=Yf,rMe=vh,iMe=Cl,sMe=HOe,oMe=o9,eD=fV,aMe=KOe;function lMe(t,e,n,r,i,s,o){var a=eD(t,n),l=eD(e,n),c=o.get(l);if(c){X_(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,h=u===void 0;if(h){var f=J_(l),d=!f&&nMe(l),p=!f&&!d&&oMe(l);u=l,f||d||p?J_(a)?u=a:tMe(a)?u=JOe(a):d?(h=!1,u=XOe(l,!0)):p?(h=!1,u=ZOe(l,!0)):u=[]:sMe(l)||Z_(l)?(u=a,Z_(a)?u=aMe(a):(!iMe(a)||rMe(a))&&(u=eMe(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),X_(t,n,u)}var cMe=lMe,uMe=s9,hMe=cV,fMe=iV,dMe=cMe,pMe=Cl,mMe=f9,gMe=fV;function dV(t,e,n,r,i){t!==e&&fMe(e,function(s,o){if(i||(i=new uMe),pMe(s))dMe(t,e,o,n,dV,r,i);else{var a=r?r(gMe(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),hMe(t,o,a)}},mMe)}var pV=dV,vMe=pV,tD=Cl;function mV(t,e,n,r,i,s){return tD(t)&&tD(e)&&(s.set(e,t),vMe(t,e,void 0,mV,s),s.delete(e)),t}var yMe=mV,bMe=h9,wMe=u9;function xMe(t){return bMe(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&wMe(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var kMe=xMe,SMe=pV,CMe=kMe,OMe=CMe(function(t,e,n,r){SMe(t,e,n,r)}),MMe=OMe,TMe=aV,AMe=h9,_Me=yMe,DMe=MMe,EMe=AMe(function(t){return t.push(void 0,_Me),TMe(DMe,void 0,t)}),Qf=EMe;function IMe(t){return t&&t.length?t[0]:void 0}var gV=IMe;function PMe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Qh=PMe;const NMe=t=>Object.prototype.toString.call(t).slice(8,-1),vf=t=>Fxe(t)&&!isNaN(t.getTime()),pl=t=>NMe(t)==="Object",vV=WH,nD=(t,e)=>GSe(e,n=>WH(t,n)),wn=(t,e,n="0")=>{for(t=t!=null?String(t):"",e=e||2;t.length<e;)t=`${n}${t}`;return t},zs=t=>Array.isArray(t),Ya=t=>zs(t)&&t.length>0,Py=t=>t==null?null:document&&Go(t)?document.querySelector(t):t.$el??t,Xl=(t,e,n,r=void 0)=>{t.removeEventListener(e,n,r)},Zl=(t,e,n,r=void 0)=>(t.addEventListener(e,n,r),()=>Xl(t,e,n,r)),gv=(t,e)=>!!t&&!!e&&(t===e||t.contains(e)),ig=(t,e)=>{(t.key===" "||t.key==="Enter")&&(e(t),t.preventDefault())},yV=(t,...e)=>{const n={};let r;for(r in t)e.includes(r)||(n[r]=t[r]);return n},bV=(t,e)=>{const n={};return e.forEach(r=>{r in t&&(n[r]=t[r])}),n};function RMe(t,e,n){return Math.min(Math.max(t,e),n)}var Ny={},LMe={get exports(){return Ny},set exports(t){Ny=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var i=Number(r);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default})(LMe,Ny);const $Me=RH(Ny);var Ry={},BMe={get exports(){return Ry},set exports(t){Ry=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){var i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return i.setUTCFullYear(r.getFullYear()),r.getTime()-i.getTime()}t.exports=e.default})(BMe,Ry);const rD=RH(Ry);function zMe(t,e){var n=qMe(e);return n.formatToParts?HMe(n,t):VMe(n,t)}var FMe={year:0,month:1,day:2,hour:3,minute:4,second:5};function HMe(t,e){try{for(var n=t.formatToParts(e),r=[],i=0;i<n.length;i++){var s=FMe[n[i].type];s>=0&&(r[s]=parseInt(n[i].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function VMe(t,e){var n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var K5={};function qMe(t){if(!K5[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";K5[t]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return K5[t]}function wV(t,e,n,r,i,s,o){var a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(r,i,s,o),a}var iD=36e5,WMe=6e4,X5={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function jMe(t,e,n){var r,i;if(!t||(r=X5.timezoneZ.exec(t),r))return 0;var s;if(r=X5.timezoneHH.exec(t),r)return s=parseInt(r[1],10),sD(s)?-(s*iD):NaN;if(r=X5.timezoneHHMM.exec(t),r){s=parseInt(r[1],10);var o=parseInt(r[2],10);return sD(s,o)?(i=Math.abs(s)*iD+o*WMe,s>0?-i:i):NaN}if(UMe(t)){e=new Date(e||Date.now());var a=YMe(e),l=z7(a,t),c=QMe(e,l,t);return-c}return NaN}function YMe(t){return wV(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function z7(t,e){var n=zMe(t,e),r=wV(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=t.getTime(),s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function QMe(t,e,n){var r=t.getTime(),i=r-e,s=z7(new Date(i),n);if(e===s)return e;i-=s-e;var o=z7(new Date(i),n);return s===o?s:Math.max(s,o)}function sD(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var oD={};function UMe(t){if(oD[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),oD[t]=!0,!0}catch{return!1}}var GMe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const KMe=GMe;var Z5=36e5,aD=6e4,XMe=2,hi={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:KMe};function ZMe(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n=e||{},r=n.additionalDigits==null?XMe:$Me(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=JMe(t),s=eTe(i.date,r),o=s.year,a=s.restDateString,l=tTe(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,h;if(i.time&&(u=nTe(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(h=jMe(i.timeZone||n.timeZone,new Date(c+u)),isNaN(h))return new Date(NaN)}else h=rD(new Date(c+u)),h=rD(new Date(c+u+h));return new Date(c+u+h)}else return new Date(NaN)}function JMe(t){var e={},n=hi.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=hi.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){var i=hi.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function eTe(t,e){var n=hi.YYY[e],r=hi.YYYYY[e],i;if(i=hi.YYYY.exec(t)||r.exec(t),i){var s=i[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(i=hi.YY.exec(t)||n.exec(t),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}return{year:null}}function tTe(t,e){if(e===null)return null;var n,r,i,s;if(t.length===0)return r=new Date(0),r.setUTCFullYear(e),r;if(n=hi.MM.exec(t),n)return r=new Date(0),i=parseInt(n[1],10)-1,cD(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(n=hi.DDD.exec(t),n){r=new Date(0);var o=parseInt(n[1],10);return sTe(e,o)?(r.setUTCFullYear(e,0,o),r):new Date(NaN)}if(n=hi.MMDD.exec(t),n){r=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return cD(e,i,a)?(r.setUTCFullYear(e,i,a),r):new Date(NaN)}if(n=hi.Www.exec(t),n)return s=parseInt(n[1],10)-1,uD(e,s)?lD(e,s):new Date(NaN);if(n=hi.WwwD.exec(t),n){s=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return uD(e,s,l)?lD(e,s,l):new Date(NaN)}return null}function nTe(t){var e,n,r;if(e=hi.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),J5(n)?n%24*Z5:NaN;if(e=hi.HHMM.exec(t),e)return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),J5(n,r)?n%24*Z5+r*aD:NaN;if(e=hi.HHMMSS.exec(t),e){n=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return J5(n,r,i)?n%24*Z5+r*aD+i*1e3:NaN}return null}function lD(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=e*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var rTe=[31,28,31,30,31,30,31,31,30,31,30,31],iTe=[31,29,31,30,31,30,31,31,30,31,30,31];function xV(t){return t%400===0||t%4===0&&t%100!==0}function cD(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var r=xV(t);if(r&&n>iTe[e]||!r&&n>rTe[e])return!1}return!0}function sTe(t,e){if(e<1)return!1;var n=xV(t);return!(n&&e>366||!n&&e>365)}function uD(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function J5(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function ti(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function vv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vv=function(n){return typeof n}:vv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vv(t)}function Ol(t){ti(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||vv(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wd(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var oTe={};function d9(){return oTe}function rh(t,e){var n,r,i,s,o,a,l,c;ti(1,arguments);var u=d9(),h=wd((n=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ol(t),d=f.getDay(),p=(d<h?7:0)+d-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function hD(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var aTe=6048e5;function lTe(t,e,n){ti(2,arguments);var r=rh(t,n),i=rh(e,n),s=r.getTime()-hD(r),o=i.getTime()-hD(i);return Math.round((s-o)/aTe)}function cTe(t){ti(1,arguments);var e=Ol(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function uTe(t){ti(1,arguments);var e=Ol(t);return e.setDate(1),e.setHours(0,0,0,0),e}function hTe(t,e){return ti(1,arguments),lTe(cTe(t),uTe(t),e)+1}function fTe(t,e){var n,r,i,s,o,a,l,c;ti(1,arguments);var u=Ol(t),h=u.getFullYear(),f=d9(),d=wd((n=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(h+1,0,d),p.setHours(0,0,0,0);var m=rh(p,e),g=new Date(0);g.setFullYear(h,0,d),g.setHours(0,0,0,0);var v=rh(g,e);return u.getTime()>=m.getTime()?h+1:u.getTime()>=v.getTime()?h:h-1}function dTe(t,e){var n,r,i,s,o,a,l,c;ti(1,arguments);var u=d9(),h=wd((n=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=fTe(t,e),d=new Date(0);d.setFullYear(f,0,h),d.setHours(0,0,0,0);var p=rh(d,e);return p}var pTe=6048e5;function mTe(t,e){ti(1,arguments);var n=Ol(t),r=rh(n,e).getTime()-dTe(n,e).getTime();return Math.round(r/pTe)+1}function Ly(t){return ti(1,arguments),rh(t,{weekStartsOn:1})}function gTe(t){ti(1,arguments);var e=Ol(t),n=e.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var i=Ly(r),s=new Date(0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);var o=Ly(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function vTe(t){ti(1,arguments);var e=gTe(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var r=Ly(n);return r}var yTe=6048e5;function bTe(t){ti(1,arguments);var e=Ol(t),n=Ly(e).getTime()-vTe(e).getTime();return Math.round(n/yTe)+1}function ci(t,e){ti(2,arguments);var n=Ol(t),r=wd(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function $y(t,e){ti(2,arguments);var n=Ol(t),r=wd(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var o=s.getDate();return i>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}function fD(t,e){ti(2,arguments);var n=wd(e);return $y(t,n*12)}const wTe={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function xTe({monthComps:t,prevMonthComps:e,nextMonthComps:n},r){const i=[],{firstDayOfWeek:s,firstWeekday:o,isoWeeknumbers:a,weeknumbers:l,numDays:c,numWeeks:u}=t,h=o+(o<s?Vr:0)-s;let f=!0,d=!1,p=!1,m=0;const g=new Intl.DateTimeFormat(r.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let v=e.numDays-h+1,b=e.numDays-v+1,S=Math.floor((v-1)/Vr+1),O=1,k=e.numWeeks,C=1,T=e.month,R=e.year;const L=new Date,I=L.getDate(),F=L.getMonth()+1,E=L.getFullYear();for(let ee=1;ee<=pAe;ee++){for(let G=1,W=s;G<=Vr;G++,W+=W===Vr?1-Vr:1){f&&W===o&&(v=1,b=t.numDays,S=Math.floor((v-1)/Vr+1),O=Math.floor((c-v)/Vr+1),k=1,C=u,T=t.month,R=t.year,f=!1,d=!0);const X=r.getDateFromParams(R,T,v,0,0,0,0),te=r.getDateFromParams(R,T,v,12,0,0,0),ne=r.getDateFromParams(R,T,v,23,59,59,999),ye=X,A=`${wn(R,4)}-${wn(T,2)}-${wn(v,2)}`,fe=G,he=Vr-G,P=l[ee-1],Ue=a[ee-1],je=v===I&&T===F&&R===E,st=d&&v===1,dt=d&&v===c,bt=ee===1,Nt=ee===u,Ot=G===1,Kt=G===Vr,$=PV(R,T,v);i.push({locale:r,id:A,position:++m,label:v.toString(),ariaLabel:g.format(new Date(R,T-1,v)),day:v,dayFromEnd:b,weekday:W,weekdayPosition:fe,weekdayPositionFromEnd:he,weekdayOrdinal:S,weekdayOrdinalFromEnd:O,week:k,weekFromEnd:C,weekPosition:ee,weeknumber:P,isoWeeknumber:Ue,month:T,year:R,date:ye,startDate:X,endDate:ne,noonDate:te,dayIndex:$,isToday:je,isFirstDay:st,isLastDay:dt,isDisabled:!d,isFocusable:!d,isFocused:!1,inMonth:d,inPrevMonth:f,inNextMonth:p,onTop:bt,onBottom:Nt,onLeft:Ot,onRight:Kt,classes:[`id-${A}`,`day-${v}`,`day-from-end-${b}`,`weekday-${W}`,`weekday-position-${fe}`,`weekday-ordinal-${S}`,`weekday-ordinal-from-end-${O}`,`week-${k}`,`week-from-end-${C}`,{"is-today":je,"is-first-day":st,"is-last-day":dt,"in-month":d,"in-prev-month":f,"in-next-month":p,"on-top":bt,"on-bottom":Nt,"on-left":Ot,"on-right":Kt}]}),d&&dt?(d=!1,p=!0,v=1,b=c,S=1,O=Math.floor((c-v)/Vr+1),k=1,C=n.numWeeks,T=n.month,R=n.year):(v++,b--,S=Math.floor((v-1)/Vr+1),O=Math.floor((c-v)/Vr+1))}k++,C--}return i}function kTe(t,e,n,r){const i=t.reduce((s,o,a)=>{const l=Math.floor(a/7);let c=s[l];return c||(c={id:`week-${l+1}`,title:"",week:o.week,weekPosition:o.weekPosition,weeknumber:o.weeknumber,isoWeeknumber:o.isoWeeknumber,weeknumberDisplay:e?o.weeknumber:n?o.isoWeeknumber:void 0,days:[]},s[l]=c),c.days.push(o),s},Array(t.length/Vr));return i.forEach(s=>{const o=s.days[0],a=s.days[s.days.length-1];o.month===a.month?s.title=`${r.formatDate(o.date,"MMMM YYYY")}`:o.year===a.year?s.title=`${r.formatDate(o.date,"MMM")} - ${r.formatDate(a.date,"MMM YYYY")}`:s.title=`${r.formatDate(o.date,"MMM YYYY")} - ${r.formatDate(a.date,"MMM YYYY")}`}),i}function STe(t,e){return t.days.map(n=>({label:e.formatDate(n.date,e.masks.weekdays),weekday:n.weekday}))}function CTe(t,e){return`${e}.${wn(t,2)}`}function kV(t,e,n){return bV(n.getDateParts(n.toDate(t)),wTe[e])}function SV({day:t,week:e,month:n,year:r},i,s,o){if(s==="daily"&&t){const a=new Date(r,n-1,t),l=ci(a,i);return{day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()}}else if(s==="weekly"&&e){const l=o.getMonthParts(n,r).firstDayOfMonth,c=ci(l,(e-1+i)*7),u=o.getDateParts(c);return{week:u.week,month:u.month,year:u.year}}else{const a=new Date(r,n-1,1),l=$y(a,i);return{month:l.getMonth()+1,year:l.getFullYear()}}}function Ko(t){return t!=null&&t.month!=null&&t.year!=null}function F7(t,e){return!Ko(t)||!Ko(e)?!1:(t=t,e=e,t.year!==e.year?t.year<e.year:t.month&&e.month&&t.month!==e.month?t.month<e.month:t.week&&e.week&&t.week!==e.week?t.week<e.week:t.day&&e.day&&t.day!==e.day?t.day<e.day:!1)}function By(t,e){return!Ko(t)||!Ko(e)?!1:(t=t,e=e,t.year!==e.year?t.year>e.year:t.month&&e.month&&t.month!==e.month?t.month>e.month:t.week&&e.week&&t.week!==e.week?t.week>e.week:t.day&&e.day&&t.day!==e.day?t.day>e.day:!1)}function OTe(t,e,n){return(t||!1)&&!F7(t,e)&&!By(t,n)}function MTe(t,e){return!t&&e||t&&!e?!1:!t&&!e?!0:(t=t,e=e,t.year===e.year&&t.month===e.month&&t.week===e.week&&t.day===e.day)}function TTe(t,e,n,r){if(!Ko(t)||!Ko(e))return[];const i=[];for(;!By(t,e);)i.push(t),t=SV(t,1,n,r);return i}function CV(t){const{day:e,week:n,month:r,year:i}=t;let s=`${i}-${wn(r,2)}`;return n&&(s=`${s}-w${n}`),e&&(s=`${s}-${wn(e,2)}`),s}function ATe(t,e){const{month:n,year:r,showWeeknumbers:i,showIsoWeeknumbers:s}=t,o=new Date(r,n-1,15),a=e.getMonthParts(n,r),l=e.getPrevMonthParts(n,r),c=e.getNextMonthParts(n,r),u=xTe({monthComps:a,prevMonthComps:l,nextMonthComps:c},e),h=kTe(u,i,s,e),f=STe(h[0],e);return{id:CV(t),month:n,year:r,monthTitle:e.formatDate(o,e.masks.title),shortMonthLabel:e.formatDate(o,"MMM"),monthLabel:e.formatDate(o,"MMMM"),shortYearLabel:r.toString().substring(2),yearLabel:r.toString(),monthComps:a,prevMonthComps:l,nextMonthComps:c,days:u,weeks:h,weekdays:f}}function _Te(t,e){const{day:n,week:r,view:i,trimWeeks:s}=t,o={...e,...t,title:"",viewDays:[],viewWeeks:[]};switch(i){case"daily":{let a=o.days.find(c=>c.inMonth);n?a=o.days.find(c=>c.day===n&&c.inMonth)||a:r&&(a=o.days.find(c=>c.week===r&&c.inMonth));const l=o.weeks[a.week-1];o.viewWeeks=[l],o.viewDays=[a],o.week=a.week,o.weekTitle=l.title,o.day=a.day,o.dayTitle=a.ariaLabel,o.title=o.dayTitle;break}case"weekly":{o.week=r||1;const a=o.weeks[o.week-1];o.viewWeeks=[a],o.viewDays=a.days,o.weekTitle=a.title,o.title=o.weekTitle;break}default:{o.title=o.monthTitle,o.viewWeeks=o.weeks.slice(0,s?o.monthComps.numWeeks:void 0),o.viewDays=o.days;break}}return o}class dD{constructor(e,n,r){vt(this,"keys",[]),vt(this,"store",{}),this.size=e,this.createKey=n,this.createItem=r}get(...e){const n=this.createKey(...e);return this.store[n]}getOrSet(...e){const n=this.createKey(...e);if(this.store[n])return this.store[n];const r=this.createItem(...e);if(this.keys.length>=this.size){const i=this.keys.shift();i!=null&&delete this.store[i]}return this.keys.push(n),this.store[n]=r,r}}class yf{constructor(e,n=new zy){vt(this,"order"),vt(this,"locale"),vt(this,"start",null),vt(this,"end",null),vt(this,"repeat",null);var r;this.locale=n;const{start:i,end:s,span:o,order:a,repeat:l}=e;vf(i)&&(this.start=n.getDateParts(i)),vf(s)?this.end=n.getDateParts(s):this.start!=null&&o&&(this.end=n.getDateParts(ci(this.start.date,o-1))),this.order=a??0,l&&(this.repeat=new Fy({from:(r=this.start)==null?void 0:r.date,...l},{locale:this.locale}))}static fromMany(e,n){return(zs(e)?e:[e]).filter(r=>r).map(r=>yf.from(r,n))}static from(e,n){if(e instanceof yf)return e;const r={start:null,end:null};return e!=null&&(zs(e)?(r.start=e[0]??null,r.end=e[1]??null):pl(e)?Object.assign(r,e):(r.start=e,r.end=e)),r.start!=null&&(r.start=new Date(r.start)),r.end!=null&&(r.end=new Date(r.end)),new yf(r,n)}get opts(){const{order:e,locale:n}=this;return{order:e,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:e,end:n}=this;return e&&n&&e.year===n.year&&e.month===n.month&&e.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(e){var n,r;return((n=this.start)==null?void 0:n.dayIndex)===e.dayIndex||!!((r=this.repeat)!=null&&r.passes(e))}intersectsDay(e){return this.intersectsDayRange(e,e)}intersectsRange(e){var n,r;return this.intersectsDayRange(((n=e.start)==null?void 0:n.dayIndex)??-1/0,((r=e.end)==null?void 0:r.dayIndex)??1/0)}intersectsDayRange(e,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<e)}}class DTe{constructor(){vt(this,"records",{})}render(e,n,r){var i,s,o,a;let l=null;const c=r[0].dayIndex,u=r[r.length-1].dayIndex;return n.hasRepeat?r.forEach(h=>{var f,d;if(n.startsOnDay(h)){const p=n.daySpan<1/0?n.daySpan:1;l={startDay:h.dayIndex,startTime:((f=n.start)==null?void 0:f.time)??0,endDay:h.dayIndex+p-1,endTime:((d=n.end)==null?void 0:d.time)??yv},this.getRangeRecords(e).push(l)}}):n.intersectsDayRange(c,u)&&(l={startDay:((i=n.start)==null?void 0:i.dayIndex)??-1/0,startTime:((s=n.start)==null?void 0:s.time)??-1/0,endDay:((o=n.end)==null?void 0:o.dayIndex)??1/0,endTime:((a=n.end)==null?void 0:a.time)??1/0},this.getRangeRecords(e).push(l)),l}getRangeRecords(e){let n=this.records[e.key];return n||(n={ranges:[],data:e},this.records[e.key]=n),n.ranges}getCell(e,n){return this.getCells(n).find(s=>s.data.key===e)}cellExists(e,n){const r=this.records[e];return r==null?!1:r.ranges.some(i=>i.startDay<=n&&i.endDay>=n)}getCells(e){const n=Object.values(this.records),r=[],{dayIndex:i}=e;return n.forEach(({data:s,ranges:o})=>{o.filter(a=>a.startDay<=i&&a.endDay>=i).forEach(a=>{const l=i===a.startDay,c=i===a.endDay,u=l?a.startTime:0,h=new Date(e.startDate.getTime()+u),f=c?a.endTime:yv,d=new Date(e.endDate.getTime()+f),p=u===0&&f===yv,m=s.order||0;r.push({...a,data:s,onStart:l,onEnd:c,startTime:u,startDate:h,endTime:f,endDate:d,allDay:p,order:m})})}),r.sort((s,o)=>s.order-o.order),r}}const ml={ar:{dow:7,L:"D/M/YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYYMD"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};ml.en=ml["en-US"];ml.es=ml["es-ES"];ml.no=ml.nb;ml.zh=ml["zh-CN"];const ETe=Object.entries(ml).reduce((t,[e,{dow:n,L:r}])=>(t[e]={id:e,firstDayOfWeek:n,masks:{L:r}},t),{}),ITe="MMMM YYYY",PTe="W",NTe="MMM",RTe="h A",LTe=["L","YYYY-MM-DD","YYYY/MM/DD"],$Te=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],BTe=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],zTe=["h:mm A"],FTe=["HH:mm"],HTe="WWW, MMM D, YYYY",VTe=["L","YYYY-MM-DD","YYYY/MM/DD"],qTe="iso",WTe="YYYY-MM-DDTHH:mm:ss.SSSZ",jTe={title:ITe,weekdays:PTe,navMonths:NTe,hours:RTe,input:LTe,inputDateTime:$Te,inputDateTime24hr:BTe,inputTime:zTe,inputTime24hr:FTe,dayPopover:HTe,data:VTe,model:qTe,iso:WTe},YTe=300,QTe=60,UTe=80,GTe={maxSwipeTime:YTe,minHorizontalSwipeDistance:QTe,maxVerticalSwipeDistance:UTe},KTe={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:GTe,masks:jTe,locales:ETe,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},bf=ih(KTe),XTe=ue(()=>yCe(bf.locales,t=>(t.masks=Qf(t.masks,bf.masks),t))),Sc=t=>typeof window<"u"&&vV(window.__vcalendar__,t)?ku(window.__vcalendar__,t):ku(bf,t),ZTe=(t,e)=>(t.config.globalProperties.$VCalendar=bf,Object.assign(bf,Qf(e,bf))),JTe=12,eAe=5;function tAe(t,e){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let r;Go(t)?r=t:vV(t,"id")&&(r=t.id),r=(r||n).toLowerCase();const i=Object.keys(e),s=l=>i.find(c=>c.toLowerCase()===l);r=s(r)||s(r.substring(0,2))||n;const o={...e["en-IE"],...e[r],id:r,monthCacheSize:JTe,pageCacheSize:eAe};return pl(t)?Qf(t,o):o}class zy{constructor(e=void 0,n){vt(this,"id"),vt(this,"daysInWeek"),vt(this,"firstDayOfWeek"),vt(this,"masks"),vt(this,"timezone"),vt(this,"hourLabels"),vt(this,"dayNames"),vt(this,"dayNamesShort"),vt(this,"dayNamesShorter"),vt(this,"dayNamesNarrow"),vt(this,"monthNames"),vt(this,"monthNamesShort"),vt(this,"relativeTimeNames"),vt(this,"amPm",["am","pm"]),vt(this,"monthCache"),vt(this,"pageCache");const{id:r,firstDayOfWeek:i,masks:s,monthCacheSize:o,pageCacheSize:a}=tAe(e,XTe.value);this.monthCache=new dD(o,SAe,CAe),this.pageCache=new dD(a,CV,ATe),this.id=r,this.daysInWeek=Vr,this.firstDayOfWeek=RMe(i,1,Vr),this.masks=s,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=ew("long",this.id),this.dayNamesShort=ew("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(l=>l.substring(0,2)),this.dayNamesNarrow=ew("narrow",this.id),this.monthNames=bD("long",this.id),this.monthNamesShort=bD("short",this.id),this.relativeTimeNames=TAe(this.id)}formatDate(e,n){return IAe(e,n,this)}parseDate(e,n){return wD(e,n,this)}toDate(e,n={}){const r=new Date(NaN);let i=r;const{fillDate:s,mask:o,patch:a,rules:l}=n;if(go(e)?(n.type="number",i=new Date(+e)):Go(e)?(n.type="string",i=e?wD(e,o||"iso",this):r):vf(e)?(n.type="date",i=new Date(e.getTime())):p9(e)&&(n.type="object",i=this.getDateFromParts(e)),i&&(a||l)){let c=this.getDateParts(i);if(a&&s!=null){const u=this.getDateParts(this.toDate(s));c=this.getDateParts(this.toDate({...u,...bV(c,dAe[a])}))}l&&(c=EAe(c,l)),i=this.getDateFromParts(c)}return i||r}toDateOrNull(e,n={}){const r=this.toDate(e,n);return isNaN(r.getTime())?null:r}fromDate(e,{type:n,mask:r}={}){switch(n){case"number":return e?e.getTime():NaN;case"string":return e?this.formatDate(e,r||"iso"):"";case"object":return e?this.getDateParts(e):null;default:return e?new Date(e):null}}range(e){return yf.from(e,this)}ranges(e){return yf.fromMany(e,this)}getDateParts(e){return kAe(e,this)}getDateFromParts(e){return RV(e,this.timezone)}getDateFromParams(e,n,r,i,s,o,a){return this.getDateFromParts({year:e,month:n,day:r,hours:i,minutes:s,seconds:o,milliseconds:a})}getPage(e){const n=this.pageCache.getOrSet(e,this);return _Te(e,n)}getMonthParts(e,n){const{firstDayOfWeek:r}=this;return this.monthCache.getOrSet(e,n,r)}getThisMonthParts(){const e=new Date;return this.getMonthParts(e.getMonth()+1,e.getFullYear())}getPrevMonthParts(e,n){return e===1?this.getMonthParts(12,n-1):this.getMonthParts(e-1,n)}getNextMonthParts(e,n){return e===12?this.getMonthParts(1,n+1):this.getMonthParts(e+1,n)}getHourLabels(){return MAe().map(e=>this.formatDate(e,this.masks.hours))}getDayId(e){return this.formatDate(e,"YYYY-MM-DD")}}var qh=(t=>(t.Any="any",t.All="all",t))(qh||{}),OV=(t=>(t.Days="days",t.Weeks="weeks",t.Months="months",t.Years="years",t))(OV||{}),MV=(t=>(t.Days="days",t.Weekdays="weekdays",t.Weeks="weeks",t.Months="months",t.Years="years",t))(MV||{}),TV=(t=>(t.OrdinalWeekdays="ordinalWeekdays",t))(TV||{});class nAe{constructor(e,n,r){vt(this,"validated",!0),this.type=e,this.interval=n,this.from=r,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(e){if(!this.validated)return!0;const{date:n}=e;switch(this.type){case"days":return m9(this.from.date,n)%this.interval===0;case"weeks":return wAe(this.from.date,n)%this.interval===0;case"months":return xAe(this.from.date,n)%this.interval===0;case"years":return NV(this.from.date,n)%this.interval===0;default:return!1}}}class xd{constructor(e,n,r,i){vt(this,"components",[]),this.type=e,this.validator=r,this.getter=i,this.components=this.normalizeComponents(n)}static create(e,n){switch(e){case"days":return new rAe(n);case"weekdays":return new iAe(n);case"weeks":return new sAe(n);case"months":return new oAe(n);case"years":return new aAe(n)}}normalizeComponents(e){if(this.validator(e))return[e];if(!zs(e))return[];const n=[];return e.forEach(r=>{if(!this.validator(r)){console.error(`Component value ${r} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(r)}),n}passes(e){return this.getter(e).some(i=>this.components.includes(i))}}class rAe extends xd{constructor(e){super("days",e,uAe,({day:n,dayFromEnd:r})=>[n,-r])}}class iAe extends xd{constructor(e){super("weekdays",e,H7,({weekday:n})=>[n])}}class sAe extends xd{constructor(e){super("weeks",e,hAe,({week:n,weekFromEnd:r})=>[n,-r])}}class oAe extends xd{constructor(e){super("months",e,fAe,({month:n})=>[n])}}class aAe extends xd{constructor(e){super("years",e,go,({year:n})=>[n])}}class lAe{constructor(e,n){vt(this,"components"),this.type=e,this.components=this.normalizeComponents(n)}normalizeArrayConfig(e){const n=[];return e.forEach((r,i)=>{if(go(r)){if(i===0)return;if(!pD(e[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!H7(r)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([e[0],r])}else zs(r)&&n.push(...this.normalizeArrayConfig(r))}),n}normalizeComponents(e){const n=[];return e.forEach((r,i)=>{if(go(r)){if(i===0)return;if(!pD(e[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!H7(r)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([e[0],r])}else zs(r)&&n.push(...this.normalizeArrayConfig(r))}),n}passes(e){const{weekday:n,weekdayOrdinal:r,weekdayOrdinalFromEnd:i}=e;return this.components.some(([s,o])=>(s===r||s===-i)&&n===o)}}class cAe{constructor(e){vt(this,"type","function"),vt(this,"validated",!0),this.fn=e,vh(e)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(e){return this.validated?this.fn(e):!0}}class Fy{constructor(e,n={},r){vt(this,"validated",!0),vt(this,"config"),vt(this,"type",qh.Any),vt(this,"from"),vt(this,"until"),vt(this,"rules",[]),vt(this,"locale",new zy),this.parent=r,n.locale&&(this.locale=n.locale),this.config=e,vh(e)?(this.type=qh.All,this.rules=[new cAe(e)]):zs(e)?(this.type=qh.Any,this.rules=e.map(i=>new Fy(i,n,this))):pl(e)?(this.type=qh.All,this.from=e.from?this.locale.getDateParts(e.from):r?.from,this.until=e.until?this.locale.getDateParts(e.until):r?.until,this.rules=this.getObjectRules(e)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(e){const n=[];if(e.every&&(Go(e.every)&&(e.every=[1,`${e.every}s`]),zs(e.every))){const[r=1,i=OV.Days]=e.every;n.push(new nAe(i,r,this.from))}return Object.values(MV).forEach(r=>{r in e&&n.push(xd.create(r,e[r]))}),Object.values(TV).forEach(r=>{r in e&&n.push(new lAe(r,e[r]))}),e.on!=null&&(zs(e.on)||(e.on=[e.on]),n.push(new Fy(e.on,{locale:this.locale},this.parent))),n}passes(e){return this.validated?this.from&&e.dayIndex<=this.from.dayIndex||this.until&&e.dayIndex>=this.until.dayIndex?!1:this.type===qh.Any?this.rules.some(n=>n.passes(e)):this.rules.every(n=>n.passes(e)):!0}}function uAe(t){return go(t)?t>=1&&t<=31:!1}function H7(t){return go(t)?t>=1&&t<=7:!1}function hAe(t){return go(t)?t>=-6&&t<=-1||t>=1&&t<=6:!1}function fAe(t){return go(t)?t>=1&&t<=12:!1}function pD(t){return!(!go(t)||t<-5||t>5||t===0)}const dAe={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},Vr=7,pAe=6,AV=1e3,_V=AV*60,DV=_V*60,yv=DV*24,mAe=[31,28,31,30,31,30,31,31,30,31,30,31],gAe=["L","iso"],E0={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},EV=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,vAe=/\[([^]*?)\]/gm,mD={D(t){return t.day},DD(t){return wn(t.day,2)},d(t){return t.weekday-1},dd(t){return wn(t.weekday-1,2)},W(t,e){return e.dayNamesNarrow[t.weekday-1]},WW(t,e){return e.dayNamesShorter[t.weekday-1]},WWW(t,e){return e.dayNamesShort[t.weekday-1]},WWWW(t,e){return e.dayNames[t.weekday-1]},M(t){return t.month},MM(t){return wn(t.month,2)},MMM(t,e){return e.monthNamesShort[t.month-1]},MMMM(t,e){return e.monthNames[t.month-1]},YY(t){return String(t.year).substr(2)},YYYY(t){return wn(t.year,4)},h(t){return t.hours%12||12},hh(t){return wn(t.hours%12||12,2)},H(t){return t.hours},HH(t){return wn(t.hours,2)},m(t){return t.minutes},mm(t){return wn(t.minutes,2)},s(t){return t.seconds},ss(t){return wn(t.seconds,2)},S(t){return Math.round(t.milliseconds/100)},SS(t){return wn(Math.round(t.milliseconds/10),2)},SSS(t){return wn(t.milliseconds,3)},a(t,e){return t.hours<12?e.amPm[0]:e.amPm[1]},A(t,e){return t.hours<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(t){const e=t.timezoneOffset;return`${e>0?"-":"+"}${wn(Math.floor(Math.abs(e)/60),2)}`},ZZZ(t){const e=t.timezoneOffset;return`${e>0?"-":"+"}${wn(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)}`},ZZZZ(t){const e=t.timezoneOffset;return`${e>0?"-":"+"}${wn(Math.floor(Math.abs(e)/60),2)}:${wn(Math.abs(e)%60,2)}`}},Rl=/\d\d?/,yAe=/\d{3}/,bAe=/\d{4}/,jd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,gD=()=>{},vD=t=>(e,n,r)=>{const i=r[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(e.month=i)},_n={D:[Rl,(t,e)=>{t.day=e}],Do:[new RegExp(Rl.source+jd.source),(t,e)=>{t.day=parseInt(e,10)}],d:[Rl,gD],W:[jd,gD],M:[Rl,(t,e)=>{t.month=e-1}],MMM:[jd,vD("monthNamesShort")],MMMM:[jd,vD("monthNames")],YY:[Rl,(t,e)=>{const r=+new Date().getFullYear().toString().substr(0,2);t.year=+`${e>68?r-1:r}${e}`}],YYYY:[bAe,(t,e)=>{t.year=e}],S:[/\d/,(t,e)=>{t.milliseconds=e*100}],SS:[/\d{2}/,(t,e)=>{t.milliseconds=e*10}],SSS:[yAe,(t,e)=>{t.milliseconds=e}],h:[Rl,(t,e)=>{t.hours=e}],m:[Rl,(t,e)=>{t.minutes=e}],s:[Rl,(t,e)=>{t.seconds=e}],a:[jd,(t,e,n)=>{const r=e.toLowerCase();r===n.amPm[0]?t.isPm=!1:r===n.amPm[1]&&(t.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(t,e)=>{e==="Z"&&(e="+00:00");const n=`${e}`.match(/([+-]|\d\d)/gi);if(n){const r=+n[1]*60+parseInt(n[2],10);t.timezoneOffset=n[0]==="+"?r:-r}}]};_n.DD=_n.D;_n.dd=_n.d;_n.WWWW=_n.WWW=_n.WW=_n.W;_n.MM=_n.M;_n.mm=_n.m;_n.hh=_n.H=_n.HH=_n.h;_n.ss=_n.s;_n.A=_n.a;_n.ZZZZ=_n.ZZZ=_n.ZZ=_n.Z;function IV(t,e){return(Ya(t)&&t||[Go(t)&&t||"YYYY-MM-DD"]).map(n=>gAe.reduce((r,i)=>r.replace(i,e.masks[i]||""),n))}function p9(t){return pl(t)&&"year"in t&&"month"in t&&"day"in t}function yD(t,e=1){const n=t.getDay()+1,r=n>=e?e-n:-(7-(e-n));return ci(t,r)}function PV(t,e,n){const r=Date.UTC(t,e-1,n);return m9(new Date(0),new Date(r))}function m9(t,e){return Math.round((e.getTime()-t.getTime())/yv)}function wAe(t,e){return Math.ceil(m9(yD(t),yD(e))/7)}function NV(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}function xAe(t,e){return NV(t,e)*12+(e.getMonth()-t.getMonth())}function RV(t,e=""){const n=new Date,{year:r=n.getFullYear(),month:i=n.getMonth()+1,day:s=n.getDate(),hours:o=0,minutes:a=0,seconds:l=0,milliseconds:c=0}=t;if(e){const u=`${wn(r,4)}-${wn(i,2)}-${wn(s,2)}T${wn(o,2)}:${wn(a,2)}:${wn(l,2)}.${wn(c,3)}`;return ZMe(u,{timeZone:e})}return new Date(r,i-1,s,o,a,l,c)}function kAe(t,e){let n=new Date(t.getTime());e.timezone&&(n=new Date(t.toLocaleString("en-US",{timeZone:e.timezone})),n.setMilliseconds(t.getMilliseconds()));const r=n.getMilliseconds(),i=n.getSeconds(),s=n.getMinutes(),o=n.getHours(),a=r+i*AV+s*_V+o*DV,l=n.getMonth()+1,c=n.getFullYear(),u=e.getMonthParts(l,c),h=n.getDate(),f=u.numDays-h+1,d=n.getDay()+1,p=Math.floor((h-1)/7+1),m=Math.floor((u.numDays-h)/7+1),g=Math.ceil((h+Math.abs(u.firstWeekday-u.firstDayOfWeek))/7),v=u.numWeeks-g+1,b=u.weeknumbers[g],S=PV(c,l,h);return{milliseconds:r,seconds:i,minutes:s,hours:o,time:a,day:h,dayFromEnd:f,weekday:d,weekdayOrdinal:p,weekdayOrdinalFromEnd:m,week:g,weekFromEnd:v,weeknumber:b,month:l,year:c,date:n,dateTime:n.getTime(),dayIndex:S,timezoneOffset:0,isValid:!0}}function SAe(t,e,n){return`${e}-${t}-${n}`}function CAe(t,e,n){const r=e%4===0&&e%100!==0||e%400===0,i=new Date(e,t-1,1),s=i.getDay()+1,o=t===2&&r?29:mAe[t-1],a=n-1,l=hTe(i,{weekStartsOn:a}),c=[],u=[];for(let h=0;h<l;h++){const f=ci(i,h*7);c.push(mTe(f,{weekStartsOn:a})),u.push(bTe(f))}return{firstDayOfWeek:n,firstDayOfMonth:i,inLeapYear:r,firstWeekday:s,numDays:o,numWeeks:l,month:t,year:e,weeknumbers:c,isoWeeknumbers:u}}function OAe(){const t=[];for(let i=0;i<Vr;i++)t.push(RV({year:2020,month:1,day:5+i,hours:12}));return t}function ew(t,e=void 0){const n=new Intl.DateTimeFormat(e,{weekday:t});return OAe().map(r=>n.format(r))}function MAe(){const t=[];for(let e=0;e<=24;e++)t.push(new Date(2e3,0,1,e));return t}function TAe(t=void 0){const e=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(t);return e.reduce((r,i)=>{const s=n.formatToParts(100,i);return r[i]=s[1].unit,r},{})}function LV(){const t=[];for(let e=0;e<12;e++)t.push(new Date(2e3,e,15));return t}function bD(t,e=void 0){const n=new Intl.DateTimeFormat(e,{month:t,timeZone:"UTC"});return LV().map(r=>n.format(r))}function AAe(t,e,n){return go(e)?e===t:zs(e)?e.includes(t):vh(e)?e(t,n):!(e.min!=null&&e.min>t||e.max!=null&&e.max<t||e.interval!=null&&t%e.interval!==0)}function I0(t,e,n){const r=[],[i,s,o]=e;for(let a=i;a<=s;a++)(n==null||AAe(a,n,t))&&r.push({value:a,label:wn(a,o)});return r}function _Ae(t,e){return{milliseconds:I0(t,E0.milliseconds,e.milliseconds),seconds:I0(t,E0.seconds,e.seconds),minutes:I0(t,E0.minutes,e.minutes),hours:I0(t,E0.hours,e.hours)}}function DAe(t,e,n,r){const s=I0(t,e,r).reduce((o,a)=>{if(a.disabled)return o;if(isNaN(o))return a.value;const l=Math.abs(o-n);return Math.abs(a.value-n)<l?a.value:o},NaN);return isNaN(s)?n:s}function EAe(t,e){const n={...t};return Object.entries(e).forEach(([r,i])=>{const s=E0[r],o=t[r];n[r]=DAe(t,s,o,i)}),n}function wD(t,e,n){return IV(e,n).map(i=>{if(typeof i!="string")throw new Error("Invalid mask");let s=t;if(s.length>1e3)return!1;let o=!0;const a={};if(i.replace(EV,u=>{if(_n[u]){const h=_n[u],f=s.search(h[0]);~f?s.replace(h[0],d=>(h[1](a,d,n),s=s.substr(f+d.length),d)):o=!1}return _n[u]?"":u.slice(1,u.length-1)}),!o)return!1;const l=new Date;a.hours!=null&&(a.isPm===!0&&+a.hours!=12?a.hours=+a.hours+12:a.isPm===!1&&+a.hours==12&&(a.hours=0));let c;return a.timezoneOffset!=null?(a.minutes=+(a.minutes||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hours||0,a.minutes||0,a.seconds||0,a.milliseconds||0))):c=n.getDateFromParts({year:a.year||l.getFullYear(),month:(a.month||0)+1,day:a.day||1,hours:a.hours||0,minutes:a.minutes||0,seconds:a.seconds||0,milliseconds:a.milliseconds||0}),c}).find(i=>i)||new Date(t)}function IAe(t,e,n){if(t==null)return"";let r=IV(e,n)[0];/Z$/.test(r)&&(n.timezone="utc");const i=[];r=r.replace(vAe,(o,a)=>(i.push(a),"??"));const s=n.getDateParts(t);return r=r.replace(EV,o=>o in mD?mD[o](s,n):o.slice(1,o.length-1)),r.replace(/\?\?/g,()=>i.shift())}let PAe=0;class $V{constructor(e,n,r){vt(this,"key",""),vt(this,"hashcode",""),vt(this,"highlight",null),vt(this,"content",null),vt(this,"dot",null),vt(this,"bar",null),vt(this,"event",null),vt(this,"popover",null),vt(this,"customData",null),vt(this,"ranges"),vt(this,"hasRanges",!1),vt(this,"order",0),vt(this,"pinPage",!1),vt(this,"maxRepeatSpan",0),vt(this,"locale");const{dates:i}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},e);this.key||(this.key=++PAe),this.locale=r,n.normalizeGlyphs(this),this.ranges=r.ranges(i??[]),this.hasRanges=!!Ya(this.ranges),this.maxRepeatSpan=this.ranges.filter(s=>s.hasRepeat).map(s=>s.daySpan).reduce((s,o)=>Math.max(s,o),0)}intersectsRange({start:e,end:n}){if(e==null||n==null)return!1;const r=this.ranges.filter(o=>!o.hasRepeat);for(const o of r)if(o.intersectsDayRange(e.dayIndex,n.dayIndex))return!0;const i=this.ranges.filter(o=>o.hasRepeat);if(!i.length)return!1;let s=e;for(this.maxRepeatSpan>1&&(s=this.locale.getDateParts(ci(s.date,-this.maxRepeatSpan)));s.dayIndex<=n.dayIndex;){for(const o of i)if(o.startsOnDay(s))return!0;s=this.locale.getDateParts(ci(s.date,1))}return!1}}function V7(t){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:t}))}function hm(t){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:t}))}function BV(t){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:t}))}function zV(t){const{visibility:e}=t,n=e==="click",r=e==="hover",i=e==="hover-focus",s=e==="focus";t.autoHide=!n;let o=!1,a=!1;const l=p=>{n&&(BV({...t,target:t.target||p.currentTarget}),p.stopPropagation())},c=p=>{o||(o=!0,(r||i)&&V7({...t,target:t.target||p.currentTarget}))},u=()=>{o&&(o=!1,(r||i&&!a)&&hm(t))},h=p=>{a||(a=!0,(s||i)&&V7({...t,target:t.target||p.currentTarget}))},f=p=>{a&&!gv(p.currentTarget,p.relatedTarget)&&(a=!1,(s||i&&!o)&&hm(t))},d={};switch(t.visibility){case"click":d.click=l;break;case"hover":d.mousemove=c,d.mouseleave=u;break;case"focus":d.focusin=h,d.focusout=f;break;case"hover-focus":d.mousemove=c,d.mouseleave=u,d.focusin=h,d.focusout=f;break}return d}const xD=t=>{const e=Py(t);if(e==null)return;const n=e.popoverHandlers;!n||!n.length||(n.forEach(r=>r()),delete e.popoverHandlers)},kD=(t,e)=>{const n=Py(t);if(n==null)return;const r=[],i=zV(e);Object.entries(i).forEach(([s,o])=>{r.push(Zl(n,s,o))}),n.popoverHandlers=r},FV={mounted(t,e){const{value:n}=e;n&&kD(t,n)},updated(t,e){const{oldValue:n,value:r}=e,i=n?.visibility,s=r?.visibility;i!==s&&(i&&(xD(t),s||hm(n)),s&&kD(t,r))},unmounted(t){xD(t)}},NAe=(t,e,{maxSwipeTime:n,minHorizontalSwipeDistance:r,maxVerticalSwipeDistance:i})=>{if(!t||!t.addEventListener||!vh(e))return null;let s=0,o=0,a=null,l=!1;function c(h){const f=h.changedTouches[0];s=f.screenX,o=f.screenY,a=new Date().getTime(),l=!0}function u(h){if(!l||!a)return;l=!1;const f=h.changedTouches[0],d=f.screenX-s,p=f.screenY-o;if(new Date().getTime()-a<n&&Math.abs(d)>=r&&Math.abs(p)<=i){const g={toLeft:!1,toRight:!1};d<0?g.toLeft=!0:g.toRight=!0,e(g)}}return Zl(t,"touchstart",c,{passive:!0}),Zl(t,"touchend",u,{passive:!0}),()=>{Xl(t,"touchstart",c),Xl(t,"touchend",u)}},bv={},RAe=(t,e=10)=>{bv[t]=Date.now()+e},LAe=(t,e)=>{if(t in bv){const n=bv[t];if(Date.now()<n)return;delete bv[t]}e()};function HV(){return typeof window<"u"}function $Ae(t){return HV()&&t in window}function BAe(t){const e=ae(!1),n=ue(()=>e.value?"dark":"light");let r,i;function s(d){e.value=d.matches}function o(){$Ae("matchMedia")&&(r=window.matchMedia("(prefers-color-scheme: dark)"),r.addEventListener("change",s),e.value=r.matches)}function a(){const{selector:d=":root",darkClass:p="dark"}=t.value,m=document.querySelector(d);e.value=m.classList.contains(p)}function l(d){const{selector:p=":root",darkClass:m="dark"}=d;if(HV()&&p&&m){const g=document.querySelector(p);g&&(i=new MutationObserver(a),i.observe(g,{attributes:!0,attributeFilter:["class"]}),e.value=g.classList.contains(m))}}function c(){h();const d=typeof t.value;d==="string"&&t.value.toLowerCase()==="system"?o():d==="object"?l(t.value):e.value=!!t.value}const u=Vt(()=>t.value,()=>c(),{immediate:!0});function h(){r&&(r.removeEventListener("change",s),r=void 0),i&&(i.disconnect(),i=void 0)}function f(){h(),u()}return la(()=>f()),{isDark:e,displayMode:n,cleanup:f}}const zAe=["base","start","end","startEnd"],FAe=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],HAe={base:{},start:{},end:{}};function g9(t,e,n=HAe){let r=t,i={};e===!0||Go(e)?(r=Go(e)?e:r,i={...n}):pl(e)&&(nD(e,zAe)?i={...e}:i={base:{...e},start:{...e},end:{...e}});const s=Qf(i,{start:i.startEnd,end:i.startEnd},n);return Object.entries(s).forEach(([o,a])=>{let l=r;a===!0||Go(a)?(l=Go(a)?a:l,s[o]={color:l}):pl(a)&&(nD(a,FAe)?s[o]={...a}:s[o]={}),Qf(s[o],{color:l})}),s}class VAe{constructor(){vt(this,"type","highlight")}normalizeConfig(e,n){return g9(e,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(e){e.highlights=[],e.content||(e.content=[])}render({data:e,onStart:n,onEnd:r},i){const{key:s,highlight:o}=e;if(!o)return;const{highlights:a}=i,{base:l,start:c,end:u}=o;n&&r?a.push({...c,key:s,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]}):n?(a.push({...l,key:`${s}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...c,key:s,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]})):r?(a.push({...l,key:`${s}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...u,key:s,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${u.color}`,class:[`vc-highlight vc-highlight-bg-${u.fillMode}`,u.class],contentClass:[`vc-attr vc-highlight-content-${u.fillMode} vc-${u.color}`,u.contentClass]})):a.push({...l,key:`${s}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${l.fillMode}`,l.class],contentClass:[`vc-attr vc-highlight-content-${l.fillMode} vc-${l.color}`,l.contentClass]})}}class v9{constructor(e,n){vt(this,"type",""),vt(this,"collectionType",""),this.type=e,this.collectionType=n}normalizeConfig(e,n){return g9(e,n)}prepareRender(e){e[this.collectionType]=[]}render({data:e,onStart:n,onEnd:r},i){const{key:s}=e,o=e[this.type];if(!s||!o)return;const a=i[this.collectionType],{base:l,start:c,end:u}=o;n?a.push({...c,key:s,class:[`vc-${this.type} vc-${this.type}-start vc-${c.color} vc-attr`,c.class]}):r?a.push({...u,key:s,class:[`vc-${this.type} vc-${this.type}-end vc-${u.color} vc-attr`,u.class]}):a.push({...l,key:s,class:[`vc-${this.type} vc-${this.type}-base vc-${l.color} vc-attr`,l.class]})}}class qAe extends v9{constructor(){super("content","content")}normalizeConfig(e,n){return g9("base",n)}}class WAe extends v9{constructor(){super("dot","dots")}}class jAe extends v9{constructor(){super("bar","bars")}}class YAe{constructor(e){vt(this,"color"),vt(this,"renderers",[new qAe,new VAe,new WAe,new jAe]),this.color=e}normalizeGlyphs(e){this.renderers.forEach(n=>{const r=n.type;e[r]!=null&&(e[r]=n.normalizeConfig(this.color,e[r]))})}prepareRender(e={}){return this.renderers.forEach(n=>{n.prepareRender(e)}),e}render(e,n){this.renderers.forEach(r=>{r.render(e,n)})}}const VV=Symbol("__vc_base_context__"),qV={color:{type:String,default:()=>Sc("color")},isDark:{type:[Boolean,String,Object],default:()=>Sc("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function WV(t){const e=ue(()=>t.color??""),n=ue(()=>t.isDark??!1),{displayMode:r}=BAe(n),i=ue(()=>new YAe(e.value)),s=ue(()=>{if(t.locale instanceof zy)return t.locale;const f=pl(t.locale)?t.locale:{id:t.locale,firstDayOfWeek:t.firstDayOfWeek,masks:t.masks};return new zy(f,t.timezone)}),o=ue(()=>s.value.masks),a=ue(()=>t.minDate),l=ue(()=>t.maxDate),c=ue(()=>{const f=t.disabledDates?[...t.disabledDates]:[];return a.value!=null&&f.push({start:null,end:ci(s.value.toDate(a.value),-1)}),l.value!=null&&f.push({start:ci(s.value.toDate(l.value),1),end:null}),s.value.ranges(f)}),u=ue(()=>new $V({key:"disabled",dates:c.value,order:100},i.value,s.value)),h={color:e,isDark:n,displayMode:r,theme:i,locale:s,masks:o,minDate:a,maxDate:l,disabledDates:c,disabledAttribute:u};return sh(VV,h),h}function QAe(t){return Rs(VV,()=>WV(t),!0)}function jV(t){return`__vc_slot_${t}__`}function YV(t,e={}){Object.keys(t).forEach(n=>{sh(jV(e[n]??n),t[n])})}function QV(t){return Rs(jV(t),null)}const UAe={...qV,view:{type:String,default:"monthly",validator(t){return["daily","weekly","monthly"].includes(t)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>Sc("titlePosition")},navVisibility:{type:String,default:()=>Sc("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},GAe=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],UV=Symbol("__vc_calendar_context__");function KAe(t,{slots:e,emit:n}){const r=ae(null),i=ae(null),s=ae(new Date().getDate()),o=ae(!1),a=ae(Symbol()),l=ae(Symbol()),c=ae(t.view),u=ae([]),h=ae("");let f=null,d=null;YV(e);const{theme:p,color:m,displayMode:g,locale:v,masks:b,minDate:S,maxDate:O,disabledAttribute:k,disabledDates:C}=QAe(t),T=ue(()=>t.rows*t.columns),R=ue(()=>t.step||T.value),L=ue(()=>gV(u.value)??null),I=ue(()=>Qh(u.value)??null),F=ue(()=>t.minPage||(S.value?he(S.value):null)),E=ue(()=>t.maxPage||(O.value?he(O.value):null)),ee=ue(()=>t.navVisibility),G=ue(()=>!!t.showWeeknumbers),W=ue(()=>!!t.showIsoWeeknumbers),X=ue(()=>c.value==="monthly"),te=ue(()=>c.value==="weekly"),ne=ue(()=>c.value==="daily"),ye=()=>{o.value=!0,n("transition-start")},A=()=>{o.value=!1,n("transition-end"),f&&(f.resolve(!0),f=null)},fe=(xe,B,Ce=c.value)=>SV(xe,B,Ce,v.value),he=xe=>kV(xe,c.value,v.value),P=xe=>{!k.value||!Nt.value||(xe.isDisabled=Nt.value.cellExists(k.value.key,xe.dayIndex))},Ue=xe=>{xe.isFocusable=xe.inMonth&&xe.day===s.value},je=(xe,B)=>{for(const Ce of xe)for(const Fe of Ce.days)if(B(Fe)===!1)return},st=ue(()=>u.value.reduce((xe,B)=>(xe.push(...B.viewDays),xe),[])),dt=ue(()=>{const xe=[];return(t.attributes||[]).forEach((B,Ce)=>{!B||!B.dates||xe.push(new $V({...B,order:B.order||0},p.value,v.value))}),k.value&&xe.push(k.value),xe}),bt=ue(()=>Ya(dt.value)),Nt=ue(()=>{const xe=new DTe;return dt.value.forEach(B=>{B.ranges.forEach(Ce=>{xe.render(B,Ce,st.value)})}),xe}),Ot=ue(()=>st.value.reduce((xe,B)=>(xe[B.dayIndex]={day:B,cells:[]},xe[B.dayIndex].cells.push(...Nt.value.getCells(B)),xe),{})),Kt=(xe,B)=>{const Ce=t.showWeeknumbers||t.showIsoWeeknumbers;return Ce==null?"":eCe(Ce)?Ce?"left":"":Ce.startsWith("right")?B>1?"right":Ce:xe>1?"left":Ce},$=()=>{var xe,B;if(!bt.value)return null;const Ce=dt.value.find(dn=>dn.pinPage)||dt.value[0];if(!Ce||!Ce.hasRanges)return null;const[Fe]=Ce.ranges,kt=((xe=Fe.start)==null?void 0:xe.date)||((B=Fe.end)==null?void 0:B.date);return kt?he(kt):null},V=()=>{if(Ko(L.value))return L.value;const xe=$();return Ko(xe)?xe:he(new Date)},ie=(xe,B={})=>{const{view:Ce=c.value,position:Fe=1,force:kt}=B,dn=Fe>0?1-Fe:-(T.value+Fe);let Cn=fe(xe,dn,Ce),ur=fe(Cn,T.value-1,Ce);return kt||(F7(Cn,F.value)?Cn=F.value:By(ur,E.value)&&(Cn=fe(E.value,1-T.value)),ur=fe(Cn,T.value-1)),{fromPage:Cn,toPage:ur}},pe=(xe,B,Ce="")=>{if(Ce==="none"||Ce==="fade")return Ce;if(xe?.view!==B?.view)return"fade";const Fe=By(B,xe),kt=F7(B,xe);return!Fe&&!kt?"fade":Ce==="slide-v"?kt?"slide-down":"slide-up":kt?"slide-right":"slide-left"},ge=(xe={})=>new Promise((B,Ce)=>{const{position:Fe=1,force:kt=!1,transition:dn}=xe,Cn=Ko(xe.page)?xe.page:V(),{fromPage:ur}=ie(Cn,{position:Fe,force:kt}),Qi=[];for(let ln=0;ln<T.value;ln++){const ni=fe(ur,ln),ir=ln+1,Xs=Math.ceil(ir/t.columns),Ui=t.rows-Xs+1,Gi=ir%t.columns||t.columns,Ki=t.columns-Gi+1,Ml=Kt(Gi,Ki);Qi.push(v.value.getPage({...ni,view:c.value,titlePosition:t.titlePosition,trimWeeks:t.trimWeeks,position:ir,row:Xs,rowFromEnd:Ui,column:Gi,columnFromEnd:Ki,showWeeknumbers:G.value,showIsoWeeknumbers:W.value,weeknumberPosition:Ml}))}h.value=pe(u.value[0],Qi[0],dn),u.value=Qi,h.value&&h.value!=="none"?f={resolve:B,reject:Ce}:B(!0)}),ve=xe=>{const B=L.value??he(new Date);return fe(B,xe)},De=(xe,B={})=>{const Ce=Ko(xe)?xe:he(xe);return Object.assign(B,ie(Ce,{...B,force:!0})),TTe(B.fromPage,B.toPage,c.value,v.value).map(kt=>OTe(kt,F.value,E.value)).some(kt=>kt)},Te=(xe,B={})=>De(ve(xe),B),Me=ue(()=>Te(-R.value)),we=ue(()=>Te(R.value)),tt=async(xe,B={})=>!B.force&&!De(xe,B)?!1:(B.fromPage&&!MTe(B.fromPage,L.value)&&(hm({id:a.value,hideDelay:0}),B.view&&(RAe("view",10),c.value=B.view),await ge({...B,page:B.fromPage,position:1,force:!0}),n("did-move",u.value)),!0),qe=(xe,B={})=>tt(ve(xe),B),Xe=()=>qe(-R.value),it=()=>qe(R.value),J=xe=>{const B=X.value?".in-month":"",Ce=`.id-${v.value.getDayId(xe)}${B}`,Fe=`${Ce}.vc-focusable, ${Ce} .vc-focusable`,kt=r.value;if(kt){const dn=kt.querySelector(Fe);if(dn)return dn.focus(),!0}return!1},de=async(xe,B={})=>J(xe)?!0:(await tt(xe,B),J(xe)),Ve=(xe,B)=>{s.value=xe.day,n("dayclick",xe,B)},lt=(xe,B)=>{n("daymouseenter",xe,B)},gt=(xe,B)=>{n("daymouseleave",xe,B)},Xt=(xe,B)=>{s.value=xe.day,i.value=xe,xe.isFocused=!0,n("dayfocusin",xe,B)},sn=(xe,B)=>{i.value=null,xe.isFocused=!1,n("dayfocusout",xe,B)},an=(xe,B)=>{n("daykeydown",xe,B);const Ce=xe.noonDate;let Fe=null;switch(B.key){case"ArrowLeft":{Fe=ci(Ce,-1);break}case"ArrowRight":{Fe=ci(Ce,1);break}case"ArrowUp":{Fe=ci(Ce,-7);break}case"ArrowDown":{Fe=ci(Ce,7);break}case"Home":{Fe=ci(Ce,-xe.weekdayPosition+1);break}case"End":{Fe=ci(Ce,xe.weekdayPositionFromEnd);break}case"PageUp":{B.altKey?Fe=fD(Ce,-1):Fe=$y(Ce,-1);break}case"PageDown":{B.altKey?Fe=fD(Ce,1):Fe=$y(Ce,1);break}}Fe&&(B.preventDefault(),de(Fe).catch())},Yn=xe=>{const B=i.value;B!=null&&an(B,xe)},Ht=(xe,B)=>{n("weeknumberclick",xe,B)};ge({page:t.initialPage,position:t.initialPagePosition}),Dr(()=>{!t.disablePageSwipe&&r.value&&(d=NAe(r.value,({toLeft:xe=!1,toRight:B=!1})=>{xe?it():B&&Xe()},Sc("touch")))}),la(()=>{u.value=[],d&&d()}),Vt(()=>v.value,()=>{ge()}),Vt(()=>T.value,()=>ge()),Vt(()=>t.view,()=>c.value=t.view),Vt(()=>c.value,()=>{LAe("view",()=>{ge()}),n("update:view",c.value)}),Vt(()=>s.value,()=>{je(u.value,xe=>Ue(xe))}),Cc(()=>{n("update:pages",u.value),je(u.value,xe=>{P(xe),Ue(xe)})});const $t={emit:n,containerRef:r,focusedDay:i,inTransition:o,navPopoverId:a,dayPopoverId:l,view:c,pages:u,transitionName:h,theme:p,color:m,displayMode:g,locale:v,masks:b,attributes:dt,disabledAttribute:k,disabledDates:C,attributeContext:Nt,days:st,dayCells:Ot,count:T,step:R,firstPage:L,lastPage:I,canMovePrev:Me,canMoveNext:we,minPage:F,maxPage:E,isMonthly:X,isWeekly:te,isDaily:ne,navVisibility:ee,showWeeknumbers:G,showIsoWeeknumbers:W,getDateAddress:he,canMove:De,canMoveBy:Te,move:tt,moveBy:qe,movePrev:Xe,moveNext:it,onTransitionBeforeEnter:ye,onTransitionAfterEnter:A,tryFocusDate:J,focusDate:de,onKeydown:Yn,onDayKeydown:an,onDayClick:Ve,onDayMouseenter:lt,onDayMouseleave:gt,onDayFocusin:Xt,onDayFocusout:sn,onWeeknumberClick:Ht};return sh(UV,$t),$t}function bh(){const t=Rs(UV);if(t)return t;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const XAe=xt({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(t,{emit:e}){let n;const r=ae();let i=null,s=null;const o=ih({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function a(A){A&&(o.direction=A.split("-")[0])}function l({placement:A,options:fe}){a(A||fe?.placement)}const c=ue(()=>({placement:o.placement,strategy:o.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:l},...o.modifiers||[]],onFirstUpdate:l})),u=ue(()=>{const A=o.direction==="left"||o.direction==="right";let fe="";if(o.placement){const he=o.placement.split("-");he.length>1&&(fe=he[1])}return["start","top","left"].includes(fe)?A?"top":"left":["end","bottom","right"].includes(fe)?A?"bottom":"right":A?"middle":"center"});function h(){s&&(s.destroy(),s=null)}function f(){qo(()=>{const A=Py(o.target);!A||!r.value||(s&&s.state.elements.reference!==A&&h(),s?s.update():s=j5e(A,r.value,c.value))})}function d(A){Object.assign(o,yV(A,"force"))}function p(A,fe){clearTimeout(n),A>0?n=setTimeout(fe,A):fe()}function m(A){return!A||!s?!1:Py(A)===s.state.elements.reference}async function g(A={}){o.force||(A.force&&(o.force=!0),p(A.showDelay??t.showDelay,()=>{o.isVisible&&(o.force=!1),d({...A,isVisible:!0}),f()}))}function v(A={}){s&&(A.target&&!m(A.target)||o.force||(A.force&&(o.force=!0),p(A.hideDelay??t.hideDelay,()=>{o.isVisible||(o.force=!1),o.isVisible=!1})))}function b(A={}){A.target!=null&&(o.isVisible&&m(A.target)?v(A):g(A))}function S(A){if(!s)return;const fe=s.state.elements.reference;if(!r.value||!fe)return;const he=A.target;gv(r.value,he)||gv(fe,he)||v({force:!0})}function O(A){(A.key==="Esc"||A.key==="Escape")&&v()}function k({detail:A}){!A.id||A.id!==t.id||g(A)}function C({detail:A}){!A.id||A.id!==t.id||v(A)}function T({detail:A}){!A.id||A.id!==t.id||b(A)}function R(){Zl(document,"keydown",O),Zl(document,"click",S),Zl(document,"show-popover",k),Zl(document,"hide-popover",C),Zl(document,"toggle-popover",T)}function L(){Xl(document,"keydown",O),Xl(document,"click",S),Xl(document,"show-popover",k),Xl(document,"hide-popover",C),Xl(document,"toggle-popover",T)}function I(A){e("before-show",A)}function F(A){o.force=!1,e("after-show",A)}function E(A){e("before-hide",A)}function ee(A){o.force=!1,h(),e("after-hide",A)}function G(A){A.stopPropagation()}function W(){o.isHovered=!0,o.isInteractive&&["hover","hover-focus"].includes(o.visibility)&&g()}function X(){if(o.isHovered=!1,!s)return;const A=s.state.elements.reference;o.autoHide&&!o.isFocused&&(!A||A!==document.activeElement)&&["hover","hover-focus"].includes(o.visibility)&&v()}function te(){o.isFocused=!0,o.isInteractive&&["focus","hover-focus"].includes(o.visibility)&&g()}function ne(A){["focus","hover-focus"].includes(o.visibility)&&(!A.relatedTarget||!gv(r.value,A.relatedTarget))&&(o.isFocused=!1,!o.isHovered&&o.autoHide&&v())}function ye(){i!=null&&(i.disconnect(),i=null)}return Vt(()=>r.value,A=>{ye(),A&&(i=new ResizeObserver(()=>{s&&s.update()}),i.observe(A))}),Vt(()=>o.placement,a,{immediate:!0}),Dr(()=>{R()}),la(()=>{h(),ye(),L()}),{...jq(o),popoverRef:r,alignment:u,hide:v,setupPopper:f,beforeEnter:I,afterEnter:F,beforeLeave:E,afterLeave:ee,onClick:G,onMouseOver:W,onMouseLeave:X,onFocusIn:te,onFocusOut:ne}}}),Rc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};function ZAe(t,e,n,r,i,s){return me(),Ie("div",{class:Lt(["vc-popover-content-wrapper",{"is-interactive":t.isInteractive}]),ref:"popoverRef",onClick:e[0]||(e[0]=(...o)=>t.onClick&&t.onClick(...o)),onMouseover:e[1]||(e[1]=(...o)=>t.onMouseOver&&t.onMouseOver(...o)),onMouseleave:e[2]||(e[2]=(...o)=>t.onMouseLeave&&t.onMouseLeave(...o)),onFocusin:e[3]||(e[3]=(...o)=>t.onFocusIn&&t.onFocusIn(...o)),onFocusout:e[4]||(e[4]=(...o)=>t.onFocusOut&&t.onFocusOut(...o))},[_e(ax,{name:`vc-${t.transition}`,appear:"",onBeforeEnter:t.beforeEnter,onAfterEnter:t.afterEnter,onBeforeLeave:t.beforeLeave,onAfterLeave:t.afterLeave},{default:en(()=>[t.isVisible?(me(),Ie("div",ah({key:0,tabindex:"-1",class:`vc-popover-content direction-${t.direction}`},t.$attrs),[oh(t.$slots,"default",{direction:t.direction,alignment:t.alignment,data:t.data,hide:t.hide},()=>[Qa(Et(t.data),1)]),oe("span",{class:Lt(["vc-popover-caret",`direction-${t.direction}`,`align-${t.alignment}`])},null,2)],16)):hn("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const Ib=Rc(XAe,[["render",ZAe]]),JAe={class:"vc-day-popover-row"},e_e={key:0,class:"vc-day-popover-row-indicator"},t_e={class:"vc-day-popover-row-label"},GV=xt({__name:"PopoverRow",props:{attribute:null},setup(t){const e=t,n=ue(()=>{const{content:r,highlight:i,dot:s,bar:o,popover:a}=e.attribute;return a&&a.hideIndicator?null:r?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${r.base.color}`}:i?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${i.base.color}`}:s?{class:`vc-dot vc-attr vc-${s.base.color}`}:o?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${o.base.color}`}:null});return(r,i)=>(me(),Ie("div",JAe,[U(n)?(me(),Ie("div",e_e,[oe("span",{class:Lt(U(n).class)},null,2)])):hn("",!0),oe("div",t_e,[oh(r.$slots,"default",{},()=>[Qa(Et(t.attribute.popover?t.attribute.popover.label:"No content provided"),1)])])]))}}),n_e={inheritAttrs:!1},Ns=xt({...n_e,__name:"CalendarSlot",props:{name:null},setup(t){const n=QV(t.name);return(r,i)=>U(n)?(me(),$n(ex(U(n)),N0(ah({key:0},r.$attrs)),null,16)):oh(r.$slots,"default",{key:1})}}),r_e={class:"vc-day-popover-container"},i_e={key:0,class:"vc-day-popover-header"},s_e=xt({__name:"CalendarDayPopover",setup(t){const{dayPopoverId:e,displayMode:n,color:r,masks:i,locale:s}=bh();function o(l,c){return s.value.formatDate(l,c)}function a(l){return s.value.formatDate(l.date,i.value.dayPopover)}return(l,c)=>(me(),$n(Ib,{id:U(e),class:Lt([`vc-${U(r)}`,`vc-${U(n)}`])},{default:en(({data:{day:u,attributes:h},hide:f})=>[_e(Ns,{name:"day-popover",day:u,"day-title":a(u),attributes:h,format:o,masks:U(i),hide:f},{default:en(()=>[oe("div",r_e,[U(i).dayPopover?(me(),Ie("div",i_e,Et(a(u)),1)):hn("",!0),(me(!0),Ie(wt,null,Tr(h,d=>(me(),$n(GV,{key:d.key,attribute:d},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),o_e={},a_e={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},l_e=oe("polyline",{points:"9 18 15 12 9 6"},null,-1),c_e=[l_e];function u_e(t,e){return me(),Ie("svg",a_e,c_e)}const h_e=Rc(o_e,[["render",u_e]]),f_e={},d_e={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},p_e=oe("polyline",{points:"15 18 9 12 15 6"},null,-1),m_e=[p_e];function g_e(t,e){return me(),Ie("svg",d_e,m_e)}const v_e=Rc(f_e,[["render",g_e]]),y_e={},b_e={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},w_e=oe("polyline",{points:"6 9 12 15 18 9"},null,-1),x_e=[w_e];function k_e(t,e){return me(),Ie("svg",b_e,x_e)}const S_e=Rc(y_e,[["render",k_e]]),C_e={},O_e={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},M_e=oe("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),T_e=[M_e];function A_e(t,e){return me(),Ie("svg",O_e,T_e)}const __e=Rc(C_e,[["render",A_e]]),D_e=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:S_e,IconChevronLeft:v_e,IconChevronRight:h_e,IconClock:__e},Symbol.toStringTag,{value:"Module"})),Uf=xt({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(t){const e=t,n=ue(()=>e.width||e.size),r=ue(()=>e.height||e.size),i=ue(()=>D_e[`Icon${e.name}`]);return(s,o)=>(me(),$n(ex(U(i)),{width:U(n),height:U(r),class:"vc-base-icon"},null,8,["width","height"]))}}),E_e=["disabled"],I_e={key:1,class:"vc-title-wrapper"},P_e={type:"button",class:"vc-title"},N_e=["disabled"],KV=xt({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(t){const e=t,{navPopoverId:n,navVisibility:r,canMovePrev:i,movePrev:s,canMoveNext:o,moveNext:a}=bh(),l=ue(()=>{switch(e.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),c=ue(()=>{const{page:m}=e;return{id:n.value,visibility:r.value,placement:l.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:m},isInteractive:!0}}),u=ue(()=>e.page.titlePosition.includes("left")),h=ue(()=>e.page.titlePosition.includes("right")),f=ue(()=>e.layout?e.layout:u.value?"tu-pn":h.value?"pn-tu":"p-tu-n;"),d=ue(()=>({prev:f.value.includes("p")&&!e.hideArrows,title:f.value.includes("t")&&!e.hideTitle,next:f.value.includes("n")&&!e.hideArrows})),p=ue(()=>({gridTemplateColumns:f.value.split("").map(g=>{switch(g){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(m,g)=>(me(),Ie("div",{class:Lt(["vc-header",{"is-lg":t.isLg,"is-xl":t.isXl,"is-2xl":t.is2xl}]),style:fr(U(p))},[U(d).prev?(me(),Ie("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!U(i),onClick:g[0]||(g[0]=(...v)=>U(s)&&U(s)(...v)),onKeydown:g[1]||(g[1]=xf((...v)=>U(s)&&U(s)(...v),["space","enter"]))},[_e(Ns,{name:"header-prev-button",disabled:!U(i)},{default:en(()=>[_e(Uf,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,E_e)):hn("",!0),U(d).title?(me(),Ie("div",I_e,[_e(Ns,{name:"header-title-wrapper"},{default:en(()=>[rl((me(),Ie("button",P_e,[_e(Ns,{name:"header-title",title:t.page.title},{default:en(()=>[oe("span",null,Et(t.page.title),1)]),_:1},8,["title"])])),[[U(FV),U(c)]])]),_:1})])):hn("",!0),U(d).next?(me(),Ie("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!U(o),onClick:g[2]||(g[2]=(...v)=>U(a)&&U(a)(...v)),onKeydown:g[3]||(g[3]=xf((...v)=>U(a)&&U(a)(...v),["space","enter"]))},[_e(Ns,{name:"header-next-button",disabled:!U(o)},{default:en(()=>[_e(Uf,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,N_e)):hn("",!0)],6))}}),XV=Symbol("__vc_page_context__");function R_e(t){const{locale:e,getDateAddress:n,canMove:r}=bh();function i(a,l){const{month:c,year:u}=n(new Date);return LV().map((h,f)=>{const d=f+1;return{month:d,year:a,id:CTe(d,a),label:e.value.formatDate(h,l),ariaLabel:e.value.formatDate(h,"MMMM"),isActive:d===t.value.month&&a===t.value.year,isCurrent:d===c&&a===u,isDisabled:!r({month:d,year:a},{position:t.value.position})}})}function s(a,l){const{year:c}=n(new Date),{position:u}=t.value,h=[];for(let f=a;f<=l;f+=1){const d=[...Array(12).keys()].some(p=>r({month:p+1,year:f},{position:u}));h.push({year:f,id:f.toString(),label:f.toString(),ariaLabel:f.toString(),isActive:f===t.value.year,isCurrent:f===c,isDisabled:!d})}return h}const o={page:t,getMonthItems:i,getYearItems:s};return sh(XV,o),o}function ZV(){const t=Rs(XV);if(t)return t;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const L_e={class:"vc-nav-header"},$_e=["disabled"],B_e=["disabled"],z_e={class:"vc-nav-items"},F_e=["data-id","aria-label","disabled","onClick","onKeydown"],H_e=xt({__name:"CalendarNav",setup(t){const{masks:e,move:n}=bh(),{page:r,getMonthItems:i,getYearItems:s}=ZV(),o=ae(!0),a=12,l=ae(r.value.year),c=ae(f(r.value.year)),u=ae(null);function h(){setTimeout(()=>{if(u.value==null)return;const he=u.value.querySelector(".vc-nav-item:not(:disabled)");he&&he.focus()},10)}function f(he){return Math.floor(he/a)}function d(){o.value=!o.value}function p(he){return he*a}function m(he){return a*(he+1)-1}function g(){te.value&&(o.value&&b(),O())}function v(){ne.value&&(o.value&&S(),k())}function b(){l.value--}function S(){l.value++}function O(){c.value--}function k(){c.value++}const C=ue(()=>i(l.value,e.value.navMonths).map(he=>({...he,click:()=>n({month:he.month,year:he.year},{position:r.value.position})}))),T=ue(()=>i(l.value-1,e.value.navMonths)),R=ue(()=>T.value.some(he=>!he.isDisabled)),L=ue(()=>i(l.value+1,e.value.navMonths)),I=ue(()=>L.value.some(he=>!he.isDisabled)),F=ue(()=>s(p(c.value),m(c.value)).map(he=>({...he,click:()=>{l.value=he.year,o.value=!0,h()}}))),E=ue(()=>s(p(c.value-1),m(c.value-1))),ee=ue(()=>E.value.some(he=>!he.isDisabled)),G=ue(()=>s(p(c.value+1),m(c.value+1))),W=ue(()=>G.value.some(he=>!he.isDisabled)),X=ue(()=>o.value?C.value:F.value),te=ue(()=>o.value?R.value:ee.value),ne=ue(()=>o.value?I.value:W.value),ye=ue(()=>gV(F.value.map(he=>he.year))),A=ue(()=>Qh(F.value.map(he=>he.year))),fe=ue(()=>o.value?l.value:`${ye.value} - ${A.value}`);return Cc(()=>{l.value=r.value.year,h()}),Vt(()=>l.value,he=>c.value=f(he)),Dr(()=>h()),(he,P)=>(me(),Ie("div",{class:"vc-nav-container",ref_key:"navContainer",ref:u},[oe("div",L_e,[oe("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!U(te),onClick:g,onKeydown:P[0]||(P[0]=Ue=>U(ig)(Ue,g))},[_e(Ns,{name:"nav-prev-button",move:g,disabled:!U(te)},{default:en(()=>[_e(Uf,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,$_e),oe("button",{type:"button",class:"vc-nav-title vc-focus",onClick:d,onKeydown:P[1]||(P[1]=Ue=>U(ig)(Ue,d))},Et(U(fe)),33),oe("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!U(ne),onClick:v,onKeydown:P[2]||(P[2]=Ue=>U(ig)(Ue,v))},[_e(Ns,{name:"nav-next-button",move:v,disabled:!U(ne)},{default:en(()=>[_e(Uf,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,B_e)]),oe("div",z_e,[(me(!0),Ie(wt,null,Tr(U(X),Ue=>(me(),Ie("button",{key:Ue.label,type:"button","data-id":Ue.id,"aria-label":Ue.ariaLabel,class:Lt(["vc-nav-item vc-focus",[Ue.isActive?"is-active":Ue.isCurrent?"is-current":""]]),disabled:Ue.isDisabled,onClick:Ue.click,onKeydown:je=>U(ig)(je,Ue.click)},Et(Ue.label),43,F_e))),128))])],512))}}),JV=xt({__name:"CalendarPageProvider",props:{page:null},setup(t){return R_e(ag(t,"page")),(n,r)=>oh(n.$slots,"default")}}),V_e=xt({__name:"CalendarNavPopover",setup(t){const{navPopoverId:e,color:n,displayMode:r}=bh();return(i,s)=>(me(),$n(Ib,{id:U(e),class:Lt(["vc-nav-popover-container",`vc-${U(n)}`,`vc-${U(r)}`])},{default:en(({data:o})=>[_e(JV,{page:o.page},{default:en(()=>[_e(Ns,{name:"nav"},{default:en(()=>[_e(H_e)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),q_e=xt({directives:{popover:FV},components:{CalendarSlot:Ns},props:{day:{type:Object,required:!0}},setup(t){const{locale:e,theme:n,attributeContext:r,dayPopoverId:i,onDayClick:s,onDayMouseenter:o,onDayMouseleave:a,onDayFocusin:l,onDayFocusout:c,onDayKeydown:u}=bh(),h=ue(()=>t.day),f=ue(()=>r.value.getCells(h.value)),d=ue(()=>f.value.map(W=>W.data)),p=ue(()=>({...h.value,attributes:d.value,attributeCells:f.value}));function m({data:W},{popovers:X}){const{key:te,customData:ne,popover:ye}=W;if(!ye)return;const A=U_({key:te,customData:ne,attribute:W},{...ye},{visibility:ye.label?"hover":"click",placement:"bottom",isInteractive:!ye.label});X.splice(0,0,A)}const g=ue(()=>{const W={...n.value.prepareRender({}),popovers:[]};return f.value.forEach(X=>{n.value.render(X,W),m(X,W)}),W}),v=ue(()=>g.value.highlights),b=ue(()=>!!Ya(v.value)),S=ue(()=>g.value.content),O=ue(()=>g.value.dots),k=ue(()=>!!Ya(O.value)),C=ue(()=>g.value.bars),T=ue(()=>!!Ya(C.value)),R=ue(()=>g.value.popovers),L=ue(()=>R.value.map(W=>W.attribute)),I=QV("day-content"),F=ue(()=>["vc-day",...h.value.classes,{"vc-day-box-center-center":!I},{"is-not-in-month":!t.day.inMonth}]),E=ue(()=>{let W;h.value.isFocusable?W="0":W="-1";const X=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":h.value.isDisabled},ku(Qh(v.value),"contentClass"),ku(Qh(S.value),"class")||""],te={...ku(Qh(v.value),"contentStyle"),...ku(Qh(S.value),"style")};return{class:X,style:te,tabindex:W,"aria-label":h.value.ariaLabel,"aria-disabled":!!h.value.isDisabled,role:"button"}}),ee=ue(()=>({click(W){s(p.value,W)},mouseenter(W){o(p.value,W)},mouseleave(W){a(p.value,W)},focusin(W){l(p.value,W)},focusout(W){c(p.value,W)},keydown(W){u(p.value,W)}})),G=ue(()=>Ya(R.value)?U_({id:i.value,data:{day:h,attributes:L.value}},...R.value):null);return{attributes:d,attributeCells:f,bars:C,dayClasses:F,dayContentProps:E,dayContentEvents:ee,dayPopover:G,glyphs:g,dots:O,hasDots:k,hasBars:T,highlights:v,hasHighlights:b,locale:e,popovers:R}}}),W_e={key:0,class:"vc-highlights vc-day-layer"},j_e={key:1,class:"vc-day-layer vc-day-box-center-bottom"},Y_e={class:"vc-dots"},Q_e={key:2,class:"vc-day-layer vc-day-box-center-bottom"},U_e={class:"vc-bars"};function G_e(t,e,n,r,i,s){const o=Bo("CalendarSlot"),a=wW("popover");return me(),Ie("div",{class:Lt(t.dayClasses)},[t.hasHighlights?(me(),Ie("div",W_e,[(me(!0),Ie(wt,null,Tr(t.highlights,({key:l,wrapperClass:c,class:u,style:h})=>(me(),Ie("div",{key:l,class:Lt(c)},[oe("div",{class:Lt(u),style:fr(h)},null,6)],2))),128))])):hn("",!0),_e(o,{name:"day-content",day:t.day,attributes:t.attributes,"attribute-cells":t.attributeCells,dayProps:t.dayContentProps,dayEvents:t.dayContentEvents,locale:t.locale},{default:en(()=>[rl((me(),Ie("div",ah(t.dayContentProps,xW(t.dayContentEvents,!0)),[Qa(Et(t.day.label),1)],16)),[[a,t.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),t.hasDots?(me(),Ie("div",j_e,[oe("div",Y_e,[(me(!0),Ie(wt,null,Tr(t.dots,({key:l,class:c,style:u})=>(me(),Ie("span",{key:l,class:Lt(c),style:fr(u)},null,6))),128))])])):hn("",!0),t.hasBars?(me(),Ie("div",Q_e,[oe("div",U_e,[(me(!0),Ie(wt,null,Tr(t.bars,({key:l,class:c,style:u})=>(me(),Ie("span",{key:l,class:Lt(c),style:fr(u)},null,6))),128))])])):hn("",!0)],2)}const K_e=Rc(q_e,[["render",G_e]]),X_e={class:"vc-weekdays"},Z_e=["onClick"],J_e={inheritAttrs:!1},eDe=xt({...J_e,__name:"CalendarPage",setup(t){const{page:e}=ZV(),{onWeeknumberClick:n}=bh();return(r,i)=>(me(),Ie("div",{class:Lt(["vc-pane",`row-${U(e).row}`,`row-from-end-${U(e).rowFromEnd}`,`column-${U(e).column}`,`column-from-end-${U(e).columnFromEnd}`]),ref:"pane"},[_e(KV,{page:U(e),"is-lg":"","hide-arrows":""},null,8,["page"]),oe("div",{class:Lt(["vc-weeks",{[`vc-show-weeknumbers-${U(e).weeknumberPosition}`]:U(e).weeknumberPosition}])},[oe("div",X_e,[(me(!0),Ie(wt,null,Tr(U(e).weekdays,({weekday:s,label:o},a)=>(me(),Ie("div",{key:a,class:Lt(`vc-weekday vc-weekday-${s}`)},Et(o),3))),128))]),(me(!0),Ie(wt,null,Tr(U(e).viewWeeks,s=>(me(),Ie("div",{key:`weeknumber-${s.weeknumber}`,class:"vc-week"},[U(e).weeknumberPosition?(me(),Ie("div",{key:0,class:Lt(["vc-weeknumber",`is-${U(e).weeknumberPosition}`])},[oe("span",{class:Lt(["vc-weeknumber-content"]),onClick:o=>U(n)(s,o)},Et(s.weeknumberDisplay),9,Z_e)],2)):hn("",!0),(me(!0),Ie(wt,null,Tr(s.days,o=>(me(),$n(K_e,{key:o.id,day:o},null,8,["day"]))),128))]))),128))],2)],2))}}),tDe=xt({components:{CalendarHeader:KV,CalendarPage:eDe,CalendarNavPopover:V_e,CalendarDayPopover:s_e,CalendarPageProvider:JV,CalendarSlot:Ns},props:UAe,emit:GAe,setup(t,{emit:e,slots:n}){return KAe(t,{emit:e,slots:n})}}),nDe={class:"vc-pane-header-wrapper"};function rDe(t,e,n,r,i,s){const o=Bo("CalendarHeader"),a=Bo("CalendarPage"),l=Bo("CalendarSlot"),c=Bo("CalendarPageProvider"),u=Bo("CalendarDayPopover"),h=Bo("CalendarNavPopover");return me(),Ie(wt,null,[oe("div",ah({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},t.$attrs,{class:["vc-container",`vc-${t.view}`,`vc-${t.color}`,`vc-${t.displayMode}`,{"vc-expanded":t.expanded,"vc-bordered":!t.borderless,"vc-transparent":t.transparent}],onMouseup:e[0]||(e[0]=kp(()=>{},["prevent"])),ref:"containerRef"}),[oe("div",{class:Lt(["vc-pane-container",{"in-transition":t.inTransition}])},[oe("div",nDe,[t.firstPage?(me(),$n(o,{key:0,page:t.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):hn("",!0)]),_e(ax,{name:`vc-${t.transitionName}`,onBeforeEnter:t.onTransitionBeforeEnter,onAfterEnter:t.onTransitionAfterEnter},{default:en(()=>[(me(),Ie("div",{key:t.pages[0].id,class:"vc-pane-layout",style:fr({gridTemplateColumns:`repeat(${t.columns}, 1fr)`})},[(me(!0),Ie(wt,null,Tr(t.pages,f=>(me(),$n(c,{key:f.id,page:f},{default:en(()=>[_e(l,{name:"page",page:f},{default:en(()=>[_e(a)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),_e(l,{name:"footer"})],2)],16),_e(u),_e(h)],64)}const eq=Rc(tDe,[["render",rDe]]),tq=Symbol("__vc_date_picker_context__"),iDe={...qV,mode:{type:String,default:"date"},modelValue:{type:[Number,String,Date,Object]},modelModifiers:{type:Object,default:()=>({})},rules:[String,Object],is24hr:Boolean,hideTimeHeader:Boolean,timeAccuracy:{type:Number,default:2},isRequired:Boolean,isRange:Boolean,updateOnInput:{type:Boolean,default:()=>Sc("datePicker.updateOnInput")},inputDebounce:{type:Number,default:()=>Sc("datePicker.inputDebounce")},popover:{type:[Boolean,Object],default:!0},dragAttribute:Object,selectAttribute:Object,attributes:[Object,Array]},sDe=["update:modelValue","drag","dayclick","daykeydown","popover-will-show","popover-did-show","popover-will-hide","popover-did-hide"];function oDe(t,{emit:e,slots:n}){YV(n,{footer:"dp-footer"});const r=WV(t),{locale:i,masks:s,disabledAttribute:o}=r,a=ae(!1),l=ae(Symbol()),c=ae(null),u=ae(null),h=ae(["",""]),f=ae(null),d=ae(null);let p,m,g=!0;const v=ue(()=>t.isRange||t.modelModifiers.range===!0),b=ue(()=>v.value&&c.value!=null?c.value.start:null),S=ue(()=>v.value&&c.value!=null?c.value.end:null),O=ue(()=>t.mode.toLowerCase()==="date"),k=ue(()=>t.mode.toLowerCase()==="datetime"),C=ue(()=>t.mode.toLowerCase()==="time"),T=ue(()=>!!u.value),R=ue(()=>{let B="date";t.modelModifiers.number&&(B="number"),t.modelModifiers.string&&(B="string");const Ce=s.value.modelValue||"iso";return P({type:B,mask:Ce})}),L=ue(()=>Te(u.value??c.value)),I=ue(()=>C.value?t.is24hr?s.value.inputTime24hr:s.value.inputTime:k.value?t.is24hr?s.value.inputDateTime24hr:s.value.inputDateTime:s.value.input),F=ue(()=>/[Hh]/g.test(I.value)),E=ue(()=>/[dD]{1,2}|Do|W{1,4}|M{1,4}|YY(?:YY)?/g.test(I.value)),ee=ue(()=>{if(F.value&&E.value)return"dateTime";if(E.value)return"date";if(F.value)return"time"}),G=ue(()=>{var B;const Ce=((B=f.value)==null?void 0:B.$el.previousElementSibling)??void 0;return Qf({},t.popover,Sc("datePicker.popover"),{target:Ce})}),W=ue(()=>zV({...G.value,id:l.value})),X=ue(()=>v.value?{start:h.value[0],end:h.value[1]}:h.value[0]),te=ue(()=>{const B=["start","end"].map(Ce=>({input:ge(Ce),change:ve(Ce),keyup:De,...t.popover&&W.value}));return v.value?{start:B[0],end:B[1]}:B[0]}),ne=ue(()=>{if(!dt(c.value))return null;const B={key:"select-drag",...t.selectAttribute,dates:c.value,pinPage:!0},{dot:Ce,bar:Fe,highlight:kt,content:dn}=B;return!Ce&&!Fe&&!kt&&!dn&&(B.highlight=!0),B}),ye=ue(()=>{if(!v.value||!dt(u.value))return null;const B={key:"select-drag",...t.dragAttribute,dates:u.value},{dot:Ce,bar:Fe,highlight:kt,content:dn}=B;return!Ce&&!Fe&&!kt&&!dn&&(B.highlight={startEnd:{fillMode:"outline"}}),B}),A=ue(()=>{const B=zs(t.attributes)?[...t.attributes]:[];return ye.value?B.unshift(ye.value):ne.value&&B.unshift(ne.value),B}),fe=ue(()=>P(t.rules==="auto"?he():t.rules??{}));function he(){const B={ms:[0,999],sec:[0,59],min:[0,59],hr:[0,23]},Ce=O.value?0:t.timeAccuracy;return[0,1].map(Fe=>{switch(Ce){case 0:return{hours:B.hr[Fe],minutes:B.min[Fe],seconds:B.sec[Fe],milliseconds:B.ms[Fe]};case 1:return{minutes:B.min[Fe],seconds:B.sec[Fe],milliseconds:B.ms[Fe]};case 3:return{milliseconds:B.ms[Fe]};case 4:return{};default:return{seconds:B.sec[Fe],milliseconds:B.ms[Fe]}}})}function P(B){return zs(B)?B.length===1?[B[0],B[0]]:B:[B,B]}function Ue(B){return P(B).map((Ce,Fe)=>({...Ce,rules:fe.value[Fe]}))}function je(B){return B==null?!1:go(B)?!isNaN(B):vf(B)?!isNaN(B.getTime()):Go(B)?B!=="":p9(B)}function st(B){return pl(B)&&"start"in B&&"end"in B&&je(B.start??null)&&je(B.end??null)}function dt(B){return st(B)||je(B)}function bt(B,Ce){if(B==null&&Ce==null)return!0;if(B==null||Ce==null)return!1;const Fe=vf(B),kt=vf(Ce);return Fe&&kt?B.getTime()===Ce.getTime():Fe||kt?!1:bt(B.start,Ce.start)&&bt(B.end,Ce.end)}function Nt(B){return!dt(B)||!o.value?!1:o.value.intersectsRange(i.value.range(B))}function Ot(B,Ce,Fe,kt){if(!dt(B))return null;if(st(B)){const dn=i.value.toDate(B.start,{...Ce[0],fillDate:b.value??void 0,patch:Fe}),Cn=i.value.toDate(B.end,{...Ce[1],fillDate:S.value??void 0,patch:Fe});return sn({start:dn,end:Cn},kt)}return i.value.toDateOrNull(B,{...Ce[0],fillDate:c.value,patch:Fe})}function Kt(B,Ce){return st(B)?{start:i.value.fromDate(B.start,Ce[0]),end:i.value.fromDate(B.end,Ce[1])}:v.value?null:i.value.fromDate(B,Ce[0])}function $(B,Ce={}){return clearTimeout(p),new Promise(Fe=>{const{debounce:kt=0,...dn}=Ce;kt>0?p=window.setTimeout(()=>{Fe(V(B,dn))},kt):Fe(V(B,dn))})}function V(B,{config:Ce=R.value,patch:Fe="dateTime",clearIfEqual:kt=!1,formatInput:dn=!0,hidePopover:Cn=!1,dragging:ur=T.value,targetPriority:Qi,moveToValue:ln=!1}={}){const ni=Ue(Ce);let ir=Ot(B,ni,Fe,Qi);if(Nt(ir)){if(ur)return null;ir=c.value,Cn=!1}else ir==null&&t.isRequired?ir=c.value:ir!=null&&bt(c.value,ir)&&kt&&(ir=null);const Ui=ur?u:c,Gi=!bt(Ui.value,ir);Ui.value=ir,ur||(u.value=null);const Ki=Kt(ir,R.value);return Gi&&(g=!1,e(ur?"drag":"update:modelValue",Ki),qo(()=>g=!0)),Cn&&!ur&&gt(),dn&&ie(),ln&&qo(()=>Ht(Qi??"start")),Ki}function ie(){qo(()=>{const B=Ue({type:"string",mask:I.value}),Ce=Kt(u.value??c.value,B);v.value?h.value=[Ce&&Ce.start,Ce&&Ce.end]:h.value=[Ce,""]})}function pe(B,Ce,Fe){h.value.splice(Ce==="start"?0:1,1,B);const kt=v.value?{start:h.value[0],end:h.value[1]||h.value[0]}:B,dn={type:"string",mask:I.value};$(kt,{...Fe,config:dn,patch:ee.value,targetPriority:Ce,moveToValue:!0})}function ge(B){return Ce=>{t.updateOnInput&&pe(Ce.currentTarget.value,B,{formatInput:!1,hidePopover:!1,debounce:t.inputDebounce})}}function ve(B){return Ce=>{pe(Ce.currentTarget.value,B,{formatInput:!0,hidePopover:!1})}}function De(B){B.key==="Escape"&&$(c.value,{formatInput:!0,hidePopover:!0})}function Te(B){return v.value?[B&&B.start?i.value.getDateParts(B.start):null,B&&B.end?i.value.getDateParts(B.end):null]:[B?i.value.getDateParts(B):null]}function Me(){u.value=null,ie()}function we(B){e("popover-will-show",B)}function tt(B){e("popover-did-show",B)}function qe(B){Me(),e("popover-will-hide",B)}function Xe(B){e("popover-did-hide",B)}function it(B){const Ce={patch:"date",formatInput:!0,hidePopover:!0};if(v.value){const Fe=!T.value;Fe?m={start:B.startDate,end:B.endDate}:m!=null&&(m.end=B.date),$(m,{...Ce,dragging:Fe})}else $(B.date,{...Ce,clearIfEqual:!t.isRequired})}function J(B,Ce){it(B),e("dayclick",B,Ce)}function de(B,Ce){switch(Ce.key){case" ":case"Enter":{it(B),Ce.preventDefault();break}case"Escape":gt()}e("daykeydown",B,Ce)}function Ve(B,Ce){!T.value||m==null||(m.end=B.date,$(sn(m),{patch:"date",formatInput:!0}))}function lt(B={}){V7({...G.value,...B,isInteractive:!0,id:l.value})}function gt(B={}){hm({hideDelay:10,force:!0,...G.value,...B,id:l.value})}function Xt(B){BV({...G.value,...B,isInteractive:!0,id:l.value})}function sn(B,Ce){const{start:Fe,end:kt}=B;if(Fe>kt)switch(Ce){case"start":return{start:Fe,end:Fe};case"end":return{start:kt,end:kt};default:return{start:kt,end:Fe}}return{start:Fe,end:kt}}async function an(B,Ce={}){return d.value==null?!1:d.value.move(B,Ce)}async function Yn(B,Ce={}){return d.value==null?!1:d.value.moveBy(B,Ce)}async function Ht(B,Ce={}){const Fe=c.value;if(d.value==null||!dt(Fe))return!1;const kt=B!=="end",dn=kt?1:-1,Cn=st(Fe)?kt?Fe.start:Fe.end:Fe,ur=kV(Cn,"monthly",i.value);return d.value.move(ur,{position:dn,...Ce})}Vt(()=>t.isRange,B=>{B&&console.warn("The `is-range` prop will be deprecated in future releases. Please use the `range` modifier.")},{immediate:!0}),Vt(()=>v.value,()=>{V(null,{formatInput:!0})}),Vt(()=>I.value,()=>ie()),Vt(()=>t.modelValue,B=>{g&&V(B,{formatInput:!0,hidePopover:!1})}),Vt(()=>fe.value,()=>{pl(t.rules)&&V(t.modelValue,{formatInput:!0,hidePopover:!1})}),Vt(()=>t.timezone,()=>{V(c.value,{formatInput:!0})});const $t=P(R.value);c.value=Ot(t.modelValue??null,$t,"dateTime"),Dr(()=>{V(t.modelValue,{formatInput:!0,hidePopover:!1})}),qo(()=>a.value=!0);const xe={...r,showCalendar:a,datePickerPopoverId:l,popoverRef:f,popoverEvents:W,calendarRef:d,isRange:v,isTimeMode:C,isDateTimeMode:k,is24hr:ag(t,"is24hr"),hideTimeHeader:ag(t,"hideTimeHeader"),timeAccuracy:ag(t,"timeAccuracy"),isDragging:T,inputValue:X,inputEvents:te,dateParts:L,attributes:A,rules:fe,move:an,moveBy:Yn,moveToValue:Ht,updateValue:$,showPopover:lt,hidePopover:gt,togglePopover:Xt,onDayClick:J,onDayKeydown:de,onDayMouseEnter:Ve,onPopoverBeforeShow:we,onPopoverAfterShow:tt,onPopoverBeforeHide:qe,onPopoverAfterHide:Xe};return sh(tq,xe),xe}function y9(){const t=Rs(tq);if(t)return t;throw new Error("DatePicker context missing. Please verify this component is nested within a valid context provider.")}const aDe=[{value:0,label:"12"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"}],lDe=[{value:12,label:"12"},{value:13,label:"1"},{value:14,label:"2"},{value:15,label:"3"},{value:16,label:"4"},{value:17,label:"5"},{value:18,label:"6"},{value:19,label:"7"},{value:20,label:"8"},{value:21,label:"9"},{value:22,label:"10"},{value:23,label:"11"}];function cDe(t){const e=y9(),{locale:n,isRange:r,isTimeMode:i,dateParts:s,rules:o,is24hr:a,hideTimeHeader:l,timeAccuracy:c,updateValue:u}=e;function h(E){E=Object.assign(d.value,E);let ee=null;if(r.value){const G=f.value?E:s.value[0],W=f.value?s.value[1]:E;ee={start:G,end:W}}else ee=E;u(ee,{patch:"time",targetPriority:f.value?"start":"end",moveToValue:!0})}const f=ue(()=>t.position===0),d=ue(()=>s.value[t.position]||{isValid:!1}),p=ue(()=>p9(d.value)),m=ue(()=>!!d.value.isValid),g=ue(()=>!l.value&&m.value),v=ue(()=>{if(!p.value)return null;let E=n.value.toDate(d.value);return d.value.hours===24&&(E=new Date(E.getTime()-1)),E}),b=ue({get(){return d.value.hours},set(E){h({hours:E})}}),S=ue({get(){return d.value.minutes},set(E){h({minutes:E})}}),O=ue({get(){return d.value.seconds},set(E){h({seconds:E})}}),k=ue({get(){return d.value.milliseconds},set(E){h({milliseconds:E})}}),C=ue({get(){return d.value.hours<12},set(E){E=String(E).toLowerCase()=="true";let ee=b.value;E&&ee>=12?ee-=12:!E&&ee<12&&(ee+=12),h({hours:ee})}}),T=ue(()=>_Ae(d.value,o.value[t.position])),R=ue(()=>aDe.filter(E=>T.value.hours.some(ee=>ee.value===E.value))),L=ue(()=>lDe.filter(E=>T.value.hours.some(ee=>ee.value===E.value))),I=ue(()=>a.value?T.value.hours:C.value?R.value:L.value),F=ue(()=>{const E=[];return Ya(R.value)&&E.push({value:!0,label:"AM"}),Ya(L.value)&&E.push({value:!1,label:"PM"}),E});return{...e,showHeader:g,timeAccuracy:c,parts:d,isValid:m,date:v,hours:b,minutes:S,seconds:O,milliseconds:k,options:T,hourOptions:I,isAM:C,isAMOptions:F,is24hr:a}}const uDe=["value"],hDe=["value","disabled"],fDe={key:1,class:"vc-base-sizer","aria-hidden":"true"},dDe={inheritAttrs:!1},Yd=xt({...dDe,__name:"BaseSelect",props:{options:null,modelValue:null,alignRight:{type:Boolean},alignLeft:{type:Boolean},showIcon:{type:Boolean},fitContent:{type:Boolean}},emits:["update:modelValue"],setup(t){const e=t,n=ue(()=>{const r=e.options.find(i=>i.value===e.modelValue);return r?.label});return(r,i)=>(me(),Ie("div",{class:Lt(["vc-base-select",{"vc-fit-content":t.fitContent,"vc-has-icon":t.showIcon}])},[oe("select",ah(r.$attrs,{value:t.modelValue,class:["vc-focus",{"vc-align-right":t.alignRight,"vc-align-left":t.alignLeft}],onChange:i[0]||(i[0]=s=>r.$emit("update:modelValue",s.target.value))}),[(me(!0),Ie(wt,null,Tr(t.options,s=>(me(),Ie("option",{key:s.value,value:s.value,disabled:s.disabled},Et(s.label),9,hDe))),128))],16,uDe),t.showIcon?(me(),$n(Uf,{key:0,name:"ChevronDown",size:"18"})):hn("",!0),t.fitContent?(me(),Ie("div",fDe,Et(U(n)),1)):hn("",!0)],2))}}),pDe={key:0,class:"vc-time-header"},mDe={class:"vc-time-weekday"},gDe={class:"vc-time-month"},vDe={class:"vc-time-day"},yDe={class:"vc-time-year"},bDe={class:"vc-time-select-group"},wDe=oe("span",{class:"vc-time-colon"},":",-1),xDe=oe("span",{class:"vc-time-colon"},":",-1),kDe=oe("span",{class:"vc-time-decimal"},".",-1),SD=xt({__name:"TimePicker",props:{position:null},setup(t,{expose:e}){const r=cDe(t);e(r);const{locale:i,isValid:s,date:o,hours:a,minutes:l,seconds:c,milliseconds:u,options:h,hourOptions:f,isTimeMode:d,isAM:p,isAMOptions:m,is24hr:g,showHeader:v,timeAccuracy:b}=r;return(S,O)=>(me(),Ie("div",{class:Lt(["vc-time-picker",[{"vc-invalid":!U(s),"vc-attached":!U(d)}]])},[_e(Ns,{name:"time-header"},{default:en(()=>[U(v)&&U(o)?(me(),Ie("div",pDe,[oe("span",mDe,Et(U(i).formatDate(U(o),"WWW")),1),oe("span",gDe,Et(U(i).formatDate(U(o),"MMM")),1),oe("span",vDe,Et(U(i).formatDate(U(o),"D")),1),oe("span",yDe,Et(U(i).formatDate(U(o),"YYYY")),1)])):hn("",!0)]),_:1}),oe("div",bDe,[_e(Uf,{name:"Clock",size:"17"}),_e(Yd,{modelValue:U(a),"onUpdate:modelValue":O[0]||(O[0]=k=>yn(a)?a.value=k:null),modelModifiers:{number:!0},options:U(f),class:"vc-time-select-hours","align-right":""},null,8,["modelValue","options"]),U(b)>1?(me(),Ie(wt,{key:0},[wDe,_e(Yd,{modelValue:U(l),"onUpdate:modelValue":O[1]||(O[1]=k=>yn(l)?l.value=k:null),modelModifiers:{number:!0},options:U(h).minutes,class:"vc-time-select-minutes","align-left":U(b)===2},null,8,["modelValue","options","align-left"])],64)):hn("",!0),U(b)>2?(me(),Ie(wt,{key:1},[xDe,_e(Yd,{modelValue:U(c),"onUpdate:modelValue":O[2]||(O[2]=k=>yn(c)?c.value=k:null),modelModifiers:{number:!0},options:U(h).seconds,class:"vc-time-select-seconds","align-left":U(b)===3},null,8,["modelValue","options","align-left"])],64)):hn("",!0),U(b)>3?(me(),Ie(wt,{key:2},[kDe,_e(Yd,{modelValue:U(u),"onUpdate:modelValue":O[3]||(O[3]=k=>yn(u)?u.value=k:null),modelModifiers:{number:!0},options:U(h).milliseconds,class:"vc-time-select-milliseconds","align-left":""},null,8,["modelValue","options"])],64)):hn("",!0),U(g)?hn("",!0):(me(),$n(Yd,{key:3,modelValue:U(p),"onUpdate:modelValue":O[4]||(O[4]=k=>yn(p)?p.value=k:null),options:U(m)},null,8,["modelValue","options"]))])],2))}}),nq=xt({__name:"DatePickerBase",setup(t){const{attributes:e,calendarRef:n,color:r,displayMode:i,isDateTimeMode:s,isTimeMode:o,isRange:a,onDayClick:l,onDayMouseEnter:c,onDayKeydown:u}=y9(),h=a.value?[0,1]:[0];return(f,d)=>U(o)?(me(),Ie("div",{key:0,class:Lt(`vc-container vc-bordered vc-${U(r)} vc-${U(i)}`)},[(me(!0),Ie(wt,null,Tr(U(h),p=>(me(),$n(SD,{key:p,position:p},null,8,["position"]))),128))],2)):(me(),$n(eq,{key:1,attributes:U(e),ref_key:"calendarRef",ref:n,onDayclick:U(l),onDaymouseenter:U(c),onDaykeydown:U(u)},{footer:en(()=>[U(s)?(me(!0),Ie(wt,{key:0},Tr(U(h),p=>(me(),$n(SD,{key:p,position:p},null,8,["position"]))),128)):hn("",!0),_e(Ns,{name:"dp-footer"})]),_:1},8,["attributes","onDayclick","onDaymouseenter","onDaykeydown"]))}}),SDe={inheritAttrs:!1},CDe=xt({...SDe,__name:"DatePickerPopover",setup(t){const{datePickerPopoverId:e,color:n,displayMode:r,popoverRef:i,onPopoverBeforeShow:s,onPopoverAfterShow:o,onPopoverBeforeHide:a,onPopoverAfterHide:l}=y9();return(c,u)=>(me(),$n(Ib,{id:U(e),placement:"bottom-start",class:Lt(`vc-date-picker-content vc-${U(n)} vc-${U(r)}`),ref_key:"popoverRef",ref:i,onBeforeShow:U(s),onAfterShow:U(o),onBeforeHide:U(a),onAfterHide:U(l)},{default:en(()=>[_e(nq,N0(Av(c.$attrs)),null,16)]),_:1},8,["id","class","onBeforeShow","onAfterShow","onBeforeHide","onAfterHide"]))}}),ODe=xt({inheritAttrs:!1,emits:sDe,props:iDe,components:{DatePickerBase:nq,DatePickerPopover:CDe},setup(t,e){const n=oDe(t,e),r=ih(yV(n,"calendarRef","popoverRef"));return{...n,slotCtx:r}}});function MDe(t,e,n,r,i,s){const o=Bo("DatePickerPopover"),a=Bo("DatePickerBase");return t.$slots.default?(me(),Ie(wt,{key:0},[oh(t.$slots,"default",N0(Av(t.slotCtx))),_e(o,N0(Av(t.$attrs)),null,16)],64)):(me(),$n(a,N0(ah({key:1},t.$attrs)),null,16))}const TDe=Rc(ODe,[["render",MDe]]),CD=Object.freeze(Object.defineProperty({__proto__:null,Calendar:eq,DatePicker:TDe,Popover:Ib,PopoverRow:GV},Symbol.toStringTag,{value:"Module"})),ADe=(t,e={})=>{t.use(ZTe,e);const n=t.config.globalProperties.$VCalendar.componentPrefix;for(const r in CD){const i=CD[r];t.component(`${n}${r}`,i)}},_De={install:ADe};Jt.config({name:"Miki",storeName:"miki_note"});document.addEventListener("fullscreenchange",()=>{zE.value=!!document.fullscreenElement});setInterval(()=>{(cn.value==1||cn.value==3)&&Qt.emit("save","auto")},5*6e4);const rq=Qs(z4e);rq.mount("#app");rq.use(_De,{});export{Zf as A,Oc as B,XDe as C,ch as D,Sb as E,Ds as F,wm as G,lJ as H,vn as I,zP as J,ZB as K,jv as L,Sn as M,CG as N,gu as O,kx as P,se as Q,r3 as R,PJ as S,Os as T,E7 as U,OH as V,GZ as W,t1 as a,HP as b,n1 as c,sJ as d,GDe as e,WP as f,ux as g,X0e as h,qx as i,_y as j,_r as k,gH as l,VDe as m,HDe as n,cJ as o,KDe as p,Ze as q,Se as r,LP as s,x as t,PDe as u,SH as v,Hi as w,Bt as x,l2 as y,fn as z};
